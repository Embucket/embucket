import{r as f,j as e,P as y,c,a as m,b as w,u as k,d as D,e as p,B as x,t as C,f as S,g as z,D as j,h as T,i as F}from"./index-CEqPjQLQ.js";import{b as g,I as A,a as M}from"./input-zz1VKEi3.js";import{u as q,D as H,a as I,b as O,c as P,d as Q,g as W,e as _,P as E,F as K,T as L,f as V,h as G,E as R,i as B,S as U,j as $}from"./empty-container-fHXvvBL5.js";import{u as Z,F as J,a as Y,b as X,c as ee,d as te,e as ae,s as se,z as h}from"./form-QiSE-6Ut.js";import{S as re}from"./search-B1lekI0W.js";var oe="Separator",b="horizontal",ne=["horizontal","vertical"],v=f.forwardRef((t,a)=>{const{decorative:s,orientation:r=b,...i}=t,o=ie(r)?r:b,l=s?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(y.div,{"data-orientation":o,...l,...i,ref:a})});v.displayName=oe;function ie(t){return ne.includes(t)}var le=v;function d({className:t,orientation:a="horizontal",decorative:s=!0,...r}){return e.jsx(le,{"data-slot":"separator-root",decorative:s,orientation:a,className:c("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],ce=m("database-zap",de);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ue=m("file-text",me);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],he=m("upload",xe),be=w("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function fe({className:t,variant:a,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:c(be({variant:a}),t),...s})}function pe({className:t,...a}){return e.jsx("div",{"data-slot":"alert-description",className:c("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}const je=(t,a,s)=>D({url:"/ui/databases",method:"POST",headers:{"Content-Type":"application/json"},data:t,signal:s},a),ge=t=>{const a=["createDatabase"],{mutation:s,request:r}=t?t.mutation&&"mutationKey"in t.mutation&&t.mutation.mutationKey?t:{...t,mutation:{...t.mutation,mutationKey:a}}:{mutation:{mutationKey:a},request:void 0};return{mutationFn:o=>{const{data:n}=o??{};return je(n,r)},...s}},ve=(t,a)=>{const s=ge(t);return k(s)},Ne=h.object({name:h.string()}),ye=({onSubmit:t})=>{const a=Z({resolver:se(Ne),defaultValues:{name:""}});return e.jsx(J,{...a,children:e.jsx("form",{id:"createDatabaseDialogForm",onSubmit:a.handleSubmit(t),className:"flex flex-col gap-2",children:e.jsx(Y,{control:a.control,name:"name",render:({field:s})=>e.jsxs(X,{children:[e.jsx(ee,{children:"Database Name"}),e.jsx(te,{children:e.jsx(g,{...s,type:"name",required:!0})}),e.jsx(ae,{})]})})})})};function we({opened:t,onSetOpened:a}){var l;const{data:{items:s}={}}=q(),r=p(),{mutate:i,isPending:o,error:n}=ve({mutation:{onSuccess:async()=>{await Promise.all([r.invalidateQueries({queryKey:W()}),r.invalidateQueries({queryKey:_()})]),a(!1),C.success("Database was successfully created")}}});return e.jsx(H,{open:t,onOpenChange:a,children:e.jsxs(I,{children:[e.jsx(O,{children:e.jsx(P,{children:"Create Database"})}),n&&e.jsx(fe,{variant:"destructive",children:e.jsx(pe,{children:JSON.stringify((l=n.response)==null?void 0:l.data)})}),e.jsx(ye,{onSubmit:N=>{var u;i({data:{name:N.name,volume:((u=s==null?void 0:s[0])==null?void 0:u.name)??""}})}}),e.jsxs(Q,{children:[e.jsx(x,{disabled:o,variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(x,{disabled:o,form:"createDatabaseDialogForm",type:"submit",children:"Create"})]})]})})}function ke(){const[t,a]=f.useState(!1),s=p(),r=S(),{mutateAsync:i,isPending:o}=z({mutation:{onSuccess:l=>{r({to:"/sql-editor/$worksheetId",params:{worksheetId:l.id.toString()}}),s.invalidateQueries({queryKey:T()})}}}),n=()=>{i({data:{name:"",content:""}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full p-4 pb-0",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("button",{onClick:n,disabled:o,className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors",children:[e.jsx(E,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Create SQL Worksheet"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors",children:[e.jsx(j,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Create Database"})]}),e.jsxs("button",{disabled:!0,className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors disabled:cursor-auto disabled:bg-transparent disabled:hover:bg-transparent",children:[e.jsx(he,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload Local Files"})]})]})}),e.jsx(we,{opened:t,onSetOpened:a})]})}function De({dashboardData:t}){return e.jsx("div",{className:"w-full bg-transparent",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"flex-1 rounded-l-md border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Databases"}),e.jsx(j,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalDatabases})})]}),e.jsx(d,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Schemas"}),e.jsx(K,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalSchemas})})]}),e.jsx(d,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Tables"}),e.jsx(L,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalTables})})]}),e.jsx(d,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 rounded-r-md border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Queries"}),e.jsx(ce,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalQueries})})]})]})})}function Ce({isLoading:t,worksheets:a}){const s=V(),r=[s.accessor("id",{header:"Id"}),s.accessor("content",{header:"Content"}),s.accessor("updatedAt",{header:"Updated At"}),s.accessor("createdAt",{header:"Created At"})];return e.jsx(G,{rounded:!0,columns:r,data:a,isLoading:t})}const Se=()=>e.jsx(R,{Icon:ue,title:"No SQL Worksheets Created Yet",description:"Create your first worksheet to start querying data"});function ze(){const{data:{items:t}={},isLoading:a}=F(),{data:s}=B();return s?e.jsxs("div",{className:"flex size-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Home"}),e.jsxs(A,{children:[e.jsx(M,{children:e.jsx(re,{})}),e.jsx(g,{className:"min-w-80",disabled:!0,placeholder:"Search"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"mb-2 text-3xl font-semibold",children:"Welcome!"}),e.jsx("p",{className:"text-muted-foreground font-light",children:"Nice seeing you here ðŸ˜Ž"})]}),e.jsx(ke,{}),e.jsxs("div",{className:"flex size-full flex-col p-4",children:[e.jsx("p",{className:"mb-4 font-semibold",children:"Overview"}),e.jsx(De,{dashboardData:s}),e.jsxs("div",{className:"mt-4 flex size-full flex-col",children:[e.jsx("p",{className:"mb-4 font-semibold",children:"Worksheets"}),t!=null&&t.length?e.jsxs(U,{children:[e.jsx(Ce,{worksheets:t,isLoading:a}),e.jsx($,{orientation:"horizontal"})]}):e.jsx(Se,{})]})]})]}):null}const He=ze;export{He as component};
