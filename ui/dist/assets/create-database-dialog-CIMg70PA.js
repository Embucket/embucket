import{j as e,k as h,B as u,t as b}from"./index-CLnTIKu9.js";import{A as D,a as f}from"./alert-iKzoH1gc.js";import{D as y,a as p,b as v,c as C,d as F,g as N}from"./dashboard-DkhgK6nI.js";import{S,a as Q,b as q,c as K,d as V,e as G,g as I}from"./select-B7lvneAL.js";import{g as w}from"./navigation-trees-D8pX-Enr.js";import{a as A}from"./volumes-BCmQcGoc.js";import{u as P,F as T,a as d,b as x,c as j,d as k,e as g,s as B,z as i}from"./form-DYsfpReN.js";import{I as z}from"./input-l3-32U0x.js";const E=i.object({name:i.string(),volumeName:i.string().min(1,"Volume is required")}),H=({onSubmit:o,volumes:r})=>{const s=P({resolver:B(E),defaultValues:{name:"",volumeName:""}});return e.jsx(T,{...s,children:e.jsxs("form",{id:"createDatabaseDialogForm",onSubmit:s.handleSubmit(o),className:"flex flex-col gap-4",children:[e.jsx(d,{control:s.control,name:"name",render:({field:a})=>e.jsxs(x,{children:[e.jsx(j,{children:"Database Name"}),e.jsx(k,{children:e.jsx(z,{...a,type:"name",required:!0})}),e.jsx(g,{})]})}),e.jsx(d,{control:s.control,name:"volumeName",render:({field:a})=>e.jsxs(x,{children:[e.jsx(j,{children:"Volume"}),e.jsxs(S,{...a,children:[e.jsx(Q,{className:"w-full bg-transparent!",children:e.jsx(q,{})}),e.jsx(K,{children:r.map(t=>e.jsx(V,{value:t.name,children:t.name},t.name))})]}),e.jsx(g,{})]})})]})})};function Y({opened:o,onSetOpened:r}){var m;const{data:{items:s}={}}=A(),a=h(),{mutate:t,isPending:n,error:l}=G({mutation:{onSuccess:async()=>{await Promise.all([a.invalidateQueries({queryKey:w()}),a.invalidateQueries({queryKey:N()}),a.invalidateQueries({queryKey:I()})]),r(!1),b.success("Database was successfully created")}}});return e.jsx(y,{open:o,onOpenChange:r,children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(C,{children:"Create Database"})}),l&&e.jsx(D,{variant:"destructive",children:e.jsx(f,{children:JSON.stringify((m=l.response)==null?void 0:m.data.message)})}),e.jsx(H,{volumes:s??[],onSubmit:c=>{t({data:{name:c.name,volume:c.volumeName}})}}),e.jsxs(F,{children:[e.jsx(u,{disabled:n,variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(u,{disabled:n,form:"createDatabaseDialogForm",type:"submit",children:"Create"})]})]})})}export{Y as C};
