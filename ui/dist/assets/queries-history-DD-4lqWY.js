import{j as v,S as ve,c as ee,a as pe,r as ue,b as ge,P as ce,g as le}from"./index-CiAPJLr_.js";import{S as $e,a as xe,E as ye}from"./scroll-area-CFOj-ohO.js";import{u as Me}from"./queries-BCXrR2im.js";import{P as be}from"./page-content-Ce7QFuHa.js";import{P as De}from"./page-header-D_soHqrS.js";import{c as Se,D as we}from"./data-table-YYpE77_C.js";import{D as je}from"./database-zap-ws2SFnwb.js";const _e=pe("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ne({className:o,variant:f,asChild:h=!1,...p}){const u=h?ve:"span";return v.jsx(u,{"data-slot":"badge",className:ee(_e({variant:f}),o),...p})}var te="Progress",re=100,[Te,et]=ge(te),[Pe,Oe]=Te(te),de=ue.forwardRef((o,f)=>{const{__scopeProgress:h,value:p=null,max:u,getValueLabel:m=ke,...S}=o;(u||u===0)&&!ae(u)&&console.error(He(`${u}`,"Progress"));const g=ae(u)?u:re;p!==null&&!se(p,g)&&console.error(Ce(`${p}`,"Progress"));const M=se(p,g)?p:null,d=K(M)?m(M,g):void 0;return v.jsx(Pe,{scope:h,value:M,max:g,children:v.jsx(ce.div,{"aria-valuemax":g,"aria-valuemin":0,"aria-valuenow":K(M)?M:void 0,"aria-valuetext":d,role:"progressbar","data-state":me(M,g),"data-value":M??void 0,"data-max":g,...S,ref:f})})});de.displayName=te;var fe="ProgressIndicator",he=ue.forwardRef((o,f)=>{const{__scopeProgress:h,...p}=o,u=Oe(fe,h);return v.jsx(ce.div,{"data-state":me(u.value,u.max),"data-value":u.value??void 0,"data-max":u.max,...p,ref:f})});he.displayName=fe;function ke(o,f){return`${Math.round(o/f*100)}%`}function me(o,f){return o==null?"indeterminate":o===f?"complete":"loading"}function K(o){return typeof o=="number"}function ae(o){return K(o)&&!isNaN(o)&&o>0}function se(o,f){return K(o)&&!isNaN(o)&&o<=f&&o>=0}function He(o,f){return`Invalid prop \`max\` of value \`${o}\` supplied to \`${f}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${re}\`.`}function Ce(o,f){return`Invalid prop \`value\` of value \`${o}\` supplied to \`${f}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${re} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ie=de,Ye=he;function Ve({className:o,value:f,...h}){return v.jsx(Ie,{"data-slot":"progress",className:ee("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",o),...h,children:v.jsx(Ye,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(f??0)}%)`}})})}var G={exports:{}},Le=G.exports,ie;function Ee(){return ie||(ie=1,function(o,f){(function(h,p){o.exports=p()})(Le,function(){var h=1e3,p=6e4,u=36e5,m="millisecond",S="second",g="minute",M="hour",d="day",N="week",b="month",L="quarter",P="year",O="date",H="Invalid Date",R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,W={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var r=["th","st","nd","rd"],e=a%100;return"["+a+(r[(e-20)%10]||r[e]||r[0])+"]"}},z=function(a,r,e){var n=String(a);return!n||n.length>=r?a:""+Array(r+1-n.length).join(e)+a},C={s:z,z:function(a){var r=-a.utcOffset(),e=Math.abs(r),n=Math.floor(e/60),t=e%60;return(r<=0?"+":"-")+z(n,2,"0")+":"+z(t,2,"0")},m:function a(r,e){if(r.date()<e.date())return-a(e,r);var n=12*(e.year()-r.year())+(e.month()-r.month()),t=r.clone().add(n,b),s=e-t<0,i=r.clone().add(n+(s?-1:1),b);return+(-(n+(e-t)/(s?t-i:i-t))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:b,y:P,w:N,d,D:O,h:M,m:g,s:S,ms:m,Q:L}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},w="en",j={};j[w]=W;var E="$isDayjsObject",I=function(a){return a instanceof Z||!(!a||!a[E])},B=function a(r,e,n){var t;if(!r)return w;if(typeof r=="string"){var s=r.toLowerCase();j[s]&&(t=s),e&&(j[s]=e,t=s);var i=r.split("-");if(!t&&i.length>1)return a(i[0])}else{var l=r.name;j[l]=r,t=l}return!n&&t&&(w=t),t||!n&&w},x=function(a,r){if(I(a))return a.clone();var e=typeof r=="object"?r:{};return e.date=a,e.args=arguments,new Z(e)},c=C;c.l=B,c.i=I,c.w=function(a,r){return x(a,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var Z=function(){function a(e){this.$L=B(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[E]=!0}var r=a.prototype;return r.parse=function(e){this.$d=function(n){var t=n.date,s=n.utc;if(t===null)return new Date(NaN);if(c.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(R);if(i){var l=i[2]-1||0,$=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,$)):new Date(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,$)}}return new Date(t)}(e),this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return c},r.isValid=function(){return this.$d.toString()!==H},r.isSame=function(e,n){var t=x(e);return this.startOf(n)<=t&&t<=this.endOf(n)},r.isAfter=function(e,n){return x(e)<this.startOf(n)},r.isBefore=function(e,n){return this.endOf(n)<x(e)},r.$g=function(e,n,t){return c.u(e)?this[n]:this.set(t,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,n){var t=this,s=!!c.u(n)||n,i=c.p(e),l=function(V,_){var k=c.w(t.$u?Date.UTC(t.$y,_,V):new Date(t.$y,_,V),t);return s?k:k.endOf(d)},$=function(V,_){return c.w(t.toDate()[V].apply(t.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(_)),t)},y=this.$W,D=this.$M,T=this.$D,A="set"+(this.$u?"UTC":"");switch(i){case P:return s?l(1,0):l(31,11);case b:return s?l(1,D):l(0,D+1);case N:var Y=this.$locale().weekStart||0,Q=(y<Y?y+7:y)-Y;return l(s?T-Q:T+(6-Q),D);case d:case O:return $(A+"Hours",0);case M:return $(A+"Minutes",1);case g:return $(A+"Seconds",2);case S:return $(A+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,n){var t,s=c.p(e),i="set"+(this.$u?"UTC":""),l=(t={},t[d]=i+"Date",t[O]=i+"Date",t[b]=i+"Month",t[P]=i+"FullYear",t[M]=i+"Hours",t[g]=i+"Minutes",t[S]=i+"Seconds",t[m]=i+"Milliseconds",t)[s],$=s===d?this.$D+(n-this.$W):n;if(s===b||s===P){var y=this.clone().set(O,1);y.$d[l]($),y.init(),this.$d=y.set(O,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},r.set=function(e,n){return this.clone().$set(e,n)},r.get=function(e){return this[c.p(e)]()},r.add=function(e,n){var t,s=this;e=Number(e);var i=c.p(n),l=function(D){var T=x(s);return c.w(T.date(T.date()+Math.round(D*e)),s)};if(i===b)return this.set(b,this.$M+e);if(i===P)return this.set(P,this.$y+e);if(i===d)return l(1);if(i===N)return l(7);var $=(t={},t[g]=p,t[M]=u,t[S]=h,t)[i]||1,y=this.$d.getTime()+e*$;return c.w(y,this)},r.subtract=function(e,n){return this.add(-1*e,n)},r.format=function(e){var n=this,t=this.$locale();if(!this.isValid())return t.invalidDate||H;var s=e||"YYYY-MM-DDTHH:mm:ssZ",i=c.z(this),l=this.$H,$=this.$m,y=this.$M,D=t.weekdays,T=t.months,A=t.meridiem,Y=function(_,k,q,J){return _&&(_[k]||_(n,s))||q[k].slice(0,J)},Q=function(_){return c.s(l%12||12,_,"0")},V=A||function(_,k,q){var J=_<12?"AM":"PM";return q?J.toLowerCase():J};return s.replace(F,function(_,k){return k||function(q){switch(q){case"YY":return String(n.$y).slice(-2);case"YYYY":return c.s(n.$y,4,"0");case"M":return y+1;case"MM":return c.s(y+1,2,"0");case"MMM":return Y(t.monthsShort,y,T,3);case"MMMM":return Y(T,y);case"D":return n.$D;case"DD":return c.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return Y(t.weekdaysMin,n.$W,D,2);case"ddd":return Y(t.weekdaysShort,n.$W,D,3);case"dddd":return D[n.$W];case"H":return String(l);case"HH":return c.s(l,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return V(l,$,!0);case"A":return V(l,$,!1);case"m":return String($);case"mm":return c.s($,2,"0");case"s":return String(n.$s);case"ss":return c.s(n.$s,2,"0");case"SSS":return c.s(n.$ms,3,"0");case"Z":return i}return null}(_)||i.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,n,t){var s,i=this,l=c.p(n),$=x(e),y=($.utcOffset()-this.utcOffset())*p,D=this-$,T=function(){return c.m(i,$)};switch(l){case P:s=T()/12;break;case b:s=T();break;case L:s=T()/3;break;case N:s=(D-y)/6048e5;break;case d:s=(D-y)/864e5;break;case M:s=D/u;break;case g:s=D/p;break;case S:s=D/h;break;default:s=D}return t?s:c.a(s)},r.daysInMonth=function(){return this.endOf(b).$D},r.$locale=function(){return j[this.$L]},r.locale=function(e,n){if(!e)return this.$L;var t=this.clone(),s=B(e,n,!0);return s&&(t.$L=s),t},r.clone=function(){return c.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},a}(),ne=Z.prototype;return x.prototype=ne,[["$ms",m],["$s",S],["$m",g],["$H",M],["$W",d],["$M",b],["$y",P],["$D",O]].forEach(function(a){ne[a[1]]=function(r){return this.$g(r,a[0],a[1])}}),x.extend=function(a,r){return a.$i||(a(r,Z,x),a.$i=!0),x},x.locale=B,x.isDayjs=I,x.unix=function(a){return x(1e3*a)},x.en=j[w],x.Ls=j,x.p={},x})}(G)),G.exports}var Ae=Ee();const U=le(Ae);var X={exports:{}},Re=X.exports,oe;function Fe(){return oe||(oe=1,function(o,f){(function(h,p){o.exports=p()})(Re,function(){return function(h,p,u){h=h||{};var m=p.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(d,N,b,L){return m.fromToBase(d,N,b,L)}u.en.relativeTime=S,m.fromToBase=function(d,N,b,L,P){for(var O,H,R,F=b.$locale().relativeTime||S,W=h.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],z=W.length,C=0;C<z;C+=1){var w=W[C];w.d&&(O=L?u(d).diff(b,w.d,!0):b.diff(d,w.d,!0));var j=(h.rounding||Math.round)(Math.abs(O));if(R=O>0,j<=w.r||!w.r){j<=1&&C>0&&(w=W[C-1]);var E=F[w.l];P&&(j=P(""+j)),H=typeof E=="string"?E.replace("%d",j):E(j,N,w.l,R);break}}if(N)return H;var I=R?F.future:F.past;return typeof I=="function"?I(H):I.replace("%s",H)},m.to=function(d,N){return g(d,N,this,!0)},m.from=function(d,N){return g(d,N,this)};var M=function(d){return d.$u?u.utc():u()};m.toNow=function(d){return this.to(M(this),d)},m.fromNow=function(d){return this.from(M(this),d)}}})}(X)),X.exports}var We=Fe();const ze=le(We);U.extend(ze);function Qe({isLoading:o,queries:f}){const h=Se(),p=[h.accessor("id",{header:"ID"}),h.accessor("query",{header:"SQL",meta:{cellClassName:"max-w-[300px] truncate"}}),h.accessor("status",{header:"Status",cell:u=>{const m=u.getValue();return v.jsx(Ne,{variant:"outline",children:v.jsx("span",{className:ee("capitalize",m==="successful"&&"text-green-500",m==="failed"&&"text-red-500"),children:m})})}}),h.accessor("startTime",{header:"Start Time",cell:u=>{const m=U(u.getValue()),g=U().diff(m,"minute")<24?U(m).fromNow():U(m).format("DD/MM/YYYY HH:mm");return v.jsx("span",{children:g})}}),h.accessor("durationMs",{header:"Duration",cell:u=>{const m=Math.max(...f.map(g=>g.durationMs)),S=u.getValue()/m*100;return v.jsxs("div",{className:"flex min-w-[100px] items-center gap-2",children:[v.jsx(Ve,{value:S}),v.jsxs("span",{children:[u.getValue(),"ms"]})]})}})];return v.jsx(we,{rounded:!0,columns:p,data:f,isLoading:o})}function qe(){const{data:{items:o}={},isFetching:f}=Me();return v.jsxs(v.Fragment,{children:[v.jsx(De,{title:"Queries History"}),v.jsx(be,{children:v.jsx("div",{className:"flex size-full flex-col",children:o!=null&&o.length?v.jsxs($e,{tableViewport:!0,children:[v.jsx(Qe,{queries:o,isLoading:f}),v.jsx(xe,{orientation:"horizontal"})]}):v.jsx(ye,{className:"min-h-[calc(100vh-32px-65px-32px)]",Icon:je,title:"No Queries Found",description:"No queries have been executed yet. Start querying data to see your history here."})})})]})}const tt=qe;export{tt as component};
