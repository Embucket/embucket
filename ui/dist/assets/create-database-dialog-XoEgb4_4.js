import{n as d,o as g,j as e,e as x,B as m,t as b}from"./index-B0DnALV2.js";import{A as j,a as D}from"./alert-Bv7fyroE.js";import{D as p,a as f,b as h,c as q,d as F,g as C}from"./dialog-OKbyb9zA.js";import{a as K,g as v}from"./databases-CibonC0y.js";import{g as Q}from"./navigation-trees-lvTVcRzd.js";import{u as G,F as V,a as A,b as N,c as P,d as S,e as T,s as w,z as c}from"./form-tze_9Taz.js";import{b as B}from"./input-BkRaAwvK.js";const E=(r,s,a)=>g({url:"/ui/volumes",method:"GET",params:r,signal:a},s),I=r=>["/ui/volumes"],M=(r,s)=>{const{query:a,request:t}={};return{queryKey:(a==null?void 0:a.queryKey)??I(),queryFn:({signal:n})=>E(r,t,n),...a}};function O(r,s,a){const t=M(r),o=d(t);return o.queryKey=t.queryKey,o}const k=c.object({name:c.string()}),z=({onSubmit:r})=>{const s=G({resolver:w(k),defaultValues:{name:""}});return e.jsx(V,{...s,children:e.jsx("form",{id:"createDatabaseDialogForm",onSubmit:s.handleSubmit(r),className:"flex flex-col gap-2",children:e.jsx(A,{control:s.control,name:"name",render:({field:a})=>e.jsxs(N,{children:[e.jsx(P,{children:"Database Name"}),e.jsx(S,{children:e.jsx(B,{...a,type:"name",required:!0})}),e.jsx(T,{})]})})})})};function Y({opened:r,onSetOpened:s}){var u;const{data:{items:a}={}}=O(),t=x(),{mutate:o,isPending:i,error:n}=K({mutation:{onSuccess:async()=>{await Promise.all([t.invalidateQueries({queryKey:Q()}),t.invalidateQueries({queryKey:C()}),t.invalidateQueries({queryKey:v()})]),s(!1),b.success("Database was successfully created")}}});return e.jsx(p,{open:r,onOpenChange:s,children:e.jsxs(f,{children:[e.jsx(h,{children:e.jsx(q,{children:"Create Database"})}),n&&e.jsx(j,{variant:"destructive",children:e.jsx(D,{children:JSON.stringify((u=n.response)==null?void 0:u.data)})}),e.jsx(z,{onSubmit:y=>{var l;o({data:{name:y.name,volume:((l=a==null?void 0:a[0])==null?void 0:l.name)??""}})}}),e.jsxs(F,{children:[e.jsx(m,{disabled:i,variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(m,{disabled:i,form:"createDatabaseDialogForm",type:"submit",children:"Create"})]})]})})}export{Y as C};
