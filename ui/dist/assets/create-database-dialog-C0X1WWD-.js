import{j as e,e as x,m,t as g}from"./index-336s_lcr.js";import{A as b,a as j}from"./alert-CAyb4wit.js";import{D,a as f,b as y,c as h,d as p,g as C}from"./dialog-CCjwzgKH.js";import{a as F,g as v}from"./databases-Cj20MVjJ.js";import{g as Q}from"./navigation-trees-wV1lmI6i.js";import{u as K}from"./volumes-CepHBCjd.js";import{u as q,F as G,a as N,b as A,c as P,d as S,e as w,s as I,z as c}from"./form-Cribtw-7.js";import{b as T}from"./input-DbzXtZzk.js";const V=c.object({name:c.string()}),k=({onSubmit:r})=>{const a=q({resolver:I(V),defaultValues:{name:""}});return e.jsx(G,{...a,children:e.jsx("form",{id:"createDatabaseDialogForm",onSubmit:a.handleSubmit(r),className:"flex flex-col gap-2",children:e.jsx(N,{control:a.control,name:"name",render:({field:s})=>e.jsxs(A,{children:[e.jsx(P,{children:"Database Name"}),e.jsx(S,{children:e.jsx(T,{...s,type:"name",required:!0})}),e.jsx(w,{})]})})})})};function O({opened:r,onSetOpened:a}){var n;const{data:{items:s}={}}=K(),t=x(),{mutate:u,isPending:o,error:i}=F({mutation:{onSuccess:async()=>{await Promise.all([t.invalidateQueries({queryKey:Q()}),t.invalidateQueries({queryKey:C()}),t.invalidateQueries({queryKey:v()})]),a(!1),g.success("Database was successfully created")}}});return e.jsx(D,{open:r,onOpenChange:a,children:e.jsxs(f,{children:[e.jsx(y,{children:e.jsx(h,{children:"Create Database"})}),i&&e.jsx(b,{variant:"destructive",children:e.jsx(j,{children:JSON.stringify((n=i.response)==null?void 0:n.data)})}),e.jsx(k,{onSubmit:d=>{var l;u({data:{name:d.name,volume:((l=s==null?void 0:s[0])==null?void 0:l.name)??""}})}}),e.jsxs(p,{children:[e.jsx(m,{disabled:o,variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(m,{disabled:o,form:"createDatabaseDialogForm",type:"submit",children:"Create"})]})]})})}export{O as C};
