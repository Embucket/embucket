import{j as e,e as m,c as d}from"./index-Ct9KqqwV.js";import{u as p}from"./queries-DZQTIhHo.js";import{P as x}from"./page-empty-container-C-kS49aP.js";import{P as h}from"./page-header-9iDmaRsA.js";import{P as f}from"./page-scroll-area-DX8YZP6j.js";import{I as g,a as j,b as y}from"./input-C_MJiXMR.js";import{R as b}from"./refresh-button-CqT5Ge7j.js";import{S as Q}from"./search-r_qVZtJ3.js";import{c as N,D as P}from"./data-table-DgQGtZgu.js";import{B as S,P as v}from"./progress-DiVXGPpY.js";import{f as D}from"./formatTime-DTXdKjzH.js";import{D as I}from"./database-zap-d-6Q45ly.js";import"./scroll-area-DS2laZp3.js";function q({queries:t,isFetchingQueries:a,onRefetchQueries:s}){return e.jsxs("div",{className:"flex items-center justify-between gap-4 p-4",children:[e.jsx("p",{className:"text-muted-foreground text-sm text-nowrap",children:t.length?`${t.length} queries found`:""}),e.jsxs("div",{className:"justify flex items-center justify-between gap-2",children:[e.jsxs(g,{className:"w-full",children:[e.jsx(j,{children:e.jsx(Q,{})}),e.jsx(y,{disabled:!0,placeholder:"Search"})]}),e.jsx(b,{isDisabled:a,onRefresh:s})]})]})}function w({isLoading:t,queries:a}){const s=N(),o=m(),n=[s.accessor("id",{header:"ID"}),s.accessor("query",{header:"SQL",meta:{cellClassName:"max-w-[300px] truncate"}}),s.accessor("status",{header:"Status",cell:r=>{const i=r.getValue();return e.jsx(S,{variant:"outline",children:e.jsx("span",{className:d("capitalize",i==="successful"&&"text-green-500",i==="failed"&&"text-red-500"),children:i})})}}),s.accessor("startTime",{header:"Start Time",cell:r=>e.jsx("span",{children:D(r.getValue())})}),s.accessor("durationMs",{header:"Duration",cell:r=>{const i=Math.max(...a.map(l=>l.durationMs)),u=r.getValue()/i*100;return e.jsxs("div",{className:"flex min-w-[100px] items-center gap-2",children:[e.jsx(v,{value:u}),e.jsxs("span",{children:[r.getValue(),"ms"]})]})}})],c=r=>{o({to:"/queries/$queryId",params:{queryId:r.id.toString()}})};return e.jsx(P,{rounded:!0,columns:n,data:a,isLoading:t,onRowClick:c})}function R(){const{data:{items:t}={},isFetching:a,isLoading:s,refetch:o}=p();return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Queries History"}),e.jsx(q,{queries:t??[],isFetchingQueries:a,onRefetchQueries:o}),!t?.length&&!s?e.jsx(x,{Icon:I,variant:"toolbar",title:"No Queries Found",description:"No queries have been executed yet. Start querying data to see your history here."}):e.jsx(f,{children:e.jsx(w,{isLoading:s,queries:t??[]})})]})}const G=R;export{G as component};
