import{r as f,j as e,P as w,c as m,a as p,b as D,u as C,d as k,e as g,B as x,t as S,f as j,g as v,h as T,D as N,i as F,k as z}from"./index-GBwEtJuF.js";import{P,c as q,D as O,S as A,a as H,E as I}from"./data-table-DTN1scfZ.js";import{u as M,D as Q,a as E,b as K,c as L,d as V,g as W,e as _,F as R,T as G,f as U}from"./volumes-ylJpZ8Ny.js";import{D as B,P as $}from"./page-content-CQrutCpH.js";import{P as Z}from"./page-header-7M0ToyMb.js";import{u as J,F as Y,a as X,b as ee,c as te,d as ae,e as se,s as re,z as h}from"./form-BXw6V0Q1.js";import{I as oe}from"./input-O-OiTQX6.js";import"./search-Byy_WJWN.js";var ne="Separator",b="horizontal",ie=["horizontal","vertical"],y=f.forwardRef((t,a)=>{const{decorative:s,orientation:n=b,...d}=t,r=le(n)?n:b,o=s?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return e.jsx(w.div,{"data-orientation":r,...o,...d,ref:a})});y.displayName=ne;function le(t){return ie.includes(t)}var de=y;function c({className:t,orientation:a="horizontal",decorative:s=!0,...n}){return e.jsx(de,{"data-slot":"separator-root",decorative:s,orientation:a,className:m("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],me=p("file-text",ce);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],xe=p("upload",ue),he=D("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function be({className:t,variant:a,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:m(he({variant:a}),t),...s})}function fe({className:t,...a}){return e.jsx("div",{"data-slot":"alert-description",className:m("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}const pe=(t,a,s)=>k({url:"/ui/databases",method:"POST",headers:{"Content-Type":"application/json"},data:t,signal:s},a),ge=t=>{const a=["createDatabase"],{mutation:s,request:n}=t?t.mutation&&"mutationKey"in t.mutation&&t.mutation.mutationKey?t:{...t,mutation:{...t.mutation,mutationKey:a}}:{mutation:{mutationKey:a},request:void 0};return{mutationFn:r=>{const{data:l}=r??{};return pe(l,n)},...s}},je=(t,a)=>{const s=ge(t);return C(s)},ve=h.object({name:h.string()}),Ne=({onSubmit:t})=>{const a=J({resolver:re(ve),defaultValues:{name:""}});return e.jsx(Y,{...a,children:e.jsx("form",{id:"createDatabaseDialogForm",onSubmit:a.handleSubmit(t),className:"flex flex-col gap-2",children:e.jsx(X,{control:a.control,name:"name",render:({field:s})=>e.jsxs(ee,{children:[e.jsx(te,{children:"Database Name"}),e.jsx(ae,{children:e.jsx(oe,{...s,type:"name",required:!0})}),e.jsx(se,{})]})})})})};function ye({opened:t,onSetOpened:a}){var o;const{data:{items:s}={}}=M(),n=g(),{mutate:d,isPending:r,error:l}=je({mutation:{onSuccess:async()=>{await Promise.all([n.invalidateQueries({queryKey:W()}),n.invalidateQueries({queryKey:_()})]),a(!1),S.success("Database was successfully created")}}});return e.jsx(Q,{open:t,onOpenChange:a,children:e.jsxs(E,{children:[e.jsx(K,{children:e.jsx(L,{children:"Create Database"})}),l&&e.jsx(be,{variant:"destructive",children:e.jsx(fe,{children:JSON.stringify((o=l.response)==null?void 0:o.data)})}),e.jsx(Ne,{onSubmit:i=>{var u;d({data:{name:i.name,volume:((u=s==null?void 0:s[0])==null?void 0:u.name)??""}})}}),e.jsxs(V,{children:[e.jsx(x,{disabled:r,variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(x,{disabled:r,form:"createDatabaseDialogForm",type:"submit",children:"Create"})]})]})})}function we(){const[t,a]=f.useState(!1),s=j(i=>i.addTab),n=g(),d=v(),{mutateAsync:r,isPending:l}=T({mutation:{onSuccess:i=>{s(i),d({to:"/sql-editor/$worksheetId",params:{worksheetId:i.id.toString()}}),n.invalidateQueries({queryKey:F()})}}}),o=()=>{r({data:{name:"",content:""}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full p-4 pb-0",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("button",{onClick:o,disabled:l,className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors",children:[e.jsx(P,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Create SQL Worksheet"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors",children:[e.jsx(N,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Create Database"})]}),e.jsxs("button",{disabled:!0,className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors disabled:cursor-auto disabled:bg-transparent disabled:hover:bg-transparent",children:[e.jsx(xe,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload Local Files"})]})]})}),e.jsx(ye,{opened:t,onSetOpened:a})]})}function De({dashboardData:t}){return e.jsx("div",{className:"w-full bg-transparent",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"flex-1 rounded-l-md border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Databases"}),e.jsx(N,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalDatabases})})]}),e.jsx(c,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Schemas"}),e.jsx(R,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalSchemas})})]}),e.jsx(c,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Tables"}),e.jsx(G,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalTables})})]}),e.jsx(c,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 rounded-r-md border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Queries"}),e.jsx(B,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalQueries})})]})]})})}function Ce({isLoading:t,worksheets:a}){const s=v(),n=j(o=>o.addTab),d=o=>{n(o),s({to:"/sql-editor/$worksheetId",params:{worksheetId:o.id.toString()}})},r=q(),l=[r.accessor("id",{header:"Id"}),r.accessor("content",{header:"Content"}),r.accessor("updatedAt",{header:"Updated At",cell:o=>{const i=new Date(o.getValue()).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsx("span",{children:i})}}),r.accessor("createdAt",{header:"Created At",cell:o=>{const i=new Date(o.getValue()).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsx("span",{children:i})}})];return e.jsx(O,{rounded:!0,columns:l,onRowClick:d,data:a,isLoading:t})}function ke(){const{data:{items:t}={},isLoading:a}=z(),{data:s}=U();return s?e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"Home"}),e.jsxs($,{children:[e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"mb-2 text-3xl font-semibold",children:"Welcome!"}),e.jsx("p",{className:"text-muted-foreground font-light",children:"Nice seeing you here ðŸ˜Ž"})]}),e.jsx(we,{}),e.jsxs("div",{className:"flex size-full flex-col p-4",children:[e.jsx("p",{className:"mb-4 font-semibold",children:"Overview"}),e.jsx(De,{dashboardData:s}),e.jsxs("div",{className:"mt-4 flex size-full flex-col",children:[e.jsx("p",{className:"mb-4 font-semibold",children:"Worksheets"}),t!=null&&t.length?e.jsxs(A,{tableViewport:!0,children:[e.jsx(Ce,{worksheets:t,isLoading:a}),e.jsx(H,{orientation:"horizontal"})]}):e.jsx(I,{Icon:me,title:"No SQL Worksheets Created Yet",description:"Create your first worksheet to start querying data"})]})]})]})]}):null}const He=ke;export{He as component};
