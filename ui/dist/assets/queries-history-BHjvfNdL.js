import{j as r,S as D,c as p,a as V,r as b,b as M,P as j}from"./index-DjT3CWpx.js";import{c as I,D as $,S as f,a as x,E}from"./data-table-_i2F3GhZ.js";import{u as C}from"./queries-CdV8RpMg.js";import{P as H,D as T}from"./page-header-5oloIl3g.js";import{d as c}from"./dayjs--ECgqgNU.js";import"./input-CWTrCadC.js";const R=V("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function _({className:e,variant:a,asChild:s=!1,...o}){const t=s?D:"span";return r.jsx(t,{"data-slot":"badge",className:p(R({variant:a}),e),...o})}var m="Progress",v=100,[A,ee]=M(m),[L,Q]=A(m),y=b.forwardRef((e,a)=>{const{__scopeProgress:s,value:o=null,max:t,getValueLabel:n=F,...u}=e;(t||t===0)&&!g(t)&&console.error(k(`${t}`,"Progress"));const i=g(t)?t:v;o!==null&&!h(o,i)&&console.error(z(`${o}`,"Progress"));const l=h(o,i)?o:null,S=d(l)?n(l,i):void 0;return r.jsx(L,{scope:s,value:l,max:i,children:r.jsx(j.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":d(l)?l:void 0,"aria-valuetext":S,role:"progressbar","data-state":w(l,i),"data-value":l??void 0,"data-max":i,...u,ref:a})})});y.displayName=m;var P="ProgressIndicator",N=b.forwardRef((e,a)=>{const{__scopeProgress:s,...o}=e,t=Q(P,s);return r.jsx(j.div,{"data-state":w(t.value,t.max),"data-value":t.value??void 0,"data-max":t.max,...o,ref:a})});N.displayName=P;function F(e,a){return`${Math.round(e/a*100)}%`}function w(e,a){return e==null?"indeterminate":e===a?"complete":"loading"}function d(e){return typeof e=="number"}function g(e){return d(e)&&!isNaN(e)&&e>0}function h(e,a){return d(e)&&!isNaN(e)&&e<=a&&e>=0}function k(e,a){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${v}\`.`}function z(e,a){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${v} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Y=y,G=N;function O({className:e,value:a,...s}){return r.jsx(Y,{"data-slot":"progress",className:p("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:r.jsx(G,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a??0)}%)`}})})}function B({isLoading:e,queries:a}){const s=I(),o=[s.accessor("id",{header:"ID"}),s.accessor("query",{header:"SQL",meta:{cellClassName:"max-w-[300px] truncate"}}),s.accessor("status",{header:"Status",cell:t=>{const n=t.getValue();return r.jsx(_,{variant:"outline",children:r.jsx("span",{className:p("capitalize",n==="successful"&&"text-green-500",n==="failed"&&"text-red-500"),children:n})})}}),s.accessor("startTime",{header:"Start Time",cell:t=>{const n=c(t.getValue()),i=c().diff(n,"minute")<24?c(n).fromNow():c(n).format("DD/MM/YYYY HH:mm");return r.jsx("span",{children:i})}}),s.accessor("durationMs",{header:"Duration",cell:t=>{const n=Math.max(...a.map(i=>i.durationMs)),u=t.getValue()/n*100;return r.jsxs("div",{className:"flex min-w-[100px] items-center gap-2",children:[r.jsx(O,{value:u}),r.jsxs("span",{children:[t.getValue(),"ms"]})]})}})];return r.jsx($,{rounded:!0,columns:o,data:a,isLoading:e})}function X(){const{data:{items:e}={},isFetching:a}=C();return r.jsxs(r.Fragment,{children:[r.jsx(H,{title:"Queries History"}),r.jsxs(f,{className:"h-[calc(100vh-65px-32px)] p-4",children:[r.jsx("div",{className:"flex size-full flex-col",children:e!=null&&e.length?r.jsxs(f,{tableViewport:!0,children:[r.jsx(B,{queries:e,isLoading:a}),r.jsx(x,{orientation:"horizontal"})]}):r.jsx(E,{className:"min-h-[calc(100vh-32px-65px-32px)]",Icon:T,title:"No Queries Found",description:"No queries have been executed yet. Start querying data to see your history here."})}),r.jsx(x,{orientation:"vertical"})]})]})}const re=X;export{re as component};
