import{b as g,j as e,r as i,e as j,m as C,B as N}from"./index-Ct9KqqwV.js";import{T as y,a as T,b as p,c as v}from"./tabs-Cg01znNs.js";import{T as D}from"./table-data-upload-dialog-CI5z27sW.js";import{u as S}from"./tables-CkGhX4Fc.js";import{P as L}from"./page-empty-container-C-kS49aP.js";import{P as w}from"./page-header-9iDmaRsA.js";import{P}from"./page-scroll-area-DX8YZP6j.js";import{c as E,D as I}from"./data-table-DgQGtZgu.js";import{I as $,a as R,b as k}from"./input-C_MJiXMR.js";import{R as F}from"./refresh-button-CqT5Ge7j.js";import{S as B}from"./search-r_qVZtJ3.js";import{T as H}from"./table-DGhiBpVf.js";import"./alert-BMd_jCtt.js";import"./dashboard-DqU8RIG6.js";import"./navigation-trees-DSZT8EBt.js";import"./select-Yobvwtbb.js";import"./scroll-area-DS2laZp3.js";import"./index-Da2Z8ThW.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],_=g("columns-2",O);function z({isLoading:a,columns:s}){const t=E(),o=[t.accessor("name",{header:"Name"}),t.accessor("type",{header:"Type"})];return e.jsx(I,{rounded:!0,columns:o,data:s,isLoading:a})}function A({columns:a,isFetchingColumns:s,search:t,onSearch:o,onRefetchColumns:n}){return e.jsxs("div",{className:"flex items-center justify-between gap-4 p-4",children:[e.jsx("p",{className:"text-muted-foreground text-sm text-nowrap",children:a.length?`${a.length} columns found`:""}),e.jsxs("div",{className:"justify flex items-center justify-between gap-2",children:[e.jsxs($,{className:"w-full",children:[e.jsx(R,{children:e.jsx(B,{})}),e.jsx(k,{value:t,onChange:r=>o(r.target.value),placeholder:"Search columns"})]}),e.jsx(F,{isDisabled:s,onRefresh:n})]})]})}function M({columns:a,search:s}){const t=i.useMemo(()=>{if(!a)return[];if(!s)return a;const o=s.toLowerCase();return a.filter(n=>n.name.toLowerCase().includes(o)||n.type.toLowerCase().includes(o))},[a,s]);return{searchedColumns:t,isEmpty:!t.length,isEmptyDueToSearch:s.length>0&&!t.length}}function G(){const a=j(),[s,t]=i.useState(""),[o,n]=i.useState(!1),{databaseName:r,schemaName:l,tableName:m}=C({from:"/databases/_dataPagesLayout/$databaseName/schemas/$schemaName/tables/$tableName/columns/"}),{data:{items:h}={},isFetching:c,isLoading:u,refetch:f}=S(r,l,m),{searchedColumns:d,isEmpty:x,isEmptyDueToSearch:b}=M({columns:h,search:s});return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:m,Icon:H,Action:e.jsx(N,{size:"sm",onClick:()=>n(!0),disabled:c,children:"Load Data"})}),e.jsxs(y,{defaultValue:"columns",variant:"underline",className:"size-full",children:[e.jsxs(T,{className:"px-4",children:[e.jsx(p,{value:"columns",children:"Columns"}),e.jsx(p,{onClick:()=>a({to:"/databases/$databaseName/schemas/$schemaName/tables/$tableName/data-preview",params:{databaseName:r,schemaName:l,tableName:m}}),value:"data-preview",children:"Data Preview"})]}),e.jsxs(v,{value:"columns",className:"m-0",children:[e.jsx(A,{columns:d,isFetchingColumns:c,search:s,onSearch:t,onRefetchColumns:f}),x&&!u?e.jsx(L,{variant:"tabs",Icon:_,title:"No Columns Found",description:b?"No columns match your search.":"No columns have been found for this table."}):e.jsx(P,{tabs:!0,children:e.jsx(z,{isLoading:u,columns:d})})]})]}),r&&l&&m&&e.jsx(D,{opened:o,onSetOpened:n,databaseName:r,schemaName:l,tableName:m})]})}const le=G;export{le as component};
