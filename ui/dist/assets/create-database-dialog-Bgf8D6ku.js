import{j as e,e as x,B as m,t as b}from"./index-D97fnGOG.js";import{A as g,a as j}from"./alert-C8qPMkmS.js";import{b as D,D as f,c as h,d as y,e as p,f as C,g as F,h as v}from"./databases-CmrvZq2M.js";import{g as Q}from"./navigation-trees-CYPvTSNZ.js";import{u as K}from"./volumes-yC6I236x.js";import{u as q,F as G,a as N,b as A,c as P,d as S,e as w,s as B,z as c}from"./form-BZUv0PDH.js";import{b as I}from"./input-C5d2TQDX.js";const T=c.object({name:c.string()}),V=({onSubmit:r})=>{const a=q({resolver:B(T),defaultValues:{name:""}});return e.jsx(G,{...a,children:e.jsx("form",{id:"createDatabaseDialogForm",onSubmit:a.handleSubmit(r),className:"flex flex-col gap-2",children:e.jsx(N,{control:a.control,name:"name",render:({field:s})=>e.jsxs(A,{children:[e.jsx(P,{children:"Database Name"}),e.jsx(S,{children:e.jsx(I,{...s,type:"name",required:!0})}),e.jsx(w,{})]})})})})};function R({opened:r,onSetOpened:a}){var n;const{data:{items:s}={}}=K(),t=x(),{mutate:u,isPending:o,error:i}=D({mutation:{onSuccess:async()=>{await Promise.all([t.invalidateQueries({queryKey:Q()}),t.invalidateQueries({queryKey:F()}),t.invalidateQueries({queryKey:v()})]),a(!1),b.success("Database was successfully created")}}});return e.jsx(f,{open:r,onOpenChange:a,children:e.jsxs(h,{children:[e.jsx(y,{children:e.jsx(p,{children:"Create Database"})}),i&&e.jsx(g,{variant:"destructive",children:e.jsx(j,{children:JSON.stringify((n=i.response)==null?void 0:n.data)})}),e.jsx(V,{onSubmit:d=>{var l;u({data:{name:d.name,volume:((l=s==null?void 0:s[0])==null?void 0:l.name)??""}})}}),e.jsxs(C,{children:[e.jsx(m,{disabled:o,variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(m,{disabled:o,form:"createDatabaseDialogForm",type:"submit",children:"Create"})]})]})})}export{R as C};
