import{d as ye,r as I,j as R,v as si,w as $f,x as Jf,y as jf,g as Dc,c as Z,z as Mc,A as Mi,b as Ir,C as Nr,P as Ne,F as Uc,G as Qf,I as qf,H as z,J as Zl,B as et,a as zf,f as pr,u as Ie,X as ea,L as yc,K as Zf,e as ta,h as eS,i as $o,M as Cr,N as xc,O as tS,Q as tt,T as bc,U as qt,V as Bc,W as Gc,Y as sS,Z as iS,_ as nS,$ as rS,a0 as oS,a1 as lS,a2 as aS,a3 as Hc,a4 as vc,a5 as wc,D as Fc,a6 as mr,k as Yc,a7 as ES,a8 as TS,a9 as kc,aa as cS,ab as hS,ac as Vc,ad as AS,ae as RS,af as uS,ag as fS,ah as SS,ai as dS,aj as Wc,ak as OS,al as IS,am as NS,an as Xc,ao as pS,t as CS,ap as Kc,aq as $c,ar as mS,as as LS,at as _S,au as gS,av as Jc,aw as PS,ax as DS,ay as MS,R as US,az as yS}from"./index-CQDLeXYR.js";import{a as xS,b as bS,R as sa,T as BS,c as GS,d as HS,e as vS,f as wS}from"./trees-items-B_ZLTOv-.js";import{E as jc,c as Qc,S as is,a as Pt,e as Wa,I as FS,b as YS,d as kS}from"./scroll-area-EjmLNX2e.js";import{u as qc,T as VS}from"./navigation-trees-CuFAiEPL.js";import{a as WS,g as XS}from"./volumes-VF844sbs.js";import{a as KS,g as $S,u as zc}from"./queries-BCoLEXje.js";import{c as Zc,D as eh}from"./data-table-_QlfqMl-.js";import{C as th,u as JS,a as jS,T as QS}from"./table-data-upload-dialog-Dbl3DUqP.js";import{D as qS,a as zS,b as ZS,c as ed}from"./dialog-DF-28VeS.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],sd=ye("arrow-down-to-line",td);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sh=ye("chevron-down",id);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rd=ye("chevron-up",nd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ld=ye("copy",od);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ih=ye("ellipsis",ad);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Td=ye("eye",Ed);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],hd=ye("hash",cd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]],Rd=ye("panel-bottom",Ad);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],fd=ye("panel-left",ud);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],dd=ye("panel-right",Sd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]],Id=ye("panel-top",Od);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]],pd=ye("rows-2",Nd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],md=ye("scroll",Cd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_d=ye("share-2",Ld);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Pd=ye("sliders-horizontal",gd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 18H3",key:"13769t"}],["circle",{cx:"17",cy:"15",r:"3",key:"1upz2a"}],["path",{d:"m21 19-1.9-1.9",key:"dwi7p8"}]],Md=ye("text-search",Dd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],yd=ye("wand-sparkles",Ud);let Jo=[],nh=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<s.length;e++)(e%2?nh:Jo).push(t=t+s[e])})();function xd(s){if(s<768)return!1;for(let e=0,t=Jo.length;;){let i=e+t>>1;if(s<Jo[i])t=i;else if(s>=nh[i])e=i+1;else return!0;if(e==t)return!1}}function Xa(s){return s>=127462&&s<=127487}const Ka=8205;function bd(s,e,t=!0,i=!0){return(t?rh:Bd)(s,e,i)}function rh(s,e,t){if(e==s.length)return e;e&&oh(s.charCodeAt(e))&&lh(s.charCodeAt(e-1))&&e--;let i=jr(s,e);for(e+=$a(i);e<s.length;){let n=jr(s,e);if(i==Ka||n==Ka||t&&xd(n))e+=$a(n),i=n;else if(Xa(n)){let r=0,o=e-2;for(;o>=0&&Xa(jr(s,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function Bd(s,e,t){for(;e>0;){let i=rh(s,e-2,t);if(i<e)return i;e--}return 0}function jr(s,e){let t=s.charCodeAt(e);if(!lh(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return oh(i)?(t-55296<<10)+(i-56320)+65536:t}function oh(s){return s>=56320&&s<57344}function lh(s){return s>=55296&&s<56320}function $a(s){return s<65536?1:2}class q{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=$s(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),pt.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=$s(this,e,t);let i=[];return this.decompose(e,t,i,0),pt.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Ci(this),r=new Ci(e);for(let o=t,l=t;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new Ci(this,e)}iterRange(e,t=this.length){return new ah(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Eh(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?q.empty:e.length<=32?new Ae(e):pt.from(Ae.split(e,[]))}}class Ae extends q{constructor(e,t=Gd(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((t?i:l)>=e)return new Hd(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new Ae(Ja(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=_n(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Ae(l,o.length+r.length));else{let a=l.length>>1;i.push(new Ae(l.slice(0,a)),new Ae(l.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof Ae))return super.replace(e,t,i);[e,t]=$s(this,e,t);let n=_n(this.text,_n(i.text,Ja(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new Ae(n,r):pt.from(Ae.split(n,[]),r)}sliceString(e,t=this.length,i=`
`){[e,t]=$s(this,e,t);let n="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&t>r&&(n+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(t.push(new Ae(i,n)),i=[],n=-1);return n>-1&&t.push(new Ae(i,n)),t}}class pt extends q{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let E=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!E?i.push(l):l.decompose(e-o,t-o,i,E)}o=a+1}}replace(e,t,i){if([e,t]=$s(this,e,t),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,i),E=this.lines-o.lines+a.lines;if(a.lines<E>>4&&a.lines>E>>6){let T=this.children.slice();return T[n]=a,new pt(T,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=$s(this,e,t);let n="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof pt))return 0;let i=0,[n,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,r+=t){if(n==o||r==l)return i;let a=this.children[n],E=e.children[r];if(a!=E)return i+a.scanIdentical(E,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let A of e)i+=A.lines;if(i<32){let A=[];for(let u of e)u.flatten(A);return new Ae(A,t)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,E=-1,T=[];function c(A){let u;if(A.lines>r&&A instanceof pt)for(let f of A.children)c(f);else A.lines>o&&(a>o||!a)?(h(),l.push(A)):A instanceof Ae&&a&&(u=T[T.length-1])instanceof Ae&&A.lines+u.lines<=32?(a+=A.lines,E+=A.length+1,T[T.length-1]=new Ae(u.text.concat(A.text),u.length+1+A.length)):(a+A.lines>n&&h(),a+=A.lines,E+=A.length+1,T.push(A))}function h(){a!=0&&(l.push(T.length==1?T[0]:pt.from(T,E)),E=-1,a=T.length=0)}for(let A of e)c(A);return h(),l.length==1?l[0]:new pt(l,t)}}q.empty=new Ae([""],0);function Gd(s){let e=-1;for(let t of s)e+=t.length+1;return e}function _n(s,e,t=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function Ja(s,e,t){return _n(s,[""],e,t)}class Ci{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ae?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Ae?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Ae){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Ae?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ah{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Ci(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Eh{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(q.prototype[Symbol.iterator]=function(){return this.iter()},Ci.prototype[Symbol.iterator]=ah.prototype[Symbol.iterator]=Eh.prototype[Symbol.iterator]=function(){return this});class Hd{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function $s(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}function Ue(s,e,t=!0,i=!0){return bd(s,e,t,i)}function vd(s){return s>=56320&&s<57344}function wd(s){return s>=55296&&s<56320}function Xe(s,e){let t=s.charCodeAt(e);if(!wd(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return vd(i)?(t-55296<<10)+(i-56320)+65536:t}function ia(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function Ct(s){return s<65536?1:2}const jo=/\r\n?|\n/;var we=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(we||(we={}));class gt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,t=!1){Qo(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new gt(e)}composeDesc(e){return this.empty?e:e.empty?this:Th(this,e)}mapDesc(e,t=!1){return e.empty?this:qo(this,e,t)}mapPos(e,t=-1,i=we.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],E=n+l;if(a<0){if(E>e)return r+(e-n);r+=l}else{if(i!=we.Simple&&E>=e&&(i==we.TrackDel&&n<e&&E>e||i==we.TrackBefore&&n<e||i==we.TrackAfter&&E>e))return null;if(E>e||E==e&&t<0&&!l)return e==n||t<0?r:r+a;r+=a}n=E}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new gt(e)}static create(e){return new gt(e)}}class de extends gt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Qo(this,(t,i,n,r,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return qo(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(q.empty);i.push(o?e.slice(r,r+o):q.empty)}r+=o}return new de(t,i)}compose(e){return this.empty?e:e.empty?this:Th(this,e,!0)}map(e,t=!1){return e.empty?this:qo(this,e,t,!0)}iterChanges(e,t=!1){Qo(this,e,t)}get desc(){return gt.create(this.sections)}filter(e){let t=[],i=[],n=[],r=new Ui(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let T=Math.min(r.len,a-l);Be(n,T,-1);let c=r.ins==-1?-1:r.off==0?r.ins:0;Be(t,T,c),c>0&&Kt(i,t,r.text),r.forward(T),l+=T}let E=e[o++];for(;l<E;){if(r.done)break e;let T=Math.min(r.len,E-l);Be(t,T,-1),Be(n,T,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(T),l+=T}}return{changes:new de(t,i),filtered:gt.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],o=0,l=null;function a(T=!1){if(!T&&!n.length)return;o<t&&Be(n,t-o,-1);let c=new de(n,r);l=l?l.compose(c.map(l)):c,n=[],r=[],o=0}function E(T){if(Array.isArray(T))for(let c of T)E(c);else if(T instanceof de){if(T.length!=t)throw new RangeError(`Mismatched change set length (got ${T.length}, expected ${t})`);a(),l=l?l.compose(T.map(l)):T}else{let{from:c,to:h=c,insert:A}=T;if(c>h||c<0||h>t)throw new RangeError(`Invalid change range ${c} to ${h} (in doc of length ${t})`);let u=A?typeof A=="string"?q.of(A.split(i||jo)):A:q.empty,f=u.length;if(c==h&&f==0)return;c<o&&a(),c>o&&Be(n,c-o,-1),Be(n,h-c,f),Kt(r,n,u),o=h}}return E(e),a(!l),l}static empty(e){return new de(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<n;)i.push(q.empty);i[n]=q.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new de(t,i)}static createSet(e,t){return new de(e,t)}}function Be(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:n>=0&&e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function Kt(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(q.empty);s.push(t)}}function Qo(s,e,t){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)n+=l,r+=l;else{let E=n,T=r,c=q.empty;for(;E+=l,T+=a,a&&i&&(c=c.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];e(n,E,r,T,c),n=E,r=T}}}function qo(s,e,t,i=!1){let n=[],r=i?[]:null,o=new Ui(s),l=new Ui(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let E=Math.min(o.len,l.len);Be(n,E,-1),o.forward(E),l.forward(E)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let E=l.len;for(Be(n,l.ins,-1);E;){let T=Math.min(o.len,E);o.ins>=0&&a<o.i&&o.len<=T&&(Be(n,0,o.ins),r&&Kt(r,n,o.text),a=o.i),o.forward(T),E-=T}l.next()}else if(o.ins>=0){let E=0,T=o.len;for(;T;)if(l.ins==-1){let c=Math.min(T,l.len);E+=c,T-=c,l.forward(c)}else if(l.ins==0&&l.len<T)T-=l.len,l.next();else break;Be(n,E,a<o.i?o.ins:0),r&&a<o.i&&Kt(r,n,o.text),a=o.i,o.forward(o.len-T)}else{if(o.done&&l.done)return r?de.createSet(n,r):gt.create(n);throw new Error("Mismatched change set lengths")}}}function Th(s,e,t=!1){let i=[],n=t?[]:null,r=new Ui(s),o=new Ui(e);for(let l=!1;;){if(r.done&&o.done)return n?de.createSet(i,n):gt.create(i);if(r.ins==0)Be(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Be(i,0,o.ins,l),n&&Kt(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),E=i.length;if(r.ins==-1){let T=o.ins==-1?-1:o.off?0:o.ins;Be(i,a,T,l),n&&T&&Kt(n,i,o.text)}else o.ins==-1?(Be(i,r.off?0:r.len,a,l),n&&Kt(n,i,r.textBit(a))):(Be(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&Kt(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>E),r.forward2(a),o.forward(a)}}}}class Ui{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?q.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?q.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class fs{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new fs(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return _.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return _.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return _.range(e.anchor,e.head)}static create(e,t,i){return new fs(e,t,i)}}class _{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:_.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new _([this.main],0)}addRange(e,t=!0){return _.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,_.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new _(e.ranges.map(t=>fs.fromJSON(t)),e.main)}static single(e,t=e){return new _([_.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return _.normalized(e.slice(),t);i=r.to}return new _(e,t)}static cursor(e,t=0,i,n){return fs.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?fs.create(t,e,48|r):fs.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((n,r)=>n.from-r.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?_.range(a,l):_.range(l,a))}}return new _(e,t)}}function ch(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let na=0;class x{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=na++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new x(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:ra),!!e.static,e.enables)}of(e){return new gn([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new gn(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new gn(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function ra(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}class gn{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=na++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,E=!1,T=[];for(let c of this.dependencies)c=="doc"?a=!0:c=="selection"?E=!0:(((t=e[c.id])!==null&&t!==void 0?t:1)&1)==0&&T.push(e[c.id]);return{create(c){return c.values[o]=i(c),1},update(c,h){if(a&&h.docChanged||E&&(h.docChanged||h.selection)||zo(c,T)){let A=i(c);if(l?!ja(A,c.values[o],n):!n(A,c.values[o]))return c.values[o]=A,1}return 0},reconfigure:(c,h)=>{let A,u=h.config.address[r];if(u!=null){let f=kn(h,u);if(this.dependencies.every(S=>S instanceof x?h.facet(S)===c.facet(S):S instanceof pe?h.field(S,!1)==c.field(S,!1):!0)||(l?ja(A=i(c),f,n):n(A=i(c),f)))return c.values[o]=f,0}else A=i(c);return c.values[o]=A,1}}}}function ja(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function zo(s,e){let t=!1;for(let i of e)mi(s,i)&1&&(t=!0);return t}function Fd(s,e,t){let i=t.map(a=>s[a.id]),n=t.map(a=>a.type),r=i.filter(a=>!(a&1)),o=s[e.id]>>1;function l(a){let E=[];for(let T=0;T<i.length;T++){let c=kn(a,i[T]);if(n[T]==2)for(let h of c)E.push(h);else E.push(c)}return e.combine(E)}return{create(a){for(let E of i)mi(a,E);return a.values[o]=l(a),1},update(a,E){if(!zo(a,r))return 0;let T=l(a);return e.compare(T,a.values[o])?0:(a.values[o]=T,1)},reconfigure(a,E){let T=zo(a,i),c=E.config.facets[e.id],h=E.facet(e);if(c&&!T&&ra(t,c))return a.values[o]=h,0;let A=l(a);return e.compare(A,h)?(a.values[o]=h,0):(a.values[o]=A,1)}}}const tn=x.define({static:!0});class pe{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new pe(na++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(tn).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let r=i.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>{let r=i.facet(tn),o=n.facet(tn),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[t]=l.create(i),1):n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,tn.of({field:this,create:e})]}get extension(){return this}}const Rs={lowest:4,low:3,default:2,high:1,highest:0};function Ei(s){return e=>new hh(e,s)}const vt={highest:Ei(Rs.highest),high:Ei(Rs.high),default:Ei(Rs.default),low:Ei(Rs.low),lowest:Ei(Rs.lowest)};class hh{constructor(e,t){this.inner=e,this.prec=t}}class Js{of(e){return new Zo(this,e)}reconfigure(e){return Js.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Zo{constructor(e,t){this.compartment=e,this.inner=t}}class Yn{constructor(e,t,i,n,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],r=Object.create(null),o=new Map;for(let h of Yd(e,t,o))h instanceof pe?n.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],E=[];for(let h of n)l[h.id]=E.length<<1,E.push(A=>h.slot(A));let T=i==null?void 0:i.config.facets;for(let h in r){let A=r[h],u=A[0].facet,f=T&&T[h]||[];if(A.every(S=>S.type==0))if(l[u.id]=a.length<<1|1,ra(f,A))a.push(i.facet(u));else{let S=u.combine(A.map(d=>d.value));a.push(i&&u.compare(S,i.facet(u))?i.facet(u):S)}else{for(let S of A)S.type==0?(l[S.id]=a.length<<1|1,a.push(S.value)):(l[S.id]=E.length<<1,E.push(d=>S.dynamicSlot(d)));l[u.id]=E.length<<1,E.push(S=>Fd(S,u,A))}}let c=E.map(h=>h(l));return new Yn(e,o,c,l,a,r)}}function Yd(s,e,t){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let E=i[a].indexOf(o);E>-1&&i[a].splice(E,1),o instanceof Zo&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let E of o)r(E,l);else if(o instanceof Zo){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let E=e.get(o.compartment)||o.inner;t.set(o.compartment,E),r(E,l)}else if(o instanceof hh)r(o.inner,o.prec);else if(o instanceof pe)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof gn)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,Rs.default);else{let E=o.extension;if(!E)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(E,l)}}return r(s,Rs.default),i.reduce((o,l)=>o.concat(l))}function mi(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|n}function kn(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const Ah=x.define(),el=x.define({combine:s=>s.some(e=>e),static:!0}),Rh=x.define({combine:s=>s.length?s[0]:void 0,static:!0}),uh=x.define(),fh=x.define(),Sh=x.define(),dh=x.define({combine:s=>s.length?s[0]:!1});class wt{constructor(e,t){this.type=e,this.value=t}static define(){return new kd}}class kd{of(e){return new wt(this,e)}}class Vd{constructor(e){this.map=e}of(e){return new V(this,e)}}class V{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new V(this.type,t)}is(e){return this.type==e}static define(e={}){return new Vd(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(t);r&&i.push(r)}return i}}V.reconfigure=V.define();V.appendConfig=V.define();class Oe{constructor(e,t,i,n,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&ch(i,t.newLength),r.some(l=>l.type==Oe.time)||(this.annotations=r.concat(Oe.time.of(Date.now())))}static create(e,t,i,n,r,o){return new Oe(e,t,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Oe.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Oe.time=wt.define();Oe.userEvent=wt.define();Oe.addToHistory=wt.define();Oe.remote=wt.define();function Wd(s,e){let t=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==e.length||e[n]>=s[i]))r=s[i++],o=s[i++];else if(n<e.length)r=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Oh(s,e,t){var i;let n,r,o;return t?(n=e.changes,r=de.empty(e.changes.length),o=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:V.mapEffects(s.effects,n).concat(V.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function tl(s,e,t){let i=e.selection,n=Fs(e.annotations);return e.userEvent&&(n=n.concat(Oe.userEvent.of(e.userEvent))),{changes:e.changes instanceof de?e.changes:de.of(e.changes||[],t,s.facet(Rh)),selection:i&&(i instanceof _?i:_.single(i.anchor,i.head)),effects:Fs(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function Ih(s,e,t){let i=tl(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=Oh(i,tl(s,e[r],o?i.changes.newLength:s.doc.length),o)}let n=Oe.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Kd(t?Xd(n):n)}function Xd(s){let e=s.startState,t=!0;for(let n of e.facet(uh)){let r=n(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:Wd(t,r))}if(t!==!0){let n,r;if(t===!1)r=s.changes.invertedDesc,n=de.empty(e.doc.length);else{let o=s.changes.filter(t);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=Oe.create(e,n,s.selection&&s.selection.map(r),V.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let i=e.facet(fh);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof Oe?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Oe?s=r[0]:s=Ih(e,Fs(r),!1)}return s}function Kd(s){let e=s.startState,t=e.facet(Sh),i=s;for(let n=t.length-1;n>=0;n--){let r=t[n](s);r&&Object.keys(r).length&&(i=Oh(i,tl(e,r,s.changes.newLength),!0))}return i==s?s:Oe.create(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const $d=[];function Fs(s){return s==null?$d:Array.isArray(s)?s:[s]}var Te=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(Te||(Te={}));const Jd=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let sl;try{sl=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function jd(s){if(sl)return sl.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Jd.test(t)))return!0}return!1}function Qd(s){return e=>{if(!/\S/.test(e))return Te.Space;if(jd(e))return Te.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return Te.Word;return Te.Other}}class Q{constructor(e,t,i,n,r,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)mi(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return mi(this,i),kn(this,i)}update(...e){return Ih(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(Js.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,E)=>n.set(E,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(V.reconfigure)?(t=null,i=l.value):l.is(V.appendConfig)&&(t=null,i=Fs(i).concat(l.value));let r;t?r=e.startState.values.slice():(t=Yn.resolve(i,n,this),r=new Q(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,E)=>E.reconfigure(a,this),null).values);let o=e.startState.facet(el)?e.newSelection:e.newSelection.asSingle();new Q(t,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:_.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],o=Fs(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),E=this.changes(a.changes),T=E.map(n);for(let h=0;h<l;h++)r[h]=r[h].map(T);let c=n.mapDesc(E,!0);r.push(a.range.map(c)),n=n.compose(T),o=V.mapEffects(o,T).concat(V.mapEffects(Fs(a.effects),c))}return{changes:n,selection:_.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof de?e:de.of(e,this.doc.length,this.facet(Q.lineSeparator))}toText(e){return q.of(e.split(this.facet(Q.lineSeparator)||jo))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(mi(this,t),kn(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof pe&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return Q.create({doc:e.doc,selection:_.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=Yn.resolve(e.extensions||[],new Map),i=e.doc instanceof q?e.doc:q.of((e.doc||"").split(t.staticFacet(Q.lineSeparator)||jo)),n=e.selection?e.selection instanceof _?e.selection:_.single(e.selection.anchor,e.selection.head):_.single(0);return ch(n,i.length),t.staticFacet(el)||(n=n.asSingle()),new Q(t,i,n,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(Q.tabSize)}get lineBreak(){return this.facet(Q.lineSeparator)||`
`}get readOnly(){return this.facet(dh)}phrase(e,...t){for(let i of this.facet(Q.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let r of this.facet(Ah))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return Qd(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Ue(t,o,!1);if(r(t.slice(a,o))!=Te.Word)break;o=a}for(;l<n;){let a=Ue(t,l);if(r(t.slice(l,a))!=Te.Word)break;l=a}return o==l?null:_.range(o+i,l+i)}}Q.allowMultipleSelections=el;Q.tabSize=x.define({combine:s=>s.length?s[0]:4});Q.lineSeparator=Rh;Q.readOnly=dh;Q.phrases=x.define({compare(s,e){let t=Object.keys(s),i=Object.keys(e);return t.length==i.length&&t.every(n=>s[n]==e[n])}});Q.languageData=Ah;Q.changeFilter=uh;Q.transactionFilter=fh;Q.transactionExtender=Sh;Js.reconfigure=V.define();function Ut(s,e,t={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Ns{eq(e){return this==e}range(e,t=e){return il.create(e,t,this)}}Ns.prototype.startSide=Ns.prototype.endSide=0;Ns.prototype.point=!1;Ns.prototype.mapMode=we.TrackDel;let il=class Nh{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Nh(e,t,i)}};function nl(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class oa{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,E=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return E>=0?o:l;E>=0?l=a:o=a+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let E=this.value[a],T=this.from[a]+e,c=this.to[a]+e,h,A;if(T==c){let u=t.mapPos(T,E.startSide,E.mapMode);if(u==null||(h=A=u,E.startSide!=E.endSide&&(A=t.mapPos(T,E.endSide),A<h)))continue}else if(h=t.mapPos(T,E.startSide),A=t.mapPos(c,E.endSide),h>A||h==A&&E.startSide>0&&E.endSide<=0)continue;(A-h||E.endSide-E.startSide)<0||(o<0&&(o=h),E.point&&(l=Math.max(l,A-h)),i.push(E),n.push(h-o),r.push(A-o))}return{mapped:i.length?new oa(n,r,i,l):null,pos:o}}}class j{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new j(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(nl)),this.isEmpty)return t.length?j.of(t):this;let l=new ph(this,null,-1).goto(0),a=0,E=[],T=new Gt;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let c=t[a++];T.addInner(c.from,c.to,c.value)||E.push(c)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&T.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(T.addInner(l.from,l.to,l.value)||E.push(il.create(l.from,l.to,l.value))),l.next());return T.finishInner(this.nextLayer.isEmpty&&!E.length?j.empty:this.nextLayer.update({add:E,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],E=e.touchesRange(l,l+a.length);if(E===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(E===!0){let{mapped:T,pos:c}=a.map(l,e);T&&(n=Math.max(n,T.maxPoint),t.push(T),i.push(c))}}let r=this.nextLayer.map(e);return t.length==0?r:new j(i,t,r||j.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return yi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return yi.from(e).goto(t)}static compare(e,t,i,n,r=-1){let o=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=r),l=t.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=r),a=Qa(o,l,i),E=new Ti(o,a,r),T=new Ti(l,a,r);i.iterGaps((c,h,A)=>qa(E,c,T,h,A,n)),i.empty&&i.length==0&&qa(E,0,T,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let r=e.filter(T=>!T.isEmpty&&t.indexOf(T)<0),o=t.filter(T=>!T.isEmpty&&e.indexOf(T)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Qa(r,o),a=new Ti(r,l,0).goto(i),E=new Ti(o,l,0).goto(i);for(;;){if(a.to!=E.to||!rl(a.active,E.active)||a.point&&(!E.point||!a.point.eq(E.point)))return!1;if(a.to>n)return!0;a.next(),E.next()}}static spans(e,t,i,n,r=-1){let o=new Ti(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let E=Math.min(o.to,i);if(o.point){let T=o.activeForPoint(o.to),c=o.pointFrom<t?T.length+1:o.point.startSide<0?T.length:Math.min(T.length,a);n.point(l,E,o.point,T,c,o.pointRank),a=Math.min(o.openEnd(E),T.length)}else E>l&&(n.span(l,E,o.active,a),a=o.openEnd(E));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new Gt;for(let n of e instanceof il?[e]:t?qd(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return j.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=j.empty;n=n.nextLayer)t=new j(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}j.empty=new j([],[],null,-1);function qd(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(nl(e,i)>0)return s.slice().sort(nl);e=i}return s}j.empty.nextLayer=j.empty;class Gt{finishChunk(e){this.chunks.push(new oa(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Gt)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(j.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=j.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Qa(s,e,t){let i=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+r.chunk[o].length))&&n.add(r.chunk[o])}return n}class ph{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class yi{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new ph(o,t,i,r));return n.length==1?n[0]:new yi(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Qr(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Qr(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Qr(this.heap,0)}}}function Qr(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}class Ti{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=yi.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){sn(this.active,e),sn(this.activeTo,e),sn(this.activeRank,e),this.minActive=za(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||n-this.activeTo[t])>0;)t++;nn(this.active,t,i),nn(this.activeTo,t,n),nn(this.activeRank,t,r),e&&nn(e,t,this.cursor.from),this.minActive=za(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&sn(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function qa(s,e,t,i,n,r){s.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let E=s.to+a-t.to,T=E||s.endSide-t.endSide,c=T<0?s.to+a:t.to,h=Math.min(c,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&rl(s.activeForPoint(s.to),t.activeForPoint(t.to))||r.comparePoint(l,h,s.point,t.point):h>l&&!rl(s.active,t.active)&&r.compareRange(l,h,s.active,t.active),c>o)break;(E||s.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(c),l=c,T<=0&&s.next(),T>=0&&t.next()}}function rl(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function sn(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function nn(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function za(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}function ii(s,e,t=s.length){let i=0;for(let n=0;n<t&&n<s.length;)s.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Ue(s,n));return i}function ol(s,e,t,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==s.length)break;r+=s.charCodeAt(n)==9?t-r%t:1,n=Ue(s,n)}return i===!0?-1:s.length}const ll="ͼ",Za=typeof Symbol>"u"?"__"+ll:Symbol.for(ll),al=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),eE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class zt{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,E){let T=[],c=/^@(\w+)\b/.exec(o[0]),h=c&&c[1]=="keyframes";if(c&&l==null)return a.push(o[0]+";");for(let A in l){let u=l[A];if(/&/.test(A))r(A.split(/,\s*/).map(f=>o.map(S=>f.replace(/&/,S))).reduce((f,S)=>f.concat(S)),u,a);else if(u&&typeof u=="object"){if(!c)throw new RangeError("The value of a property ("+A+") should be a primitive value.");r(n(A),u,T,h)}else u!=null&&T.push(A.replace(/_.*/,"").replace(/[A-Z]/g,f=>"-"+f.toLowerCase())+": "+u+";")}(T.length||h)&&a.push((i&&!c&&!E?o.map(i):o).join(", ")+" {"+T.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=eE[Za]||1;return eE[Za]=e+1,ll+e.toString(36)}static mount(e,t,i){let n=e[al],r=i&&i.nonce;n?r&&n.setNonce(r):n=new zd(e,r),n.mount(Array.isArray(t)?t:[t],e)}}let tE=new Map;class zd{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=tE.get(i);if(r)return e[al]=r;this.sheet=new n.CSSStyleSheet,tE.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[al]=this}mount(e,t){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let E=0;E<l.rules.length;E++)i.insertRule(l.rules[E],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Zt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},xi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Zd=typeof navigator<"u"&&/Mac/.test(navigator.platform),eO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Me=0;Me<10;Me++)Zt[48+Me]=Zt[96+Me]=String(Me);for(var Me=1;Me<=24;Me++)Zt[Me+111]="F"+Me;for(var Me=65;Me<=90;Me++)Zt[Me]=String.fromCharCode(Me+32),xi[Me]=String.fromCharCode(Me);for(var qr in Zt)xi.hasOwnProperty(qr)||(xi[qr]=Zt[qr]);function tO(s){var e=Zd&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||eO&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?xi:Zt)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function bi(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function El(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function Pn(s,e){if(!e.anchorNode)return!1;try{return El(s,e.anchorNode)}catch{return!1}}function Bi(s){return s.nodeType==3?Cs(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function Li(s,e,t,i){return t?sE(s,e,t,i,-1)||sE(s,e,t,i,1):!1}function ps(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function Vn(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function sE(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:Dt(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=ps(s)+(n<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=n<0?Dt(s):0}else return!1}}function Dt(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function Lr(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function sO(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function Ch(s,e){let t=e.width/s.offsetWidth,i=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-s.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function iO(s,e,t,i,n,r,o,l){let a=s.ownerDocument,E=a.defaultView||window;for(let T=s,c=!1;T&&!c;)if(T.nodeType==1){let h,A=T==a.body,u=1,f=1;if(A)h=sO(E);else{if(/^(fixed|sticky)$/.test(getComputedStyle(T).position)&&(c=!0),T.scrollHeight<=T.clientHeight&&T.scrollWidth<=T.clientWidth){T=T.assignedSlot||T.parentNode;continue}let O=T.getBoundingClientRect();({scaleX:u,scaleY:f}=Ch(T,O)),h={left:O.left,right:O.left+T.clientWidth*u,top:O.top,bottom:O.top+T.clientHeight*f}}let S=0,d=0;if(n=="nearest")e.top<h.top?(d=e.top-(h.top+o),t>0&&e.bottom>h.bottom+d&&(d=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(d=e.bottom-h.bottom+o,t<0&&e.top-d<h.top&&(d=e.top-(h.top+o)));else{let O=e.bottom-e.top,p=h.bottom-h.top;d=(n=="center"&&O<=p?e.top+O/2-p/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-p+o)-h.top}if(i=="nearest"?e.left<h.left?(S=e.left-(h.left+r),t>0&&e.right>h.right+S&&(S=e.right-h.right+r)):e.right>h.right&&(S=e.right-h.right+r,t<0&&e.left<h.left+S&&(S=e.left-(h.left+r))):S=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-r:e.right-(h.right-h.left)+r)-h.left,S||d)if(A)E.scrollBy(S,d);else{let O=0,p=0;if(d){let P=T.scrollTop;T.scrollTop+=d/f,p=(T.scrollTop-P)*f}if(S){let P=T.scrollLeft;T.scrollLeft+=S/u,O=(T.scrollLeft-P)*u}e={left:e.left-O,top:e.top-p,right:e.right-O,bottom:e.bottom-p},O&&Math.abs(O-S)<1&&(i="nearest"),p&&Math.abs(p-d)<1&&(n="nearest")}if(A)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),T=T.assignedSlot||T.parentNode}else if(T.nodeType==11)T=T.host;else break}function nO(s){let e=s.ownerDocument,t,i;for(let n=s.parentNode;n&&!(n==e.body||t&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:i}}class rO{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Dt(t):0),i,Math.min(e.focusOffset,i?Dt(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Ms=null;function mh(s){if(s.setActive)return s.setActive();if(Ms)return s.focus(Ms);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(Ms==null?{get preventScroll(){return Ms={preventScroll:!0},!0}}:void 0),!Ms){Ms=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],r=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let iE;function Cs(s,e,t=e){let i=iE||(iE=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function Ys(s,e,t,i){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,s.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,s.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function oO(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function Lh(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function lO(s,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Dt(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=Dt(t))}else{if(t==s)return!0;i=ps(t),t=t.parentNode}}function _h(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function gh(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=Dt(t)}else if(t.parentNode&&!Vn(t))i=ps(t),t=t.parentNode;else return null}}function Ph(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!Vn(t))i=ps(t)+1,t=t.parentNode;else return null}}class Ge{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Ge(e.parentNode,ps(e),t)}static after(e,t){return new Ge(e.parentNode,ps(e)+1,t)}}const la=[];class ie{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=ie.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=nE(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=nE(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=Dt(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ie.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,E=i,T=i;a<this.children.length;a++){let c=this.children[a],h=E+c.length;if(E<e&&h>t)return c.domBoundsAround(e,t,E);if(h>=e&&n==-1&&(n=a,r=E),E>t&&c.dom.parentNode==this.dom){o=a,l=T;break}T=h,E=h+c.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=la){this.markDirty();for(let n=e;n<t;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Dh(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ie.prototype.breakAfter=0;function nE(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class Dh{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Mh(s,e,t,i,n,r,o,l,a){let{children:E}=s,T=E.length?E[e]:null,c=r.length?r[r.length-1]:null,h=c?c.breakAfter:o;if(!(e==i&&T&&!o&&!h&&r.length<2&&T.merge(t,n,r.length?c:null,t==0,l,a))){if(i<E.length){let A=E[i];A&&(n<A.length||A.breakAfter&&(c!=null&&c.breakAfter))?(e==i&&(A=A.split(n),n=0),!h&&c&&A.merge(0,n,c,!0,0,a)?r[r.length-1]=A:((n||A.children.length&&!A.children[0].length)&&A.merge(0,n,null,!1,0,a),r.push(A))):A!=null&&A.breakAfter&&(c?c.breakAfter=1:o=1),i++}for(T&&(T.breakAfter=o,t>0&&(!o&&r.length&&T.merge(t,T.length,r[0],!1,l,0)?T.breakAfter=r.shift().breakAfter:(t<T.length||T.children.length&&T.children[T.children.length-1].length==0)&&T.merge(t,T.length,null,!1,l,0),e++));e<i&&r.length;)if(E[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(E[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<E.length&&!E[e-1].breakAfter&&E[i].merge(0,0,E[e-1],!1,l,a)&&e--,(e<i||r.length)&&s.replaceChildren(e,i,r)}}function Uh(s,e,t,i,n,r){let o=s.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:E,off:T}=o.findPos(e,-1),c=e-t;for(let h of i)c+=h.length;s.length+=c,Mh(s,E,T,l,a,i,0,n,r)}let Ke=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Tl=typeof document<"u"?document:{documentElement:{style:{}}};const cl=/Edge\/(\d+)/.exec(Ke.userAgent),yh=/MSIE \d/.test(Ke.userAgent),hl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ke.userAgent),_r=!!(yh||hl||cl),rE=!_r&&/gecko\/(\d+)/i.test(Ke.userAgent),zr=!_r&&/Chrome\/(\d+)/.exec(Ke.userAgent),aO="webkitFontSmoothing"in Tl.documentElement.style,xh=!_r&&/Apple Computer/.test(Ke.vendor),oE=xh&&(/Mobile\/\w+/.test(Ke.userAgent)||Ke.maxTouchPoints>2);var b={mac:oE||/Mac/.test(Ke.platform),windows:/Win/.test(Ke.platform),linux:/Linux|X11/.test(Ke.platform),ie:_r,ie_version:yh?Tl.documentMode||6:hl?+hl[1]:cl?+cl[1]:0,gecko:rE,gecko_version:rE?+(/Firefox\/(\d+)/.exec(Ke.userAgent)||[0,0])[1]:0,chrome:!!zr,chrome_version:zr?+zr[1]:0,ios:oE,android:/Android\b/.test(Ke.userAgent),safari:xh,webkit_version:aO?+(/\bAppleWebKit\/(\d+)/.exec(Ke.userAgent)||[0,0])[1]:0,tabSize:Tl.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const EO=256;class Rt extends ie{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Rt)||this.length-(t-e)+i.length>EO||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Rt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ge(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return TO(this.dom,e,t)}}class Ht extends ie{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(Lh(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,r,o){return i&&(!(i instanceof Ht&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(Uh(this,e,t,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Ht(this.mark,t,o)}domAtPos(e){return bh(this,e)}coordsAt(e,t){return Gh(this,e,t)}}function TO(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?b.chrome||b.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):t<0?n--:r<i&&r++;let l=Cs(s,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return b.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,E=>E.width)||a),o?Lr(a,o<0):a||null}class $t extends ie{static create(e,t,i){return new $t(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=$t.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,r,o){return i&&(!(i instanceof $t)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof $t&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return q.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):q.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ge.before(this.dom):Ge.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return Lr(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class js extends ie{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof js&&e.side==this.side}split(){return new js(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ge.before(this.dom):Ge.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return q.empty}get isHidden(){return!0}}Rt.prototype.children=$t.prototype.children=js.prototype.children=la;function bh(s,e){let t=s.dom,{children:i}=s,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Ge(t,0)}function Bh(s,e,t){let i,{children:n}=s;t>0&&e instanceof Ht&&n.length&&(i=n[n.length-1])instanceof Ht&&i.mark.eq(e.mark)?Bh(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function Gh(s,e,t){let i=null,n=-1,r=null,o=-1;function l(E,T){for(let c=0,h=0;c<E.children.length&&h<=T;c++){let A=E.children[c],u=h+A.length;u>=T&&(A.children.length?l(A,T-h):(!r||r.isHidden&&(t>0||hO(r,A)))&&(u>T||h==u&&A.getSide()>0)?(r=A,o=T-h):(h<T||h==u&&A.getSide()<0&&!A.isHidden)&&(i=A,n=T-h)),h=u}}l(s,e);let a=(t<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),t):cO(s)}function cO(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=Bi(e);return t[t.length-1]||null}function hO(s,e){let t=s.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function Al(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const lE=Object.create(null);function Wn(s,e,t){if(s==e)return!0;s||(s=lE),e||(e=lE);let i=Object.keys(s),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let r of i)if(r!=t&&(n.indexOf(r)==-1||s[r]!==e[r]))return!1;return!0}function Rl(s,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?s.style.cssText="":s.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?s.style.cssText=t[n]:s.setAttribute(n,t[n]));return i}function AO(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let i=s.attributes[t];e[i.name]=i.value}return e}class ns{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Fe=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(Fe||(Fe={}));class F extends Ns{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Ji(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new es(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=Hh(e,t);i=(r?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new es(e,i,n,t,e.widget||null,!0)}static line(e){return new ji(e)}static set(e,t=!1){return j.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}F.none=j.empty;class Ji extends F{constructor(e){let{start:t,end:i}=Hh(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Ji&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Wn(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Ji.prototype.point=!1;class ji extends F{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ji&&this.spec.class==e.spec.class&&Wn(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ji.prototype.mapMode=we.TrackBefore;ji.prototype.point=!0;class es extends F{constructor(e,t,i,n,r,o){super(t,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?we.TrackBefore:we.TrackAfter:we.TrackDel}get type(){return this.startSide!=this.endSide?Fe.WidgetRange:this.startSide<=0?Fe.WidgetBefore:Fe.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof es&&RO(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}es.prototype.point=!0;function Hh(s,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=s;return t==null&&(t=s.inclusive),i==null&&(i=s.inclusive),{start:t??e,end:i??e}}function RO(s,e){return s==e||!!(s&&e&&s.compare(e))}function Dn(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=s?t[n]=Math.max(t[n],e):t.push(s,e)}class ue extends ie{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,o){if(i){if(!(i instanceof ue))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),Uh(this,e,t,i?i.children.slice():[],r,o),!0}split(e){let t=new ue;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Wn(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Bh(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Al(t,this.attrs||{})),i&&(this.attrs=Al({class:i},this.attrs||{}))}domAtPos(e){return bh(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Lh(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Rl(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&ie.get(n)instanceof Ht;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=ie.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!b.ios||!this.children.some(r=>r instanceof Rt))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Rt)||/[^ -~]/.test(i.text))return null;let n=Bi(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=Gh(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof ue&&this.children.length==0&&e.children.length==0&&Wn(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=t){if(r instanceof ue)return r;if(o>t)break}n=o+r.breakAfter}return null}}class Bt extends ie{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,r,o){return i&&(!(i instanceof Bt)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Ge.before(this.dom):Ge.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Bt(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return la}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):q.empty}domBoundsAround(){return null}become(e){return e instanceof Bt&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof ul?null:Lr(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class ul extends ns{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class _i{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Bt&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ue),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(rn(new js(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Bt)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(rn(new Rt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof es){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof es)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Bt(i.widget||Qs.block,l,i));else{let a=$t.create(i.widget||Qs.inline,l,l?0:i.startSide),E=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<t||i.startSide>0),T=!a.isEditable&&(e<t||r>n.length||i.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!E&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),E&&(c.append(rn(new js(1),n),r),r=n.length+Math.max(0,r-n.length)),c.append(rn(a,n),r),this.atCursorPos=T,this.pendingBuffer=T?e<t||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n,r){let o=new _i(e,t,i,r);return o.openEnd=j.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function rn(s,e){for(let t of e)s=new Ht(t,[s],s.length);return s}class Qs extends ns{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Qs.inline=new Qs("span");Qs.block=new Qs("div");var ae=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(ae||(ae={}));const ms=ae.LTR,aa=ae.RTL;function vh(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const uO=vh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),fO=vh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fl=Object.create(null),dt=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);fl[e]=t,fl[t]=-e}function wh(s){return s<=247?uO[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?fO[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const SO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Jt{get dir(){return this.level%2?aa:ms}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function Fh(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let i=s[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!Fh(i.inner,n.inner))return!1}return!0}const se=[];function dO(s,e,t,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:t,a=r?256:n;for(let E=o,T=a,c=a;E<l;E++){let h=wh(s.charCodeAt(E));h==512?h=T:h==8&&c==4&&(h=16),se[E]=h==4?2:h,h&7&&(c=h),T=h}for(let E=o,T=a,c=a;E<l;E++){let h=se[E];if(h==128)E<l-1&&T==se[E+1]&&T&24?h=se[E]=T:se[E]=256;else if(h==64){let A=E+1;for(;A<l&&se[A]==64;)A++;let u=E&&T==8||A<t&&se[A]==8?c==1?1:8:256;for(let f=E;f<A;f++)se[f]=u;E=A-1}else h==8&&c==1&&(se[E]=1);T=h,h&7&&(c=h)}}}function OO(s,e,t,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let E=o?i[o-1].to:e,T=o<i.length?i[o].from:t;for(let c=E,h,A,u;c<T;c++)if(A=fl[h=s.charCodeAt(c)])if(A<0){for(let f=l-3;f>=0;f-=3)if(dt[f+1]==-A){let S=dt[f+2],d=S&2?n:S&4?S&1?r:n:0;d&&(se[c]=se[dt[f]]=d),l=f;break}}else{if(dt.length==189)break;dt[l++]=c,dt[l++]=h,dt[l++]=a}else if((u=se[c])==2||u==1){let f=u==n;a=f?0:1;for(let S=l-3;S>=0;S-=3){let d=dt[S+2];if(d&2)break;if(f)dt[S+2]|=2;else{if(d&4)break;dt[S+2]|=4}}}}}function IO(s,e,t,i){for(let n=0,r=i;n<=t.length;n++){let o=n?t[n-1].to:s,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let E=se[a];if(E==256){let T=a+1;for(;;)if(T==l){if(n==t.length)break;T=t[n++].to,l=n<t.length?t[n].from:e}else if(se[T]==256)T++;else break;let c=r==1,h=(T<e?se[T]:i)==1,A=c==h?c?1:2:i;for(let u=T,f=n,S=f?t[f-1].to:s;u>a;)u==S&&(u=t[--f].from,S=f?t[f-1].to:s),se[--u]=A;a=T}else r=E,a++}}}function Sl(s,e,t,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,E=0;a<t;){let T=!0,c=!1;if(E==r.length||a<r[E].from){let f=se[a];f!=l&&(T=!1,c=f==16)}let h=!T&&l==1?[]:null,A=T?i:i+1,u=a;e:for(;;)if(E<r.length&&u==r[E].from){if(c)break e;let f=r[E];if(!T)for(let S=f.to,d=E+1;;){if(S==t)break e;if(d<r.length&&r[d].from==S)S=r[d++].to;else{if(se[S]==l)break e;break}}if(E++,h)h.push(f);else{f.from>a&&o.push(new Jt(a,f.from,A));let S=f.direction==ms!=!(A%2);dl(s,S?i+1:i,n,f.inner,f.from,f.to,o),a=f.to}u=f.to}else{if(u==t||(T?se[u]!=l:se[u]==l))break;u++}h?Sl(s,a,u,i+1,n,h,o):a<u&&o.push(new Jt(a,u,A)),a=u}else for(let a=t,E=r.length;a>e;){let T=!0,c=!1;if(!E||a>r[E-1].to){let f=se[a-1];f!=l&&(T=!1,c=f==16)}let h=!T&&l==1?[]:null,A=T?i:i+1,u=a;e:for(;;)if(E&&u==r[E-1].to){if(c)break e;let f=r[--E];if(!T)for(let S=f.from,d=E;;){if(S==e)break e;if(d&&r[d-1].to==S)S=r[--d].from;else{if(se[S-1]==l)break e;break}}if(h)h.push(f);else{f.to<a&&o.push(new Jt(f.to,a,A));let S=f.direction==ms!=!(A%2);dl(s,S?i+1:i,n,f.inner,f.from,f.to,o),a=f.from}u=f.from}else{if(u==e||(T?se[u-1]!=l:se[u-1]==l))break;u--}h?Sl(s,u,a,i+1,n,h,o):u<a&&o.push(new Jt(u,a,A)),a=u}}function dl(s,e,t,i,n,r,o){let l=e%2?2:1;dO(s,n,r,i,l),OO(s,n,r,i,l),IO(n,r,i,l),Sl(s,n,r,e,t,i,o)}function NO(s,e,t){if(!s)return[new Jt(0,0,e==aa?1:0)];if(e==ms&&!t.length&&!SO.test(s))return Yh(s.length);if(t.length)for(;s.length>se.length;)se[se.length]=256;let i=[],n=e==ms?0:1;return dl(s,n,n,t,0,s.length,i),i}function Yh(s){return[new Jt(0,s,0)]}let kh="";function pO(s,e,t,i,n){var r;let o=i.head-s.from,l=Jt.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],E=a.side(n,t);if(o==E){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!n,t),E=a.side(n,t)}let T=Ue(s.text,o,a.forward(n,t));(T<a.from||T>a.to)&&(T=E),kh=s.text.slice(Math.min(o,T),Math.max(o,T));let c=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return c&&T==E&&c.level+(n?0:1)<a.level?_.cursor(c.side(!n,t)+s.from,c.forward(n,t)?1:-1,c.level):_.cursor(T+s.from,a.forward(n,t)?-1:1,a.level)}function CO(s,e,t){for(let i=e;i<t;i++){let n=wh(s.charCodeAt(i));if(n==1)return ms;if(n==2||n==4)return aa}return ms}const Vh=x.define(),Wh=x.define(),Xh=x.define(),Kh=x.define(),Ol=x.define(),$h=x.define(),Jh=x.define(),Ea=x.define(),Ta=x.define(),jh=x.define({combine:s=>s.some(e=>e)}),Qh=x.define({combine:s=>s.some(e=>e)}),qh=x.define();class ks{constructor(e,t="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new ks(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ks(_.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const on=V.define({map:(s,e)=>s.map(e)}),zh=V.define();function $e(s,e,t){let i=s.facet(Kh);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const bt=x.define({combine:s=>s.length?s[0]:!0});let mO=0;const Si=x.define();class Se{constructor(e,t,i,n,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=t||{};return new Se(mO++,e,i,n,l=>{let a=[Si.of(l)];return o&&a.push(Gi.of(E=>{let T=E.plugin(l);return T?o(T):F.none})),r&&a.push(r(l)),a})}static fromClass(e,t){return Se.define(i=>new e(i),t)}}class Zr{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if($e(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){$e(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){$e(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Zh=x.define(),ca=x.define(),Gi=x.define(),eA=x.define(),ha=x.define(),tA=x.define();function aE(s,e){let t=s.state.facet(tA);if(!t.length)return t;let i=t.map(r=>r instanceof Function?r(s):r),n=[];return j.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let E=r-e.from,T=o-e.from,c=n;for(let h=l.length-1;h>=0;h--,a--){let A=l[h].spec.bidiIsolate,u;if(A==null&&(A=CO(e.text,E,T)),a>0&&c.length&&(u=c[c.length-1]).to==E&&u.direction==A)u.to=T,c=u.inner;else{let f={from:E,to:T,direction:A,inner:[]};c.push(f),c=f.inner}}}}),n}const sA=x.define();function Aa(s){let e=0,t=0,i=0,n=0;for(let r of s.state.facet(sA)){let o=r(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const di=x.define();class ot{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new ot(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],E=o-l,T=a?a.fromB:1e9;for(;r<t.length&&t[r]<T;){let c=t[r],h=t[r+1],A=Math.max(l,c),u=Math.min(T,h);if(A<=u&&new ot(A+E,u+E,A,u).addToSet(i),h>T)break;r+=2}if(!a)return i;new ot(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Xn{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=de.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new ot(r,o,l,a))),this.changedRanges=n}static create(e,t,i){return new Xn(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class EE extends ie{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=F.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ue],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ot(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:E,toA:T})=>T<this.minWidthFrom||E>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!UO(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?_O(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:E,to:T}=this.hasComposition;i=new ot(E,T,e.changes.mapPos(E,-1),e.changes.mapPos(T,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(b.ie||b.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=DO(o,l,e.changes);return i=ot.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=b.chrome||b.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Bt&&o.widget instanceof ul&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:E,fromB:T,toB:c}=l,h,A,u,f;if(i&&i.range.fromB<c&&i.range.toB>T){let P=_i.build(this.view.state.doc,T,i.range.fromB,this.decorations,this.dynamicDecorationMap),L=_i.build(this.view.state.doc,i.range.toB,c,this.decorations,this.dynamicDecorationMap);A=P.breakAtStart,u=P.openStart,f=L.openEnd;let M=this.compositionView(i);L.breakAtStart?M.breakAfter=1:L.content.length&&M.merge(M.length,M.length,L.content[0],!1,L.openStart,0)&&(M.breakAfter=L.content[0].breakAfter,L.content.shift()),P.content.length&&M.merge(0,0,P.content[P.content.length-1],!0,0,P.openEnd)&&P.content.pop(),h=P.content.concat(M).concat(L.content)}else({content:h,breakAtStart:A,openStart:u,openEnd:f}=_i.build(this.view.state.doc,T,c,this.decorations,this.dynamicDecorationMap));let{i:S,off:d}=r.findPos(E,1),{i:O,off:p}=r.findPos(a,-1);Mh(this,O,p,S,d,h,A,u,f)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(zh)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Rt(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new Ht(n,[t],t.length);let i=new ue;return i.append(t,0),i}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ie.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],t(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(bt)||this.dom.tabIndex>-1)&&Pn(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),E=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(b.gecko&&l.empty&&!this.hasComposition&&LO(a)){let c=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(c,a.node.childNodes[a.offset]||null)),a=E=new Ge(c,0),o=!0}let T=this.view.observer.selectionRange;(o||!T.focusNode||(!Li(a.node,a.offset,T.anchorNode,T.anchorOffset)||!Li(E.node,E.offset,T.focusNode,T.focusOffset))&&!this.suppressWidgetCursorChange(T,l))&&(this.view.observer.ignore(()=>{b.android&&b.chrome&&this.dom.contains(T.focusNode)&&MO(T.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=bi(this.view.root);if(c)if(l.empty){if(b.gecko){let h=gO(a.node,a.offset);if(h&&h!=3){let A=(h==1?gh:Ph)(a.node,a.offset);A&&(a=new Ge(A.node,A.offset))}}c.collapse(a.node,a.offset),l.bidiLevel!=null&&c.caretBidiLevel!==void 0&&(c.caretBidiLevel=l.bidiLevel)}else if(c.extend){c.collapse(a.node,a.offset);try{c.extend(E.node,E.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,E]=[E,a]),h.setEnd(E.node,E.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,E)),this.impreciseAnchor=a.precise?null:new Ge(T.anchorNode,T.anchorOffset),this.impreciseHead=E.precise?null:new Ge(T.focusNode,T.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Li(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=bi(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=ue.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),E=this.coordsAt(t.head,1);if(!a||!E||a.bottom>E.top)return;let T=this.domAtPos(t.head+t.assoc);i.collapse(T.node,T.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&i.collapse(n,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let r=ie.get(t.childNodes[n]);r instanceof ue&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=ie.get(t.childNodes[n]);r instanceof ue&&(i=r.domAtPos(r.length))}return i?new Ge(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ie.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof ue)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,E=a-l.length;if(a<e)break;if(E<=e&&(E<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof ue&&!(i instanceof ue&&t>=0)))i=l,n=E;else if(i&&E==e&&a==e&&l instanceof Bt&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=E}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof ue))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Rt))return null;let r=Ue(n.text,i);if(r==i)return null;let o=Cs(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==ae.LTR;for(let E=0,T=0;T<this.children.length;T++){let c=this.children[T],h=E+c.length;if(h>n)break;if(E>=i){let A=c.dom.getBoundingClientRect();if(t.push(A.height),o){let u=c.dom.lastChild,f=u?Bi(u):[];if(f.length){let S=f[f.length-1],d=a?S.right-A.left:A.right-S.left;d>l&&(l=d,this.minWidth=r,this.minWidthFrom=E,this.minWidthTo=h)}}}E=h+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ae.RTL:ae.LTR}measureTextSize(){for(let r of this.children)if(r instanceof ue){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Bi(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Dh(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(F.replace({widget:new ul(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return F.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Gi).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(eA).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(j.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let E=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=E.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let E of this.view.state.facet(qh))try{if(E(this.view,e.range,e))return!0}catch(T){$e(this.view.state,T,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=Aa(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;iO(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==ae.LTR)}}function LO(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function iA(s,e){let t=s.observer.selectionRange;if(!t.focusNode)return null;let i=gh(t.focusNode,t.focusOffset),n=Ph(t.focusNode,t.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=ie.get(n.node);if(!l||l instanceof Rt&&l.text!=n.node.nodeValue)r=n;else if(s.docView.lastCompositionAfterCursor){let a=ie.get(i.node);!a||a instanceof Rt&&a.text!=i.node.nodeValue||(r=n)}}if(s.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function _O(s,e,t){let i=iA(s,t);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,E=new ot(a.mapPos(r),a.mapPos(o),r,o),T=[];for(let c=n.parentNode;;c=c.parentNode){let h=ie.get(c);if(h instanceof Ht)T.push({node:c,deco:h.mark});else{if(h instanceof ue||c.nodeName=="DIV"&&c.parentNode==s.contentDOM)return{range:E,text:n,marks:T,line:c};if(c!=s.contentDOM)T.push({node:c,deco:new Ji({inclusive:!0,attributes:AO(c),tagName:c.tagName.toLowerCase()})});else return null}}}function gO(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let PO=class{constructor(){this.changes=[]}compareRange(e,t){Dn(e,t,this.changes)}comparePoint(e,t){Dn(e,t,this.changes)}boundChange(e){Dn(e,e,this.changes)}};function DO(s,e,t){let i=new PO;return j.compare(s,e,t,i),i.changes}function MO(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function UO(s,e){let t=!1;return e&&s.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function yO(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),r=e-n.from;if(n.length==0)return _.cursor(e);r==0?t=1:r==n.length&&(t=-1);let o=r,l=r;t<0?o=Ue(n.text,r,!1):l=Ue(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let E=Ue(n.text,o,!1);if(i(n.text.slice(E,o))!=a)break;o=E}for(;l<n.length;){let E=Ue(n.text,l);if(i(n.text.slice(l,E))!=a)break;l=E}return _.range(o+n.from,l+n.from)}function xO(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function bO(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function eo(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function TE(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function cE(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Il(s,e,t){let i,n,r,o,l=!1,a,E,T,c;for(let u=s.firstChild;u;u=u.nextSibling){let f=Bi(u);for(let S=0;S<f.length;S++){let d=f[S];n&&eo(n,d)&&(d=TE(cE(d,n.bottom),n.top));let O=xO(e,d),p=bO(t,d);if(O==0&&p==0)return u.nodeType==3?hE(u,e,t):Il(u,e,t);if(!i||o>p||o==p&&r>O){i=u,n=d,r=O,o=p;let P=p?t<d.top?-1:1:O?e<d.left?-1:1:0;l=!P||(P>0?S<f.length-1:S>0)}O==0?t>d.bottom&&(!T||T.bottom<d.bottom)?(a=u,T=d):t<d.top&&(!c||c.top>d.top)&&(E=u,c=d):T&&eo(T,d)?T=cE(T,d.bottom):c&&eo(c,d)&&(c=TE(c,d.top))}}if(T&&T.bottom>=t?(i=a,n=T):c&&c.top<=t&&(i=E,n=c),!i)return{node:s,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return hE(i,h,t);if(l&&i.contentEditable!="false")return Il(i,h,t);let A=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:A}}function hE(s,e,t){let i=s.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=Cs(s,l,l+1).getClientRects();for(let E=0;E<a.length;E++){let T=a[E];if(T.top==T.bottom)continue;o||(o=e-T.left);let c=(T.top>t?T.top-t:t-T.bottom)-1;if(T.left-1<=e&&T.right+1>=e&&c<r){let h=e>=(T.left+T.right)/2,A=h;if((b.chrome||b.gecko)&&Cs(s,l).getBoundingClientRect().left==T.right&&(A=!h),c<=0)return{node:s,offset:l+(A?1:0)};n=l+(A?1:0),r=c}}}return{node:s,offset:n>-1?n:o>0?s.nodeValue.length:0}}function nA(s,e,t,i=-1){var n,r;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,a,{docHeight:E}=s.viewState,{x:T,y:c}=e,h=c-l;if(h<0)return 0;if(h>E)return s.state.doc.length;for(let P=s.viewState.heightOracle.textHeight/2,L=!1;a=s.elementAtHeight(h),a.type!=Fe.Text;)for(;h=i>0?a.bottom+P:a.top-P,!(h>=0&&h<=E);){if(L)return t?null:0;L=!0,i=-i}c=l+h;let A=a.from;if(A<s.viewport.from)return s.viewport.from==0?0:t?null:AE(s,o,a,T,c);if(A>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:AE(s,o,a,T,c);let u=s.dom.ownerDocument,f=s.root.elementFromPoint?s.root:u,S=f.elementFromPoint(T,c);S&&!s.contentDOM.contains(S)&&(S=null),S||(T=Math.max(o.left+1,Math.min(o.right-1,T)),S=f.elementFromPoint(T,c),S&&!s.contentDOM.contains(S)&&(S=null));let d,O=-1;if(S&&((n=s.docView.nearest(S))===null||n===void 0?void 0:n.isEditable)!=!1){if(u.caretPositionFromPoint){let P=u.caretPositionFromPoint(T,c);P&&({offsetNode:d,offset:O}=P)}else if(u.caretRangeFromPoint){let P=u.caretRangeFromPoint(T,c);P&&({startContainer:d,startOffset:O}=P,(!s.contentDOM.contains(d)||b.safari&&BO(d,O,T)||b.chrome&&GO(d,O,T))&&(d=void 0))}d&&(O=Math.min(Dt(d),O))}if(!d||!s.docView.dom.contains(d)){let P=ue.find(s.docView,A);if(!P)return h>a.top+a.height/2?a.to:a.from;({node:d,offset:O}=Il(P.dom,T,c))}let p=s.docView.nearest(d);if(!p)return null;if(p.isWidget&&((r=p.dom)===null||r===void 0?void 0:r.nodeType)==1){let P=p.dom.getBoundingClientRect();return e.y<P.top||e.y<=P.bottom&&e.x<=(P.left+P.right)/2?p.posAtStart:p.posAtEnd}else return p.localPosFromDOM(d,O)+p.posAtStart}function AE(s,e,t,i,n){let r=Math.round((i-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(s.defaultLineHeight-l)*.5)/l);r+=a*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+ol(o,r,s.state.tabSize)}function BO(s,e,t){let i;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(let n=s.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Cs(s,i-1,i).getBoundingClientRect().left>t}function GO(s,e,t){if(e!=0)return!1;for(let n=s;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=s.nodeType==1?s.getBoundingClientRect():Cs(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Nl(s,e,t){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==Fe.Text&&(n.type!=r.type||(t<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function HO(s,e,t,i){let n=Nl(s,e.head,e.assoc||-1),r=!i||n.type!=Fe.Text||!(s.lineWrapping||n.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(n.from),a=s.posAtCoords({x:t==(l==ae.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return _.cursor(a,t?-1:1)}return _.cursor(t?n.to:n.from,t?-1:1)}function RE(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=s.bidiSpans(n),o=s.textDirectionAt(n.from);for(let l=e,a=null;;){let E=pO(n,r,o,l,t),T=kh;if(!E){if(n.number==(t?s.state.doc.lines:1))return l;T=`
`,n=s.state.doc.line(n.number+(t?1:-1)),r=s.bidiSpans(n),E=s.visualLineSide(n,!t)}if(a){if(!a(T))return l}else{if(!i)return E;a=i(T)}l=E}}function vO(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return r=>{let o=i(r);return n==Te.Space&&(n=o),n==o}}function wO(s,e,t,i){let n=e.head,r=t?1:-1;if(n==(t?s.state.doc.length:0))return _.cursor(n,e.assoc);let o=e.goalColumn,l,a=s.contentDOM.getBoundingClientRect(),E=s.coordsAtPos(n,e.assoc||-1),T=s.documentTop;if(E)o==null&&(o=E.left-a.left),l=r<0?E.top:E.bottom;else{let A=s.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,s.defaultCharacterWidth*(n-A.from))),l=(r<0?A.top:A.bottom)+T}let c=a.left+o,h=i??s.viewState.heightOracle.textHeight>>1;for(let A=0;;A+=10){let u=l+(h+A)*r,f=nA(s,{x:c,y:u},!1,r);if(u<a.top||u>a.bottom||(r<0?f<n:f>n)){let S=s.docView.coordsForChar(f),d=!S||u<S.top?-1:1;return _.cursor(f,d,void 0,o)}}}function Mn(s,e,t){for(;;){let i=0;for(let n of s)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||t||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function to(s,e,t){let i=Mn(s.state.facet(ha).map(n=>n(s)),t.from,e.head>t.from?-1:1);return i==t.from?t:_.cursor(i,i<t.from?1:-1)}const Oi="￿";class FO{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Q.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Oi}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=ie.get(n),a=ie.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Vn(n))||Vn(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=ie.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(YO(e,i.node,i.offset)?t:0))}}function YO(s,e,t){for(;;){if(!e||t<Dt(e))return!1;if(e==s)return!0;t=ps(e)+1,e=e.parentNode}}class uE{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class kO{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||o?[]:XO(e),a=new FO(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=KO(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!El(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),E=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!El(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),T=e.viewport;if((b.ios||b.chrome)&&e.state.selection.main.empty&&a!=E&&(T.from>0||T.to<e.state.doc.length)){let c=Math.min(a,E),h=Math.max(a,E),A=T.from-c,u=T.to-h;(A==0||A==1||c==0)&&(u==0||u==-1||h==e.state.doc.length)&&(a=0,E=e.state.doc.length)}this.newSel=_.single(E,a)}}}function rA(s,e){let t,{newSel:i}=e,n=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,E=null;(r===8||b.android&&e.text.length<l-o)&&(a=n.to,E="end");let T=WO(s.state.doc.sliceString(o,l,Oi),e.text,a-o,E);T&&(b.chrome&&r==13&&T.toB==T.from+2&&e.text.slice(T.from,T.toB)==Oi+Oi&&T.toB--,t={from:o+T.from,to:o+T.toA,insert:q.of(e.text.slice(T.from,T.toB).split(Oi))})}else i&&(!s.hasFocus&&s.state.facet(bt)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,n.to)}:(b.mac||b.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=_.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:q.of([t.insert.toString().replace("."," ")])}):t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,n.to))}:b.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=_.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:q.of([" "])}),t)return Ra(s,t,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin),s.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Ra(s,e,t,i=-1){if(b.ios&&s.inputState.flushIOSKey(e))return!0;let n=s.state.selection.main;if(b.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&s.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ys(s.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&Ys(s.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&Ys(s.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,l=()=>o||(o=VO(s,e,t));return s.state.facet($h).some(a=>a(s,e.from,e.to,r,l))||s.dispatch(l()),!0}function VO(s,e,t){let i,n=s.state,r=n.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let l=r.from<e.from?n.sliceDoc(r.from,e.from):"",a=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(s.state.toText(l+e.insert.sliceString(0,void 0,s.state.lineBreak)+a))}else{let l=n.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(n.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let E=s.state.sliceDoc(e.from,e.to),T,c=t&&iA(s,t.main.head);if(c){let u=e.insert.length-(e.to-e.from);T={from:c.from,to:c.to-u}}else T=s.state.doc.lineAt(r.head);let h=r.to-e.to,A=r.to-r.from;i=n.changeByRange(u=>{if(u.from==r.from&&u.to==r.to)return{changes:l,range:a||u.map(l)};let f=u.to-h,S=f-E.length;if(u.to-u.from!=A||s.state.sliceDoc(S,f)!=E||u.to>=T.from&&u.from<=T.to)return{range:u};let d=n.changes({from:S,to:f,insert:e.insert}),O=u.to-r.to;return{changes:d,range:a?_.range(Math.max(0,a.anchor+O),Math.max(0,a.head+O)):u.map(d)}})}else i={changes:l,selection:a&&n.selection.replaceRange(a)}}let o="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,o+=".compose",s.inputState.compositionFirstChange&&(o+=".start",s.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:o,scrollIntoView:!0})}function WO(s,e,t,i){let n=Math.min(s.length,e.length),r=0;for(;r<n&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&s.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function XO(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new uE(t,i)),(n!=t||r!=i)&&e.push(new uE(n,r))),e}function KO(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?_.single(t+e,i+e):null}class $O{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,b.safari&&e.contentDOM.addEventListener("input",()=>null),b.gecko&&EI(e.contentDOM.ownerDocument)}handleEvent(e){!tI(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=JO(e),i=this.handlers,n=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!t[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&lA.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),b.android&&b.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return b.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=oA.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||jO.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ys(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:b.safari&&!b.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function fE(s,e){return(t,i)=>{try{return e.call(s,i,t)}catch(n){$e(t.state,n)}}}function JO(s){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of s){let n=i.spec;if(n&&n.domEventHandlers)for(let r in n.domEventHandlers){let o=n.domEventHandlers[r];o&&t(r).handlers.push(fE(i.value,o))}if(n&&n.domEventObservers)for(let r in n.domEventObservers){let o=n.domEventObservers[r];o&&t(r).observers.push(fE(i.value,o))}}for(let i in ut)t(i).handlers.push(ut[i]);for(let i in at)t(i).observers.push(at[i]);return e}const oA=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],jO="dthko",lA=[16,17,18,20,91,92,224,225],ln=6;function an(s){return Math.max(0,s)*.7+8}function QO(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class qO{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=nO(e.contentDOM),this.atoms=e.state.facet(ha).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Q.allowMultipleSelections)&&zO(e,t),this.dragging=eI(e,t)&&TA(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&QO(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Aa(this.view);e.clientX-a.left<=n+ln?t=-an(n-e.clientX):e.clientX+a.right>=o-ln&&(t=an(e.clientX-o)),e.clientY-a.top<=r+ln?i=-an(r-e.clientY):e.clientY+a.bottom>=l-ln&&(i=an(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=Mn(this.atoms,n.from,0);o!=n.from&&(r=_.cursor(o,-1))}else{let o=Mn(this.atoms,n.from,-1),l=Mn(this.atoms,n.to,1);(o!=n.from||l!=n.to)&&(r=_.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?_.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function zO(s,e){let t=s.state.facet(Vh);return t.length?t[0](e):b.mac?e.metaKey:e.ctrlKey}function ZO(s,e){let t=s.state.facet(Wh);return t.length?t[0](e):b.mac?!e.altKey:!e.ctrlKey}function eI(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=bi(s.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function tI(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ie.get(t))&&i.ignoreEvent(e))return!1;return!0}const ut=Object.create(null),at=Object.create(null),aA=b.ie&&b.ie_version<15||b.ios&&b.webkit_version<604;function sI(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),EA(s,t.value)},50)}function gr(s,e,t){for(let i of s.facet(e))t=i(t,s);return t}function EA(s,e){e=gr(s.state,Ea,e);let{state:t}=s,i,n=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(pl!=null&&t.selection.ranges.every(a=>a.empty)&&pl==r.toString()){let a=-1;i=t.changeByRange(E=>{let T=t.doc.lineAt(E.from);if(T.from==a)return{range:E};a=T.from;let c=t.toText((o?r.line(n++).text:e)+t.lineBreak);return{changes:{from:T.from,insert:c},range:_.cursor(E.from+c.length)}})}else o?i=t.changeByRange(a=>{let E=r.line(n++);return{changes:{from:a.from,to:a.to,insert:E.text},range:_.cursor(a.from+E.length)}}):i=t.replaceSelection(r);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}at.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};ut.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1);at.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};at.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};ut.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of s.state.facet(Xh))if(t=i(s,e),t)break;if(!t&&e.button==0&&(t=rI(s,e)),t){let i=!s.hasFocus;s.inputState.startMouseSelection(new qO(s,e,t,i)),i&&s.observer.ignore(()=>{mh(s.contentDOM);let r=s.root.activeElement;r&&!r.contains(s.contentDOM)&&r.blur()});let n=s.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}return!1};function SE(s,e,t,i){if(i==1)return _.cursor(e,t);if(i==2)return yO(s.state,e,t);{let n=ue.find(s.docView,e),r=s.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,_.range(o,l)}}let dE=(s,e,t)=>e>=t.top&&e<=t.bottom&&s>=t.left&&s<=t.right;function iI(s,e,t,i){let n=ue.find(s.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&dE(t,i,o))return-1;let l=n.coordsAt(r,1);return l&&dE(t,i,l)?1:o&&o.bottom>=i?-1:1}function OE(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:iI(s,t,e.clientX,e.clientY)}}const nI=b.ie&&b.ie_version<=11;let IE=null,NE=0,pE=0;function TA(s){if(!nI)return s.detail;let e=IE,t=pE;return IE=s,pE=Date.now(),NE=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(NE+1)%3:1}function rI(s,e){let t=OE(s,e),i=TA(e),n=s.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),n=n.map(r.changes))},get(r,o,l){let a=OE(s,r),E,T=SE(s,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let c=SE(s,t.pos,t.bias,i),h=Math.min(c.from,T.from),A=Math.max(c.to,T.to);T=h<T.from?_.range(h,A):_.range(A,h)}return o?n.replaceRange(n.main.extend(T.from,T.to)):l&&i==1&&n.ranges.length>1&&(E=oI(n,a.pos))?E:l?n.addRange(T):_.create([T])}}}function oI(s,e){for(let t=0;t<s.ranges.length;t++){let{from:i,to:n}=s.ranges[t];if(i<=e&&n>=e)return _.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}ut.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let n=s.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=t.to||o<=t.from)&&(t=_.range(r,o))}}let{inputState:i}=s;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",gr(s.state,Ta,s.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ut.dragend=s=>(s.inputState.draggedContent=null,!1);function CE(s,e,t,i){if(t=gr(s.state,Ea,t),!t)return;let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=s.inputState,o=i&&r&&ZO(s,e)?{from:r.from,to:r.to}:null,l={from:n,insert:t},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}ut.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,r=()=>{++n==t.length&&CE(s,e,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return CE(s,e,i,!0),!0}return!1};ut.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=aA?null:e.clipboardData;return t?(EA(s,t.getData("text/plain")||t.getData("text/uri-list")),!0):(sI(s),!1)};function lI(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function aI(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:gr(s,Ta,e.join(s.lineBreak)),ranges:t,linewise:i}}let pl=null;ut.copy=ut.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=aI(s.state);if(!t&&!n)return!1;pl=n?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=aA?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(lI(s,t),!1)};const cA=wt.define();function hA(s,e){let t=[];for(let i of s.facet(Jh)){let n=i(s,e);n&&t.push(n)}return t.length?s.update({effects:t,annotations:cA.of(!0)}):null}function AA(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=hA(s.state,e);t?s.dispatch(t):s.update([])}},10)}at.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),AA(s)};at.blur=s=>{s.observer.clearSelectionRange(),AA(s)};at.compositionstart=at.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))};at.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,b.chrome&&b.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))};at.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};ut.beforeinput=(s,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&s.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=s.posAtDOM(l.startContainer,l.startOffset),E=s.posAtDOM(l.endContainer,l.endOffset);return Ra(s,{from:a,to:E,insert:s.state.toText(r)},null),!0}}let n;if(b.chrome&&b.android&&(n=oA.find(r=>r.inputType==e.inputType))&&(s.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return b.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),b.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>at.compositionend(s,e),20),!1};const mE=new Set;function EI(s){mE.has(s)||(mE.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const LE=["pre-wrap","normal","pre-line","break-spaces"];let qs=!1;function _E(){qs=!1}class TI{constructor(e){this.lineWrapping=e,this.doc=q.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return LE.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,r,o){let l=LE.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let E=0;E<o.length;E++){let T=o[E];T<0?E++:this.heightSamples[Math.floor(T*10)]=!0}}return a}}class cI{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class mt{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?Fe.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof es?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new mt(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var le=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(le||(le={}));const Un=.001;class Ye{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Un&&(qs=!0),this.height=e)}replace(e,t,i){return Ye.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:E,fromB:T,toB:c}=n[l],h=r.lineAt(a,le.ByPosNoHeight,i.setDoc(t),0,0),A=h.to>=E?h:r.lineAt(E,le.ByPosNoHeight,i,0,0);for(c+=A.to-E,E=A.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,T=n[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,le.ByPosNoHeight,i,0,0));T+=h.from-a,a=h.from;let u=ua.build(i.setDoc(o),e,T,c);r=Kn(r,r.replace(a,E,u))}return r.updateHeight(i,0)}static empty(){return new ze(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new hI(Ye.of(e.slice(0,t)),o,Ye.of(e.slice(i)))}}function Kn(s,e){return s==e?s:(s.constructor!=e.constructor&&(qs=!0),e)}Ye.prototype.size=1;class RA extends Ye{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new mt(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ze extends RA{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new mt(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof ze||n instanceof De&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof De?n=new ze(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Ye.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class De extends Ye{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let E=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),T=t.doc.lineAt(E),c=l+T.length*a,h=Math.max(i,e-c/2);return new mt(T.from,T.length,h,c,0)}else{let E=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:T,length:c}=t.doc.line(r+E);return new mt(T,c,i+l*E,l,0)}}lineAt(e,t,i,n,r){if(t==le.ByHeight)return this.blockAt(e,i,n,r);if(t==le.ByPosNoHeight){let{from:A,to:u}=i.doc.lineAt(e);return new mt(A,u-A,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),E=i.doc.lineAt(e),T=l+E.length*a,c=E.number-o,h=n+l*c+a*(E.from-r-c);return new mt(E.from,E.length,Math.max(n,Math.min(h,n+this.height-T)),T,0)}forEachLine(e,t,i,n,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:E}=this.heightMetrics(i,r);for(let T=e,c=n;T<=t;){let h=i.doc.lineAt(T);if(T==e){let u=h.number-l;c+=a*u+E*(e-r-u)}let A=a+E*h.length;o(new mt(h.from,h.length,c,A,0)),c+=A,T=h.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let r=i[i.length-1];r instanceof De?i[i.length-1]=new De(r.length+n):i.push(null,new De(n-1))}if(e>0){let r=i[0];r instanceof De?i[0]=new De(e+r.length):i.unshift(new De(e-1),null)}return Ye.of(i)}decomposeLeft(e,t){t.push(new De(e-1),null)}decomposeRight(e,t){t.push(null,new De(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new De(n.from-t-1).updateHeight(e,t));l<=r&&n.more;){let T=e.doc.lineAt(l).length;o.length&&o.push(null);let c=n.heights[n.index++];a==-1?a=c:Math.abs(c-a)>=Un&&(a=-2);let h=new ze(T,c);h.outdated=!1,o.push(h),l+=T+1}l<=r&&o.push(null,new De(r-l).updateHeight(e,l));let E=Ye.of(o);return(a<0||Math.abs(E.height-this.height)>=Un||Math.abs(a-this.heightMetrics(e,t).perLine)>=Un)&&(qs=!0),Kn(this,E)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class hI extends Ye{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=t==le.ByHeight?e<o:e<l,E=a?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,o,l);if(this.break||(a?E.to<l:E.from>l))return E;let T=t==le.ByPosNoHeight?le.ByPosNoHeight:le.ByPos;return a?E.join(this.right.lineAt(l,T,i,o,l)):this.left.lineAt(l,T,i,n,r).join(E)}forEachLine(e,t,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,r,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let E=this.lineAt(a,le.ByPos,i,n,r);e<E.from&&this.left.forEachLine(e,E.from-1,i,n,r,o),E.to>=e&&E.from<=t&&o(E),t>E.to&&this.right.forEachLine(E.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&gE(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),gE(r,l)}return Ye.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ye.of(this.break?[e,null,t]:[e,t]):(this.left=Kn(this.left,e),this.right=Kn(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return n&&n.from<=t+r.length&&n.more?a=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function gE(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof De&&(i=s[e+1])instanceof De&&s.splice(e-1,3,new De(t.length+1+i.length))}const AI=5;class ua{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof ze?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ze(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new RA(o,n,i)):(o||r||n>=AI)&&this.addLineDeco(n,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ze(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new De(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ze)return e;let t=new ze(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ze)&&!this.isCovered?this.nodes.push(new ze(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof ze&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let r=new ua(i,e);return j.spans(t,i,n,r,0),r.finish(i)}}function RI(s,e,t){let i=new uI;return j.compare(s,e,t,i,0),i.changes}class uI{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Dn(e,t,this.changes,5)}}function fI(s,e){let t=s.getBoundingClientRect(),i=s.ownerDocument,n=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let E=s.parentNode;E&&E!=i.body;)if(E.nodeType==1){let T=E,c=window.getComputedStyle(T);if((T.scrollHeight>T.clientHeight||T.scrollWidth>T.clientWidth)&&c.overflow!="visible"){let h=T.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(E==s.parentNode?n.innerHeight:a,h.bottom)}E=c.position=="absolute"||c.position=="fixed"?T.offsetParent:T.parentNode}else if(E.nodeType==11)E=E.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function SI(s){let e=s.getBoundingClientRect(),t=s.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function dI(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class so{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,t){return F.replace({widget:new OI(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class OI extends ns{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class PE{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=DE,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ae.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(ca).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new TI(t),this.stateDeco=e.facet(Gi).filter(i=>typeof i!="function"),this.heightMap=Ye.empty().applyChanges(this.stateDeco,q.empty,this.heightOracle.setDoc(e.doc),[new ot(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=F.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new En(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?DE:new fa(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ii(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Gi).filter(T=>typeof T!="function");let n=e.changedRanges,r=ot.extendWithRanges(n,RI(i,this.stateDeco,e?e.changes:de.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);_E(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||qs)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let E=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(E||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Qh)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ae.RTL:ae.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let E=0,T=0;if(l.width&&l.height){let{scaleX:P,scaleY:L}=Ch(t,l);(P>.005&&Math.abs(this.scaleX-P)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=P,this.scaleY=L,E|=16,o=a=!0)}let c=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=h)&&(this.paddingTop=c,this.paddingBottom=h,E|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,E|=16);let A=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=A&&(this.scrollAnchorHeight=-1,this.scrollTop=A),this.scrolledToBottom=_h(e.scrollDOM);let u=(this.printing?dI:fI)(t,this.paddingTop),f=u.top-this.pixelViewport.top,S=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let d=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(d!=this.inView&&(this.inView=d,d&&(a=!0)),!this.inView&&!this.scrollTarget&&!SI(e.dom))return 0;let O=l.width;if((this.contentDOMWidth!=O||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,E|=16),a){let P=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(P)&&(o=!0),o||n.lineWrapping&&Math.abs(O-this.contentDOMWidth)>n.charWidth){let{lineHeight:L,charWidth:M,textHeight:D}=e.docView.measureTextSize();o=L>0&&n.refresh(r,L,M,D,O/M,P),o&&(e.docView.minWidth=0,E|=16)}f>0&&S>0?T=Math.max(f,S):f<0&&S<0&&(T=Math.min(f,S)),_E();for(let L of this.viewports){let M=L.from==this.viewport.from?P:e.docView.measureVisibleLineHeights(L);this.heightMap=(o?Ye.empty().applyChanges(this.stateDeco,q.empty,this.heightOracle,[new ot(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new cI(L.from,M))}qs&&(E|=2)}let p=!this.viewportIsAppropriate(this.viewport,T)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return p&&(E&2&&(E|=this.updateScaler()),this.viewport=this.getViewport(T,this.scrollTarget),E|=this.updateForViewport()),(E&2||p)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),E|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),E}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new En(n.lineAt(o-i*1e3,le.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,le.ByHeight,r,0,0).to);if(t){let{head:E}=t.range;if(E<a.from||E>a.to){let T=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=n.lineAt(E,le.ByPos,r,0,0),h;t.y=="center"?h=(c.top+c.bottom)/2-T/2:t.y=="start"||t.y=="nearest"&&E<a.from?h=c.top:h=c.bottom-T,a=new En(n.lineAt(h-1e3/2,le.ByHeight,r,0,0).from,n.lineAt(h+T+1e3/2,le.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new En(this.heightMap.lineAt(i,le.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,le.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,le.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,le.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new so(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=ae.LTR&&!i)return[];let l=[],a=(T,c,h,A)=>{if(c-T<r)return;let u=this.state.selection.main,f=[u.from];u.empty||f.push(u.to);for(let d of f)if(d>T&&d<c){a(T,d-10,h,A),a(d+10,c,h,A);return}let S=NI(e,d=>d.from>=h.from&&d.to<=h.to&&Math.abs(d.from-T)<r&&Math.abs(d.to-c)<r&&!f.some(O=>d.from<O&&d.to>O));if(!S){if(c<h.to&&t&&i&&t.visibleRanges.some(p=>p.from<=c&&p.to>=c)){let p=t.moveToLineBoundary(_.cursor(c),!1,!0).head;p>T&&(c=p)}let d=this.gapSize(h,T,c,A),O=i||d<2e6?d:2e6;S=new so(T,c,d,O)}l.push(S)},E=T=>{if(T.length<o||T.type!=Fe.Text)return;let c=II(T.from,T.to,this.stateDeco);if(c.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,A,u;if(i){let f=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,d;if(h!=null){let O=cn(c,h),p=((this.visibleBottom-this.visibleTop)/2+f)/T.height;S=O-p,d=O+p}else S=(this.visibleTop-T.top-f)/T.height,d=(this.visibleBottom-T.top+f)/T.height;A=Tn(c,S),u=Tn(c,d)}else{let f=c.total*this.heightOracle.charWidth,S=n*this.heightOracle.charWidth,d=0;if(f>2e6)for(let M of e)M.from>=T.from&&M.from<T.to&&M.size!=M.displaySize&&M.from*this.heightOracle.charWidth+d<this.pixelViewport.left&&(d=M.size-M.displaySize);let O=this.pixelViewport.left+d,p=this.pixelViewport.right+d,P,L;if(h!=null){let M=cn(c,h),D=((p-O)/2+S)/f;P=M-D,L=M+D}else P=(O-S)/f,L=(p+S)/f;A=Tn(c,P),u=Tn(c,L)}A>T.from&&a(T.from,A,T,c),u<T.to&&a(u,T.to,T,c)};for(let T of this.viewportLines)Array.isArray(T.type)?T.type.forEach(E):E(T);return l}gapSize(e,t,i,n){let r=cn(n,i)-cn(n,t);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){so.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=F.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];j.spans(t,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ii(this.heightMap.lineAt(e,le.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ii(this.heightMap.lineAt(this.scaler.fromDOM(e),le.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ii(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let En=class{constructor(e,t){this.from=e,this.to=t}};function II(s,e,t){let i=[],n=s,r=0;return j.spans(t,s,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function Tn({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function cn(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function NI(s,e){for(let t of s)if(e(t))return t}const DE={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class fa{constructor(e,t,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let E=t.lineAt(l,le.ByPos,e,0,0).top,T=t.lineAt(a,le.ByPos,e,0,0).bottom;return n+=T-E,{from:l,to:a,top:E,bottom:T,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof fa?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Ii(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),i=e.toDOM(s.bottom);return new mt(s.from,s.length,t,i-t,Array.isArray(s._content)?s._content.map(n=>Ii(n,e)):s._content)}const hn=x.define({combine:s=>s.join(" ")}),Cl=x.define({combine:s=>s.indexOf(!0)>-1}),ml=zt.newName(),uA=zt.newName(),fA=zt.newName(),SA={"&light":"."+uA,"&dark":"."+fA};function Ll(s,e,t){return new zt(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):s+" "+i}})}const pI=Ll("."+ml,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},SA),CI={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},io=b.ie&&b.ie_version<=11;class mI{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new rO,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(b.ie&&b.ie_version<=11||b.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(b.chrome&&b.chrome_version<126)&&(this.editContext=new _I(e),e.state.facet(bt)&&(e.contentDOM.editContext=this.editContext.editContext)),io&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(bt)?i.root.activeElement!=this.dom:!Pn(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(b.ie&&b.ie_version<=11||b.android&&b.chrome)&&!i.state.selection.main.empty&&n.focusNode&&Li(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=bi(e.root);if(!t)return!1;let i=b.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&LI(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=Pn(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&lO(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,CI),io&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),io&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&Ys(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Pn(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new kO(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=rA(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=ME(t,e.previousSibling||e.target.previousSibling,-1),n=ME(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(bt)!=e.state.facet(bt)&&(e.view.contentDOM.editContext=e.state.facet(bt)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ME(s,e,t){for(;e;){let i=ie.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function UE(s,e){let t=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return Li(o.node,o.offset,n,r)&&([t,i,n,r]=[n,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}}function LI(s,e){if(e.getComposedRanges){let n=e.getComposedRanges(s.root)[0];if(n)return UE(s,n)}let t=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),t?UE(s,t):null}class _I{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let E={from:l,to:a,insert:q.of(i.text.split(`
`))};if(E.from==this.from&&r<this.from?E.from=r:E.to==this.to&&r>this.to&&(E.to=r),E.from==E.to&&!E.insert.length){let T=_.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));T.main.eq(n)||e.dispatch({selection:T,userEvent:"select"});return}if((b.mac||b.android)&&E.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(E={from:l,to:a,insert:q.of([i.text.replace("."," ")])}),this.pendingContextChange=E,!e.state.readOnly){let T=this.to-this.from+(E.to-E.from+E.insert.length);Ra(e,E,_.single(this.toEditorPos(i.selectionStart,T),this.toEditorPos(i.selectionEnd,T)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(o!="None"&&l!="None"){let a=this.toEditorPos(r.rangeStart),E=this.toEditorPos(r.rangeEnd);if(a<E){let T=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;n.push(F.mark({attributes:{style:T}}).range(a,E))}}}e.dispatch({effects:zh.of(F.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=bi(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,E)=>{if(i)return;let T=E.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(E)){n=this.pendingContextChange=null,t+=T,this.to+=T;return}else n=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=T,this.to+=T;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+E.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),E.toString()),this.to+=T}t+=T}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class y{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||oO(e.parent)||document,this.viewState=new PE(e.state||Q.create(e)),e.scrollTo&&e.scrollTo.is(on)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Si).map(n=>new Zr(n));for(let n of this.plugins)n.update(this);this.observer=new mI(this),this.inputState=new $O(this),this.inputState.ensureHandlers(this.plugins),this.docView=new EE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Oe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(cA))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=hA(r,o),a||(l=1));let E=this.observer.delayedAndroidKey,T=null;if(E?(this.observer.clearDelayedAndroidKey(),T=this.observer.readChange(),(T&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(T=null)):this.observer.clear(),r.facet(Q.phrases)!=this.state.facet(Q.phrases))return this.setState(r);n=Xn.create(this,r,e),n.flags|=l;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(c&&(c=c.map(h.changes)),h.scrollIntoView){let{main:A}=h.state.selection;c=new ks(A.empty?A:_.cursor(A.head,A.head>A.anchor?-1:1))}for(let A of h.effects)A.is(on)&&(c=A.value.clip(this.state))}this.viewState.update(n,c),this.bidiCache=$n.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(di)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(hn)!=n.state.facet(hn)&&(this.viewState.mustMeasureContent=!0),(t||i||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(Ol))try{h(n)}catch(A){$e(this.state,A,"update listener")}(a||T)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),T&&!rA(this,T)&&E.force&&Ys(this.contentDOM,E.key,E.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new PE(e),this.plugins=e.facet(Si).map(i=>new Zr(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new EE(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Si),i=e.state.facet(Si);if(t!=i){let n=[];for(let r of i){let o=t.indexOf(r);if(o<0)n.push(new Zr(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){$e(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(_h(i))r=-1,o=this.viewState.heightMap.height;else{let A=this.viewState.scrollAnchorAt(n);r=A.from,o=A.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let E=[];a&4||([this.measureRequests,E]=[E,this.measureRequests]);let T=E.map(A=>{try{return A.read(this)}catch(u){return $e(this.state,u),yE}}),c=Xn.create(this,this.state,[]),h=!1;c.flags|=a,t?t.flags|=a:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let A=0;A<E.length;A++)if(T[A]!=yE)try{let u=E[A];u.write&&u.write(T[A],this)}catch(u){$e(this.state,u)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let u=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(u>1||u<-1){n=n+u,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Ol))l(t)}get themeClasses(){return ml+" "+(this.state.facet(Cl)?fA:uA)+" "+this.state.facet(hn)}updateAttrs(){let e=xE(this,Zh,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(bt)?"true":"false",class:"cm-content",style:`${b.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),xE(this,ca,t);let i=this.observer.ignore(()=>{let n=Rl(this.contentDOM,this.contentAttrs,t),r=Rl(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(y.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(di);let e=this.state.facet(y.cspNonce);zt.mount(this.root,this.styleModules.concat(pI).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return to(this,e,RE(this,e,t,i))}moveByGroup(e,t){return to(this,e,RE(this,e,t,i=>vO(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return _.cursor(r.side(t,n)+e.from,r.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return HO(this,e,t,i)}moveVertically(e,t,i){return to(this,e,wO(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),nA(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Jt.find(r,e-n.from,-1,t)];return Lr(i,o.dir==ae.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(jh)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>gI)return Yh(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||Fh(r.isolates,i=aE(this,e))))return r.order;i||(i=aE(this,e));let n=NO(e.text,t,i);return this.bidiCache.push(new $n(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||b.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{mh(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return on.of(new ks(typeof e=="number"?_.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return on.of(new ks(_.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Se.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Se.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=zt.newName(),n=[hn.of(i),di.of(Ll(`.${i}`,e))];return t&&t.dark&&n.push(Cl.of(!0)),n}static baseTheme(e){return vt.lowest(di.of(Ll("."+ml,e,SA)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&ie.get(i)||ie.get(e);return((t=n==null?void 0:n.rootView)===null||t===void 0?void 0:t.view)||null}}y.styleModule=di;y.inputHandler=$h;y.clipboardInputFilter=Ea;y.clipboardOutputFilter=Ta;y.scrollHandler=qh;y.focusChangeEffect=Jh;y.perLineTextDirection=jh;y.exceptionSink=Kh;y.updateListener=Ol;y.editable=bt;y.mouseSelectionStyle=Xh;y.dragMovesSelection=Wh;y.clickAddsSelectionRange=Vh;y.decorations=Gi;y.outerDecorations=eA;y.atomicRanges=ha;y.bidiIsolatedRanges=tA;y.scrollMargins=sA;y.darkTheme=Cl;y.cspNonce=x.define({combine:s=>s.length?s[0]:""});y.contentAttributes=ca;y.editorAttributes=Zh;y.lineWrapping=y.contentAttributes.of({class:"cm-lineWrapping"});y.announce=V.define();const gI=4096,yE={};class $n{constructor(e,t,i,n,r,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:ae.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new $n(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function xE(s,e,t){for(let i=s.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(s):r;o&&Al(o,t)}return t}const PI=b.mac?"mac":b.windows?"win":b.linux?"linux":"key";function DI(s,e){const t=s.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<t.length-1;++a){const E=t[a];if(/^(cmd|meta|m)$/i.test(E))l=!0;else if(/^a(lt)?$/i.test(E))n=!0;else if(/^(c|ctrl|control)$/i.test(E))r=!0;else if(/^s(hift)?$/i.test(E))o=!0;else if(/^mod$/i.test(E))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+E)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function An(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const MI=vt.default(y.domEventHandlers({keydown(s,e){return OA(dA(e.state),s,e,"editor")}})),ni=x.define({enables:MI}),bE=new WeakMap;function dA(s){let e=s.facet(ni),t=bE.get(e);return t||bE.set(e,t=xI(e.reduce((i,n)=>i.concat(n),[]))),t}function UI(s,e,t){return OA(dA(s.state),e,s,t)}let Xt=null;const yI=4e3;function xI(s,e=PI){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,E,T)=>{var c,h;let A=t[o]||(t[o]=Object.create(null)),u=l.split(/ (?!$)/).map(d=>DI(d,e));for(let d=1;d<u.length;d++){let O=u.slice(0,d).join(" ");n(O,!0),A[O]||(A[O]={preventDefault:!0,stopPropagation:!1,run:[p=>{let P=Xt={view:p,prefix:O,scope:o};return setTimeout(()=>{Xt==P&&(Xt=null)},yI),!0}]})}let f=u.join(" ");n(f,!1);let S=A[f]||(A[f]={preventDefault:!1,stopPropagation:!1,run:((h=(c=A._any)===null||c===void 0?void 0:c.run)===null||h===void 0?void 0:h.slice())||[]});a&&S.run.push(a),E&&(S.preventDefault=!0),T&&(S.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let E of l){let T=t[E]||(t[E]=Object.create(null));T._any||(T._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=o;for(let h in T)T[h].run.push(A=>c(A,_l))}let a=o[e]||o.key;if(a)for(let E of l)r(E,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(E,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let _l=null;function OA(s,e,t,i){_l=e;let n=tO(e),r=Xe(n,0),o=Ct(r)==n.length&&n!=" ",l="",a=!1,E=!1,T=!1;Xt&&Xt.view==t&&Xt.scope==i&&(l=Xt.prefix+" ",lA.indexOf(e.keyCode)<0&&(E=!0,Xt=null));let c=new Set,h=S=>{if(S){for(let d of S.run)if(!c.has(d)&&(c.add(d),d(t)))return S.stopPropagation&&(T=!0),!0;S.preventDefault&&(S.stopPropagation&&(T=!0),E=!0)}return!1},A=s[i],u,f;return A&&(h(A[l+An(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(b.windows&&e.ctrlKey&&e.altKey)&&(u=Zt[e.keyCode])&&u!=n?(h(A[l+An(u,e,!0)])||e.shiftKey&&(f=xi[e.keyCode])!=n&&f!=u&&h(A[l+An(f,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(A[l+An(n,e,!0)])&&(a=!0),!a&&h(A._any)&&(a=!0)),E&&(a=!0),a&&T&&e.stopPropagation(),_l=null,a}class Qi{constructor(e,t,i,n,r){this.className=e,this.left=t,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=IA(e);return[new Qi(t,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return bI(e,t,i)}}function IA(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==ae.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function BE(s,e,t,i){let n=s.coordsAtPos(e,t*2);if(!n)return i;let r=s.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=s.posAtCoords({x:r.left+1,y:o}),a=s.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function bI(s,e,t){if(t.to<=s.viewport.from||t.from>=s.viewport.to)return[];let i=Math.max(t.from,s.viewport.from),n=Math.min(t.to,s.viewport.to),r=s.textDirection==ae.LTR,o=s.contentDOM,l=o.getBoundingClientRect(),a=IA(s),E=o.querySelector(".cm-line"),T=E&&window.getComputedStyle(E),c=l.left+(T?parseInt(T.paddingLeft)+Math.min(0,parseInt(T.textIndent)):0),h=l.right-(T?parseInt(T.paddingRight):0),A=Nl(s,i,1),u=Nl(s,n,-1),f=A.type==Fe.Text?A:null,S=u.type==Fe.Text?u:null;if(f&&(s.lineWrapping||A.widgetLineBreaks)&&(f=BE(s,i,1,f)),S&&(s.lineWrapping||u.widgetLineBreaks)&&(S=BE(s,n,-1,S)),f&&S&&f.from==S.from&&f.to==S.to)return O(p(t.from,t.to,f));{let L=f?p(t.from,null,f):P(A,!1),M=S?p(null,t.to,S):P(u,!0),D=[];return(f||A).to<(S||u).from-(f&&S?1:0)||A.widgetLineBreaks>1&&L.bottom+s.defaultLineHeight/2<M.top?D.push(d(c,L.bottom,h,M.top)):L.bottom<M.top&&s.elementAtHeight((L.bottom+M.top)/2).type==Fe.Text&&(L.bottom=M.top=(L.bottom+M.top)/2),O(L).concat(D).concat(O(M))}function d(L,M,D,H){return new Qi(e,L-a.left,M-a.top,D-L,H-M)}function O({top:L,bottom:M,horizontal:D}){let H=[];for(let Y=0;Y<D.length;Y+=2)H.push(d(D[Y],L,D[Y+1],M));return H}function p(L,M,D){let H=1e9,Y=-1e9,X=[];function v(W,J,ee,Ee,Re){let ne=s.coordsAtPos(W,W==D.to?-2:2),xe=s.coordsAtPos(ee,ee==D.from?2:-2);!ne||!xe||(H=Math.min(ne.top,xe.top,H),Y=Math.max(ne.bottom,xe.bottom,Y),Re==ae.LTR?X.push(r&&J?c:ne.left,r&&Ee?h:xe.right):X.push(!r&&Ee?c:xe.left,!r&&J?h:ne.right))}let B=L??D.from,K=M??D.to;for(let W of s.visibleRanges)if(W.to>B&&W.from<K)for(let J=Math.max(W.from,B),ee=Math.min(W.to,K);;){let Ee=s.state.doc.lineAt(J);for(let Re of s.bidiSpans(Ee)){let ne=Re.from+Ee.from,xe=Re.to+Ee.from;if(ne>=ee)break;xe>J&&v(Math.max(ne,J),L==null&&ne<=B,Math.min(xe,ee),M==null&&xe>=K,Re.dir)}if(J=Ee.to+1,J>=ee)break}return X.length==0&&v(B,L==null,K,M==null,s.textDirection),{top:H,bottom:Y,horizontal:X}}function P(L,M){let D=l.top+(M?L.top:L.bottom);return{top:D,bottom:D,horizontal:[]}}}function BI(s,e){return s.constructor==e.constructor&&s.eq(e)}class GI{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(yn)!=e.state.facet(yn)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(yn);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!BI(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const yn=x.define();function NA(s){return[Se.define(e=>new GI(e,s)),yn.of(s)]}const Hi=x.define({combine(s){return Ut(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function HI(s={}){return[Hi.of(s),vI,wI,FI,Qh.of(!0)]}function pA(s){return s.startState.facet(Hi)!=s.state.facet(Hi)}const vI=NA({above:!0,markers(s){let{state:e}=s,t=e.facet(Hi),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:_.cursor(n.head,n.head>n.anchor?-1:1);for(let a of Qi.forRange(s,o,l))i.push(a)}}return i},update(s,e){s.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=pA(s);return t&&GE(s.state,e),s.docChanged||s.selectionSet||t},mount(s,e){GE(e.state,s)},class:"cm-cursorLayer"});function GE(s,e){e.style.animationDuration=s.facet(Hi).cursorBlinkRate+"ms"}const wI=NA({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:Qi.forRange(s,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||pA(s)},class:"cm-selectionLayer"}),FI=vt.highest(y.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),CA=V.define({map(s,e){return s==null?null:e.mapPos(s)}}),Ni=pe.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,i)=>i.is(CA)?i.value:t,s)}}),YI=Se.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(Ni);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(Ni)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(Ni),t=e!=null&&s.coordsAtPos(e);if(!t)return null;let i=s.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+s.scrollDOM.scrollLeft*s.scaleX,top:t.top-i.top+s.scrollDOM.scrollTop*s.scaleY,height:t.bottom-t.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/t+"px",this.cursor.style.height=s.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(Ni)!=s&&this.view.dispatch({effects:CA.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function kI(){return[Ni,YI]}function HE(s,e,t,i,n){e.lastIndex=0;for(let r=s.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function VI(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let i=[];for(let{from:n,to:r}of t)n=Math.max(s.state.doc.lineAt(n).from,n-e),r=Math.min(s.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class WI{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,E,T)=>n(T,E,E+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,E,T)=>{let c=i(l,a,E);c&&T(E,E+l[0].length,c)};else if(i)this.addMatch=(l,a,E,T)=>T(E,E+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new Gt,i=t.add.bind(t);for(let{from:n,to:r}of VI(e,this.maxLength))HE(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>o){let a=e.state.doc.lineAt(o),E=a.to<l?e.state.doc.lineAt(l):a,T=Math.max(r.from,a.from),c=Math.min(r.to,E.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){T=o;break}for(;l<E.to;l++)if(this.boundary.test(E.text[l-E.from])){c=l;break}}let h=[],A,u=(f,S,d)=>h.push(d.range(f,S));if(a==E)for(this.regexp.lastIndex=T-a.from;(A=this.regexp.exec(a.text))&&A.index<c-a.from;)this.addMatch(A,e,A.index+a.from,u);else HE(e.state.doc,this.regexp,T,c,(f,S)=>this.addMatch(S,e,f,u));t=t.update({filterFrom:T,filterTo:c,filter:(f,S)=>f<T||S>c,add:h})}}return t}}const gl=/x/.unicode!=null?"gu":"g",XI=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,gl),KI={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let no=null;function $I(){var s;if(no==null&&typeof document<"u"&&document.body){let e=document.body.style;no=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return no||!1}const xn=x.define({combine(s){let e=Ut(s,{render:null,specialChars:XI,addSpecialChars:null});return(e.replaceTabs=!$I())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,gl)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,gl)),e}});function JI(s={}){return[xn.of(s),jI()]}let vE=null;function jI(){return vE||(vE=Se.fromClass(class{constructor(s){this.view=s,this.decorations=F.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(xn)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new WI({regexp:s.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,r=Xe(e[0],0);if(r==9){let o=n.lineAt(i),l=t.state.tabSize,a=ii(o.text,l,i-o.from);return F.replace({widget:new ZI((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=F.replace({widget:new zI(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(xn);s.startState.facet(xn)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const QI="•";function qI(s){return s>=32?QI:s==10?"␤":String.fromCharCode(9216+s)}class zI extends ns{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=qI(this.code),i=e.state.phrase("Control character")+" "+(KI[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class ZI extends ns{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function eN(){return sN}const tN=F.line({class:"cm-activeLine"}),sN=Se.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){let n=s.lineBlockAt(i.head);n.from>e&&(t.push(tN.range(n.from)),e=n.from)}return F.set(t)}},{decorations:s=>s.decorations}),Pl=2e3;function iN(s,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),r=[];if(e.off>Pl||t.off>Pl||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let E=s.doc.line(a);E.length<=l&&r.push(_.range(E.from+o,E.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let E=s.doc.line(a),T=ol(E.text,o,s.tabSize,!0);if(T<0)r.push(_.cursor(E.to));else{let c=ol(E.text,l,s.tabSize);r.push(_.range(E.from+T,E.from+c))}}}return r}function nN(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function wE(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1),i=s.state.doc.lineAt(t),n=t-i.from,r=n>Pl?-1:n==i.length?nN(s,e.clientX):ii(i.text,s.state.tabSize,t-i.from);return{line:i.number,col:r,off:n}}function rN(s,e){let t=wE(s,e),i=s.state.selection;return t?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=wE(s,n);if(!l)return i;let a=iN(s.state,t,l);return a.length?o?_.create(a.concat(i.ranges)):_.create(a):i}}:null}function oN(s){let e=t=>t.altKey&&t.button==0;return y.mouseSelectionStyle.of((t,i)=>e(i)?rN(t,i):null)}const lN={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},aN={style:"cursor: crosshair"};function EN(s={}){let[e,t]=lN[s.key||"Alt"],i=Se.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,y.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?aN:null})]}const ci="-10000px";class mA{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,t){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<r.length;a++){let E=r[a],T=-1;if(E){for(let c=0;c<this.tooltips.length;c++){let h=this.tooltips[c];h&&h.create==E.create&&(T=c)}if(T<0)o[a]=this.createTooltipView(E,a?o[a-1]:null),l&&(l[a]=!!E.above);else{let c=o[a]=this.tooltipViews[T];l&&(l[a]=t[T]),c.update&&c.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,E)=>t[E]=a),t.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function TN(s){let e=s.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const ro=x.define({combine:s=>{var e,t,i;return{position:b.ios?"absolute":((e=s.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=s.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||TN}}}),FE=new WeakMap,Sa=Se.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(ro);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new mA(s,da,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let t=e||s.geometryChanged,i=s.state.facet(ro);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s,e){let t=s.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),s.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=ci,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var s,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(s=i.destroy)===null||s===void 0||s.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(b.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==ci&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(s=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Aa(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(ro).tooltipSpace(this.view),scaleX:s,scaleY:e,makeAbsolute:t}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:i,scaleX:n,scaleY:r}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],E=this.manager.tooltipViews[l],{dom:T}=E,c=s.pos[l],h=s.size[l];if(!c||a.clip!==!1&&(c.bottom<=Math.max(t.top,i.top)||c.top>=Math.min(t.bottom,i.bottom)||c.right<Math.max(t.left,i.left)-.1||c.left>Math.min(t.right,i.right)+.1)){T.style.top=ci;continue}let A=a.arrow?E.dom.querySelector(".cm-tooltip-arrow"):null,u=A?7:0,f=h.right-h.left,S=(e=FE.get(E))!==null&&e!==void 0?e:h.bottom-h.top,d=E.offset||hN,O=this.view.textDirection==ae.LTR,p=h.width>i.right-i.left?O?i.left:i.right-h.width:O?Math.max(i.left,Math.min(c.left-(A?14:0)+d.x,i.right-f)):Math.min(Math.max(i.left,c.left-f+(A?14:0)-d.x),i.right-f),P=this.above[l];!a.strictSide&&(P?c.top-S-u-d.y<i.top:c.bottom+S+u+d.y>i.bottom)&&P==i.bottom-c.bottom>c.top-i.top&&(P=this.above[l]=!P);let L=(P?c.top-i.top:i.bottom-c.bottom)-u;if(L<S&&E.resize!==!1){if(L<this.view.defaultLineHeight){T.style.top=ci;continue}FE.set(E,S),T.style.height=(S=L)/r+"px"}else T.style.height&&(T.style.height="");let M=P?c.top-S-u-d.y:c.bottom+u+d.y,D=p+f;if(E.overlap!==!0)for(let H of o)H.left<D&&H.right>p&&H.top<M+S&&H.bottom>M&&(M=P?H.top-S-2-u:H.bottom+u+2);if(this.position=="absolute"?(T.style.top=(M-s.parent.top)/r+"px",YE(T,(p-s.parent.left)/n)):(T.style.top=M/r+"px",YE(T,p/n)),A){let H=c.left+(O?d.x:-d.x)-(p+14-7);A.style.left=H/n+"px"}E.overlap!==!0&&o.push({left:p,top:M,right:D,bottom:M+S}),T.classList.toggle("cm-tooltip-above",P),T.classList.toggle("cm-tooltip-below",!P),E.positioned&&E.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=ci}},{eventObservers:{scroll(){this.maybeMeasure()}}});function YE(s,e){let t=parseInt(s.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(s.style.left=e+"px")}const cN=y.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),hN={x:0,y:0},da=x.define({enables:[Sa,cN]}),Jn=x.define({combine:s=>s.reduce((e,t)=>e.concat(t),[])});class Pr{static create(e){return new Pr(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new mA(e,Jn,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const AN=da.compute([Jn],s=>{let e=s.facet(Jn);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Pr.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class RN{constructor(e,t,i,n,r){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,r=1;if(i instanceof $t)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(T=>T.from<=n&&T.to>=n),E=a&&a.dir==ae.RTL?-1:1;r=t.x<l.left?-E:E}let o=this.source(e,n,r);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>$e(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Sa),t=e?e.manager.tooltips.findIndex(i=>i.create==Pr.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!uN(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!fN(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Rn=4;function uN(s,e){let{left:t,right:i,top:n,bottom:r}=s.getBoundingClientRect(),o;if(o=s.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=t-Rn&&e.clientX<=i+Rn&&e.clientY>=n-Rn&&e.clientY<=r+Rn}function fN(s,e,t,i,n,r){let o=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=s.posAtCoords({x:i,y:n},!1);return a>=e&&a<=t}function SN(s,e={}){let t=V.define(),i=pe.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,we.TrackDel);if(a!=null){let E=Object.assign(Object.create(null),l);E.pos=a,E.end!=null&&(E.end=r.changes.mapPos(E.end)),o.push(E)}}n=o}for(let o of r.effects)o.is(t)&&(n=o.value),o.is(dN)&&(n=[]);return n},provide:n=>Jn.from(n)});return{active:i,extension:[i,Se.define(n=>new RN(n,s,i,t,e.hoverTime||300)),AN]}}function LA(s,e){let t=s.plugin(Sa);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const dN=V.define(),kE=x.define({combine(s){let e,t;for(let i of s)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function vi(s,e){let t=s.plugin(_A),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const _A=Se.fromClass(class{constructor(s){this.input=s.state.facet(wi),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(kE);this.top=new un(s,!0,e.topContainer),this.bottom=new un(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(kE);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new un(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new un(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(wi);if(t!=this.input){let i=t.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let E=this.specs.indexOf(a),T;E<0?(T=a(s.view),l.push(T)):(T=this.panels[E],T.update&&T.update(s)),n.push(T),(T.top?r:o).push(T)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>y.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class un{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=VE(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=VE(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function VE(s){let e=s.nextSibling;return s.remove(),e}const wi=x.define({enables:_A});class Mt extends Ns{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Mt.prototype.elementClass="";Mt.prototype.toDOM=void 0;Mt.prototype.mapMode=we.TrackBefore;Mt.prototype.startSide=Mt.prototype.endSide=-1;Mt.prototype.point=!0;const bn=x.define(),ON=x.define(),IN={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>j.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},gi=x.define();function gA(s){return[PA(),gi.of(Object.assign(Object.assign({},IN),s))]}const WE=x.define({combine:s=>s.some(e=>e)});function PA(s){return[NN]}const NN=Se.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(gi).map(e=>new KE(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(WE),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(WE)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let t=j.iter(this.view.state.facet(bn),this.view.viewport.from),i=[],n=this.gutters.map(r=>new pN(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==Fe.Text&&o){Dl(t,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==Fe.Text){Dl(t,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(gi),t=s.state.facet(gi),i=s.docChanged||s.heightChanged||s.viewportChanged||!j.eq(s.startState.facet(bn),s.state.facet(bn),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of t){let o=e.indexOf(r);o<0?n.push(new KE(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>y.scrollMargins.of(e=>{let t=e.plugin(s);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==ae.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function XE(s){return Array.isArray(s)?s:[s]}function Dl(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class pN{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=j.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new DA(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];Dl(this.cursor,n,t.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let r of e.state.facet(ON)){let o=r(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class KE{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=XE(t.markers(e)),t.initialSpacer&&(this.spacer=new DA(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=XE(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!j.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class DA{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),CN(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,E=!1;if(a){let T=a.elementClass;T&&(i+=" "+T);for(let c=o;c<this.markers.length;c++)if(this.markers[c].compare(a)){l=c,E=!0;break}}else l=this.markers.length;for(;o<l;){let T=this.markers[o++];if(T.toDOM){T.destroy(n);let c=n.nextSibling;n.remove(),n=c}}if(!a)break;a.toDOM&&(E?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),E&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function CN(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const mN=x.define(),LN=x.define(),Hs=x.define({combine(s){return Ut(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let r=i[n],o=t[n];i[n]=r?(l,a,E)=>r(l,a,E)||o(l,a,E):o}return i}})}});class oo extends Mt{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function lo(s,e){return s.state.facet(Hs).formatNumber(e,s.state)}const _N=gi.compute([Hs],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(mN)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new oo(lo(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let n of e.state.facet(LN)){let r=n(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Hs)!=e.state.facet(Hs),initialSpacer(e){return new oo(lo(e,$E(e.state.doc.lines)))},updateSpacer(e,t){let i=lo(t.view,$E(t.view.state.doc.lines));return i==e.number?e:new oo(i)},domEventHandlers:s.facet(Hs).domEventHandlers}));function gN(s={}){return[Hs.of(s),PA(),_N]}function $E(s){let e=9;for(;e<s;)e=e*10+9;return e}const PN=new class extends Mt{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},DN=bn.compute(["selection"],s=>{let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.head).from;n>t&&(t=n,e.push(PN.range(n)))}return j.of(e)});function MN(){return DN}const MA=1024;let UN=0;class ao{constructor(e,t){this.from=e,this.to=t}}class ${constructor(e={}){this.id=UN++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Et.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}$.closedBy=new $({deserialize:s=>s.split(" ")});$.openedBy=new $({deserialize:s=>s.split(" ")});$.group=new $({deserialize:s=>s.split(" ")});$.isolate=new $({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});$.contextHash=new $({perNode:!0});$.lookAhead=new $({perNode:!0});$.mounted=new $({perNode:!0});class jn{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[$.mounted.id]}}const yN=Object.create(null);let Et=class UA{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):yN,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new UA(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop($.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop($.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?i.name:n[r]];if(o)return o}}}};Et.none=new Et("",Object.create(null),0,8);class Oa{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new Et(i.name,n,i.id,i.flags):i)}return new Oa(t)}}const fn=new WeakMap,JE=new WeakMap;var _e;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(_e||(_e={}));class fe{constructor(e,t,i,n,r){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=jn.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ul(this.topNode,e)}cursorAt(e,t=0,i=0){let n=fn.get(this)||this.topNode,r=new Ul(n);return r.moveTo(e,t),fn.set(this,r._tree),r}get topNode(){return new lt(this,0,0,null)}resolve(e,t=0){let i=Fi(fn.get(this)||this.topNode,e,t,!1);return fn.set(this,i),i}resolveInner(e,t=0){let i=Fi(JE.get(this)||this.topNode,e,t,!0);return JE.set(this,i),i}resolveStack(e,t=0){return BN(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&_e.IncludeAnonymous)>0;for(let a=this.cursor(o|_e.IncludeAnonymous);;){let E=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;E=!0}for(;E&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;E=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:pa(Et.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new fe(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new fe(Et.none,t,i,n)))}static build(e){return GN(e)}}fe.empty=new fe(Et.none,[],[],0);class Ia{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ia(this.buffer,this.index)}}class ts{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Et.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(yA(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let n=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=n[l++],r[a++]=n[l++]-i;let E=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,E)}return new ts(r,o,this.set)}}function yA(s,e,t,i){switch(s){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Fi(s,e,t,i){for(var n;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!i&&s instanceof lt&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=i?0:_e.IgnoreOverlays;if(i)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof lt&&o.index<0&&((n=l.enter(e,t,r))===null||n===void 0?void 0:n.from)!=o.from&&(s=l);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}class xA{cursor(e=0){return new Ul(this,e)}getChild(e,t=null,i=null){let n=jE(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return jE(this,e,t,i)}resolve(e,t=0){return Fi(this,e,t,!1)}resolveInner(e,t=0){return Fi(this,e,t,!0)}matchContext(e){return Ml(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class lt extends xA{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,E=t>0?l.length:-1;e!=E;e+=t){let T=l[e],c=a[e]+o.from;if(yA(n,i,c,c+T.length)){if(T instanceof ts){if(r&_e.ExcludeBuffers)continue;let h=T.findChild(0,T.buffer.length,t,i-c,n);if(h>-1)return new jt(new xN(o,T,e,c),null,h)}else if(r&_e.IncludeAnonymous||!T.type.isAnonymous||Na(T)){let h;if(!(r&_e.IgnoreMounts)&&(h=jn.get(T))&&!h.overlay)return new lt(h.tree,c,e,o);let A=new lt(T,c,e,o);return r&_e.IncludeAnonymous||!A.type.isAnonymous?A:A.nextChild(t<0?T.children.length-1:0,t,i,n)}}}if(r&_e.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&_e.IgnoreOverlays)&&(n=jn.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new lt(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function jE(s,e,t,i){let n=s.cursor(),r=[];if(!n.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function Ml(s,e,t=e.length-1){for(let i=s;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class xN{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class jt extends xA{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new jt(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&_e.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new jt(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new jt(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new jt(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),t.push(0)}return new fe(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function bA(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let i=t instanceof lt&&t.index<0?null:t.parent,n=s.slice();return i?n[e]=i:n.splice(e,1),new bN(n,t)}class bN{constructor(e,t){this.heads=e,this.node=t}get next(){return bA(this.heads)}}function BN(s,e,t){let i=s.resolveInner(e,t),n=null;for(let r=i instanceof lt?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,t)),r=o}else{let o=jn.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new lt(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Fi(l,e,t,!1))}}return n?bA(n):i}class Ul{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof lt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof lt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&_e.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&_e.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&_e.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&_e.IncludeAnonymous||l instanceof ts||!l.type.isAnonymous||Na(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)t=new jt(this.buffer,t,this.stack[n]);return this.bufferNode=new jt(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Ml(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return Ml(this._tree,e,n);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function Na(s){return s.children.some(e=>e instanceof ts||!e.type.isAnonymous||Na(e))}function GN(s){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=MA,reused:r=[],minRepeatType:o=i.types.length}=s,l=Array.isArray(t)?new Ia(t,t.length):t,a=i.types,E=0,T=0;function c(L,M,D,H,Y,X){let{id:v,start:B,end:K,size:W}=l,J=T,ee=E;for(;W<0;)if(l.next(),W==-1){let ke=r[v];D.push(ke),H.push(B-L);return}else if(W==-3){E=v;return}else if(W==-4){T=v;return}else throw new RangeError(`Unrecognized record size: ${W}`);let Ee=a[v],Re,ne,xe=B-L;if(K-B<=n&&(ne=S(l.pos-M,Y))){let ke=new Uint16Array(ne.size-ne.skip),be=l.pos-ne.size,Ve=ke.length;for(;l.pos>be;)Ve=d(ne.start,ke,Ve);Re=new ts(ke,K-ne.start,i),xe=ne.start-L}else{let ke=l.pos-W;l.next();let be=[],Ve=[],We=v>=o?v:-1,ct=0,St=K;for(;l.pos>ke;)We>=0&&l.id==We&&l.size>=0?(l.end<=St-n&&(u(be,Ve,B,ct,l.end,St,We,J,ee),ct=be.length,St=l.end),l.next()):X>2500?h(B,ke,be,Ve):c(B,ke,be,Ve,We,X+1);if(We>=0&&ct>0&&ct<be.length&&u(be,Ve,B,ct,B,St,We,J,ee),be.reverse(),Ve.reverse(),We>-1&&ct>0){let k=A(Ee,ee);Re=pa(Ee,be,Ve,0,be.length,0,K-B,k,k)}else Re=f(Ee,be,Ve,K-B,J-K,ee)}D.push(Re),H.push(xe)}function h(L,M,D,H){let Y=[],X=0,v=-1;for(;l.pos>M;){let{id:B,start:K,end:W,size:J}=l;if(J>4)l.next();else{if(v>-1&&K<v)break;v<0&&(v=W-n),Y.push(B,K,W),X++,l.next()}}if(X){let B=new Uint16Array(X*4),K=Y[Y.length-2];for(let W=Y.length-3,J=0;W>=0;W-=3)B[J++]=Y[W],B[J++]=Y[W+1]-K,B[J++]=Y[W+2]-K,B[J++]=J;D.push(new ts(B,Y[2]-K,i)),H.push(K-L)}}function A(L,M){return(D,H,Y)=>{let X=0,v=D.length-1,B,K;if(v>=0&&(B=D[v])instanceof fe){if(!v&&B.type==L&&B.length==Y)return B;(K=B.prop($.lookAhead))&&(X=H[v]+B.length+K)}return f(L,D,H,Y,X,M)}}function u(L,M,D,H,Y,X,v,B,K){let W=[],J=[];for(;L.length>H;)W.push(L.pop()),J.push(M.pop()+D-Y);L.push(f(i.types[v],W,J,X-Y,B-X,K)),M.push(Y-D)}function f(L,M,D,H,Y,X,v){if(X){let B=[$.contextHash,X];v=v?[B].concat(v):[B]}if(Y>25){let B=[$.lookAhead,Y];v=v?[B].concat(v):[B]}return new fe(L,M,D,H,v)}function S(L,M){let D=l.fork(),H=0,Y=0,X=0,v=D.end-n,B={size:0,start:0,skip:0};e:for(let K=D.pos-L;D.pos>K;){let W=D.size;if(D.id==M&&W>=0){B.size=H,B.start=Y,B.skip=X,X+=4,H+=4,D.next();continue}let J=D.pos-W;if(W<0||J<K||D.start<v)break;let ee=D.id>=o?4:0,Ee=D.start;for(D.next();D.pos>J;){if(D.size<0)if(D.size==-3)ee+=4;else break e;else D.id>=o&&(ee+=4);D.next()}Y=Ee,H+=W,X+=ee}return(M<0||H==L)&&(B.size=H,B.start=Y,B.skip=X),B.size>4?B:void 0}function d(L,M,D){let{id:H,start:Y,end:X,size:v}=l;if(l.next(),v>=0&&H<o){let B=D;if(v>4){let K=l.pos-(v-4);for(;l.pos>K;)D=d(L,M,D)}M[--D]=B,M[--D]=X-L,M[--D]=Y-L,M[--D]=H}else v==-3?E=H:v==-4&&(T=H);return D}let O=[],p=[];for(;l.pos>0;)c(s.start||0,s.bufferStart||0,O,p,-1,0);let P=(e=s.length)!==null&&e!==void 0?e:O.length?p[0]+O[0].length:0;return new fe(a[s.topID],O.reverse(),p.reverse(),P)}const QE=new WeakMap;function Bn(s,e){if(!s.isAnonymous||e instanceof ts||e.type!=s)return 1;let t=QE.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=s||!(i instanceof fe)){t=1;break}t+=Bn(s,i)}QE.set(e,t)}return t}function pa(s,e,t,i,n,r,o,l,a){let E=0;for(let u=i;u<n;u++)E+=Bn(s,e[u]);let T=Math.ceil(E*1.5/8),c=[],h=[];function A(u,f,S,d,O){for(let p=S;p<d;){let P=p,L=f[p],M=Bn(s,u[p]);for(p++;p<d;p++){let D=Bn(s,u[p]);if(M+D>=T)break;M+=D}if(p==P+1){if(M>T){let D=u[P];A(D.children,D.positions,0,D.children.length,f[P]+O);continue}c.push(u[P])}else{let D=f[p-1]+u[p-1].length-L;c.push(pa(s,u,f,P,p,L,D,null,a))}h.push(L+O-r)}}return A(e,t,i,n,0),(l||a)(c,h,o)}class ds{constructor(e,t,i,n,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new ds(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&n.push(r);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,E=0;;l++){let T=l<t.length?t[l]:null,c=T?T.fromA:1e9;if(c-a>=i)for(;o&&o.from<c;){let h=o;if(a>=h.from||c<=h.to||E){let A=Math.max(h.from,a)-E,u=Math.min(h.to,c)-E;h=A>=u?null:new ds(A,u,h.tree,h.offset+E,l>0,!!T)}if(h&&n.push(h),o.to>c)break;o=r<e.length?e[r++]:null}if(!T)break;a=T.toA,E=T.toA-T.toB}return n}}class BA{startParse(e,t,i){return typeof e=="string"&&(e=new HN(e)),i=i?i.length?i.map(n=>new ao(n.from,n.to)):[new ao(0,0)]:[new ao(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let r=n.advance();if(r)return r}}}class HN{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new $({perNode:!0});let vN=0;class st{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=vN++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof st&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let n=new st(i,[],null,[]);if(n.set.push(n),t)for(let r of t.set)n.set.push(r);return n}static defineModifier(e){let t=new Qn(e);return i=>i.modified.indexOf(t)>-1?i:Qn.get(i.base||i,i.modified.concat(t).sort((n,r)=>n.id-r.id))}}let wN=0;class Qn{constructor(e){this.name=e,this.instances=[],this.id=wN++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&FN(t,l.modified));if(i)return i;let n=[],r=new st(e.name,n,e,t);for(let l of t)l.instances.push(r);let o=YN(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(Qn.get(l,a));return r}}function FN(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function YN(s){let e=[[]];for(let t=0;t<s.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(s[t]));return e.sort((t,i)=>i.length-t.length)}function GA(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let r=[],o=2,l=n;for(let c=0;;){if(l=="..."&&c>0&&c+3==n.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),c+=h[0].length,c==n.length)break;let A=n[c++];if(c==n.length&&A=="!"){o=0;break}if(A!="/")throw new RangeError("Invalid path: "+n);l=n.slice(c)}let a=r.length-1,E=r[a];if(!E)throw new RangeError("Invalid path: "+n);let T=new qn(i,o,a>0?r.slice(0,a):null);e[E]=T.sort(e[E])}}return HA.add(e)}const HA=new $;class qn{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}qn.empty=new qn([],2,null);function vA(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let E=t[a.id];if(E){o=o?o+" "+E:E;break}}return o},scope:i}}function kN(s,e){let t=null;for(let i of s){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function VN(s,e,t,i=0,n=s.length){let r=new WN(i,Array.isArray(e)?e:[e],t);r.highlightRange(s.cursor(),i,n,"",r.highlighters),r.flush(n)}class WN{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(r=this.highlighters.filter(A=>!A.scope||A.scope(o)));let E=n,T=XN(e)||qn.empty,c=kN(r,T.tags);if(c&&(E&&(E+=" "),E+=c,T.mode==1&&(n+=(n?" ":"")+c)),this.startSpan(Math.max(t,l),E),T.opaque)return;let h=e.tree&&e.tree.prop($.mounted);if(h&&h.overlay){let A=e.node.enter(h.overlay[0].from+l,1),u=this.highlighters.filter(S=>!S.scope||S.scope(h.tree.type)),f=e.firstChild();for(let S=0,d=l;;S++){let O=S<h.overlay.length?h.overlay[S]:null,p=O?O.from+l:a,P=Math.max(t,d),L=Math.min(i,p);if(P<L&&f)for(;e.from<L&&(this.highlightRange(e,P,L,n,r),this.startSpan(Math.min(L,e.to),E),!(e.to>=p||!e.nextSibling())););if(!O||p>i)break;d=O.to+l,d>t&&(this.highlightRange(A.cursor(),Math.max(t,O.from+l),Math.min(i,d),"",u),this.startSpan(Math.min(i,d),E))}f&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,r),this.startSpan(Math.min(i,e.to),E)}while(e.nextSibling());e.parent()}}}function XN(s){let e=s.type.prop(HA);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const U=st.define,Sn=U(),Vt=U(),qE=U(Vt),zE=U(Vt),Wt=U(),dn=U(Wt),Eo=U(Wt),Nt=U(),Ts=U(Nt),Ot=U(),It=U(),yl=U(),hi=U(yl),On=U(),N={comment:Sn,lineComment:U(Sn),blockComment:U(Sn),docComment:U(Sn),name:Vt,variableName:U(Vt),typeName:qE,tagName:U(qE),propertyName:zE,attributeName:U(zE),className:U(Vt),labelName:U(Vt),namespace:U(Vt),macroName:U(Vt),literal:Wt,string:dn,docString:U(dn),character:U(dn),attributeValue:U(dn),number:Eo,integer:U(Eo),float:U(Eo),bool:U(Wt),regexp:U(Wt),escape:U(Wt),color:U(Wt),url:U(Wt),keyword:Ot,self:U(Ot),null:U(Ot),atom:U(Ot),unit:U(Ot),modifier:U(Ot),operatorKeyword:U(Ot),controlKeyword:U(Ot),definitionKeyword:U(Ot),moduleKeyword:U(Ot),operator:It,derefOperator:U(It),arithmeticOperator:U(It),logicOperator:U(It),bitwiseOperator:U(It),compareOperator:U(It),updateOperator:U(It),definitionOperator:U(It),typeOperator:U(It),controlOperator:U(It),punctuation:yl,separator:U(yl),bracket:hi,angleBracket:U(hi),squareBracket:U(hi),paren:U(hi),brace:U(hi),content:Nt,heading:Ts,heading1:U(Ts),heading2:U(Ts),heading3:U(Ts),heading4:U(Ts),heading5:U(Ts),heading6:U(Ts),contentSeparator:U(Nt),list:U(Nt),quote:U(Nt),emphasis:U(Nt),strong:U(Nt),link:U(Nt),monospace:U(Nt),strikethrough:U(Nt),inserted:U(),deleted:U(),changed:U(),invalid:U(),meta:On,documentMeta:U(On),annotation:U(On),processingInstruction:U(On),definition:st.defineModifier("definition"),constant:st.defineModifier("constant"),function:st.defineModifier("function"),standard:st.defineModifier("standard"),local:st.defineModifier("local"),special:st.defineModifier("special")};for(let s in N){let e=N[s];e instanceof st&&(e.name=s)}vA([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var To;const vs=new $;function KN(s){return x.define({combine:s?e=>e.concat(s):void 0})}const $N=new $;class it{constructor(e,t,i=[],n=""){this.data=e,this.name=n,Q.prototype.hasOwnProperty("tree")||Object.defineProperty(Q.prototype,"tree",{get(){return Pe(this)}}),this.parser=t,this.extension=[ss.of(this),Q.languageData.of((r,o,l)=>{let a=ZE(r,o,l),E=a.type.prop(vs);if(!E)return[];let T=r.facet(E),c=a.type.prop($N);if(c){let h=a.resolve(o-a.from,l);for(let A of c)if(A.test(h,r)){let u=r.facet(A.facet);return A.type=="replace"?u:u.concat(T)}}return T})].concat(i)}isActiveAt(e,t,i=-1){return ZE(e,t,i).type.prop(vs)==this.data}findRegions(e){let t=e.facet(ss);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(vs)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop($.mounted);if(l){if(l.tree.prop(vs)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let E=r.children[a];E instanceof fe&&n(E,r.positions[a]+o)}};return n(Pe(e),0),i}get allowsNesting(){return!0}}it.setState=V.define();function ZE(s,e,t){let i=s.facet(ss),n=Pe(s).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,t,_e.ExcludeBuffers))r.type.isTop&&(n=r);return n}class zn extends it{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=KN(e.languageData);return new zn(t,e.parser.configure({props:[vs.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new zn(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Pe(s){let e=s.field(it.state,!1);return e?e.tree:fe.empty}function JN(s,e,t=50){var i;let n=(i=s.field(it.state,!1))===null||i===void 0?void 0:i.context;if(!n)return null;let r=n.viewport;n.updateViewport({from:0,to:e});let o=n.isDone(e)||n.work(t,e)?n.tree:null;return n.updateViewport(r),o}class jN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Ai=null;class Zn{constructor(e,t,i=[],n,r,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Zn(e,t,[],fe.empty,0,i,[],null)}startParse(){return this.parser.startParse(new jN(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=fe.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(ds.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ds.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Ai;Ai=this;try{return e()}finally{Ai=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=eT(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((E,T,c,h)=>a.push({fromA:E,toA:T,fromB:c,toB:h})),i=ds.applyChanges(i,a),n=fe.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let E of this.skipped){let T=e.mapPos(E.from,1),c=e.mapPos(E.to,-1);T<c&&l.push({from:T,to:c})}}}return new Zn(this.parser,t,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=eT(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends BA{createParse(t,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Ai;if(a){for(let E of n)a.tempSkipped.push(E);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new fe(Et.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Ai}}function eT(s,e,t){return ds.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class zs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new zs(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Zn.create(e.facet(ss).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new zs(i)}}it.state=pe.define({create:zs.init,update(s,e){for(let t of e.effects)if(t.is(it.setState))return t.value;return e.startState.facet(ss)!=e.state.facet(ss)?zs.init(e.state):s.apply(e)}});let wA=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(wA=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const co=typeof navigator<"u"&&(!((To=navigator.scheduling)===null||To===void 0)&&To.isInputPending)?()=>navigator.scheduling.isInputPending():null,QN=Se.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(it.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(it.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=wA(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(it.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!co?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>co&&co()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:it.setState.of(new zs(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>$e(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ss=x.define({combine(s){return s.length?s[0]:null},enables:s=>[it.state,QN,y.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]});class qN{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const zN=x.define(),Ca=x.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function er(s){let e=s.facet(Ca);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Yi(s,e){let t="",i=s.tabSize,n=s.facet(Ca)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let r=0;r<e;r++)t+=n;return t}function ma(s,e){s instanceof Q&&(s=new Dr(s));for(let i of s.state.facet(zN)){let n=i(s,e);if(n!==void 0)return n}let t=Pe(s.state);return t.length>=e?ZN(s,t,e):null}class Dr{constructor(e,t={}){this.state=e,this.options=t,this.unit=er(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return ii(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const FA=new $;function ZN(s,e,t){let i=e.resolveStack(t),n=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return YA(i,s,t)}function YA(s,e,t){for(let i=s;i;i=i.next){let n=tp(i.node);if(n)return n(La.create(e,t,i))}return 0}function ep(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function tp(s){let e=s.type.prop(FA);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop($.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>rp(o,!0,1,void 0,r&&!ep(o)?n.from:void 0)}return s.parent==null?sp:null}function sp(){return 0}class La extends Dr{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new La(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(ip(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return YA(this.context.next,this.base,this.pos)}}function ip(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function np(s){let e=s.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=s.options.simulateBreak,r=s.state.doc.lineAt(t.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let E=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+E}}l=a.to}}function rp(s,e,t,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,a=np(s);return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*t)}function op({except:s,units:e=1}={}){return t=>{let i=s&&s.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const lp=200;function ap(){return Q.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:i}=s.newSelection.main,n=t.lineAt(i);if(i>n.from+lp)return s;let r=t.sliceString(n.from,i);if(!e.some(E=>E.test(r)))return s;let{state:o}=s,l=-1,a=[];for(let{head:E}of o.selection.ranges){let T=o.doc.lineAt(E);if(T.from==l)continue;l=T.from;let c=ma(o,T.from);if(c==null)continue;let h=/^\s*/.exec(T.text)[0],A=Yi(o,c);h!=A&&a.push({from:T.from,to:T.from+h.length,insert:A})}return a.length?[s,{changes:a,sequential:!0}]:s})}const Ep=x.define(),kA=new $;function Tp(s,e,t){let i=Pe(s);if(i.length<t)return null;let n=i.resolveStack(t,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let a=l.type.prop(kA);if(a&&(l.to<i.length-50||i.length==s.doc.length||!cp(l))){let E=a(l,s);E&&E.from<=t&&E.from>=e&&E.to>t&&(r=E)}}return r}function cp(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function tr(s,e,t){for(let i of s.facet(Ep)){let n=i(s,e,t);if(n)return n}return Tp(s,e,t)}function VA(s,e){let t=e.mapPos(s.from,1),i=e.mapPos(s.to,-1);return t>=i?void 0:{from:t,to:i}}const Mr=V.define({map:VA}),qi=V.define({map:VA});function WA(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(s.lineBlockAt(t));return e}const Ls=pe.define({create(){return F.none},update(s,e){s=s.map(e.changes);for(let t of e.effects)if(t.is(Mr)&&!hp(s,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet($A),n=i?F.replace({widget:new Op(i(e.state,t.value))}):tT;s=s.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(qi)&&(s=s.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;s.between(i,i,(n,r)=>{n<i&&r>i&&(t=!0)}),t&&(s=s.update({filterFrom:i,filterTo:i,filter:(n,r)=>r<=i||n>=i}))}return s},provide:s=>y.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let i=s[t++],n=s[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(tT.range(i,n))}return F.set(e,!0)}});function sr(s,e,t){var i;let n=null;return(i=s.field(Ls,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function hp(s,e,t){let i=!1;return s.between(e,e,(n,r)=>{n==e&&r==t&&(i=!0)}),i}function XA(s,e){return s.field(Ls,!1)?e:e.concat(V.appendConfig.of(JA()))}const Ap=s=>{for(let e of WA(s)){let t=tr(s.state,e.from,e.to);if(t)return s.dispatch({effects:XA(s.state,[Mr.of(t),KA(s,t)])}),!0}return!1},Rp=s=>{if(!s.state.field(Ls,!1))return!1;let e=[];for(let t of WA(s)){let i=sr(s.state,t.from,t.to);i&&e.push(qi.of(i),KA(s,i,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function KA(s,e,t=!0){let i=s.state.doc.lineAt(e.from).number,n=s.state.doc.lineAt(e.to).number;return y.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${s.state.phrase("to")} ${n}.`)}const up=s=>{let{state:e}=s,t=[];for(let i=0;i<e.doc.length;){let n=s.lineBlockAt(i),r=tr(e,n.from,n.to);r&&t.push(Mr.of(r)),i=(r?s.lineBlockAt(r.to):n).to+1}return t.length&&s.dispatch({effects:XA(s.state,t)}),!!t.length},fp=s=>{let e=s.state.field(Ls,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(i,n)=>{t.push(qi.of({from:i,to:n}))}),s.dispatch({effects:t}),!0},Sp=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ap},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Rp},{key:"Ctrl-Alt-[",run:up},{key:"Ctrl-Alt-]",run:fp}],dp={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},$A=x.define({combine(s){return Ut(s,dp)}});function JA(s){return[Ls,pp]}function jA(s,e){let{state:t}=s,i=t.facet($A),n=o=>{let l=s.lineBlockAt(s.posAtDOM(o.target)),a=sr(s.state,l.from,l.to);a&&s.dispatch({effects:qi.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(s,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const tT=F.replace({widget:new class extends ns{toDOM(s){return jA(s,null)}}});class Op extends ns{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return jA(e,this.value)}}const Ip={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ho extends Mt{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Np(s={}){let e=Object.assign(Object.assign({},Ip),s),t=new ho(e,!0),i=new ho(e,!1),n=Se.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(ss)!=o.state.facet(ss)||o.startState.field(Ls,!1)!=o.state.field(Ls,!1)||Pe(o.startState)!=Pe(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Gt;for(let a of o.viewportLineBlocks){let E=sr(o.state,a.from,a.to)?i:tr(o.state,a.from,a.to)?t:null;E&&l.add(a.from,a.from,E)}return l.finish()}}),{domEventHandlers:r}=e;return[n,gA({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||j.empty},initialSpacer(){return new ho(e,!1)},domEventHandlers:Object.assign(Object.assign({},r),{click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let E=sr(o.state,l.from,l.to);if(E)return o.dispatch({effects:qi.of(E)}),!0;let T=tr(o.state,l.from,l.to);return T?(o.dispatch({effects:Mr.of(T)}),!0):!1}})}),JA()]}const pp=y.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class zi{constructor(e,t){this.specs=e;let i;function n(l){let a=zt.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof it?l=>l.prop(vs)==o.data:o?l=>l==o:void 0,this.style=vA(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new zt(i):null,this.themeType=t.themeType}static define(e,t){return new zi(e,t||{})}}const xl=x.define(),QA=x.define({combine(s){return s.length?[s[0]]:null}});function Ao(s){let e=s.facet(xl);return e.length?e:s.facet(QA)}function qA(s,e){let t=[mp],i;return s instanceof zi&&(s.module&&t.push(y.styleModule.of(s.module)),i=s.themeType),e!=null&&e.fallback?t.push(QA.of(s)):i?t.push(xl.computeN([y.darkTheme],n=>n.facet(y.darkTheme)==(i=="dark")?[s]:[])):t.push(xl.of(s)),t}class Cp{constructor(e){this.markCache=Object.create(null),this.tree=Pe(e.state),this.decorations=this.buildDeco(e,Ao(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Pe(e.state),i=Ao(e.state),n=i!=Ao(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!n&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return F.none;let i=new Gt;for(let{from:n,to:r}of e.visibleRanges)VN(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=F.mark({class:a})))},n,r);return i.finish()}}const mp=vt.high(Se.fromClass(Cp,{decorations:s=>s.decorations})),Lp=zi.define([{tag:N.meta,color:"#404740"},{tag:N.link,textDecoration:"underline"},{tag:N.heading,textDecoration:"underline",fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strong,fontWeight:"bold"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.keyword,color:"#708"},{tag:[N.atom,N.bool,N.url,N.contentSeparator,N.labelName],color:"#219"},{tag:[N.literal,N.inserted],color:"#164"},{tag:[N.string,N.deleted],color:"#a11"},{tag:[N.regexp,N.escape,N.special(N.string)],color:"#e40"},{tag:N.definition(N.variableName),color:"#00f"},{tag:N.local(N.variableName),color:"#30a"},{tag:[N.typeName,N.namespace],color:"#085"},{tag:N.className,color:"#167"},{tag:[N.special(N.variableName),N.macroName],color:"#256"},{tag:N.definition(N.propertyName),color:"#00c"},{tag:N.comment,color:"#940"},{tag:N.invalid,color:"#f00"}]),_p=y.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),zA=1e4,ZA="()[]{}",eR=x.define({combine(s){return Ut(s,{afterCursor:!0,brackets:ZA,maxScanDistance:zA,renderMatch:Dp})}}),gp=F.mark({class:"cm-matchingBracket"}),Pp=F.mark({class:"cm-nonmatchingBracket"});function Dp(s){let e=[],t=s.matched?gp:Pp;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const Mp=pe.define({create(){return F.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(eR);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=Lt(e.state,n.head,-1,i)||n.head>0&&Lt(e.state,n.head-1,1,i)||i.afterCursor&&(Lt(e.state,n.head,1,i)||n.head<e.state.doc.length&&Lt(e.state,n.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return F.set(t,!0)},provide:s=>y.decorations.from(s)}),Up=[Mp,_p];function yp(s={}){return[eR.of(s),Up]}const xp=new $;function bl(s,e,t){let i=s.prop(e<0?$.openedBy:$.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function Bl(s){let e=s.type.prop(xp);return e?e(s.node):s}function Lt(s,e,t,i={}){let n=i.maxScanDistance||zA,r=i.brackets||ZA,o=Pe(s),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let E=bl(a.type,t,r);if(E&&a.from<a.to){let T=Bl(a);if(T&&(t>0?e>=T.from&&e<T.to:e>T.from&&e<=T.to))return bp(s,e,t,a,T,E,r)}}return Bp(s,e,t,o,l.type,n,r)}function bp(s,e,t,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},E=0,T=l==null?void 0:l.cursor();if(T&&(t<0?T.childBefore(i.from):T.childAfter(i.to)))do if(t<0?T.to<=i.from:T.from>=i.to){if(E==0&&r.indexOf(T.type.name)>-1&&T.from<T.to){let c=Bl(T);return{start:a,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(bl(T.type,t,o))E++;else if(bl(T.type,-t,o)){if(E==0){let c=Bl(T);return{start:a,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}E--}}while(t<0?T.prevSibling():T.nextSibling());return{start:a,matched:!1}}function Bp(s,e,t,i,n,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let E={from:t<0?e-1:e,to:t>0?e+1:e},T=s.doc.iterRange(e,t>0?s.doc.length:0),c=0;for(let h=0;!T.next().done&&h<=r;){let A=T.value;t<0&&(h+=A.length);let u=e+h*t;for(let f=t>0?0:A.length-1,S=t>0?A.length:-1;f!=S;f+=t){let d=o.indexOf(A[f]);if(!(d<0||i.resolveInner(u+f,1).type!=n))if(d%2==0==t>0)c++;else{if(c==1)return{start:E,end:{from:u+f,to:u+f+1},matched:d>>1==a>>1};c--}}t>0&&(h+=A.length)}return T.done?{start:E,matched:!1}:null}const Gp=Object.create(null),sT=[Et.none],iT=[],nT=Object.create(null),Hp=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Hp[s]=vp(Gp,e);function Ro(s,e){iT.indexOf(s)>-1||(iT.push(s),console.warn(e))}function vp(s,e){let t=[];for(let l of e.split(" ")){let a=[];for(let E of l.split(".")){let T=s[E]||N[E];T?typeof T=="function"?a.length?a=a.map(T):Ro(E,`Modifier ${E} used at start of tag`):a.length?Ro(E,`Tag ${E} used as modifier`):a=Array.isArray(T)?T:[T]:Ro(E,`Unknown highlighting tag ${E}`)}for(let E of a)t.push(E)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),r=nT[n];if(r)return r.id;let o=nT[n]=Et.define({id:sT.length,name:i,props:[GA({[i]:t})]});return sT.push(o),o.id}ae.RTL,ae.LTR;var rT={};class ir{constructor(e,t,i,n,r,o,l,a,E,T=0,c){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=E,this.lookAhead=T,this.parent=c}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new ir(e,[],t,i,i,0,[],0,n?new oT(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,n=e&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=r.dynamicPrecedence(n);if(l&&(this.score+=l),i==0){this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(n,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),E=a?this.stack[a-2]:this.p.ranges[0].from,T=this.reducePos-E;T>=2e3&&!(!((t=this.p.parser.nodeSet.types[n])===null||t===void 0)&&t.isAnonymous)&&(E==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=T):this.p.lastBigReductionSize<T&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=E,this.p.lastBigReductionSize=T));let c=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-c;if(n<r.minRepeatTerm||e&131072){let A=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,E,A,h+4,!0)}if(e&262144)this.state=this.stack[a];else{let A=this.stack[a-3];this.state=r.getGoto(A,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,E)}storeNode(e,t,i,n=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i,n){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let r=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(r,1)||(this.reducePos=n)),this.pushState(r,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,n,4)}else this.pos=n,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,n,4)}apply(e,t,i,n){e&65536?this.reduce(e):this.shift(e,t,i,n)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new ir(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new wp(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r=0,o;r<t.length;r+=2)(o=t[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[r],o);if(this.stack.length<120)for(let r=0;n.length<8&&r<t.length;r+=2){let o=t[r+1];n.some((l,a)=>a&1&&l==o)||n.push(t[r],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let r=t[n+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,n=t&65535,r=this.stack.length-i*3;if(r<0||e.getGoto(this.stack[r],n,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(n,r)=>{if(!t.includes(n))return t.push(n),e.allActions(n,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-r;if(l>1){let a=o&65535,E=this.stack.length-l*3;if(E>=0&&e.getGoto(this.stack[E],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,r+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new oT(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class oT{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class wp{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class nr{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new nr(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new nr(this.stack,this.pos,this.index)}}function In(s,e=Uint16Array){if(typeof s!="string")return s;let t=null;for(let i=0,n=0;i<s.length;){let r=0;for(;;){let o=s.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),r+=a,l)break;r*=46}t?t[n++]=r:t=new e(r)}return t}class Gn{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const lT=new Gn;class Fp{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=lT,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!n)return null;let o=this.ranges[--n];r-=i.from-o.to,i=o}for(;t<0?r>i.to:r>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=lT,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Vs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;kp(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Vs.prototype.contextual=Vs.prototype.fallback=Vs.prototype.extend=!1;Vs.prototype.fallback=Vs.prototype.extend=!1;class Yp{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function kp(s,e,t,i,n,r){let o=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;(l&s[o])!=0;){let E=s[o+1];for(let A=o+3;A<E;A+=2)if((s[A+1]&l)>0){let u=s[A];if(a.allows(u)&&(e.token.value==-1||e.token.value==u||Vp(u,e.token.value,n,r))){e.acceptToken(u);break}}let T=e.next,c=0,h=s[o+2];if(e.next<0&&h>c&&s[E+h*3-3]==65535){o=s[E+h*3-1];continue e}for(;c<h;){let A=c+h>>1,u=E+A+(A<<1),f=s[u],S=s[u+1]||65536;if(T<f)h=A;else if(T>=S)c=A+1;else{o=s[u+2],e.advance();continue e}}break}}function aT(s,e,t){for(let i=e,n;(n=s[i])!=65535;i++)if(n==t)return i-e;return-1}function Vp(s,e,t,i){let n=aT(t,i,e);return n<0||aT(t,i,s)<n}const Qe=typeof process<"u"&&rT&&/\bparse\b/.test(rT.LOG);let uo=null;function ET(s,e,t){let i=s.cursor(_e.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(s.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:s.length}}class Wp{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ET(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ET(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(r instanceof fe){if(o==e){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let a=r.prop($.lookAhead);if(!a||l+a<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}}}class Xp{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Gn)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:r}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let E=0;E<r.length;E++){if((1<<E&o)==0)continue;let T=r[E],c=this.tokens[E];if(!(i&&!T.fallback)&&((T.contextual||c.start!=e.pos||c.mask!=o||c.context!=l)&&(this.updateCachedToken(c,T,e),c.mask=o,c.context=l),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),c.value!=0)){let h=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!T.extend&&(i=c,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Gn,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Gn,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){let n=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(n,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,i,n){for(let r=0;r<n;r+=3)if(this.actions[r]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:r}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let E=o.stateSlot(r,a?2:1);;E+=3){if(l[E]==65535)if(l[E+1]==1)E=xt(l,E+2);else{n==0&&l[E+1]==2&&(n=this.putAction(xt(l,E+2),t,i,n));break}l[E]==t&&(n=this.putAction(xt(l,E+1),t,i,n))}return n}}class Kp{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Fp(t,n),this.tokens=new Xp(e,this.stream),this.topTerm=e.top[1];let{from:r}=n[0];this.stacks=[ir.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new Wp(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],r=[]),n.push(l);let a=this.tokens.getMainToken(l);r.push(a.value,a.end)}}break}}if(!i.length){let o=n&&Jp(n);if(o)return Qe&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Qe&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,r,i);if(o)return Qe&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let E=i[a];if(l.sameState(E)||l.buffer.length>500&&E.buffer.length>500)if((l.score-E.score||l.buffer.length-E.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:r}=this,o=Qe?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let E=e.curContext&&e.curContext.tracker.strict,T=E?e.curContext.hash:0;for(let c=this.fragments.nodeAt(n);c;){let h=this.parser.nodeSet.types[c.type.id]==c.type?r.getGoto(e.state,c.type.id):-1;if(h>-1&&c.length&&(!E||(c.prop($.contextHash)||0)==T))return e.useNode(c,h),Qe&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(c.type.id)})`),!0;if(!(c instanceof fe)||c.children.length==0||c.positions[0]>0)break;let A=c.children[0];if(A instanceof fe&&c.positions[0]==0)c=A;else break}}let l=r.stateSlot(e.state,4);if(l>0)return e.reduce(l),Qe&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let E=0;E<a.length;){let T=a[E++],c=a[E++],h=a[E++],A=E==a.length||!i,u=A?e:e.split(),f=this.tokens.mainToken;if(u.apply(T,c,f?f.start:u.pos,h),Qe&&console.log(o+this.stackID(u)+` (via ${(T&65536)==0?"shift":`reduce of ${r.getName(T&65535)}`} for ${r.getName(c)} @ ${n}${u==e?"":", split"})`),A)return!0;u.pos>n?t.push(u):i.push(u)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return TT(e,t),!0}}runRecovery(e,t,i){let n=null,r=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],E=t[(o<<1)+1],T=Qe?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),Qe&&console.log(T+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let c=l.split(),h=T;for(let A=0;c.forceReduce()&&A<10&&(Qe&&console.log(h+this.stackID(c)+" (via force-reduce)"),!this.advanceFully(c,i));A++)Qe&&(h=this.stackID(c)+" -> ");for(let A of l.recoverByInsert(a))Qe&&console.log(T+this.stackID(A)+" (via recover-insert)"),this.advanceFully(A,i);this.stream.end>l.pos?(E==l.pos&&(E++,a=0),l.recoverByDelete(a,E),Qe&&console.log(T+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),TT(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),fe.build({buffer:nr.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(uo||(uo=new WeakMap)).get(e);return t||uo.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function TT(s,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==s.pos&&i.sameState(s)){e[t].score<s.score&&(e[t]=s);return}}e.push(s)}class $p{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class rr extends BA{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function r(l,a,E){n[l].push([a,a.deserialize(String(E))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=$[a]);for(let E=1;E<l.length;){let T=l[E++];if(T>=0)r(T,a,l[E++]);else{let c=l[E+-T];for(let h=-T;h>0;h--)r(l[E++],a,c);E++}}}this.nodeSet=new Oa(t.map((l,a)=>Et.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=MA;let o=In(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(cT),this.states=In(e.states,Uint32Array),this.data=In(e.stateData),this.goto=In(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Vs(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new Kp(this,e,t,i);for(let r of this.wrappers)n=r(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let r=n[t+1];;){let o=n[r++],l=o&1,a=n[r++];if(l&&i)return a;for(let E=r+(o>>1);r<E;r++)if(n[r]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let r=this.stateSlot(e,n?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=xt(i,r+2)];else{if(i[r+1]==2)return xt(i,r+2);break}if(o==t||o==0)return xt(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),n=i?t(i):void 0;for(let r=this.stateSlot(e,1);n==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=xt(this.data,r+2);else break;n=t(xt(this.data,r+1))}return n}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=xt(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((r,o)=>o&1&&r==n)||t.push(this.data[i],n)}}return t}configure(e){let t=Object.assign(Object.create(rr.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(r=>r.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,n)=>{let r=e.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[n]=cT(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(i[o]=!0)}let n=null;for(let r=0;r<t.length;r++)if(!i[r])for(let o=this.dialects[t[r]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new $p(e,i,n)}static deserialize(e){return new rr(e)}}function xt(s,e){return s[e]|s[e+1]<<16}function Jp(s){let e=null;for(let t of s){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function cT(s){if(s.external){let e=s.extend?1:0;return(t,i)=>s.external(t,i)<<1|e}return s.get}class tR{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Pe(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),r=n.search(iR(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function hT(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function jp(s){let e=Object.create(null),t=Object.create(null);for(let{label:n}of s){e[n[0]]=!0;for(let r=1;r<n.length;r++)t[n[r]]=!0}let i=hT(e)+hT(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function sR(s){let e=s.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:jp(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:t}:null}}function Qp(s,e){return t=>{for(let i=Pe(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(s.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class AT{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function Os(s){return s.selection.main.from}function iR(s,e){var t;let{source:i}=s,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?s:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}const nR=wt.define();function qp(s,e,t,i){let{main:n}=s.selection,r=t-n.from,o=i-n.from;return Object.assign(Object.assign({},s.changeByRange(l=>{if(l!=n&&t!=i&&s.sliceDoc(l.from+r,l.from+o)!=s.sliceDoc(t,i))return{range:l};let a=s.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:_.cursor(l.from+r+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const RT=new WeakMap;function zp(s){if(!Array.isArray(s))return s;let e=RT.get(s);return e||RT.set(s,e=sR(s)),e}const or=V.define(),ki=V.define();class Zp{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Xe(e,t),n=Ct(i);this.chars.push(i);let r=e.slice(t,t+n),o=r.toUpperCase();this.folded.push(Xe(o==r?r.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:r,byWord:o}=this;if(t.length==1){let O=Xe(e,0),p=Ct(O),P=p==e.length?0:-100;if(O!=t[0])if(O==i[0])P+=-200;else return null;return this.ret(P,[0,p])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,E=0;if(l<0){for(let O=0,p=Math.min(e.length,200);O<p&&E<a;){let P=Xe(e,O);(P==t[E]||P==i[E])&&(n[E++]=O),O+=Ct(P)}if(E<a)return null}let T=0,c=0,h=!1,A=0,u=-1,f=-1,S=/[a-z]/.test(e),d=!0;for(let O=0,p=Math.min(e.length,200),P=0;O<p&&c<a;){let L=Xe(e,O);l<0&&(T<a&&L==t[T]&&(r[T++]=O),A<a&&(L==t[A]||L==i[A]?(A==0&&(u=O),f=O+1,A++):A=0));let M,D=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(M=ia(L))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!O||D==1&&S||P==0&&D!=0)&&(t[c]==L||i[c]==L&&(h=!0)?o[c++]=O:o.length&&(d=!1)),P=D,O+=Ct(L)}return c==a&&o[0]==0&&d?this.result(-100+(h?-200:0),o,e):A==a&&u==0?this.ret(-200-e.length+(f==e.length?0:-100),[0,f]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):A==a?this.ret(-900-e.length,[u,f]):c==a?this.result(-100+(h?-200:0)+-700+(d?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],r=0;for(let o of t){let l=o+(this.astral?Ct(Xe(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class eC{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const ge=x.define({combine(s){return Ut(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:tC,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>uT(e(i),t(i)),optionClass:(e,t)=>i=>uT(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function uT(s,e){return s?e?s+" "+e:s:e}function tC(s,e,t,i,n,r){let o=s.textDirection==ae.RTL,l=o,a=!1,E="top",T,c,h=e.left-n.left,A=n.right-e.right,u=i.right-i.left,f=i.bottom-i.top;if(l&&h<Math.min(u,A)?l=!1:!l&&A<Math.min(u,h)&&(l=!0),u<=(l?h:A))T=Math.max(n.top,Math.min(t.top,n.bottom-f))-e.top,c=Math.min(400,l?h:A);else{a=!0,c=Math.min(400,(o?e.right:n.right-e.left)-30);let O=n.bottom-e.bottom;O>=f||O>e.top?T=t.bottom-e.top:(E="bottom",T=e.bottom-t.top)}let S=(e.bottom-e.top)/r.offsetHeight,d=(e.right-e.left)/r.offsetWidth;return{style:`${E}: ${T/S}px; max-width: ${c/d}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function sC(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let E=0;E<r.length;){let T=r[E++],c=r[E++];T>a&&o.appendChild(document.createTextNode(l.slice(a,T)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(T,c))),h.className="cm-completionMatchedText",a=c}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function fo(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((s-e)/t);return{from:s-(i+1)*t,to:s-i*t}}class iC{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:o}=n.open,l=e.state.facet(ge);this.optionContent=sC(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=fo(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:E}=e.state.field(t).open;for(let T=a.target,c;T&&T!=this.dom;T=T.parentNode)if(T.nodeName=="LI"&&(c=/-(\d+)$/.exec(T.id))&&+c[1]<E.length){this.applyCompletion(e,E[+c[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let E=e.state.field(this.stateField,!1);E&&E.tooltip&&e.state.facet(ge).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:ki.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=fo(r.length,o,e.state.facet(ge).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=fo(t.options.length,t.selected,this.view.state.facet(ge).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let r=typeof n=="string"?document.createTextNode(n):n(i);if(!r)return;"then"in r?r.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>$e(this.view.state,o,"completion info")):this.addInfoPane(r,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&rC(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,t.bottom)-10||n.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(ge).positionInfo(this.view,t,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:E}=l;if(E){let h=typeof E=="string"?E:E.name;if(h!=r&&(o>i.from||i.from==0))if(r=h,typeof E!="string"&&E.header)n.appendChild(E.header(E));else{let A=n.appendChild(document.createElement("completion-section"));A.textContent=h}}const T=n.appendChild(document.createElement("li"));T.id=t+"-"+o,T.setAttribute("role","option");let c=this.optionClass(l);c&&(T.className=c);for(let h of this.optionContent){let A=h(l,this.view.state,this.view,a);A&&T.appendChild(A)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function nC(s,e){return t=>new iC(t,s,e)}function rC(s,e){let t=s.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/s.offsetHeight;i.top<t.top?s.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(s.scrollTop+=(i.bottom-t.bottom)/n)}function fT(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function oC(s,e){let t=[],i=null,n=E=>{t.push(E);let{section:T}=E.completion;if(T){i||(i=[]);let c=typeof T=="string"?T:T.name;i.some(h=>h.name==c)||i.push(typeof T=="string"?{name:c}:T)}},r=e.facet(ge);for(let E of s)if(E.hasResult()){let T=E.result.getMatch;if(E.result.filter===!1)for(let c of E.result.options)n(new AT(c,E.source,T?T(c):[],1e9-t.length));else{let c=e.sliceDoc(E.from,E.to),h,A=r.filterStrict?new eC(c):new Zp(c);for(let u of E.result.options)if(h=A.match(u.label)){let f=u.displayLabel?T?T(u,h.matched):[]:h.matched;n(new AT(u,E.source,f,h.score+(u.boost||0)))}}}if(i){let E=Object.create(null),T=0,c=(h,A)=>{var u,f;return((u=h.rank)!==null&&u!==void 0?u:1e9)-((f=A.rank)!==null&&f!==void 0?f:1e9)||(h.name<A.name?-1:1)};for(let h of i.sort(c))T-=1e5,E[h.name]=T;for(let h of t){let{section:A}=h.completion;A&&(h.score+=E[typeof A=="string"?A:A.name])}}let o=[],l=null,a=r.compareCompletions;for(let E of t.sort((T,c)=>c.score-T.score||a(T.completion,c.completion))){let T=E.completion;!l||l.label!=T.label||l.detail!=T.detail||l.type!=null&&T.type!=null&&l.type!=T.type||l.apply!=T.apply||l.boost!=T.boost?o.push(E):fT(E.completion)>fT(l)&&(o[o.length-1]=E),l=E.completion}return o}class ws{constructor(e,t,i,n,r,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ws(this.options,ST(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,r,o){if(n&&!o&&e.some(E=>E.isPending))return n.setDisabled();let l=oC(e,t);if(!l.length)return n&&e.some(E=>E.isPending)?n.setDisabled():null;let a=t.facet(ge).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let E=n.options[n.selected].completion;for(let T=0;T<l.length;T++)if(l[T].completion==E){a=T;break}}return new ws(l,ST(i,a),{pos:e.reduce((E,T)=>T.hasResult()?Math.min(E,T.from):E,1e8),create:hC,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new ws(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new ws(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class lr{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new lr(TC,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(ge),r=(i.override||t.languageDataAt("autocomplete",Os(t)).map(zp)).map(a=>(this.active.find(T=>T.source==a)||new nt(a,this.active.some(T=>T.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,E)=>a==this.active[E])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(_a));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!lC(r,this.active)||l?o=ws.build(r,t,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new nt(a.source,0):a));for(let a of e.effects)a.is(oR)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new lr(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?aC:EC}}function lC(s,e){if(s==e)return!0;for(let t=0,i=0;;){for(;t<s.length&&!s[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let n=t==s.length,r=i==e.length;if(n||r)return n==r;if(s[t++].result!=e[i++].result)return!1}}const aC={"aria-autocomplete":"list"},EC={};function ST(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const TC=[];function rR(s,e){if(s.isUserEvent("input.complete")){let i=s.annotation(nR);if(i&&e.activateOnCompletion(i))return 12}let t=s.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class nt{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=rR(e,t),n=this;(i&8||i&16&&this.touches(e))&&(n=new nt(n.source,0)),i&4&&n.state==0&&(n=new nt(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is(or))n=new nt(n.source,1,r.value);else if(r.is(ki))n=new nt(n.source,0);else if(r.is(_a))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Os(e.state))}}class Ws extends nt{constructor(e,t,i,n,r,o){super(e,3,t),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Os(e.state);if(l>o||!n||t&2&&(Os(e.startState)==this.from||l<this.limit))return new nt(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return cC(n.validFor,e.state,r,o)?new Ws(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new tR(e.state,l,!1)))?new Ws(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Os(e.state)):new nt(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ws(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new nt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function cC(s,e,t,i){if(!s)return!1;let n=e.sliceDoc(t,i);return typeof s=="function"?s(n,t,i,e):iR(s,!0).test(n)}const _a=V.define({map(s,e){return s.map(t=>t.map(e))}}),oR=V.define(),ve=pe.define({create(){return lr.start()},update(s,e){return s.update(e)},provide:s=>[da.from(s,e=>e.tooltip),y.contentAttributes.from(s,e=>e.attrs)]});function ga(s,e){const t=e.completion.apply||e.completion.label;let i=s.state.field(ve).active.find(n=>n.source==e.source);return i instanceof Ws?(typeof t=="string"?s.dispatch(Object.assign(Object.assign({},qp(s.state,t,i.from,i.to)),{annotations:nR.of(e.completion)})):t(s,e.completion,i.from,i.to),!0):!1}const hC=nC(ve,ga);function Nn(s,e="option"){return t=>{let i=t.state.field(ve,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(ge).interactionDelay)return!1;let n=1,r;e=="page"&&(r=LA(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(s?1:-1):s?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:oR.of(l)}),!0}}const lR=s=>{let e=s.state.field(ve,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(ge).interactionDelay?!1:ga(s,e.open.options[e.open.selected])},Gl=s=>s.state.field(ve,!1)?(s.dispatch({effects:or.of(!0)}),!0):!1,AC=s=>{let e=s.state.field(ve,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:ki.of(null)}),!0)};class RC{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const uC=50,fC=1e3,SC=Se.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(ve).active)e.isPending&&this.startQuery(e)}update(s){let e=s.state.field(ve),t=s.state.facet(ge);if(!s.selectionSet&&!s.docChanged&&s.startState.field(ve)==e)return;let i=s.transactions.some(r=>{let o=rR(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&s.docChanged||o.updates.length+s.transactions.length>uC&&Date.now()-o.time>fC){for(let l of o.context.abortListeners)try{l()}catch(a){$e(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(r=>r.effects.some(o=>o.is(or)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of s.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(ve);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ge).updateSyncTime))}startQuery(s){let{state:e}=this.view,t=Os(e),i=new tR(e,t,s.explicit,this.view),n=new RC(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:ki.of(null)}),$e(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ge).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ge),i=this.view.state.field(ve);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=Os(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),E=new Ws(r.active.source,r.active.explicit,a,r.done,r.done.from,(s=r.done.to)!==null&&s!==void 0?s:l);for(let T of r.updates)E=E.update(T,t);if(E.hasResult()){e.push(E);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new nt(r.active.source,0);for(let a of r.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:_a.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(ve,!1);if(e&&e.tooltip&&this.view.state.facet(ge).closeOnBlur){let t=e.open&&LA(this.view,e.open.tooltip);(!t||!t.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ki.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:or.of(!1)}),20),this.composing=0}}}),dC=typeof navigator=="object"&&/Win/.test(navigator.platform),OC=vt.highest(y.domEventHandlers({keydown(s,e){let t=e.state.field(ve,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||s.key.length>1||s.ctrlKey&&!(dC&&s.altKey)||s.metaKey)return!1;let i=t.open.options[t.open.selected],n=t.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(s.key)>-1&&ga(e,i),!1}})),IC=y.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Vi={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ss=V.define({map(s,e){let t=e.mapPos(s,-1,we.TrackAfter);return t??void 0}}),Pa=new class extends Ns{};Pa.startSide=1;Pa.endSide=-1;const aR=pe.define({create(){return j.empty},update(s,e){if(s=s.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Ss)&&(s=s.update({add:[Pa.range(t.value,t.value+1)]}));return s}});function NC(){return[CC,aR]}const So="()[]{}<>«»»«［］｛｝";function ER(s){for(let e=0;e<So.length;e+=2)if(So.charCodeAt(e)==s)return So.charAt(e+1);return ia(s<128?s:s+1)}function TR(s,e){return s.languageDataAt("closeBrackets",e)[0]||Vi}const pC=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),CC=y.inputHandler.of((s,e,t,i)=>{if((pC?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&Ct(Xe(i,0))==1||e!=n.from||t!=n.to)return!1;let r=_C(s.state,i);return r?(s.dispatch(r),!0):!1}),mC=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=TR(s,s.selection.main.head).brackets||Vi.brackets,n=null,r=s.changeByRange(o=>{if(o.empty){let l=gC(s.doc,o.head);for(let a of i)if(a==l&&Ur(s.doc,o.head)==ER(Xe(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:_.cursor(o.head-a.length)}}return{range:n=o}});return n||e(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},LC=[{key:"Backspace",run:mC}];function _C(s,e){let t=TR(s,s.selection.main.head),i=t.brackets||Vi.brackets;for(let n of i){let r=ER(Xe(n,0));if(e==n)return r==n?MC(s,n,i.indexOf(n+n+n)>-1,t):PC(s,n,r,t.before||Vi.before);if(e==r&&cR(s,s.selection.main.from))return DC(s,n,r)}return null}function cR(s,e){let t=!1;return s.field(aR).between(0,s.doc.length,i=>{i==e&&(t=!0)}),t}function Ur(s,e){let t=s.sliceString(e,e+2);return t.slice(0,Ct(Xe(t,0)))}function gC(s,e){let t=s.sliceString(e-2,e);return Ct(Xe(t,0))==t.length?t:t.slice(1)}function PC(s,e,t,i){let n=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ss.of(o.to+e.length),range:_.range(o.anchor+e.length,o.head+e.length)};let l=Ur(s.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Ss.of(o.head+e.length),range:_.cursor(o.head+e.length)}:{range:n=o}});return n?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function DC(s,e,t){let i=null,n=s.changeByRange(r=>r.empty&&Ur(s.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:_.cursor(r.head+t.length)}:i={range:r});return i?null:s.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function MC(s,e,t,i){let n=i.stringPrefixes||Vi.stringPrefixes,r=null,o=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Ss.of(l.to+e.length),range:_.range(l.anchor+e.length,l.head+e.length)};let a=l.head,E=Ur(s.doc,a),T;if(E==e){if(dT(s,a))return{changes:{insert:e+e,from:a},effects:Ss.of(a+e.length),range:_.cursor(a+e.length)};if(cR(s,a)){let h=t&&s.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:_.cursor(a+h.length)}}}else{if(t&&s.sliceDoc(a-2*e.length,a)==e+e&&(T=OT(s,a-2*e.length,n))>-1&&dT(s,T))return{changes:{insert:e+e+e+e,from:a},effects:Ss.of(a+e.length),range:_.cursor(a+e.length)};if(s.charCategorizer(a)(E)!=Te.Word&&OT(s,a,n)>-1&&!UC(s,a,e,n))return{changes:{insert:e+e,from:a},effects:Ss.of(a+e.length),range:_.cursor(a+e.length)}}return{range:r=l}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function dT(s,e){let t=Pe(s).resolveInner(e+1);return t.parent&&t.from==e}function UC(s,e,t,i){let n=Pe(s).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=s.sliceDoc(n.from,Math.min(n.to,n.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let T=n.firstChild;for(;T&&T.from==n.from&&T.to-T.from>t.length+a;){if(s.sliceDoc(T.to-t.length,T.to)==t)return!1;T=T.firstChild}return!0}let E=n.to==e&&n.parent;if(!E)break;n=E}return!1}function OT(s,e,t){let i=s.charCategorizer(e);if(i(s.sliceDoc(e-1,e))!=Te.Word)return e;for(let n of t){let r=e-n.length;if(s.sliceDoc(r,e)==n&&i(s.sliceDoc(r-1,r))!=Te.Word)return r}return-1}function hR(s={}){return[OC,ve,ge.of(s),SC,yC,IC]}const AR=[{key:"Ctrl-Space",run:Gl},{mac:"Alt-`",run:Gl},{key:"Escape",run:AC},{key:"ArrowDown",run:Nn(!0)},{key:"ArrowUp",run:Nn(!1)},{key:"PageDown",run:Nn(!0,"page")},{key:"PageUp",run:Nn(!1,"page")},{key:"Enter",run:lR}],yC=vt.highest(ni.computeN([ge],s=>s.facet(ge).defaultKeymap?[AR]:[]));function xC(s){let e=s.field(ve,!1);return e&&e.active.some(t=>t.isPending)?"pending":e&&e.active.some(t=>t.state!=0)?"active":null}const bC=36,IT=1,BC=2,Us=3,Oo=4,GC=5,HC=6,vC=7,wC=8,FC=9,YC=10,kC=11,VC=12,WC=13,XC=14,KC=15,$C=16,JC=17,NT=18,jC=19,RR=20,uR=21,pT=22,QC=23,qC=24;function Hl(s){return s>=65&&s<=90||s>=97&&s<=122||s>=48&&s<=57}function zC(s){return s>=48&&s<=57||s>=97&&s<=102||s>=65&&s<=70}function As(s,e,t){for(let i=!1;;){if(s.next<0)return;if(s.next==e&&!i){s.advance();return}i=t&&!i&&s.next==92,s.advance()}}function ZC(s,e){e:for(;;){if(s.next<0)return;if(s.next==36){s.advance();for(let t=0;t<e.length;t++){if(s.next!=e.charCodeAt(t))continue e;s.advance()}if(s.next==36){s.advance();return}}else s.advance()}}function em(s,e){let t="[{<(".indexOf(String.fromCharCode(e)),i=t<0?e:"]}>)".charCodeAt(t);for(;;){if(s.next<0)return;if(s.next==i&&s.peek(1)==39){s.advance(2);return}s.advance()}}function vl(s,e){for(;!(s.next!=95&&!Hl(s.next));)e!=null&&(e+=String.fromCharCode(s.next)),s.advance();return e}function tm(s){if(s.next==39||s.next==34||s.next==96){let e=s.next;s.advance(),As(s,e,!1)}else vl(s)}function CT(s,e){for(;s.next==48||s.next==49;)s.advance();e&&s.next==e&&s.advance()}function mT(s,e){for(;;){if(s.next==46){if(e)break;e=!0}else if(s.next<48||s.next>57)break;s.advance()}if(s.next==69||s.next==101)for(s.advance(),(s.next==43||s.next==45)&&s.advance();s.next>=48&&s.next<=57;)s.advance()}function LT(s){for(;!(s.next<0||s.next==10);)s.advance()}function cs(s,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==s)return!0;return!1}const Io=` 	\r
`;function fR(s,e,t){let i=Object.create(null);i.true=i.false=GC,i.null=i.unknown=HC;for(let n of s.split(" "))n&&(i[n]=RR);for(let n of e.split(" "))n&&(i[n]=uR);for(let n of(t||"").split(" "))n&&(i[n]=qC);return i}const SR="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",dR="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",wl={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:fR(dR,SR)};function sm(s,e,t,i){let n={};for(let r in wl)n[r]=(s.hasOwnProperty(r)?s:wl)[r];return e&&(n.words=fR(e,t||"",i)),n}function IR(s){return new Yp(e=>{var t;let{next:i}=e;if(e.advance(),cs(i,Io)){for(;cs(e.next,Io);)e.advance();e.acceptToken(bC)}else if(i==36&&s.doubleDollarQuotedStrings){let n=vl(e,"");e.next==36&&(e.advance(),ZC(e,n),e.acceptToken(Us))}else if(i==39||i==34&&s.doubleQuotedStrings)As(e,i,s.backslashEscapes),e.acceptToken(Us);else if(i==35&&s.hashComments||i==47&&e.next==47&&s.slashComments)LT(e),e.acceptToken(IT);else if(i==45&&e.next==45&&(!s.spaceAfterDashes||e.peek(1)==32))LT(e),e.acceptToken(IT);else if(i==47&&e.next==42){e.advance();for(let n=1;;){let r=e.next;if(e.next<0)break;if(e.advance(),r==42&&e.next==47){if(n--,e.advance(),!n)break}else r==47&&e.next==42&&(n++,e.advance())}e.acceptToken(BC)}else if((i==101||i==69)&&e.next==39)e.advance(),As(e,39,!0),e.acceptToken(Us);else if((i==110||i==78)&&e.next==39&&s.charSetCasts)e.advance(),As(e,39,s.backslashEscapes),e.acceptToken(Us);else if(i==95&&s.charSetCasts)for(let n=0;;n++){if(e.next==39&&n>1){e.advance(),As(e,39,s.backslashEscapes),e.acceptToken(Us);break}if(!Hl(e.next))break;e.advance()}else if(s.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!cs(e.peek(1),Io)){let n=e.peek(1);e.advance(2),em(e,n),e.acceptToken(Us)}else if(i==40)e.acceptToken(vC);else if(i==41)e.acceptToken(wC);else if(i==123)e.acceptToken(FC);else if(i==125)e.acceptToken(YC);else if(i==91)e.acceptToken(kC);else if(i==93)e.acceptToken(VC);else if(i==59)e.acceptToken(WC);else if(s.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),CT(e),e.acceptToken(pT);else if((i==98||i==66)&&(e.next==39||e.next==34)){const n=e.next;e.advance(),s.treatBitsAsBytes?(As(e,n,s.backslashEscapes),e.acceptToken(QC)):(CT(e,n),e.acceptToken(pT))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let n=e.next==39;for(e.advance();zC(e.next);)e.advance();n&&e.next==39&&e.advance(),e.acceptToken(Oo)}else if(i==46&&e.next>=48&&e.next<=57)mT(e,!0),e.acceptToken(Oo);else if(i==46)e.acceptToken(XC);else if(i>=48&&i<=57)mT(e,!1),e.acceptToken(Oo);else if(cs(i,s.operatorChars)){for(;cs(e.next,s.operatorChars);)e.advance();e.acceptToken(KC)}else if(cs(i,s.specialVar))e.next==i&&e.advance(),tm(e),e.acceptToken(JC);else if(cs(i,s.identifierQuotes))As(e,i,!1),e.acceptToken(jC);else if(i==58||i==44)e.acceptToken($C);else if(Hl(i)){let n=vl(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-n.length-1)==46?NT:(t=s.words[n.toLowerCase()])!==null&&t!==void 0?t:NT)}})}const NR=IR(wl),im=rr.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"⚠ LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,NR],topRules:{Script:[0,25]},tokenPrec:0});function Fl(s){let e=s.cursor().moveTo(s.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function Wi(s,e){let t=s.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(t);return i?i[2]:t}function ar(s){return s&&(s.name=="Identifier"||s.name=="QuotedIdentifier")}function nm(s,e){if(e.name=="CompositeIdentifier"){let t=[];for(let i=e.firstChild;i;i=i.nextSibling)ar(i)&&t.push(Wi(s,i));return t}return[Wi(s,e)]}function _T(s,e){for(let t=[];;){if(!e||e.name!=".")return t;let i=Fl(e);if(!ar(i))return t;t.unshift(Wi(s,i)),e=Fl(i)}}function rm(s,e){let t=Pe(s).resolveInner(e,-1),i=lm(s.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?s.doc.sliceString(t.from,t.from+1):null,parents:_T(s.doc,Fl(t)),aliases:i}:t.name=="."?{from:e,quoted:null,parents:_T(s.doc,t),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const om=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function lm(s,e){let t;for(let n=e;!t;n=n.parent){if(!n)return null;n.name=="Statement"&&(t=n)}let i=null;for(let n=t.firstChild,r=!1,o=null;n;n=n.nextSibling){let l=n.name=="Keyword"?s.sliceString(n.from,n.to).toLowerCase():null,a=null;if(!r)r=l=="from";else if(l=="as"&&o&&ar(n.nextSibling))a=Wi(s,n.nextSibling);else{if(l&&om.has(l))break;o&&ar(n)&&(a=Wi(s,n))}a&&(i||(i=Object.create(null)),i[a]=nm(s,o)),o=/Identifier$/.test(n.name)?n:null}return i}function am(s,e){return s?e.map(t=>Object.assign(Object.assign({},t),{label:t.label[0]==s?t.label:s+t.label+s,apply:void 0})):e}const Em=/^\w*$/,Tm=/^[`'"]?\w*[`'"]?$/;function gT(s){return s.self&&typeof s.self.label=="string"}class Da{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(n=>n.label==e)&&this.list.push(PT(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new Da(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(i=>i.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?PT(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):gT(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],n=null,r=t.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),o=this;gT(i)&&(n=i.self,i=i.children);for(let l=0;l<r.length;l++)n&&l==r.length-1&&o.addCompletion(n),o=o.child(r[l].replace(/\\\./g,"."));o.addNamespace(i)}}}function PT(s,e,t,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(s)?{label:s,type:e}:{label:s,type:e,apply:t+s+t}}function cm(s,e,t,i,n,r){var o;let l=((o=r==null?void 0:r.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',a=new Da(l,!!(r!=null&&r.spec.caseInsensitiveIdentifiers)),E=n?a.child(n):null;return a.addNamespace(s),e&&(E||a).addCompletions(e),t&&a.addCompletions(t),E&&a.addCompletions(E.list),i&&a.addCompletions((E||a).child(i).list),T=>{let{parents:c,from:h,quoted:A,empty:u,aliases:f}=rm(T.state,T.pos);if(u&&!T.explicit)return null;f&&c.length==1&&(c=f[c[0]]||c);let S=a;for(let p of c){for(;!S.children||!S.children[p];)if(S==a&&E)S=E;else if(S==E&&i)S=S.child(i);else return null;let P=S.maybeChild(p);if(!P)return null;S=P}let d=A&&T.state.sliceDoc(T.pos,T.pos+1)==A,O=S.list;return S==a&&f&&(O=O.concat(Object.keys(f).map(p=>({label:p,type:"constant"})))),{from:h,to:d?T.pos+1:void 0,options:am(A,O),validFor:A?Tm:Em}}}function hm(s){return s==uR?"type":s==RR?"keyword":"variable"}function Am(s,e,t){let i=Object.keys(s).map(n=>t(e?n.toUpperCase():n,hm(s[n])));return Qp(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],sR(i))}let Rm=im.configure({props:[FA.add({Statement:op()}),kA.add({Statement(s,e){return{from:Math.min(s.from+100,e.doc.lineAt(s.from).to),to:s.to}},BlockComment(s){return{from:s.from+2,to:s.to-2}}}),GA({Keyword:N.keyword,Type:N.typeName,Builtin:N.standard(N.name),Bits:N.number,Bytes:N.string,Bool:N.bool,Null:N.null,Number:N.number,String:N.string,Identifier:N.name,QuotedIdentifier:N.special(N.string),SpecialVar:N.special(N.name),LineComment:N.lineComment,BlockComment:N.blockComment,Operator:N.operator,"Semi Punctuation":N.punctuation,"( )":N.paren,"{ }":N.brace,"[ ]":N.squareBracket})]});class yr{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}static define(e){let t=sm(e,e.keywords,e.types,e.builtin),i=zn.define({name:"sql",parser:Rm.configure({tokenizers:[{from:NR,to:IR(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new yr(t,i,e)}}function um(s,e){return{label:s,type:e,boost:-1}}function fm(s,e=!1,t){return Am(s.dialect.words,e,t||um)}function Sm(s){return s.schema?cm(s.schema,s.tables,s.schemas,s.defaultTable,s.defaultSchema,s.dialect||Ma):()=>null}function dm(s){return s.schema?(s.dialect||Ma).language.data.of({autocomplete:Sm(s)}):[]}function Om(s={}){let e=s.dialect||Ma;return new qN(e.language,[dm(s),e.language.data.of({autocomplete:fm(e,s.upperCaseKeywords,s.keywordCompletion)})])}const Ma=yr.define({}),Im="accessible algorithm analyze asensitive authors auto_increment autocommit avg avg_row_length binlog btree cache catalog_name chain change changed checkpoint checksum class_origin client_statistics coalesce code collations columns comment committed completion concurrent consistent contains contributors convert database databases day_hour day_microsecond day_minute day_second delay_key_write delayed delimiter des_key_file dev_pop dev_samp deviance directory disable discard distinctrow div dual dumpfile enable enclosed ends engine engines enum errors escaped even event events every explain extended fast field fields flush force found_rows fulltext grants handler hash high_priority hosts hour_microsecond hour_minute hour_second ignore ignore_server_ids import index index_statistics infile innodb insensitive insert_method install invoker iterate keys kill linear lines list load lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modify mutex mysql_errno no_write_to_binlog offline offset one online optimize optionally outfile pack_keys parser partition partitions password phase plugin plugins prev processlist profile profiles purge query quick range read_write rebuild recover regexp relaylog remove rename reorganize repair repeatable replace require resume rlike row_format rtree schedule schema_name schemas second_microsecond security sensitive separator serializable server share show slave slow snapshot soname spatial sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result ssl starting starts std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace terminated triggers truncate uncommitted uninstall unlock upgrade use use_frm user_resources user_statistics utc_date utc_time utc_timestamp variables views warnings xa xor year_month zerofill",Nm=SR+"bool blob long longblob longtext medium mediumblob mediumint mediumtext tinyblob tinyint tinytext text bigint int1 int2 int3 int4 int8 float4 float8 varbinary varcharacter precision datetime unsigned signed",pm="charset clear edit ego help nopager notee nowarning pager print prompt quit rehash source status system tee",Cm=yr.define({operatorChars:"*+-%<>!=&|^",charSetCasts:!0,doubleQuotedStrings:!0,unquotedBitLiterals:!0,hashComments:!0,spaceAfterDashes:!0,specialVar:"@?",identifierQuotes:"`",keywords:dR+"group_concat "+Im,types:Nm,builtin:pm}),mm=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),i=ya(s.state,t.from);return i.line?Lm(s):i.block?gm(s):!1};function Ua(s,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=s(e,t);return n?(i(t.update(n)),!0):!1}}const Lm=Ua(Mm,0),_m=Ua(pR,0),gm=Ua((s,e)=>pR(s,e,Dm(e)),0);function ya(s,e){let t=s.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Ri=50;function Pm(s,{open:e,close:t},i,n){let r=s.sliceDoc(i-Ri,i),o=s.sliceDoc(n,n+Ri),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,E=r.length-l;if(r.slice(E-e.length,E)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let T,c;n-i<=2*Ri?T=c=s.sliceDoc(i,n):(T=s.sliceDoc(i,i+Ri),c=s.sliceDoc(n-Ri,n));let h=/^\s*/.exec(T)[0].length,A=/\s*$/.exec(c)[0].length,u=c.length-A-t.length;return T.slice(h,h+e.length)==e&&c.slice(u,u+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(T.charAt(h+e.length))?1:0},close:{pos:n-A-t.length,margin:/\s/.test(c.charAt(u-1))?1:0}}:null}function Dm(s){let e=[];for(let t of s.selection.ranges){let i=s.doc.lineAt(t.from),n=t.to<=i.to?i:s.doc.lineAt(t.to);n.from>i.from&&n.from==t.to&&(n=t.to==i.to+1?i:s.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function pR(s,e,t=e.selection.ranges){let i=t.map(r=>ya(e,r.from).block);if(!i.every(r=>r))return null;let n=t.map((r,o)=>Pm(e,i[o],r.from,r.to));if(s!=2&&!n.every(r=>r))return{changes:e.changes(t.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(s!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:E,close:T}=l;r.push({from:E.pos-a.open.length,to:E.pos+E.margin},{from:T.pos-T.margin,to:T.pos+a.close.length})}return{changes:r}}return null}function Mm(s,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of t){let l=i.length,a=1e9,E=ya(e,r).line;if(E){for(let T=r;T<=o;){let c=e.doc.lineAt(T);if(c.from>n&&(r==o||o>c.from)){n=c.from;let h=/^\s*/.exec(c.text)[0].length,A=h==c.length,u=c.text.slice(h,h+E.length)==E?h:-1;h<c.text.length&&h<a&&(a=h),i.push({line:c,comment:u,token:E,indent:h,empty:A,single:!1})}T=c.to+1}if(a<1e9)for(let T=l;T<i.length;T++)i[T].indent<i[T].line.text.length&&(i[T].indent=a);i.length==l+1&&(i[l].single=!0)}}if(s!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:E,empty:T,single:c}of i)(c||!T)&&r.push({from:l.from+E,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let E=o.from+l,T=E+a.length;o.text[T-o.from]==" "&&T++,r.push({from:E,to:T})}return{changes:r}}return null}const Yl=wt.define(),Um=wt.define(),ym=x.define(),CR=x.define({combine(s){return Ut(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),mR=pe.define({create(){return _t.empty},update(s,e){let t=e.state.facet(CR),i=e.annotation(Yl);if(i){let a=Je.fromTransaction(e,i.selection),E=i.side,T=E==0?s.undone:s.done;return a?T=Er(T,T.length,t.minDepth,a):T=gR(T,e.startState.selection),new _t(E==0?i.rest:T,E==0?T:i.rest)}let n=e.annotation(Um);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation(Oe.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=Je.fromTransaction(e),o=e.annotation(Oe.time),l=e.annotation(Oe.userEvent);return r?s=s.addChanges(r,o,l,t,e):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new _t(s.done.map(Je.fromJSON),s.undone.map(Je.fromJSON))}});function xm(s={}){return[mR,CR.of(s),y.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?LR:e.inputType=="historyRedo"?kl:null;return i?(e.preventDefault(),i(t)):!1}})]}function xr(s,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(mR,!1);if(!n)return!1;let r=n.pop(s,t,e);return r?(i(r),!0):!1}}const LR=xr(0,!1),kl=xr(1,!1),bm=xr(0,!0),Bm=xr(1,!0);class Je{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new Je(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Je(e.changes&&de.fromJSON(e.changes),[],e.mapped&&gt.fromJSON(e.mapped),e.startSelection&&_.fromJSON(e.startSelection),e.selectionsAfter.map(_.fromJSON))}static fromTransaction(e,t){let i=rt;for(let n of e.startState.facet(ym)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Je(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,rt)}static selection(e){return new Je(void 0,rt,void 0,void 0,e)}}function Er(s,e,t,i){let n=e+1>t+20?e-t-1:0,r=s.slice(n,e);return r.push(i),r}function Gm(s,e){let t=[],i=!1;return s.iterChangedRanges((n,r)=>t.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<t.length;){let E=t[a++],T=t[a++];l>=E&&o<=T&&(i=!0)}}),i}function Hm(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function _R(s,e){return s.length?e.length?s.concat(e):s:e}const rt=[],vm=200;function gR(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-vm));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),Er(s,s.length-1,1e9,t.setSelAfter(i)))}else return[Je.selection([e])]}function wm(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function No(s,e){if(!s.length)return s;let t=s.length,i=rt;for(;t;){let n=Fm(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,t);return r[t-1]=n,r}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Je.selection(i)]:rt}function Fm(s,e,t){let i=_R(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):rt,t);if(!s.changes)return Je.selection(i);let n=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new Je(n,V.mapEffects(s.effects,e),o,s.startSelection.map(r),i)}const Ym=/^(input\.type|delete)($|\.)/;class _t{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new _t(this.done,this.undone):this}addChanges(e,t,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||Ym.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,Gm(l.changes,e.changes))||i=="input.type.compose")?o=Er(o,o.length-1,n.minDepth,new Je(e.changes.compose(l.changes),_R(V.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,rt)):o=Er(o,o.length,n.minDepth,e),new _t(o,rt,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:rt;return r.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Hm(r[r.length-1],e)?this:new _t(gR(this.done,e),this.undone,t,i)}addMapping(e){return new _t(No(this.done,e),No(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||t.selection;if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Yl.of({side:e,rest:wm(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?rt:n.slice(0,n.length-1);return r.mapped&&(l=No(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Yl.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}_t.empty=new _t(rt,rt);const km=[{key:"Mod-z",run:LR,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:kl,preventDefault:!0},{linux:"Ctrl-Shift-z",run:kl,preventDefault:!0},{key:"Mod-u",run:bm,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Bm,preventDefault:!0}];function ri(s,e){return _.create(s.ranges.map(e),s.mainIndex)}function yt(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ft({state:s,dispatch:e},t){let i=ri(s.selection,t);return i.eq(s.selection,!0)?!1:(e(yt(s,i)),!0)}function br(s,e){return _.cursor(e?s.to:s.from)}function PR(s,e){return ft(s,t=>t.empty?s.moveByChar(t,e):br(t,e))}function He(s){return s.textDirectionAt(s.state.selection.main.head)==ae.LTR}const DR=s=>PR(s,!He(s)),MR=s=>PR(s,He(s));function UR(s,e){return ft(s,t=>t.empty?s.moveByGroup(t,e):br(t,e))}const Vm=s=>UR(s,!He(s)),Wm=s=>UR(s,He(s));function Xm(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function Br(s,e,t){let i=Pe(s).resolveInner(e.head),n=t?$.closedBy:$.openedBy;for(let a=e.head;;){let E=t?i.childAfter(a):i.childBefore(a);if(!E)break;Xm(s,E,n)?i=E:a=t?E.to:E.from}let r=i.type.prop(n),o,l;return r&&(o=t?Lt(s,i.from,1):Lt(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,_.cursor(l,t?-1:1)}const Km=s=>ft(s,e=>Br(s.state,e,!He(s))),$m=s=>ft(s,e=>Br(s.state,e,He(s)));function yR(s,e){return ft(s,t=>{if(!t.empty)return br(t,e);let i=s.moveVertically(t,e);return i.head!=t.head?i:s.moveToLineBoundary(t,e)})}const xR=s=>yR(s,!1),bR=s=>yR(s,!0);function BR(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let r of s.state.facet(y.scrollMargins)){let o=r(s);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}n=s.scrollDOM.clientHeight-t-i}else n=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(s.defaultLineHeight,n-5)}}function GR(s,e){let t=BR(s),{state:i}=s,n=ri(i.selection,o=>o.empty?s.moveVertically(o,e,t.height):br(o,e));if(n.eq(i.selection))return!1;let r;if(t.selfScroll){let o=s.coordsAtPos(i.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,E=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<E&&(r=y.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return s.dispatch(yt(i,n),{effects:r}),!0}const DT=s=>GR(s,!1),Vl=s=>GR(s,!0);function rs(s,e,t){let i=s.lineBlockAt(e.head),n=s.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=s.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=_.cursor(i.from+r))}return n}const Jm=s=>ft(s,e=>rs(s,e,!0)),jm=s=>ft(s,e=>rs(s,e,!1)),Qm=s=>ft(s,e=>rs(s,e,!He(s))),qm=s=>ft(s,e=>rs(s,e,He(s))),zm=s=>ft(s,e=>_.cursor(s.lineBlockAt(e.head).from,1)),Zm=s=>ft(s,e=>_.cursor(s.lineBlockAt(e.head).to,-1));function eL(s,e,t){let i=!1,n=ri(s.selection,r=>{let o=Lt(s,r.head,-1)||Lt(s,r.head,1)||r.head>0&&Lt(s,r.head-1,1)||r.head<s.doc.length&&Lt(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return _.cursor(l)});return i?(e(yt(s,n)),!0):!1}const tL=({state:s,dispatch:e})=>eL(s,e);function Tt(s,e){let t=ri(s.state.selection,i=>{let n=e(i);return _.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(yt(s.state,t)),!0)}function HR(s,e){return Tt(s,t=>s.moveByChar(t,e))}const vR=s=>HR(s,!He(s)),wR=s=>HR(s,He(s));function FR(s,e){return Tt(s,t=>s.moveByGroup(t,e))}const sL=s=>FR(s,!He(s)),iL=s=>FR(s,He(s)),nL=s=>Tt(s,e=>Br(s.state,e,!He(s))),rL=s=>Tt(s,e=>Br(s.state,e,He(s)));function YR(s,e){return Tt(s,t=>s.moveVertically(t,e))}const kR=s=>YR(s,!1),VR=s=>YR(s,!0);function WR(s,e){return Tt(s,t=>s.moveVertically(t,e,BR(s).height))}const MT=s=>WR(s,!1),UT=s=>WR(s,!0),oL=s=>Tt(s,e=>rs(s,e,!0)),lL=s=>Tt(s,e=>rs(s,e,!1)),aL=s=>Tt(s,e=>rs(s,e,!He(s))),EL=s=>Tt(s,e=>rs(s,e,He(s))),TL=s=>Tt(s,e=>_.cursor(s.lineBlockAt(e.head).from)),cL=s=>Tt(s,e=>_.cursor(s.lineBlockAt(e.head).to)),yT=({state:s,dispatch:e})=>(e(yt(s,{anchor:0})),!0),xT=({state:s,dispatch:e})=>(e(yt(s,{anchor:s.doc.length})),!0),bT=({state:s,dispatch:e})=>(e(yt(s,{anchor:s.selection.main.anchor,head:0})),!0),BT=({state:s,dispatch:e})=>(e(yt(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),hL=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),AL=({state:s,dispatch:e})=>{let t=Gr(s).map(({from:i,to:n})=>_.range(i,Math.min(n+1,s.doc.length)));return e(s.update({selection:_.create(t),userEvent:"select"})),!0},RL=({state:s,dispatch:e})=>{let t=ri(s.selection,i=>{let n=Pe(s),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return _.range(l.to,l.from)}return i});return t.eq(s.selection)?!1:(e(yt(s,t)),!0)},uL=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=_.create([t.main]):t.main.empty||(i=_.create([_.cursor(t.main.head)])),i?(e(yt(s,i)),!0):!1};function Zi(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:i}=s,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(t="delete.backward",a=pn(s,a,!1)):a>o&&(t="delete.forward",a=pn(s,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=pn(s,o,!1),l=pn(s,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:_.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(s.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?y.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function pn(s,e,t){if(s instanceof y)for(let i of s.state.facet(y.atomicRanges).map(n=>n(s)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=t?r:n)});return e}const XR=(s,e,t)=>Zi(s,i=>{let n=i.from,{state:r}=s,o=r.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let E=ii(l,r.tabSize),T=E%er(r)||er(r);for(let c=0;c<T&&l[l.length-1-c]==" ";c++)n--;a=n}else a=Ue(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Ue(o.text,a-o.from,!1,!1)+o.from);return a}),Wl=s=>XR(s,!1,!0),KR=s=>XR(s,!0,!1),$R=(s,e)=>Zi(s,t=>{let i=t.head,{state:n}=s,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Ue(r.text,i-r.from,e)+r.from,E=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),T=o(E);if(l!=null&&T!=l)break;(E!=" "||i!=t.head)&&(l=T),i=a}return i}),JR=s=>$R(s,!1),fL=s=>$R(s,!0),SL=s=>Zi(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),dL=s=>Zi(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),OL=s=>Zi(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),IL=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:q.of(["",""])},range:_.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},NL=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:Ue(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Ue(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:_.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Gr(s){let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=s.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});t=r.number+1}return e}function jR(s,e,t){if(s.readOnly)return!1;let i=[],n=[];for(let r of Gr(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let a of r.ranges)n.push(_.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let a of r.ranges)n.push(_.range(a.anchor-l,a.head-l))}}return i.length?(e(s.update({changes:i,scrollIntoView:!0,selection:_.create(n,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const pL=({state:s,dispatch:e})=>jR(s,e,!1),CL=({state:s,dispatch:e})=>jR(s,e,!0);function QR(s,e,t){if(s.readOnly)return!1;let i=[];for(let n of Gr(s))t?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return e(s.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const mL=({state:s,dispatch:e})=>QR(s,e,!1),LL=({state:s,dispatch:e})=>QR(s,e,!0),_L=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(Gr(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=ri(e.selection,n=>{let r;if(s.lineWrapping){let o=s.lineBlockAt(n.head),l=s.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+s.documentTop-l.bottom+s.defaultLineHeight/2)}return s.moveVertically(n,!0,r)}).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function gL(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Pe(s).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop($.closedBy))&&r.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from&&!/\S/.test(s.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const GT=qR(!1),PL=qR(!0);function qR(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!s&&r==o&&gL(e,r);s&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let E=new Dr(e,{simulateBreak:r,simulateDoubleBreak:!!a}),T=ma(E,r);for(T==null&&(T=ii(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let c=["",Yi(e,T)];return a&&c.push(Yi(e,E.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:q.of(c)},range:_.cursor(r+1+c[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function xa(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let r=s.changes(n);return{changes:n,range:_.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const DL=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),i=new Dr(s,{overrideIndentation:r=>{let o=t[r];return o??-1}}),n=xa(s,(r,o,l)=>{let a=ma(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let E=/^\s*/.exec(r.text)[0],T=Yi(s,a);(E!=T||l.from<r.from+E.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+E.length,insert:T}))});return n.changes.empty||e(s.update(n,{userEvent:"indent"})),!0},zR=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(xa(s,(t,i)=>{i.push({from:t.from,insert:s.facet(Ca)})}),{userEvent:"input.indent"})),!0),ZR=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(xa(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=ii(n,s.tabSize),o=0,l=Yi(s,Math.max(0,r-er(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),ML=s=>(s.setTabFocusMode(),!0),UL=[{key:"Ctrl-b",run:DR,shift:vR,preventDefault:!0},{key:"Ctrl-f",run:MR,shift:wR},{key:"Ctrl-p",run:xR,shift:kR},{key:"Ctrl-n",run:bR,shift:VR},{key:"Ctrl-a",run:zm,shift:TL},{key:"Ctrl-e",run:Zm,shift:cL},{key:"Ctrl-d",run:KR},{key:"Ctrl-h",run:Wl},{key:"Ctrl-k",run:SL},{key:"Ctrl-Alt-h",run:JR},{key:"Ctrl-o",run:IL},{key:"Ctrl-t",run:NL},{key:"Ctrl-v",run:Vl}],yL=[{key:"ArrowLeft",run:DR,shift:vR,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Vm,shift:sL,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Qm,shift:aL,preventDefault:!0},{key:"ArrowRight",run:MR,shift:wR,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Wm,shift:iL,preventDefault:!0},{mac:"Cmd-ArrowRight",run:qm,shift:EL,preventDefault:!0},{key:"ArrowUp",run:xR,shift:kR,preventDefault:!0},{mac:"Cmd-ArrowUp",run:yT,shift:bT},{mac:"Ctrl-ArrowUp",run:DT,shift:MT},{key:"ArrowDown",run:bR,shift:VR,preventDefault:!0},{mac:"Cmd-ArrowDown",run:xT,shift:BT},{mac:"Ctrl-ArrowDown",run:Vl,shift:UT},{key:"PageUp",run:DT,shift:MT},{key:"PageDown",run:Vl,shift:UT},{key:"Home",run:jm,shift:lL,preventDefault:!0},{key:"Mod-Home",run:yT,shift:bT},{key:"End",run:Jm,shift:oL,preventDefault:!0},{key:"Mod-End",run:xT,shift:BT},{key:"Enter",run:GT,shift:GT},{key:"Mod-a",run:hL},{key:"Backspace",run:Wl,shift:Wl},{key:"Delete",run:KR},{key:"Mod-Backspace",mac:"Alt-Backspace",run:JR},{key:"Mod-Delete",mac:"Alt-Delete",run:fL},{mac:"Mod-Backspace",run:dL},{mac:"Mod-Delete",run:OL}].concat(UL.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),xL=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Km,shift:nL},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:$m,shift:rL},{key:"Alt-ArrowUp",run:pL},{key:"Shift-Alt-ArrowUp",run:mL},{key:"Alt-ArrowDown",run:CL},{key:"Shift-Alt-ArrowDown",run:LL},{key:"Escape",run:uL},{key:"Mod-Enter",run:PL},{key:"Alt-l",mac:"Ctrl-l",run:AL},{key:"Mod-i",run:RL,preventDefault:!0},{key:"Mod-[",run:ZR},{key:"Mod-]",run:zR},{key:"Mod-Alt-\\",run:DL},{key:"Shift-Mod-k",run:_L},{key:"Shift-Mod-\\",run:tL},{key:"Mod-/",run:mm},{key:"Alt-A",run:_m},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ML}].concat(yL);function te(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?s.setAttribute(i,n):n!=null&&(s[i]=n)}e++}for(;e<arguments.length;e++)eu(s,arguments[e]);return s}function eu(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)eu(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}class HT{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class us{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=i.facet(Xi).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((T,c)=>T.from-c.from||T.to-c.to),o=new Gt,l=[],a=0;for(let T=0;;){let c=T==r.length?null:r[T];if(!c&&!l.length)break;let h,A;for(l.length?(h=a,A=l.reduce((f,S)=>Math.min(f,S.to),c&&c.from>h?c.from:1e8)):(h=c.from,A=c.to,l.push(c),T++);T<r.length;){let f=r[T];if(f.from==h&&(f.to>f.from||f.to==h))l.push(f),T++,A=Math.min(f.to,A);else{A=Math.min(f.from,A);break}}let u=KL(l);if(l.some(f=>f.from==f.to||f.from==f.to-1&&i.doc.lineAt(f.from).to==f.from))o.add(h,h,F.widget({widget:new kL(u),diagnostics:l.slice()}));else{let f=l.reduce((S,d)=>d.markClass?S+" "+d.markClass:S,"");o.add(h,A,F.mark({class:"cm-lintRange cm-lintRange-"+u+f,diagnostics:l.slice(),inclusiveEnd:l.some(S=>S.to>A)}))}a=A;for(let f=0;f<l.length;f++)l[f].to<=a&&l.splice(f--,1)}let E=o.finish();return new us(E,t,Zs(E))}}function Zs(s,e=null,t=0){let i=null;return s.between(t,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new HT(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new HT(i.from,r,i.diagnostic)}}),i}function bL(s,e){let t=e.pos,i=e.end||t,n=s.state.facet(Xi).hideOn(s,t,i);if(n!=null)return n;let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(o=>o.is(tu))||s.changes.touchesRange(r.from,Math.max(r.to,i)))}function BL(s,e){return s.field(Ze,!1)?e:e.concat(V.appendConfig.of($L))}const tu=V.define(),ba=V.define(),su=V.define(),Ze=pe.define({create(){return new us(F.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let t=s.diagnostics.map(e.changes),i=null,n=s.panel;if(s.selected){let r=e.changes.mapPos(s.selected.from,1);i=Zs(t,s.selected.diagnostic,r)||Zs(t,null,r)}!t.size&&n&&e.state.facet(Xi).autoPanel&&(n=null),s=new us(t,n,i)}for(let t of e.effects)if(t.is(tu)){let i=e.state.facet(Xi).autoPanel?t.value.length?Ki.open:null:s.panel;s=us.init(t.value,i,e.state)}else t.is(ba)?s=new us(s.diagnostics,t.value?Ki.open:null,s.selected):t.is(su)&&(s=new us(s.diagnostics,s.panel,t.value));return s},provide:s=>[wi.from(s,e=>e.panel),y.decorations.from(s,e=>e.diagnostics)]}),GL=F.mark({class:"cm-lintRange cm-lintRange-active"});function HL(s,e,t){let{diagnostics:i}=s.state.field(Ze),n,r=-1,o=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,E,{spec:T})=>{if(e>=a&&e<=E&&(a==E||(e>a||t>0)&&(e<E||t<0)))return n=T.diagnostics,r=a,o=E,!1});let l=s.state.facet(Xi).tooltipFilter;return n&&l&&(n=l(n,s.state)),n?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:vL(s,n)}}}:null}function vL(s,e){return te("ul",{class:"cm-tooltip-lint"},e.map(t=>nu(s,t,!1)))}const wL=s=>{let e=s.state.field(Ze,!1);(!e||!e.panel)&&s.dispatch({effects:BL(s.state,[ba.of(!0)])});let t=vi(s,Ki.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},vT=s=>{let e=s.state.field(Ze,!1);return!e||!e.panel?!1:(s.dispatch({effects:ba.of(!1)}),!0)},FL=s=>{let e=s.state.field(Ze,!1);if(!e)return!1;let t=s.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(s.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},YL=[{key:"Mod-Shift-m",run:wL,preventDefault:!0},{key:"F8",run:FL}],Xi=x.define({combine(s){return Object.assign({sources:s.map(e=>e.source).filter(e=>e!=null)},Ut(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function iu(s){let e=[];if(s)e:for(let{name:t}of s){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function nu(s,e,t){var i;let n=t?iu(e.actions):[];return te("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},te("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let A=Zs(s.state.field(Ze).diagnostics,e);A&&r.apply(s,A.from,A.to)},{name:E}=r,T=n[o]?E.indexOf(n[o]):-1,c=T<0?E:[E.slice(0,T),te("u",E.slice(T,T+1)),E.slice(T+1)];return te("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${E}${T<0?"":` (access key "${n[o]})"`}.`},c)}),e.source&&te("div",{class:"cm-diagnosticSource"},e.source))}class kL extends ns{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return te("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class wT{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=nu(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ki{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)vT(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=iu(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Zs(this.view.state.field(Ze).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=te("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=te("div",{class:"cm-panel-lint"},this.list,te("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>vT(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Ze).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ze),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:E})=>{for(let T of E.diagnostics){if(o.has(T))continue;o.add(T);let c=-1,h;for(let A=i;A<this.items.length;A++)if(this.items[A].diagnostic==T){c=A;break}c<0?(h=new wT(this.view,T),this.items.splice(i,0,h),n=!0):(h=this.items[c],c>i&&(this.items.splice(i,c-i),n=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new wT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let E=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/E:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/E)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ze),i=Zs(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:su.of(i)})}static open(e){return new Ki(e)}}function VL(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Cn(s){return VL(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const WL=y.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Cn("#d11")},".cm-lintRange-warning":{backgroundImage:Cn("orange")},".cm-lintRange-info":{backgroundImage:Cn("#999")},".cm-lintRange-hint":{backgroundImage:Cn("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function XL(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}function KL(s){let e="hint",t=1;for(let i of s){let n=XL(i.severity);n>t&&(t=n,e=i.severity)}return e}const $L=[Ze,y.decorations.compute([Ze],s=>{let{selected:e,panel:t}=s.field(Ze);return!e||!t||e.from==e.to?F.none:F.set([GL.range(e.from,e.to)])}),SN(HL,{hideOn:bL}),WL],FT=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class ei{constructor(e,t,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(FT(l)):FT,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Xe(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ia(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ct(e);let n=this.normalize(t);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(ei.prototype[Symbol.iterator]=function(){return this});const ru={from:-1,to:-1,match:/.*/.exec("")},Ba="gm"+(/x/.unicode==null?"":"u");class ou{constructor(e,t,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=ru,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new lu(e,t,i,n,r);this.re=new RegExp(t,Ba+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Tr(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Tr(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const po=new WeakMap;class Xs{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=po.get(e);if(!n||n.from>=i||n.to<=t){let l=new Xs(t,e.sliceString(t,i));return po.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:r,from:o}=n;return o>t&&(r=e.sliceString(t,o)+r,o=t),n.to<i&&(r+=e.sliceString(n.to,i)),po.set(e,new Xs(o,r)),new Xs(t,r.slice(t-o,i-o))}}class lu{constructor(e,t,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=ru,this.matchPos=Tr(e,n),this.re=new RegExp(t,Ba+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Xs.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Tr(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Xs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ou.prototype[Symbol.iterator]=lu.prototype[Symbol.iterator]=function(){return this});function JL(s){try{return new RegExp(s,Ba),!0}catch{return!1}}function Tr(s,e){if(e>=s.length)return e;let t=s.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Xl(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),t=te("input",{class:"cm-textfield",name:"line",value:e}),i=te("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),s.dispatch({effects:Pi.of(!1)}),s.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},te("label",s.state.phrase("Go to line"),": ",t)," ",te("button",{class:"cm-button",type:"submit"},s.state.phrase("go")),te("button",{name:"close",onclick:()=>{s.dispatch({effects:Pi.of(!1)}),s.focus()},"aria-label":s.state.phrase("close"),type:"button"},["×"]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=s,l=o.doc.lineAt(o.selection.main.head),[,a,E,T,c]=r,h=T?+T.slice(1):0,A=E?+E:l.number;if(E&&c){let S=A/100;a&&(S=S*(a=="-"?-1:1)+l.number/o.doc.lines),A=Math.round(o.doc.lines*S)}else E&&a&&(A=A*(a=="-"?-1:1)+l.number);let u=o.doc.line(Math.max(1,Math.min(o.doc.lines,A))),f=_.cursor(u.from+Math.max(0,Math.min(h,u.length)));s.dispatch({effects:[Pi.of(!1),y.scrollIntoView(f.from,{y:"center"})],selection:f}),s.focus()}return{dom:i}}const Pi=V.define(),YT=pe.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(Pi)&&(s=t.value);return s},provide:s=>wi.from(s,e=>e?Xl:null)}),jL=s=>{let e=vi(s,Xl);if(!e){let t=[Pi.of(!0)];s.state.field(YT,!1)==null&&t.push(V.appendConfig.of([YT,QL])),s.dispatch({effects:t}),e=vi(s,Xl)}return e&&e.dom.querySelector("input").select(),!0},QL=y.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),qL={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},zL=x.define({combine(s){return Ut(s,qL,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function ZL(s){return[n_,i_]}const e_=F.mark({class:"cm-selectionMatch"}),t_=F.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function kT(s,e,t,i){return(t==0||s(e.sliceDoc(t-1,t))!=Te.Word)&&(i==e.doc.length||s(e.sliceDoc(i,i+1))!=Te.Word)}function s_(s,e,t,i){return s(e.sliceDoc(t,t+1))==Te.Word&&s(e.sliceDoc(i-1,i))==Te.Word}const i_=Se.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(zL),{state:t}=s,i=t.selection;if(i.ranges.length>1)return F.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return F.none;let a=t.wordAt(n.head);if(!a)return F.none;o=t.charCategorizer(n.head),r=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return F.none;if(e.wholeWords){if(r=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(kT(o,t,n.from,n.to)&&s_(o,t,n.from,n.to)))return F.none}else if(r=t.sliceDoc(n.from,n.to),!r)return F.none}let l=[];for(let a of s.visibleRanges){let E=new ei(t.doc,r,a.from,a.to);for(;!E.next().done;){let{from:T,to:c}=E.value;if((!o||kT(o,t,T,c))&&(n.empty&&T<=n.from&&c>=n.to?l.push(t_.range(T,c)):(T>=n.to||c<=n.from)&&l.push(e_.range(T,c)),l.length>e.maxMatches))return F.none}}return F.set(l)}},{decorations:s=>s.decorations}),n_=y.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),r_=({state:s,dispatch:e})=>{let{selection:t}=s,i=_.create(t.ranges.map(n=>s.wordAt(n.head)||_.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(s.update({selection:i})),!0)};function o_(s,e){let{main:t,ranges:i}=s.selection,n=s.wordAt(t.head),r=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new ei(s.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new ei(s.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=s.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const l_=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return r_({state:s,dispatch:e});let i=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=i))return!1;let n=o_(s,i);return n?(e(s.update({selection:s.selection.addRange(_.range(n.from,n.to),!1),effects:y.scrollIntoView(n.to)})),!0):!1},oi=x.define({combine(s){return Ut(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new O_(e),scrollToMatch:e=>y.scrollIntoView(e)})}});class au{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||JL(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new c_(this):new E_(this)}getCursor(e,t=0,i){let n=e.doc?e:Q.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Gs(this,n,t,i):Bs(this,n,t,i)}}class Eu{constructor(e){this.spec=e}}function Bs(s,e,t,i){return new ei(e.doc,s.unquoted,t,i,s.caseSensitive?void 0:n=>n.toLowerCase(),s.wholeWord?a_(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function a_(s,e){return(t,i,n,r)=>((r>t||r+n.length<i)&&(r=Math.max(0,t-2),n=s.sliceString(r,Math.min(s.length,i+2))),(e(cr(n,t-r))!=Te.Word||e(hr(n,t-r))!=Te.Word)&&(e(hr(n,i-r))!=Te.Word||e(cr(n,i-r))!=Te.Word))}class E_ extends Eu{constructor(e){super(e)}nextMatch(e,t,i){let n=Bs(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);n=Bs(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==t&&n.value.to==i?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let r=Math.max(t,n-1e4-this.spec.unquoted.length),o=Bs(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;n-=1e4}}prevMatch(e,t,i){let n=this.prevMatchInRange(e,0,t);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=t||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Bs(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Bs(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Gs(s,e,t,i){return new ou(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?T_(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function cr(s,e){return s.slice(Ue(s,e,!1),e)}function hr(s,e){return s.slice(e,Ue(s,e))}function T_(s){return(e,t,i)=>!i[0].length||(s(cr(i.input,i.index))!=Te.Word||s(hr(i.input,i.index))!=Te.Word)&&(s(hr(i.input,i.index+i[0].length))!=Te.Word||s(cr(i.input,i.index+i[0].length))!=Te.Word)}class c_ extends Eu{nextMatch(e,t,i){let n=Gs(this.spec,e,i,e.doc.length).next();return n.done&&(n=Gs(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let r=Math.max(t,i-n*1e4),o=Gs(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return t})}matchAll(e,t){let i=Gs(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Gs(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const $i=V.define(),Ga=V.define(),Qt=pe.define({create(s){return new Co(Kl(s).create(),null)},update(s,e){for(let t of e.effects)t.is($i)?s=new Co(t.value.create(),s.panel):t.is(Ga)&&(s=new Co(s.query,t.value?Ha:null));return s},provide:s=>wi.from(s,e=>e.panel)});class Co{constructor(e,t){this.query=e,this.panel=t}}const h_=F.mark({class:"cm-searchMatch"}),A_=F.mark({class:"cm-searchMatch cm-searchMatch-selected"}),R_=Se.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(Qt))}update(s){let e=s.state.field(Qt);(e!=s.startState.field(Qt)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return F.none;let{view:t}=this,i=new Gt;for(let n=0,r=t.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-2*250;)a=r[++n].to;s.highlight(t.state,l,a,(E,T)=>{let c=t.state.selection.ranges.some(h=>h.from==E&&h.to==T);i.add(E,T,c?A_:h_)})}return i.finish()}},{decorations:s=>s.decorations});function en(s){return e=>{let t=e.state.field(Qt,!1);return t&&t.query.spec.valid?s(e,t):hu(e)}}const Ar=en((s,{query:e})=>{let{to:t}=s.state.selection.main,i=e.nextMatch(s.state,t,t);if(!i)return!1;let n=_.single(i.from,i.to),r=s.state.facet(oi);return s.dispatch({selection:n,effects:[va(s,i),r.scrollToMatch(n.main,s)],userEvent:"select.search"}),cu(s),!0}),Rr=en((s,{query:e})=>{let{state:t}=s,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let r=_.single(n.from,n.to),o=s.state.facet(oi);return s.dispatch({selection:r,effects:[va(s,n),o.scrollToMatch(r.main,s)],userEvent:"select.search"}),cu(s),!0}),u_=en((s,{query:e})=>{let t=e.matchAll(s.state,1e3);return!t||!t.length?!1:(s.dispatch({selection:_.create(t.map(i=>_.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),f_=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,r=[],o=0;for(let l=new ei(s.doc,s.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(_.range(l.value.from,l.value.to))}return e(s.update({selection:_.create(r,o),userEvent:"select.search.matches"})),!0},VT=en((s,{query:e})=>{let{state:t}=s,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let o=r,l=[],a,E,T=[];if(o.from==i&&o.to==n&&(E=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:E}),o=e.nextMatch(t,o.from,o.to),T.push(y.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),o){let c=l.length==0||l[0].from>=r.to?0:r.to-r.from-E.length;a=_.single(o.from-c,o.to-c),T.push(va(s,o)),T.push(t.facet(oi).scrollToMatch(a.main,s))}return s.dispatch({changes:l,selection:a,effects:T,userEvent:"input.replace"}),!0}),S_=en((s,{query:e})=>{if(s.state.readOnly)return!1;let t=e.matchAll(s.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=s.state.phrase("replaced $ matches",t.length)+".";return s.dispatch({changes:t,effects:y.announce.of(i),userEvent:"input.replace.all"}),!0});function Ha(s){return s.state.facet(oi).createPanel(s)}function Kl(s,e){var t,i,n,r,o;let l=s.selection.main,a=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!a)return e;let E=s.facet(oi);return new au({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:E.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:E.caseSensitive,literal:(n=e==null?void 0:e.literal)!==null&&n!==void 0?n:E.literal,regexp:(r=e==null?void 0:e.regexp)!==null&&r!==void 0?r:E.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:E.wholeWord})}function Tu(s){let e=vi(s,Ha);return e&&e.dom.querySelector("[main-field]")}function cu(s){let e=Tu(s);e&&e==s.root.activeElement&&e.select()}const hu=s=>{let e=s.state.field(Qt,!1);if(e&&e.panel){let t=Tu(s);if(t&&t!=s.root.activeElement){let i=Kl(s.state,e.query.spec);i.valid&&s.dispatch({effects:$i.of(i)}),t.focus(),t.select()}}else s.dispatch({effects:[Ga.of(!0),e?$i.of(Kl(s.state,e.query.spec)):V.appendConfig.of(N_)]});return!0},Au=s=>{let e=s.state.field(Qt,!1);if(!e||!e.panel)return!1;let t=vi(s,Ha);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:Ga.of(!1)}),!0},d_=[{key:"Mod-f",run:hu,scope:"editor search-panel"},{key:"F3",run:Ar,shift:Rr,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ar,shift:Rr,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Au,scope:"editor search-panel"},{key:"Mod-Shift-l",run:f_},{key:"Mod-Alt-g",run:jL},{key:"Mod-d",run:l_,preventDefault:!0}];class O_{constructor(e){this.view=e;let t=this.query=e.state.field(Qt).query.spec;this.commit=this.commit.bind(this),this.searchField=te("input",{value:t.search,placeholder:qe(e,"Find"),"aria-label":qe(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=te("input",{value:t.replace,placeholder:qe(e,"Replace"),"aria-label":qe(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=te("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=te("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=te("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,r,o){return te("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=te("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Ar(e),[qe(e,"next")]),i("prev",()=>Rr(e),[qe(e,"previous")]),i("select",()=>u_(e),[qe(e,"all")]),te("label",null,[this.caseField,qe(e,"match case")]),te("label",null,[this.reField,qe(e,"regexp")]),te("label",null,[this.wordField,qe(e,"by word")]),...e.state.readOnly?[]:[te("br"),this.replaceField,i("replace",()=>VT(e),[qe(e,"replace")]),i("replaceAll",()=>S_(e),[qe(e,"replace all")])],te("button",{name:"close",onclick:()=>Au(e),"aria-label":qe(e,"close"),type:"button"},["×"])])}commit(){let e=new au({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:$i.of(e)}))}keydown(e){UI(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Rr:Ar)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),VT(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is($i)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(oi).top}}function qe(s,e){return s.state.phrase(e)}const mn=30,Ln=/[\s\.,:;?!]/;function va(s,{from:e,to:t}){let i=s.state.doc.lineAt(e),n=s.state.doc.lineAt(t).to,r=Math.max(i.from,e-mn),o=Math.min(n,t+mn),l=s.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<mn;a++)if(!Ln.test(l[a+1])&&Ln.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-mn;a--)if(!Ln.test(l[a-1])&&Ln.test(l[a])){l=l.slice(0,a);break}}return y.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${i.number}.`)}const I_=y.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),N_=[Qt,vt.low(R_),I_],p_=(s={})=>{const{crosshairCursor:e=!1}=s;let t=[];s.closeBracketsKeymap!==!1&&(t=t.concat(LC)),s.defaultKeymap!==!1&&(t=t.concat(xL)),s.searchKeymap!==!1&&(t=t.concat(d_)),s.historyKeymap!==!1&&(t=t.concat(km)),s.foldKeymap!==!1&&(t=t.concat(Sp)),s.completionKeymap!==!1&&(t=t.concat(AR)),s.lintKeymap!==!1&&(t=t.concat(YL));const i=[];return s.lineNumbers!==!1&&i.push(gN()),s.highlightActiveLineGutter!==!1&&i.push(MN()),s.highlightSpecialChars!==!1&&i.push(JI()),s.history!==!1&&i.push(xm()),s.foldGutter!==!1&&i.push(Np()),s.drawSelection!==!1&&i.push(HI()),s.dropCursor!==!1&&i.push(kI()),s.allowMultipleSelections!==!1&&i.push(Q.allowMultipleSelections.of(!0)),s.indentOnInput!==!1&&i.push(ap()),s.syntaxHighlighting!==!1&&i.push(qA(Lp,{fallback:!0})),s.bracketMatching!==!1&&i.push(yp()),s.closeBrackets!==!1&&i.push(NC()),s.autocompletion!==!1&&i.push(hR()),s.rectangularSelection!==!1&&i.push(oN()),e!==!1&&i.push(EN()),s.highlightActiveLine!==!1&&i.push(eN()),s.highlightSelectionMatches!==!1&&i.push(ZL()),i.concat([ni.of(t.flat())]).filter(Boolean)},Ru=V.define(),uu=pe.define({create(){return[]},update(s,e){for(let t of e.effects)if(t.is(Ru))return t.value;return s}}),C_=/^use\s+[`]?([a-zA-Z0-9_-]+)[`]?\s*;$/i,m_=/^(create|drop|alter|truncate|rename|comment|grant|revoke)/i,L_=()=>{let s=!0;return y.updateListener.of(e=>{var r;if(s)s=!1;else if(!e.docChanged&&!e.viewportChanged)return;const{state:t}=e,i=[];let n="";(r=JN(t,e.view.viewport.to,1*1e3))==null||r.cursor().iterate(o=>{if(o.name==="Script")return!0;if(o.name==="Statement"){let l="other";const a=t.sliceDoc(o.from,o.to),E=a.match(C_);E?(n=E[1],l="use"):a.match(m_)&&(l="ddl");const T=t.doc.lineAt(o.from),c=t.doc.lineAt(o.to);i.push({from:o.from,to:o.to,lineFrom:T.number,lineTo:c.number,content:a,database:n,type:l})}return!0}),e.view.dispatch({effects:Ru.of(i)})})};function wa(s){return s.field(uu)}function fu(s,e){const t=wa(s);let i;for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.to<=e){i=r;break}}return!i&&t.length>0&&(i=t[0]),i}function __(){return[uu,L_()]}const Su=V.define(),du=pe.define({create(){return[{from:0,to:0,lineFrom:1,lineTo:1,content:"",database:"",type:"other"}]},update(s,e){for(let t of e.effects)if(t.is(Su))return t.value;return s}}),g_=()=>{let s=!0;return y.updateListener.of(e=>{if(s)s=!1;else if(!e.selectionSet)return;const{state:t}=e.view,{from:i,to:n}=t.selection.main,r=[];let o="";for(const l of wa(t)){if(l.to<i){o=l.database;continue}if(l.from>n)break;r.push({...l})}if(r.length===0){const l=t.doc.lineAt(i),a=t.doc.lineAt(n);r.push({from:i,to:n,lineFrom:l.number,lineTo:a.number,content:"",database:o,type:"other"})}e.view.dispatch({effects:Su.of(r)})})};function Ou(s){return s.field(du)}function P_(){return[du,g_()]}const Iu=s=>Om({dialect:Cm,upperCaseKeywords:!0,...s});class D_{constructor(e,t,i,n,r){Object.defineProperty(this,"editorId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"editorView",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"themeCompartment",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"sqlCompartment",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"extraData",{enumerable:!0,configurable:!0,writable:!0,value:r})}changeTheme(e){this.themeCompartment.get(this.editorView.state)!==e&&this.editorView.dispatch({effects:this.themeCompartment.reconfigure(e)})}changeSQLConfig(e){this.editorView.dispatch({effects:this.sqlCompartment.reconfigure(Iu(e))})}getAllStatements(){return wa(this.editorView.state)}getCurStatements(){return Ou(this.editorView.state)}getNearbyStatement(){const{from:e}=this.getCurStatements()[0];return fu(this.editorView.state,e)}}const M_=({editorId:s,doc:e,basicSetupOptions:t={},sqlConfig:i={},theme:n=[],extraExts:r=[],extraData:o={}})=>{const l=new Js,a=new Js,E=[y.theme({"&":{height:"100%"},".cm-line":{paddingLeft:"8px"}}),p_({foldGutter:!1,foldKeymap:!1,searchKeymap:!0,autocompletion:!1,...t}),l.of(n),a.of(Iu(i)),__(),P_(),r],T=new y({state:Q.create({doc:e,extensions:E})});return new D_(s,T,l,a,o)};class Nu{constructor(){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"addEditor",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>{this.cache.set(e,t)}}),Object.defineProperty(this,"getEditor",{enumerable:!0,configurable:!0,writable:!0,value:e=>this.cache.get(e)}),Object.defineProperty(this,"deleteEditor",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.cache.delete(e)}}),Object.defineProperty(this,"clearEditors",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.cache.clear()}})}}const pu=I.createContext(null),Hr=()=>{const s=I.useContext(pu),e=I.useRef(new Nu);return I.useEffect(()=>()=>{e.current.clearEditors()},[]),s||(console.warn("useEditorCacheContext: no find EditorCacheProvider, so the cache is not shared, can't support multiple CodeMirror instances"),e.current)};function U_(s){const e=I.useRef(new Nu);return I.useEffect(()=>()=>{e.current.clearEditors()},[]),R.jsx(pu.Provider,{value:e.current,children:s.children})}function y_({className:s,editorId:e,theme:t,sqlConfig:i,...n}){const r=I.useRef(null),o=Hr();return I.useLayoutEffect(()=>{if(!r.current)return;let l=o.getEditor(e);return l||(l=M_({editorId:e,theme:t,sqlConfig:i,...n}),o.addEditor(e,l)),r.current.appendChild(l.editorView.dom),l.editorView.focus(),()=>{r.current&&l&&r.current.removeChild(l.editorView.dom)}},[e]),I.useLayoutEffect(()=>{var l;(l=o.getEditor(e))==null||l.changeTheme(t??[])},[e,t]),I.useEffect(()=>{var l;(l=o.getEditor(e))==null||l.changeSQLConfig(i??{})},[e,i]),R.jsx("div",{className:s,ref:r})}function x_(s,e,t){let i=j.empty;if(t.whenHide&&t.whenHide(s))return i;let n=Ou(s.state);if(n[0].content===""){const r=fu(s.state,n[0].from);if(r)n=[r];else return i}try{const r=[];n.forEach(l=>{for(let a=l.lineFrom;a<=l.lineTo;a++){const E=s.state.doc.line(a);r.push(E.from)}}),[...new Set(r)].forEach(l=>i=i.update({add:[e.range(l)]}))}catch(r){console.log("cur-sql-gutter",r)}return i}const b_=s=>y.baseTheme({".cm-sql-gutter .cm-gutterElement":{width:`${s.width??2}px`},".cm-lineNumbers .cm-gutterElement":{paddingLeft:"8px",paddingRight:"8px"}}),B_=(s,e)=>gA({class:`cm-sql-gutter ${e.className||""}`,initialSpacer:()=>s,markers:t=>x_(t,s,e)});function G_(s={}){const e=new class extends Mt{toDOM(){const t=document.createElement("div");return t.style.background=s.backgroundColor||"#0CA6F2",t.style.height="100%",t}};return[b_(s),B_(e,s)]}const H_=(s,e)=>{let t;return y.updateListener.of(i=>{i.docChanged&&(t&&clearTimeout(t),t=window.setTimeout(()=>e(i.view),s))})},v_=(s,e)=>vt.highest(ni.of([{key:s,run:t=>(e(t),!0)}]));function w_({delay:s=5e3,auto:e=!0,hotkey:t="Mod-s",save:i}){const n=[];return e&&n.push(H_(s,i)),t&&n.push(v_(t,i)),n}const F_=y.theme({"&":{backgroundColor:"var(--background)",fontSize:"13px",paddingLeft:"16px"},".cm-content":{padding:"16px 8px"},".cm-cursor, .cm-dropCursor":{borderLeftColor:"var(--color-foreground)"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--color-gray-700)"},".cm-activeLine":{backgroundColor:"var(--color-transparent)"},".cm-selectionMatch":{backgroundColor:"var(--color-gray-700)"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"var(--color-gray-700)"},".cm-gutters":{backgroundColor:"var(--background)",color:"var(--muted-foreground)",border:"none"},"&.readonly .cm-gutters":{display:"none !important"},"&.readonly":{padding:"0px !important",background:"transparent !important"},"&.readonly .cm-content":{padding:"0px !important"},"&.readonly .cm-line":{padding:"0px !important"},".cm-gutterElement":{padding:"0px !important",textAlign:"left !important"},".cm-activeLineGutter":{backgroundColor:"transparent",color:"var(--color-foreground)"},".cm-lineNumbers":{minWidth:"24px"},".cm-line":{lineHeight:"20px !important"},".cm-tooltip-autocomplete":{background:"var(--background) !important",border:"1px solid var(--border) !important",padding:"4px !important",borderRadius:"var(--radius) !important"},".cm-autocomplete-item":{display:"flex !important",alignItems:"center !important",height:"32px !important",padding:"4px 8px !important"},".cm-autocomplete-item[aria-selected]":{padding:"4px 8px !important",background:"var(--sidebar-secondary-accent) !important",borderRadius:"4px !important"},".cm-completionIcon":{display:"none !important"},".cm-completionLabel":{margin:"0px 8px !important"},".cm-autocomplete-item .type":{marginLeft:"auto !important",color:"var(--muted-foreground) !important"}},{dark:!0}),WT="#e5c07b",Y_="#e06c75",k_="#56b6c2",V_="#ffffff",W_="#abb2bf",XT="#7d8799",X_="#61afef",K_="#98c379",KT="#d19a66",$_="#c678dd",J_=zi.define([{tag:N.keyword,color:$_},{tag:[N.name,N.deleted,N.character,N.propertyName,N.macroName],color:WT},{tag:[N.function(N.variableName),N.labelName],color:X_},{tag:[N.color,N.constant(N.name),N.standard(N.name)],color:KT},{tag:[N.definition(N.name),N.separator],color:W_},{tag:[N.typeName,N.className,N.number,N.changed,N.annotation,N.modifier,N.self,N.namespace],color:WT},{tag:[N.operator,N.operatorKeyword,N.url,N.escape,N.regexp,N.link,N.special(N.string)],color:k_},{tag:[N.meta,N.comment],color:XT},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.link,color:XT,textDecoration:"underline"},{tag:N.heading,fontWeight:"bold",color:Y_},{tag:[N.atom,N.bool,N.special(N.variableName)],color:KT},{tag:[N.processingInstruction,N.string,N.inserted],color:K_},{tag:N.invalid,color:V_}]),Cu=[F_,qA(J_)],j_=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.3807 13.3334C13.222 13.3334 13.9047 12.6514 13.9047 11.8094V8.76208L14.6667 8.00008L13.9047 7.23808V4.19075C13.9047 3.34875 13.2227 2.66675 12.3807 2.66675M3.6195 2.66675C2.7775 2.66675 2.0955 3.34875 2.0955 4.19075V7.23808L1.3335 8.00008L2.0955 8.76208V11.8094C2.0955 12.6514 2.7775 13.3334 3.6195 13.3334" stroke="#999999" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,Q_=`<svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13 6.66671H1M9.66667 1.33337V4.00004M4.33333 1.33337V4.00004M4.2 14.6667H9.8C10.9201 14.6667 11.4802 14.6667 11.908 14.4487C12.2843 14.257 12.5903 13.951 12.782 13.5747C13 13.1469 13 12.5868 13 11.4667V5.86671C13 4.7466 13 4.18655 12.782 3.75873C12.5903 3.3824 12.2843 3.07644 11.908 2.88469C11.4802 2.66671 10.9201 2.66671 9.8 2.66671H4.2C3.0799 2.66671 2.51984 2.66671 2.09202 2.88469C1.71569 3.07644 1.40973 3.3824 1.21799 3.75873C1 4.18655 1 4.7466 1 5.86671V11.4667C1 12.5868 1 13.1469 1.21799 13.5747C1.40973 13.951 1.71569 14.257 2.09202 14.4487C2.51984 14.6667 3.0799 14.6667 4.2 14.6667Z" stroke="#999999" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,q_=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_210_1594)">
<path d="M10.3335 10.0002L12.3335 8.00016L10.3335 6.00016M5.66683 6.00016L3.66683 8.00016L5.66683 10.0002M8.66683 4.66683L7.3335 11.3335M14.6668 8.00016C14.6668 11.6821 11.6821 14.6668 8.00016 14.6668C4.31826 14.6668 1.3335 11.6821 1.3335 8.00016C1.3335 4.31826 4.31826 1.3335 8.00016 1.3335C11.6821 1.3335 14.6668 4.31826 14.6668 8.00016Z" stroke="#52CC7A" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs>
<clipPath id="clip0_210_1594">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>`,z_=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14 3.3335C14 4.43807 11.3137 5.3335 8 5.3335C4.68629 5.3335 2 4.43807 2 3.3335M14 3.3335C14 2.22893 11.3137 1.3335 8 1.3335C4.68629 1.3335 2 2.22893 2 3.3335M14 3.3335V12.6668C14 13.7735 11.3333 14.6668 8 14.6668C4.66667 14.6668 2 13.7735 2 12.6668V3.3335M14 8.00016C14 9.10683 11.3333 10.0002 8 10.0002C4.66667 10.0002 2 9.10683 2 8.00016" stroke="#F2AADA" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,Z_=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 6H14M2 10H14M8 2V14M5.2 2H10.8C11.9201 2 12.4802 2 12.908 2.21799C13.2843 2.40973 13.5903 2.71569 13.782 3.09202C14 3.51984 14 4.0799 14 5.2V10.8C14 11.9201 14 12.4802 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.4802 14 11.9201 14 10.8 14H5.2C4.07989 14 3.51984 14 3.09202 13.782C2.71569 13.5903 2.40973 13.2843 2.21799 12.908C2 12.4802 2 11.9201 2 10.8V5.2C2 4.07989 2 3.51984 2.21799 3.09202C2.40973 2.71569 2.71569 2.40973 3.09202 2.21799C3.51984 2 4.0799 2 5.2 2Z" stroke="#91B2F2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,eg=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 3.33333C2 3.68696 2.14048 4.02609 2.39052 4.27614C2.64057 4.52619 2.97971 4.66667 3.33333 4.66667H5.33333M2 2V10.6667C2 11.0203 2.14048 11.3594 2.39052 11.6095C2.64057 11.8595 2.97971 12 3.33333 12H5.33333M13.3333 6.66667C13.5101 6.66667 13.6797 6.59643 13.8047 6.4714C13.9298 6.34638 14 6.17681 14 6V4C14 3.82319 13.9298 3.65362 13.8047 3.5286C13.6797 3.40357 13.5101 3.33333 13.3333 3.33333H11.6667C11.5632 3.33333 11.4611 3.30924 11.3685 3.26295C11.276 3.21667 11.1954 3.14946 11.1333 3.06667L10.5333 2.26667C10.4712 2.18387 10.3907 2.11667 10.2981 2.07038C10.2056 2.0241 10.1035 2 10 2H8.66667C8.48986 2 8.32029 2.07024 8.19526 2.19526C8.07024 2.32029 8 2.48986 8 2.66667V6C8 6.17681 8.07024 6.34638 8.19526 6.4714C8.32029 6.59643 8.48986 6.66667 8.66667 6.66667H13.3333ZM13.3333 14C13.5101 14 13.6797 13.9298 13.8047 13.8047C13.9298 13.6797 14 13.5101 14 13.3333V11.3333C14 11.1565 13.9298 10.987 13.8047 10.8619C13.6797 10.7369 13.5101 10.6667 13.3333 10.6667H11.4C11.278 10.6651 11.1588 10.63 11.0554 10.5654C10.9519 10.5007 10.8682 10.4089 10.8133 10.3L10.5333 9.73334C10.4813 9.61409 10.3955 9.51267 10.2865 9.44159C10.1775 9.37052 10.0501 9.33288 9.92 9.33334H8.66667C8.48986 9.33334 8.32029 9.40358 8.19526 9.5286C8.07024 9.65362 8 9.82319 8 10V13.3333C8 13.5101 8.07024 13.6797 8.19526 13.8047C8.32029 13.9298 8.48986 14 8.66667 14H13.3333Z" stroke="#2EB88A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,tg=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_395_66223)">
<path d="M10.9999 5.33329C11.184 5.33329 11.3333 5.18405 11.3333 4.99996C11.3333 4.81586 11.184 4.66663 10.9999 4.66663C10.8158 4.66663 10.6666 4.81586 10.6666 4.99996C10.6666 5.18405 10.8158 5.33329 10.9999 5.33329Z" fill="#FAFAFA"/>
<path d="M1.33325 11.9999V13.9999C1.33325 14.3999 1.59992 14.6666 1.99992 14.6666H4.66659V12.6666H6.66659V10.6666H7.99992L8.93325 9.73324C9.85981 10.056 10.8685 10.0548 11.7942 9.72974C12.72 9.40471 13.5081 8.77513 14.0295 7.94399C14.5509 7.11285 14.7749 6.12935 14.6647 5.1544C14.5545 4.17944 14.1167 3.27074 13.4229 2.57695C12.7291 1.88316 11.8204 1.44536 10.8454 1.33516C9.87047 1.22497 8.88698 1.4489 8.05584 1.97033C7.22469 2.49176 6.59511 3.27982 6.27008 4.20558C5.94506 5.13135 5.94382 6.14001 6.26659 7.06657L1.33325 11.9999Z" stroke="#E88C30" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10.9999 5.33329C11.184 5.33329 11.3333 5.18405 11.3333 4.99996C11.3333 4.81586 11.184 4.66663 10.9999 4.66663C10.8158 4.66663 10.6666 4.81586 10.6666 4.99996C10.6666 5.18405 10.8158 5.33329 10.9999 5.33329Z" stroke="#E88C30" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs>
<clipPath id="clip0_395_66223">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>`,sg=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_404_1835)">
<path d="M1.3335 4.97491L14.6668 4.97491M1.3335 10.9924L14.6668 10.9924M5.99023 1.33325L3.67309 14.6666M11.9162 1.33325L9.59901 14.6666" stroke="#999999" stroke-linecap="round"/>
</g>
<defs>
<clipPath id="clip0_404_1835">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>`,ig=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.66683 10.8421H7.3335M1.3335 14L4.82556 2L8.66683 14M9.3335 6.93609C9.64722 5.59887 10.2747 4.19483 12.157 4.596C14.0394 4.99716 14.0394 7.27038 14.0394 8.27325V9.61044M14.0394 9.61044V12.6191M14.0394 9.61044C13.7257 9.16471 12.8472 8.27326 11.8433 8.27325C10.5884 8.27325 9.64722 9.61043 9.64722 10.9476C9.64722 12.2848 9.96095 13.622 11.5296 13.9563C12.798 14.2266 13.6211 13.1763 14.0394 12.6191M14.0394 12.6191C14.0394 13.0649 14.1649 13.9563 14.6668 13.9563" stroke="#999999" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,ng=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.6665 4.6665C2.6665 4.04525 2.6665 3.73462 2.768 3.48959C2.90332 3.16289 3.16289 2.90332 3.48959 2.768C3.73462 2.6665 4.04525 2.6665 4.6665 2.6665H11.3332C11.9544 2.6665 12.2651 2.6665 12.5101 2.768C12.8368 2.90332 13.0964 3.16289 13.2317 3.48959C13.3332 3.73462 13.3332 4.04525 13.3332 4.6665M5.33317 13.3332H10.6665M6.83317 2.6665V13.3332M9.1665 2.6665V13.3332" stroke="#C2AAF2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,rg=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.2709 14C14.1644 12.1926 14.6668 10.1553 14.6668 8C14.6668 5.84474 14.1644 3.80744 13.2709 2M2.72945 2C1.83592 3.80744 1.3335 5.84474 1.3335 8C1.3335 10.1553 1.83592 12.1926 2.72945 14M11.0326 5.75H10.9728C10.5372 5.75 10.1233 5.94134 9.83986 6.27381L6.25664 10.4762C5.97315 10.8087 5.5593 11 5.1237 11H5.06392M5.81005 5.75H6.73944C7.07256 5.75 7.36531 5.97198 7.45682 6.29396L8.63978 10.456C8.73129 10.778 9.02404 11 9.35716 11H10.2866" stroke="#2E6BE5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,og=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.7569 4.92857C14.1302 4.51155 14.3571 3.96085 14.3571 3.35714C14.3571 2.05533 13.3018 1 12 1C10.6982 1 9.64286 2.05533 9.64286 3.35714C9.64286 3.96085 9.86981 4.51155 10.2431 4.92857M13.7569 4.92857C13.3253 5.4108 12.6981 5.71429 12 5.71429C11.3019 5.71429 10.6747 5.4108 10.2431 4.92857M13.7569 4.92857L18.8859 10.4286M18.8859 10.4286C18.5127 10.8456 18.2857 11.3963 18.2857 12C18.2857 12.6037 18.5127 13.1544 18.8859 13.5714M18.8859 10.4286C19.3175 9.94634 19.9447 9.64286 20.6429 9.64286C21.9447 9.64286 23 10.6982 23 12C23 13.3018 21.9447 14.3571 20.6429 14.3571C19.9447 14.3571 19.3175 14.0537 18.8859 13.5714M18.8859 13.5714L13.7569 19.0714M13.7569 19.0714C13.3253 18.5892 12.6981 18.2857 12 18.2857C11.3019 18.2857 10.6747 18.5892 10.2431 19.0714M13.7569 19.0714C14.1302 19.4885 14.3571 20.0391 14.3571 20.6429C14.3571 21.9447 13.3018 23 12 23C10.6982 23 9.64286 21.9447 9.64286 20.6429C9.64286 20.0391 9.86981 19.4885 10.2431 19.0714M10.2431 19.0714L4.92857 13.7569M4.92857 13.7569C5.4108 13.3253 5.71429 12.6981 5.71429 12C5.71429 11.3019 5.4108 10.6747 4.92857 10.2431M4.92857 13.7569C4.51155 14.1302 3.96085 14.3571 3.35714 14.3571C2.05533 14.3571 1 13.3018 1 12C1 10.6982 2.05533 9.64286 3.35714 9.64286C3.96085 9.64286 4.51155 9.86981 4.92857 10.2431M4.92857 10.2431L10.2431 4.92857" stroke="currentColor" stroke-width="inherit" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,lg=s=>{const{maxRenderedOptions:e,...t}=s;return hR({activateOnTyping:!0,closeOnBlur:!1,optionClass:()=>`cm-autocomplete-item ${s.autocompleteItemClassName??""}`,maxRenderedOptions:e??50,addToOptions:[{render:(i,n,r)=>{var l;let o="";switch((i.type??"").toUpperCase()){case"KEYWORD":o=tg;break;case"VARIABLE":o=rg;break;case"SCHEMA":o=eg;break;case"TYPE":o=ng;break;case"FUNCTION":case"METHOD":o=q_;break;case"TABLE":o=Z_;break;case"DATABASE":o=z_;break;case"BIT":case"BOOLEAN":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"INTEGER":case"INT":case"BIGINT":case"FLOAT":case"DOUBLE":case"DECIMAL":case"NUMERIC":o=sg;break;case"CHAR":case"VARCHAR":case"TEXT":case"TINYTEXT":case"MEDIUMTEXT":case"LONGTEXT":case"BINARY":case"VARBINARY":case"BLOB":case"TINYBLOB":case"MEDIUMBLOB":case"LONGBLOB":case"ENUM":case"SET":o=ig;break;case"DATE":case"TIME":case"DATETIME":case"TIMESTAMP":case"YEAR":o=Q_;break;case"JSON":o=j_;break;case"VECTOR<FLOAT>":case"VECTOR<FLOAT16>":case"VECTOR":o=og;break}if(i.type&&((l=s.renderIconMap)!=null&&l[i.type])&&(o=s.renderIconMap[i.type]),o){const a=document.createElement("div");return a.className="icon",a.innerHTML=o,a}else return null},position:0},{render:(i,n,r)=>{const o=document.createElement("div");return o.className="type",o.innerHTML=i.type??"",o},position:100}],...t})},ag=s=>ni.of([{key:s.acceptKey??"Tab",preventDefault:!0,shift:ZR,run:e=>xC(e.state)?lR(e):zR(e)}]);function Eg(s={}){return[Cu,lg(s),ag(s)]}const Tg=()=>vt.highest(ni.of([{key:"Mod-i",run:s=>Gl(s)}])),cg=s=>{const e={};return s&&s.forEach(t=>{const i=t.name,n=t.schemas;e[i]={self:{label:i,type:"database"},children:{}},n.forEach(r=>{const o=r.name,l=r.tables,a={label:o,type:"schema"},E={};e[i].children[o]={self:a,children:E},l.forEach(T=>{const c=T.name;e[i].children[o].children[c]={self:{label:c,type:"table"},children:[]}})})}),e};function mu({readonly:s,content:e}){const t=Hr(),{worksheetId:i}=si({from:"/sql-editor/$worksheetId/"}),{data:n}=$f(+i),{data:{items:r}={}}=qc(),{mutate:o}=Jf();I.useEffect(()=>{const E=t.getEditor("MySQLEditor");E&&E.editorView.dispatch({changes:{from:0,to:E.editorView.state.doc.length,insert:n==null?void 0:n.content}})},[n,t]);const l=I.useMemo(()=>[Eg(),Tg(),G_(),y.lineWrapping,y.editorAttributes.of({class:s?"readonly":""}),s?y.editable.of(!1):y.editable.of(!0),w_({save:E=>{o({data:{content:E.state.doc.toString(),name:n==null?void 0:n.name},worksheetId:+i})}})],[s,n,o,i]),a=e??(n==null?void 0:n.content)??"";return R.jsx(y_,{editorId:"MySQLEditor",doc:a,theme:Cu,sqlConfig:{upperCaseKeywords:!0,schema:cg(r)},extraExts:l})}var ys={},$T;function hg(){if($T)return ys;$T=1;var s=ys&&ys.__assign||function(){return s=Object.assign||function(i){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[l]=n[l])}return i},s.apply(this,arguments)};Object.defineProperty(ys,"__esModule",{value:!0});var e=jf();function t(i,n,r){var o=(0,e.useMemo)(function(){return s({serializer:JSON.stringify,parser:JSON.parse,logger:console.log,syncData:!0},r)},[r]),l=o.serializer,a=o.parser,E=o.logger,T=o.syncData,c=(0,e.useRef)(null),h=(0,e.useState)(function(){if(typeof window>"u")return n;try{c.current=window.localStorage.getItem(i);var f=c.current?a(c.current):n;return f}catch(S){return E(S),n}}),A=h[0],u=h[1];return(0,e.useEffect)(function(){if(!(typeof window>"u")){var f=function(){if(A!==void 0){var S=l(A),d=c.current;c.current=S,window.localStorage.setItem(i,S),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:i,newValue:S,oldValue:d}))}else window.localStorage.removeItem(i),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:i}))};try{f()}catch(S){E(S)}}},[A]),(0,e.useEffect)(function(){if(T){var f=function(S){if(!(S.key!==i||S.storageArea!==window.localStorage))try{S.newValue!==c.current&&(c.current=S.newValue,u(S.newValue?a(S.newValue):void 0))}catch(d){E(d)}};if(!(typeof window>"u"))return window.addEventListener("storage",f),function(){return window.removeEventListener("storage",f)}}},[i,T]),[A,u]}return ys.default=t,ys}var Ag=hg();const ui=Dc(Ag),Lu=I.createContext(void 0),Rg=({children:s})=>{const e=I.useRef(null),t=I.useRef(null),[i,n]=ui("isTopPanelExpanded",!1),[r,o]=ui("isBottomPanelExpanded",!1),l=I.useRef(null),a=I.useRef(null),[E,T]=ui("isLeftPanelExpanded",!0),c=I.useRef(null),[h,A]=ui("isLeftBottomPanelExpanded",!1),u=I.useRef(null),[f,S]=ui("isRightPanelExpanded",!1),[d,O]=I.useState(!1),[p,P]=I.useState(!1),L=I.useCallback(()=>{t.current&&(i?t.current.collapse():t.current.expand())},[t,i]),M=I.useCallback(()=>{l.current&&(r?l.current.collapse():l.current.expand())},[l,r]),D=I.useCallback(()=>{c.current&&(h?c.current.collapse():c.current.expand())},[c,h]),H=I.useCallback(()=>{a.current&&(E?a.current.collapse():a.current.expand())},[a,E]),Y=I.useCallback(()=>{u.current&&(f?u.current.collapse():u.current.expand())},[u,f]),X=I.useCallback(()=>{var B;l.current&&((B=e.current)==null||B.setLayout([50,50]))},[l,e]),v=I.useMemo(()=>({isAnyPanelCollapsing:p,setIsAnyPanelCollapsing:P,isDragging:d,setIsResizing:O,toggleRightPanel:Y,toggleTopPanel:L,toggleBottomPanel:M,toggleLeftPanel:H,alignPanels:X,leftBottomRef:c,isLeftBottomPanelExpanded:h,setLeftBottomPanelExpanded:A,isTopPanelExpanded:i,isBottomPanelExpanded:r,isLeftPanelExpanded:E,isRightPanelExpanded:f,topRef:t,bottomRef:l,groupRef:e,setTopPanelExpanded:n,setBottomPanelExpanded:o,toggleLeftBottomPanel:D,leftRef:a,rightRef:u,setLeftPanelExpanded:T,setRightPanelExpanded:S}),[p,P,d,O,Y,L,c,h,A,M,H,X,i,r,E,f,t,l,e,n,o,D,a,u,T,S]);return R.jsx(Lu.Provider,{value:v,children:s})},Ft=()=>{const s=I.useContext(Lu);if(s===void 0)throw new Error("useSqlEditorPanelsState must be used within a SqlEditorPanelsStateProvider");return s},ug=1e3,Is=({children:s,className:e,onCollapse:t,onExpand:i,...n})=>{const{setIsAnyPanelCollapsing:r,isDragging:o,isAnyPanelCollapsing:l}=Ft(),[a,E]=I.useState(!1);return I.useEffect(()=>{r(!1)},[r]),I.useEffect(()=>{const T=setTimeout(()=>{E(!0)},ug);return()=>clearTimeout(T)},[]),R.jsx(xS,{...n,className:Z(o&&l&&"transition-all duration-300 ease-in-out",!o&&a&&"transition-all duration-300 ease-in-out",e),onCollapse:()=>{t==null||t(),r(!0)},onExpand:()=>{i==null||i(),r(!1)},children:s})},ur=({...s})=>{const{setIsResizing:e}=Ft();return R.jsx(bS,{withHandle:!0,onDragging:t=>e(t),...s})};var vr="Tabs",[fg,hy]=Ir(vr,[Uc]),_u=Uc(),[Sg,Fa]=fg(vr),gu=I.forwardRef((s,e)=>{const{__scopeTabs:t,value:i,onValueChange:n,defaultValue:r,orientation:o="horizontal",dir:l,activationMode:a="automatic",...E}=s,T=Mc(l),[c,h]=Mi({prop:i,onChange:n,defaultProp:r??"",caller:vr});return R.jsx(Sg,{scope:t,baseId:Nr(),value:c,onValueChange:h,orientation:o,dir:T,activationMode:a,children:R.jsx(Ne.div,{dir:T,"data-orientation":o,...E,ref:e})})});gu.displayName=vr;var Pu="TabsList",Du=I.forwardRef((s,e)=>{const{__scopeTabs:t,loop:i=!0,...n}=s,r=Fa(Pu,t),o=_u(t);return R.jsx(Qf,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:i,children:R.jsx(Ne.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:e})})});Du.displayName=Pu;var Mu="TabsTrigger",Uu=I.forwardRef((s,e)=>{const{__scopeTabs:t,value:i,disabled:n=!1,...r}=s,o=Fa(Mu,t),l=_u(t),a=bu(o.baseId,i),E=Bu(o.baseId,i),T=i===o.value;return R.jsx(qf,{asChild:!0,...l,focusable:!n,active:T,children:R.jsx(Ne.button,{type:"button",role:"tab","aria-selected":T,"aria-controls":E,"data-state":T?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:a,...r,ref:e,onMouseDown:z(s.onMouseDown,c=>{!n&&c.button===0&&c.ctrlKey===!1?o.onValueChange(i):c.preventDefault()}),onKeyDown:z(s.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&o.onValueChange(i)}),onFocus:z(s.onFocus,()=>{const c=o.activationMode!=="manual";!T&&!n&&c&&o.onValueChange(i)})})})});Uu.displayName=Mu;var yu="TabsContent",xu=I.forwardRef((s,e)=>{const{__scopeTabs:t,value:i,forceMount:n,children:r,...o}=s,l=Fa(yu,t),a=bu(l.baseId,i),E=Bu(l.baseId,i),T=i===l.value,c=I.useRef(T);return I.useEffect(()=>{const h=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(h)},[]),R.jsx(Zl,{present:n||T,children:({present:h})=>R.jsx(Ne.div,{"data-state":T?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":a,hidden:!h,id:E,tabIndex:0,...o,ref:e,style:{...s.style,animationDuration:c.current?"0s":void 0},children:h&&r})})});xu.displayName=yu;function bu(s,e){return`${s}-trigger-${e}`}function Bu(s,e){return`${s}-content-${e}`}var Gu=gu,Hu=Du,vu=Uu,wu=xu;function dg({className:s,...e}){return R.jsx(Gu,{"data-slot":"tabs",className:Z("flex flex-col",s),...e})}function Og({className:s,...e}){return R.jsx(Hu,{"data-slot":"tabs-list",className:Z("inline-flex w-full items-center justify-start border-b",s),...e})}function JT({className:s,...e}){return R.jsx(vu,{"data-slot":"tabs-trigger",className:Z("relative px-3 py-4 text-sm font-medium text-gray-400 transition-colors hover:text-gray-200 focus-visible:outline-none","data-[state=active]:text-white","g after:absolute after:right-0 after:bottom-0 after:left-0 after:h-[2px] after:scale-x-0 after:transform after:bg-white after:transition-transform","data-[state=active]:after:scale-x-100",s),...e})}function jT({className:s,...e}){return R.jsx(wu,{"data-slot":"tabs-content",className:Z("mt-2 focus-visible:outline-none",s),...e})}function Ig({isLoading:s,rows:e,columns:t}){const i=Zc(),n=t.map(r=>i.accessor(o=>o[t.indexOf(r)],{header:r.name,cell:o=>o.getValue(),meta:{headerClassName:"capitalize"}}));return R.jsx(eh,{removeLRBorders:!0,columns:n,data:e,isLoading:s})}function Ng({isLoading:s,isIdle:e,queryRecord:t}){const i=(t==null?void 0:t.result.columns)??[],n=(t==null?void 0:t.result.rows)??[],r=!i.length&&!s,o=n.length.toString(),l=i.length.toString(),a=t?t.durationMs/1e3:0;return R.jsxs(R.Fragment,{children:[e&&!t&&R.jsx(jc,{Icon:Md,title:"No Results Yet",description:"Once you run a query, results will be displayed here."}),!r&&R.jsxs(dg,{defaultValue:"results",className:"size-full",children:[R.jsxs(Og,{className:"px-4",children:[R.jsx(JT,{value:"results",children:"Results"}),R.jsx(JT,{disabled:!0,value:"chart",children:"Chart"})]}),R.jsxs("div",{className:"flex items-center px-4 py-2",children:[!s&&R.jsx("div",{className:"text-muted-foreground flex text-xs",children:`${o} Rows x ${l} Columns processed in ${a.toFixed(3)}s`}),R.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[R.jsx(et,{disabled:!0,size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(Qc,{})}),R.jsx(et,{disabled:!0,size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(sd,{})})]})]}),R.jsx(jT,{value:"results",className:"m-0 size-full",children:R.jsxs(is,{tableViewport:!0,className:"size-full",children:[R.jsx(Ig,{columns:i,rows:n,isLoading:s}),R.jsx(Pt,{orientation:"horizontal"})]})}),R.jsx(jT,{value:"chart"})]})]})}var Fu="Toggle",Yu=I.forwardRef((s,e)=>{const{pressed:t,defaultPressed:i,onPressedChange:n,...r}=s,[o,l]=Mi({prop:t,onChange:n,defaultProp:i??!1,caller:Fu});return R.jsx(Ne.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":s.disabled?"":void 0,...r,ref:e,onClick:z(s.onClick,()=>{s.disabled||l(!o)})})});Yu.displayName=Fu;var pg=Yu;const Cg=zf("inline-flex cursor-pointer items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-sidebar-secondary-accent hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function fi({className:s,variant:e,size:t,...i}){return R.jsx(pg,{"data-slot":"toggle",className:Z(Cg({variant:e,size:t,className:s})),...i})}const mg=()=>{const{isTopPanelExpanded:s,isBottomPanelExpanded:e,isLeftPanelExpanded:t,isRightPanelExpanded:i,toggleLeftPanel:n,toggleRightPanel:r,toggleBottomPanel:o,toggleTopPanel:l,alignPanels:a}=Ft();return R.jsx("div",{className:"border-t p-2",children:R.jsxs("div",{className:"text-muted-foreground flex items-center justify-between",children:[R.jsx("div",{className:"flex items-center gap-2",children:R.jsx(fi,{size:"sm",onClick:n,pressed:t,children:R.jsx(fd,{className:"size-4"})})}),R.jsxs("div",{className:"flex items-center gap-1",children:[R.jsx(fi,{size:"sm",onClick:o,pressed:!e,children:R.jsx(Rd,{className:"size-4"})}),R.jsx(fi,{size:"sm",onClick:a,pressed:e&&s,children:R.jsx(pd,{className:"size-4"})}),R.jsx(fi,{size:"sm",onClick:l,pressed:!s,children:R.jsx(Id,{className:"size-4"})})]}),R.jsx(fi,{size:"sm",pressed:i,onPressedChange:r,children:R.jsx(dd,{className:"size-4"})})]})})};function Lg({tab:s}){const{worksheetId:e}=si({from:"/sql-editor/$worksheetId/"}),t=pr(),i=Ie(o=>o.tabs),n=Ie(o=>o.removeTab),r=(o,l)=>{var E,T;o.stopPropagation(),o.preventDefault();const a=i.findIndex(c=>c.id===l.id);if(n(l.id),i.length===1){t({to:"/home"});return}a===0&&i.length>1?t({to:"/sql-editor/$worksheetId",params:{worksheetId:(E=i[1])==null?void 0:E.id.toString()}}):i.length>1&&l.id.toString()===e&&t({to:"/sql-editor/$worksheetId",params:{worksheetId:(T=i[0])==null?void 0:T.id.toString()}})};return R.jsx(et,{variant:"ghost",onClick:o=>r(o,s),className:"ml-auto size-6",children:R.jsx(ea,{})})}function _g(){const s=Ie(e=>e.tabs);return R.jsx("div",{className:"relative flex items-center gap-1",children:s.map(e=>R.jsx(yc,{to:"/sql-editor/$worksheetId",params:{worksheetId:e.id.toString()},children:({isActive:t})=>R.jsxs("div",{className:Z("bg-muted relative flex h-9 w-[180px] items-center self-end rounded-tl-md rounded-tr-md rounded-b-none border border-b-0 px-3 text-xs","hover:bg-sidebar-secondary-accent",t?"text-primary-foreground bg-transparent hover:bg-transparent":"border-none"),children:[R.jsx(Zf,{className:Z("text-muted-foreground mr-2 size-4 min-h-4 min-w-4 justify-start",t&&"text-primary-foreground")}),R.jsx("span",{className:"mr-2 max-w-28 truncate",children:e.name}),R.jsx(Lg,{tab:e})]})},e.id))})}const gg=()=>{const s=ta(),e=pr(),t=Ie(o=>o.addTab),{mutateAsync:i,isPending:n}=eS({mutation:{onSuccess:o=>{s.invalidateQueries({queryKey:$o()}),e({to:"/sql-editor/$worksheetId",params:{worksheetId:o.id.toString()}})}}}),r=async()=>{const o=await i({data:{name:"",content:""}});t(o),e({to:"/sql-editor/$worksheetId",params:{worksheetId:o.id.toString()}})};return R.jsxs("div",{className:"flex min-h-13 items-center gap-1 border-b pl-4",children:[R.jsx("div",{className:"mt-auto max-w-[calc(100%-4px-16px-36px)]",children:R.jsxs(is,{className:"mt-auto flex size-full min-w-full flex-col",children:[R.jsx(_g,{}),R.jsx(Pt,{orientation:"horizontal"})]})}),R.jsx(et,{disabled:n,onClick:r,variant:"outline",size:"icon",className:"hover:bg-sidebar-secondary-accent! mt-auto mr-4 size-9 rounded-tl-md rounded-tr-md rounded-b-none border-b-0 border-none transition-all",children:"+"})]})},C=s=>s.flatMap(Pg),Pg=s=>Hn(Mg(s)).map(Dg),Dg=s=>s.replace(/ +/g," ").trim(),Mg=s=>({type:"mandatory_block",items:Ya(s,0)[0]}),Ya=(s,e,t)=>{const i=[];for(;s[e];){const[n,r]=Ug(s,e);if(i.push(n),e=r,s[e]==="|")e++;else if(s[e]==="}"||s[e]==="]"){if(t!==s[e])throw new Error(`Unbalanced parenthesis in: ${s}`);return e++,[i,e]}else if(e===s.length){if(t)throw new Error(`Unbalanced parenthesis in: ${s}`);return[i,e]}else throw new Error(`Unexpected "${s[e]}"`)}return[i,e]},Ug=(s,e)=>{const t=[];for(;;){const[i,n]=yg(s,e);if(i)t.push(i),e=n;else break}return t.length===1?[t[0],e]:[{type:"concatenation",items:t},e]},yg=(s,e)=>{if(s[e]==="{")return xg(s,e+1);if(s[e]==="[")return bg(s,e+1);{let t="";for(;s[e]&&/[A-Za-z0-9_ ]/.test(s[e]);)t+=s[e],e++;return[t,e]}},xg=(s,e)=>{const[t,i]=Ya(s,e,"}");return[{type:"mandatory_block",items:t},i]},bg=(s,e)=>{const[t,i]=Ya(s,e,"]");return[{type:"optional_block",items:t},i]},Hn=s=>{if(typeof s=="string")return[s];if(s.type==="concatenation")return s.items.map(Hn).reduce(Bg,[""]);if(s.type==="mandatory_block")return s.items.flatMap(Hn);if(s.type==="optional_block")return["",...s.items.flatMap(Hn)];throw new Error(`Unknown node type: ${s}`)},Bg=(s,e)=>{const t=[];for(const i of s)for(const n of e)t.push(i+n);return t};var g;(function(s){s.QUOTED_IDENTIFIER="QUOTED_IDENTIFIER",s.IDENTIFIER="IDENTIFIER",s.STRING="STRING",s.VARIABLE="VARIABLE",s.RESERVED_DATA_TYPE="RESERVED_DATA_TYPE",s.RESERVED_PARAMETERIZED_DATA_TYPE="RESERVED_PARAMETERIZED_DATA_TYPE",s.RESERVED_KEYWORD="RESERVED_KEYWORD",s.RESERVED_FUNCTION_NAME="RESERVED_FUNCTION_NAME",s.RESERVED_PHRASE="RESERVED_PHRASE",s.RESERVED_SET_OPERATION="RESERVED_SET_OPERATION",s.RESERVED_CLAUSE="RESERVED_CLAUSE",s.RESERVED_SELECT="RESERVED_SELECT",s.RESERVED_JOIN="RESERVED_JOIN",s.ARRAY_IDENTIFIER="ARRAY_IDENTIFIER",s.ARRAY_KEYWORD="ARRAY_KEYWORD",s.CASE="CASE",s.END="END",s.WHEN="WHEN",s.ELSE="ELSE",s.THEN="THEN",s.LIMIT="LIMIT",s.BETWEEN="BETWEEN",s.AND="AND",s.OR="OR",s.XOR="XOR",s.OPERATOR="OPERATOR",s.COMMA="COMMA",s.ASTERISK="ASTERISK",s.PROPERTY_ACCESS_OPERATOR="PROPERTY_ACCESS_OPERATOR",s.OPEN_PAREN="OPEN_PAREN",s.CLOSE_PAREN="CLOSE_PAREN",s.LINE_COMMENT="LINE_COMMENT",s.BLOCK_COMMENT="BLOCK_COMMENT",s.DISABLE_COMMENT="DISABLE_COMMENT",s.NUMBER="NUMBER",s.NAMED_PARAMETER="NAMED_PARAMETER",s.QUOTED_PARAMETER="QUOTED_PARAMETER",s.NUMBERED_PARAMETER="NUMBERED_PARAMETER",s.POSITIONAL_PARAMETER="POSITIONAL_PARAMETER",s.CUSTOM_PARAMETER="CUSTOM_PARAMETER",s.DELIMITER="DELIMITER",s.EOF="EOF"})(g=g||(g={}));const ku=s=>({type:g.EOF,raw:"«EOF»",text:"«EOF»",start:s}),ti=ku(1/0),xs=s=>e=>e.type===s.type&&e.text===s.text,_s={ARRAY:xs({text:"ARRAY",type:g.RESERVED_DATA_TYPE}),BY:xs({text:"BY",type:g.RESERVED_KEYWORD}),SET:xs({text:"SET",type:g.RESERVED_CLAUSE}),STRUCT:xs({text:"STRUCT",type:g.RESERVED_DATA_TYPE}),WINDOW:xs({text:"WINDOW",type:g.RESERVED_CLAUSE}),VALUES:xs({text:"VALUES",type:g.RESERVED_CLAUSE})},Vu=s=>s===g.RESERVED_DATA_TYPE||s===g.RESERVED_KEYWORD||s===g.RESERVED_FUNCTION_NAME||s===g.RESERVED_PHRASE||s===g.RESERVED_CLAUSE||s===g.RESERVED_SELECT||s===g.RESERVED_SET_OPERATION||s===g.RESERVED_JOIN||s===g.ARRAY_KEYWORD||s===g.CASE||s===g.END||s===g.WHEN||s===g.ELSE||s===g.THEN||s===g.LIMIT||s===g.BETWEEN||s===g.AND||s===g.OR||s===g.XOR,Gg=s=>s===g.AND||s===g.OR||s===g.XOR,Hg=["KEYS.NEW_KEYSET","KEYS.ADD_KEY_FROM_RAW_BYTES","AEAD.DECRYPT_BYTES","AEAD.DECRYPT_STRING","AEAD.ENCRYPT","KEYS.KEYSET_CHAIN","KEYS.KEYSET_FROM_JSON","KEYS.KEYSET_TO_JSON","KEYS.ROTATE_KEYSET","KEYS.KEYSET_LENGTH","ANY_VALUE","ARRAY_AGG","AVG","CORR","COUNT","COUNTIF","COVAR_POP","COVAR_SAMP","MAX","MIN","ST_CLUSTERDBSCAN","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","VAR_POP","VAR_SAMP","ANY_VALUE","ARRAY_AGG","ARRAY_CONCAT_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","COUNT","COUNTIF","LOGICAL_AND","LOGICAL_OR","MAX","MIN","STRING_AGG","SUM","APPROX_COUNT_DISTINCT","APPROX_QUANTILES","APPROX_TOP_COUNT","APPROX_TOP_SUM","ARRAY_CONCAT","ARRAY_LENGTH","ARRAY_TO_STRING","GENERATE_ARRAY","GENERATE_DATE_ARRAY","GENERATE_TIMESTAMP_ARRAY","ARRAY_REVERSE","OFFSET","SAFE_OFFSET","ORDINAL","SAFE_ORDINAL","BIT_COUNT","PARSE_BIGNUMERIC","PARSE_NUMERIC","SAFE_CAST","CURRENT_DATE","EXTRACT","DATE","DATE_ADD","DATE_SUB","DATE_DIFF","DATE_TRUNC","DATE_FROM_UNIX_DATE","FORMAT_DATE","LAST_DAY","PARSE_DATE","UNIX_DATE","CURRENT_DATETIME","DATETIME","EXTRACT","DATETIME_ADD","DATETIME_SUB","DATETIME_DIFF","DATETIME_TRUNC","FORMAT_DATETIME","LAST_DAY","PARSE_DATETIME","ERROR","EXTERNAL_QUERY","S2_CELLIDFROMPOINT","S2_COVERINGCELLIDS","ST_ANGLE","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_AZIMUTH","ST_BOUNDARY","ST_BOUNDINGBOX","ST_BUFFER","ST_BUFFERWITHTOLERANCE","ST_CENTROID","ST_CENTROID_AGG","ST_CLOSESTPOINT","ST_CLUSTERDBSCAN","ST_CONTAINS","ST_CONVEXHULL","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DUMP","ST_DWITHIN","ST_ENDPOINT","ST_EQUALS","ST_EXTENT","ST_EXTERIORRING","ST_GEOGFROM","ST_GEOGFROMGEOJSON","ST_GEOGFROMTEXT","ST_GEOGFROMWKB","ST_GEOGPOINT","ST_GEOGPOINTFROMGEOHASH","ST_GEOHASH","ST_GEOMETRYTYPE","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_INTERSECTSBOX","ST_ISCOLLECTION","ST_ISEMPTY","ST_LENGTH","ST_MAKELINE","ST_MAKEPOLYGON","ST_MAKEPOLYGONORIENTED","ST_MAXDISTANCE","ST_NPOINTS","ST_NUMGEOMETRIES","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SIMPLIFY","ST_SNAPTOGRID","ST_STARTPOINT","ST_TOUCHES","ST_UNION","ST_UNION_AGG","ST_WITHIN","ST_X","ST_Y","FARM_FINGERPRINT","MD5","SHA1","SHA256","SHA512","HLL_COUNT.INIT","HLL_COUNT.MERGE","HLL_COUNT.MERGE_PARTIAL","HLL_COUNT.EXTRACT","MAKE_INTERVAL","EXTRACT","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","JSON_EXTRACT","JSON_QUERY","JSON_EXTRACT_SCALAR","JSON_VALUE","JSON_EXTRACT_ARRAY","JSON_QUERY_ARRAY","JSON_EXTRACT_STRING_ARRAY","JSON_VALUE_ARRAY","TO_JSON_STRING","ABS","SIGN","IS_INF","IS_NAN","IEEE_DIVIDE","RAND","SQRT","POW","POWER","EXP","LN","LOG","LOG10","GREATEST","LEAST","DIV","SAFE_DIVIDE","SAFE_MULTIPLY","SAFE_NEGATE","SAFE_ADD","SAFE_SUBTRACT","MOD","ROUND","TRUNC","CEIL","CEILING","FLOOR","COS","COSH","ACOS","ACOSH","SIN","SINH","ASIN","ASINH","TAN","TANH","ATAN","ATANH","ATAN2","RANGE_BUCKET","FIRST_VALUE","LAST_VALUE","NTH_VALUE","LEAD","LAG","PERCENTILE_CONT","PERCENTILE_DISC","NET.IP_FROM_STRING","NET.SAFE_IP_FROM_STRING","NET.IP_TO_STRING","NET.IP_NET_MASK","NET.IP_TRUNC","NET.IPV4_FROM_INT64","NET.IPV4_TO_INT64","NET.HOST","NET.PUBLIC_SUFFIX","NET.REG_DOMAIN","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","NTILE","ROW_NUMBER","SESSION_USER","CORR","COVAR_POP","COVAR_SAMP","STDDEV_POP","STDDEV_SAMP","STDDEV","VAR_POP","VAR_SAMP","VARIANCE","ASCII","BYTE_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CODE_POINTS_TO_BYTES","CODE_POINTS_TO_STRING","CONCAT","CONTAINS_SUBSTR","ENDS_WITH","FORMAT","FROM_BASE32","FROM_BASE64","FROM_HEX","INITCAP","INSTR","LEFT","LENGTH","LPAD","LOWER","LTRIM","NORMALIZE","NORMALIZE_AND_CASEFOLD","OCTET_LENGTH","REGEXP_CONTAINS","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","REPEAT","REVERSE","RIGHT","RPAD","RTRIM","SAFE_CONVERT_BYTES_TO_STRING","SOUNDEX","SPLIT","STARTS_WITH","STRPOS","SUBSTR","SUBSTRING","TO_BASE32","TO_BASE64","TO_CODE_POINTS","TO_HEX","TRANSLATE","TRIM","UNICODE","UPPER","CURRENT_TIME","TIME","EXTRACT","TIME_ADD","TIME_SUB","TIME_DIFF","TIME_TRUNC","FORMAT_TIME","PARSE_TIME","CURRENT_TIMESTAMP","EXTRACT","STRING","TIMESTAMP","TIMESTAMP_ADD","TIMESTAMP_SUB","TIMESTAMP_DIFF","TIMESTAMP_TRUNC","FORMAT_TIMESTAMP","PARSE_TIMESTAMP","TIMESTAMP_SECONDS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UNIX_SECONDS","UNIX_MILLIS","UNIX_MICROS","GENERATE_UUID","COALESCE","IF","IFNULL","NULLIF","AVG","BIT_AND","BIT_OR","BIT_XOR","CORR","COUNT","COVAR_POP","COVAR_SAMP","EXACT_COUNT_DISTINCT","FIRST","GROUP_CONCAT","GROUP_CONCAT_UNQUOTED","LAST","MAX","MIN","NEST","NTH","QUANTILES","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","TOP","UNIQUE","VARIANCE","VAR_POP","VAR_SAMP","BIT_COUNT","BOOLEAN","BYTES","CAST","FLOAT","HEX_STRING","INTEGER","STRING","COALESCE","GREATEST","IFNULL","IS_INF","IS_NAN","IS_EXPLICITLY_DEFINED","LEAST","NVL","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE","DATE_ADD","DATEDIFF","DAY","DAYOFWEEK","DAYOFYEAR","FORMAT_UTC_USEC","HOUR","MINUTE","MONTH","MSEC_TO_TIMESTAMP","NOW","PARSE_UTC_USEC","QUARTER","SEC_TO_TIMESTAMP","SECOND","STRFTIME_UTC_USEC","TIME","TIMESTAMP","TIMESTAMP_TO_MSEC","TIMESTAMP_TO_SEC","TIMESTAMP_TO_USEC","USEC_TO_TIMESTAMP","UTC_USEC_TO_DAY","UTC_USEC_TO_HOUR","UTC_USEC_TO_MONTH","UTC_USEC_TO_WEEK","UTC_USEC_TO_YEAR","WEEK","YEAR","FORMAT_IP","PARSE_IP","FORMAT_PACKED_IP","PARSE_PACKED_IP","JSON_EXTRACT","JSON_EXTRACT_SCALAR","ABS","ACOS","ACOSH","ASIN","ASINH","ATAN","ATANH","ATAN2","CEIL","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG2","LOG10","PI","POW","RADIANS","RAND","ROUND","SIN","SINH","SQRT","TAN","TANH","REGEXP_MATCH","REGEXP_EXTRACT","REGEXP_REPLACE","CONCAT","INSTR","LEFT","LENGTH","LOWER","LPAD","LTRIM","REPLACE","RIGHT","RPAD","RTRIM","SPLIT","SUBSTR","UPPER","TABLE_DATE_RANGE","TABLE_DATE_RANGE_STRICT","TABLE_QUERY","HOST","DOMAIN","TLD","AVG","COUNT","MAX","MIN","STDDEV","SUM","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","CURRENT_USER","EVERY","FROM_BASE64","HASH","FARM_FINGERPRINT","IF","POSITION","SHA1","SOME","TO_BASE64","BQ.JOBS.CANCEL","BQ.REFRESH_MATERIALIZED_VIEW","OPTIONS","PIVOT","UNPIVOT"],vg=["ALL","AND","ANY","AS","ASC","ASSERT_ROWS_MODIFIED","AT","BETWEEN","BY","CASE","CAST","COLLATE","CONTAINS","CREATE","CROSS","CUBE","CURRENT","DEFAULT","DEFINE","DESC","DISTINCT","ELSE","END","ENUM","ESCAPE","EXCEPT","EXCLUDE","EXISTS","EXTRACT","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","GROUP","GROUPING","GROUPS","HASH","HAVING","IF","IGNORE","IN","INNER","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LIMIT","LOOKUP","MERGE","NATURAL","NEW","NO","NOT","NULL","NULLS","OF","ON","OR","ORDER","OUTER","OVER","PARTITION","PRECEDING","PROTO","RANGE","RECURSIVE","RESPECT","RIGHT","ROLLUP","ROWS","SELECT","SET","SOME","TABLE","TABLESAMPLE","THEN","TO","TREAT","TRUE","UNBOUNDED","UNION","UNNEST","USING","WHEN","WHERE","WINDOW","WITH","WITHIN","SAFE","LIKE","COPY","CLONE","IN","OUT","INOUT","RETURNS","LANGUAGE","CASCADE","RESTRICT","DETERMINISTIC"],wg=["ARRAY","BOOL","BYTES","DATE","DATETIME","GEOGRAPHY","INTERVAL","INT64","INT","SMALLINT","INTEGER","BIGINT","TINYINT","BYTEINT","NUMERIC","DECIMAL","BIGNUMERIC","BIGDECIMAL","FLOAT64","STRING","STRUCT","TIME","TIMEZONE"],Fg=C(["SELECT [ALL | DISTINCT] [AS STRUCT | AS VALUE]"]),Yg=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","OMIT RECORD IF","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY SOURCE | BY TARGET] [THEN]","UPDATE SET","CLUSTER BY","FOR SYSTEM_TIME AS OF","WITH CONNECTION","WITH PARTITION COLUMNS","REMOTE WITH CONNECTION"]),QT=C(["CREATE [OR REPLACE] [TEMP|TEMPORARY|SNAPSHOT|EXTERNAL] TABLE [IF NOT EXISTS]"]),mo=C(["CREATE [OR REPLACE] [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE [FROM]","DROP [SNAPSHOT | EXTERNAL] TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME TO","ALTER COLUMN [IF EXISTS]","SET DEFAULT COLLATE","SET OPTIONS","DROP NOT NULL","SET DATA TYPE","ALTER SCHEMA [IF EXISTS]","ALTER [MATERIALIZED] VIEW [IF EXISTS]","ALTER BI_CAPACITY","TRUNCATE TABLE","CREATE SCHEMA [IF NOT EXISTS]","DEFAULT COLLATE","CREATE [OR REPLACE] [TEMP|TEMPORARY|TABLE] FUNCTION [IF NOT EXISTS]","CREATE [OR REPLACE] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] ROW ACCESS POLICY [IF NOT EXISTS]","GRANT TO","FILTER USING","CREATE CAPACITY","AS JSON","CREATE RESERVATION","CREATE ASSIGNMENT","CREATE SEARCH INDEX [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","DROP [MATERIALIZED] VIEW [IF EXISTS]","DROP [TABLE] FUNCTION [IF EXISTS]","DROP PROCEDURE [IF EXISTS]","DROP ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","DROP CAPACITY [IF EXISTS]","DROP RESERVATION [IF EXISTS]","DROP ASSIGNMENT [IF EXISTS]","DROP SEARCH INDEX [IF EXISTS]","DROP [IF EXISTS]","GRANT","REVOKE","DECLARE","EXECUTE IMMEDIATE","LOOP","END LOOP","REPEAT","END REPEAT","WHILE","END WHILE","BREAK","LEAVE","CONTINUE","ITERATE","FOR","END FOR","BEGIN","BEGIN TRANSACTION","COMMIT TRANSACTION","ROLLBACK TRANSACTION","RAISE","RETURN","CALL","ASSERT","EXPORT DATA"]),kg=C(["UNION {ALL | DISTINCT}","EXCEPT DISTINCT","INTERSECT DISTINCT"]),Vg=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),Wg=C(["TABLESAMPLE SYSTEM","ANY TYPE","ALL COLUMNS","NOT DETERMINISTIC","{ROWS | RANGE} BETWEEN","IS [NOT] DISTINCT FROM"]),Xg={name:"bigquery",tokenizerOptions:{reservedSelect:Fg,reservedClauses:[...Yg,...mo,...QT],reservedSetOperations:kg,reservedJoins:Vg,reservedPhrases:Wg,reservedKeywords:vg,reservedDataTypes:wg,reservedFunctionNames:Hg,extraParens:["[]"],stringTypes:[{quote:'""".."""',prefixes:["R","B","RB","BR"]},{quote:"'''..'''",prefixes:["R","B","RB","BR"]},'""-bs',"''-bs",{quote:'""-raw',prefixes:["R","B","RB","BR"],requirePrefix:!0},{quote:"''-raw",prefixes:["R","B","RB","BR"],requirePrefix:!0}],identTypes:["``"],identChars:{dashes:!0},paramTypes:{positional:!0,named:["@"],quoted:["@"]},variableTypes:[{regex:String.raw`@@\w+`}],lineCommentTypes:["--","#"],operators:["&","|","^","~",">>","<<","||","=>"],postProcess:Kg},formatOptions:{onelineClauses:[...QT,...mo],tabularOnelineClauses:mo}};function Kg(s){return $g(Jg(s))}function $g(s){let e=ti;return s.map(t=>t.text==="OFFSET"&&e.text==="["?(e=t,Object.assign(Object.assign({},t),{type:g.RESERVED_FUNCTION_NAME})):(e=t,t))}function Jg(s){var e;const t=[];for(let i=0;i<s.length;i++){const n=s[i];if((_s.ARRAY(n)||_s.STRUCT(n))&&((e=s[i+1])===null||e===void 0?void 0:e.text)==="<"){const r=jg(s,i+1),o=s.slice(i,r+1);t.push({type:g.IDENTIFIER,raw:o.map(qT("raw")).join(""),text:o.map(qT("text")).join(""),start:n.start}),i=r}else t.push(n)}return t}const qT=s=>e=>e.type===g.IDENTIFIER||e.type===g.COMMA?e[s]+" ":e[s];function jg(s,e){let t=0;for(let i=e;i<s.length;i++){const n=s[i];if(n.text==="<"?t++:n.text===">"?t--:n.text===">>"&&(t-=2),t===0)return i}return s.length-1}const Qg=["ARRAY_AGG","AVG","CORRELATION","COUNT","COUNT_BIG","COVARIANCE","COVARIANCE_SAMP","CUME_DIST","GROUPING","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_ICPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_SAMP","SUM","VARIANCE","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","AGE","ARRAY_DELETE","ARRAY_FIRST","ARRAY_LAST","ARRAY_NEXT","ARRAY_PRIOR","ASCII","ASCII_STR","ASIN","ATAN","ATAN2","ATANH","BITAND","BITANDNOT","BITOR","BITXOR","BITNOT","BPCHAR","BSON_TO_JSON","BTRIM","CARDINALITY","CEILING","CEIL","CHARACTER_LENGTH","CHR","COALESCE","COLLATION_KEY","COLLATION_KEY_BIT","COMPARE_DECFLOAT","CONCAT","COS","COSH","COT","CURSOR_ROWCOUNT","DATAPARTITIONNUM","DATE_PART","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFWEEK_ISO","DAYOFYEAR","DAYS","DAYS_BETWEEN","DAYS_TO_END_OF_MONTH","DBPARTITIONNUM","DECFLOAT","DECFLOAT_FORMAT","DECODE","DECRYPT_BIN","DECRYPT_CHAR","DEGREES","DEREF","DIFFERENCE","DIGITS","DOUBLE_PRECISION","EMPTY_BLOB","EMPTY_CLOB","EMPTY_DBCLOB","EMPTY_NCLOB","ENCRYPT","EVENT_MON_STATE","EXP","EXTRACT","FIRST_DAY","FLOOR","FROM_UTC_TIMESTAMP","GENERATE_UNIQUE","GETHINT","GREATEST","HASH","HASH4","HASH8","HASHEDVALUE","HEX","HEXTORAW","HOUR","HOURS_BETWEEN","IDENTITY_VAL_LOCAL","IFNULL","INITCAP","INSERT","INSTR","INSTR2","INSTR4","INSTRB","INTNAND","INTNOR","INTNXOR","INTNNOT","ISNULL","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_VALUE","JULIAN_DAY","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LN","LOCATE","LOCATE_IN_STRING","LOG10","LONG_VARCHAR","LONG_VARGRAPHIC","LOWER","LPAD","LTRIM","MAX","MAX_CARDINALITY","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MINUTES_BETWEEN","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MULTIPLY_ALT","NEXT_DAY","NEXT_MONTH","NEXT_QUARTER","NEXT_WEEK","NEXT_YEAR","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARAMETER","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","QUOTE_IDENT","QUOTE_LITERAL","RADIANS","RAISE_ERROR","RAND","RANDOM","RAWTOHEX","REC2XML","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_MATCH_COUNT","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RID_BIT","RIGHT","ROUND","ROUND_TIMESTAMP","RPAD","RTRIM","SECLABEL","SECLABEL_BY_NAME","SECLABEL_TO_CHAR","SECOND","SECONDS_BETWEEN","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","THIS_MONTH","THIS_QUARTER","THIS_WEEK","THIS_YEAR","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF","TIMEZONE","TO_CHAR","TO_CLOB","TO_DATE","TO_HEX","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_UTC_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM","TRIM_ARRAY","TRUNC_TIMESTAMP","TRUNCATE","TRUNC","TYPE_ID","TYPE_NAME","TYPE_SCHEMA","UCASE","UNICODE_STR","UPPER","VALUE","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT","VARCHAR_FORMAT_BIT","VERIFY_GROUP_FOR_USER","VERIFY_ROLE_FOR_USER","VERIFY_TRUSTED_CONTEXT_ROLE_FOR_USER","WEEK","WEEK_ISO","WEEKS_BETWEEN","WIDTH_BUCKET","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLQUERY","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XMLXSROBJECTID","XSLTRANSFORM","YEAR","YEARS_BETWEEN","YMD_BETWEEN","BASE_TABLE","JSON_TABLE","UNNEST","XMLTABLE","RANK","DENSE_RANK","NTILE","LAG","LEAD","ROW_NUMBER","FIRST_VALUE","LAST_VALUE","NTH_VALUE","RATIO_TO_REPORT","CAST"],qg=["ACTIVATE","ADD","AFTER","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","AS","ASENSITIVE","ASSOCIATE","ASUTIME","AT","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","BEFORE","BEGIN","BETWEEN","BINARY","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CHECK","CLONE","CLOSE","CLUSTER","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","COUNT","COUNT_BIG","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST1","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRAPHIC","GROUP","HANDLER","HASH","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IMPORT","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INTEGRITY","INTERSECT","INTO","IS","ISNULL","ISOBID","ISOLATION","ITERATE","JAR","JAVA","JOIN","KEEP","KEY","LABEL","LANGUAGE","LAST3","LATERAL","LC_CTYPE","LEAVE","LEFT","LIKE","LIMIT","LINKTYPE","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LOOP","MAINTAINED","MATERIALIZED","MAXVALUE","MICROSECOND","MICROSECONDS","MINUTE","MINUTES","MINVALUE","MODE","MODIFIES","MONTH","MONTHS","NAN","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT2","NOTNULL","NULL","NULLS","NUMPARTS","OBID","OF","OFF","OFFSET","OLD","OLD_TABLE","ON","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","OR","ORDER","OUT","OUTER","OVER","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENT","PIECESIZE","PLAN","POSITION","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STOGROUP","STORES","STYLE","SUBSTRING","SUMMARY","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESPACE","THEN","TO","TRANSACTION","TRIGGER","TRIM","TRUNCATE","TYPE","UNDO","UNION","UNIQUE","UNTIL","UPDATE","USAGE","USER","USING","VALIDPROC","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],zg=["ARRAY","BIGINT","BINARY","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATE","DATETIME","DBCLOB","DEC","DECIMAL","DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","GRAPHIC","INT","INT2","INT4","INT8","INTEGER","INTERVAL","LONG VARCHAR","LONG VARGRAPHIC","NCHAR","NCHR","NCLOB","NVARCHAR","NUMERIC","SMALLINT","REAL","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC"],Zg=C(["SELECT [ALL | DISTINCT]"]),eP=C(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH NEXT","FOR UPDATE [OF]","FOR {READ | FETCH} ONLY","FOR {RR | CS | UR | RS} [USE AND KEEP {SHARE | UPDATE | EXCLUSIVE} LOCKS]","WAIT FOR OUTCOME","SKIP LOCKED DATA","INTO","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT"]),zT=C(["CREATE [GLOBAL TEMPORARY | EXTERNAL] TABLE [IF NOT EXISTS]"]),Lo=C(["CREATE [OR REPLACE] VIEW","UPDATE","WHERE CURRENT OF","WITH {RR | RS | CS | UR}","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME COLUMN","ALTER [COLUMN]","SET DATA TYPE","SET NOT NULL","DROP {DEFAULT | GENERATED | NOT NULL}","TRUNCATE [TABLE]","ALLOCATE","ALTER AUDIT POLICY","ALTER BUFFERPOOL","ALTER DATABASE PARTITION GROUP","ALTER DATABASE","ALTER EVENT MONITOR","ALTER FUNCTION","ALTER HISTOGRAM TEMPLATE","ALTER INDEX","ALTER MASK","ALTER METHOD","ALTER MODULE","ALTER NICKNAME","ALTER PACKAGE","ALTER PERMISSION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SECURITY LABEL COMPONENT","ALTER SECURITY POLICY","ALTER SEQUENCE","ALTER SERVER","ALTER SERVICE CLASS","ALTER STOGROUP","ALTER TABLESPACE","ALTER THRESHOLD","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER TYPE","ALTER USAGE LIST","ALTER USER MAPPING","ALTER VIEW","ALTER WORK ACTION SET","ALTER WORK CLASS SET","ALTER WORKLOAD","ALTER WRAPPER","ALTER XSROBJECT","ALTER STOGROUP","ALTER TABLESPACE","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER VIEW","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","AUDIT","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON","COMMIT [WORK]","CONNECT","CREATE [OR REPLACE] [PUBLIC] ALIAS","CREATE AUDIT POLICY","CREATE BUFFERPOOL","CREATE DATABASE PARTITION GROUP","CREATE EVENT MONITOR","CREATE [OR REPLACE] FUNCTION","CREATE FUNCTION MAPPING","CREATE HISTOGRAM TEMPLATE","CREATE [UNIQUE] INDEX","CREATE INDEX EXTENSION","CREATE [OR REPLACE] MASK","CREATE [SPECIFIC] METHOD","CREATE [OR REPLACE] MODULE","CREATE [OR REPLACE] NICKNAME","CREATE [OR REPLACE] PERMISSION","CREATE [OR REPLACE] PROCEDURE","CREATE ROLE","CREATE SCHEMA","CREATE SECURITY LABEL [COMPONENT]","CREATE SECURITY POLICY","CREATE [OR REPLACE] SEQUENCE","CREATE SERVICE CLASS","CREATE SERVER","CREATE STOGROUP","CREATE SYNONYM","CREATE [LARGE | REGULAR | {SYSTEM | USER} TEMPORARY] TABLESPACE","CREATE THRESHOLD","CREATE {TRANSFORM | TRANSFORMS} FOR","CREATE [OR REPLACE] TRIGGER","CREATE TRUSTED CONTEXT","CREATE [OR REPLACE] TYPE","CREATE TYPE MAPPING","CREATE USAGE LIST","CREATE USER MAPPING FOR","CREATE [OR REPLACE] VARIABLE","CREATE WORK ACTION SET","CREATE WORK CLASS SET","CREATE WORKLOAD","CREATE WRAPPER","DECLARE","DECLARE GLOBAL TEMPORARY TABLE","DESCRIBE [INPUT | OUTPUT]","DISCONNECT","DROP [PUBLIC] ALIAS","DROP AUDIT POLICY","DROP BUFFERPOOL","DROP DATABASE PARTITION GROUP","DROP EVENT MONITOR","DROP [SPECIFIC] FUNCTION","DROP FUNCTION MAPPING","DROP HISTOGRAM TEMPLATE","DROP INDEX [EXTENSION]","DROP MASK","DROP [SPECIFIC] METHOD","DROP MODULE","DROP NICKNAME","DROP PACKAGE","DROP PERMISSION","DROP [SPECIFIC] PROCEDURE","DROP ROLE","DROP SCHEMA","DROP SECURITY LABEL [COMPONENT]","DROP SECURITY POLICY","DROP SEQUENCE","DROP SERVER","DROP SERVICE CLASS","DROP STOGROUP","DROP TABLE HIERARCHY","DROP {TABLESPACE | TABLESPACES}","DROP {TRANSFORM | TRANSFORMS}","DROP THRESHOLD","DROP TRIGGER","DROP TRUSTED CONTEXT","DROP TYPE [MAPPING]","DROP USAGE LIST","DROP USER MAPPING FOR","DROP VARIABLE","DROP VIEW [HIERARCHY]","DROP WORK {ACTION | CLASS} SET","DROP WORKLOAD","DROP WRAPPER","DROP XSROBJECT","END DECLARE SECTION","EXECUTE [IMMEDIATE]","EXPLAIN {PLAN [SECTION] | ALL}","FETCH [FROM]","FLUSH {BUFFERPOOL | BUFFERPOOLS} ALL","FLUSH EVENT MONITOR","FLUSH FEDERATED CACHE","FLUSH OPTIMIZATION PROFILE CACHE","FLUSH PACKAGE CACHE [DYNAMIC]","FLUSH AUTHENTICATION CACHE [FOR ALL]","FREE LOCATOR","GET DIAGNOSTICS","GOTO","GRANT","INCLUDE","ITERATE","LEAVE","LOCK TABLE","LOOP","OPEN","PIPE","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX | STOGROUP | TABLESPACE]","REPEAT","RESIGNAL","RETURN","REVOKE","ROLLBACK [WORK] [TO SAVEPOINT]","SAVEPOINT","SET COMPILATION ENVIRONMENT","SET CONNECTION","SET CURRENT","SET ENCRYPTION PASSWORD","SET EVENT MONITOR STATE","SET INTEGRITY","SET PASSTHRU","SET PATH","SET ROLE","SET SCHEMA","SET SERVER OPTION","SET {SESSION AUTHORIZATION | SESSION_USER}","SET USAGE LIST","SIGNAL","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}","WHILE"]),tP=C(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),sP=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),iP=C(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),nP={name:"db2",tokenizerOptions:{reservedSelect:Zg,reservedClauses:[...eP,...zT,...Lo],reservedSetOperations:tP,reservedJoins:sP,reservedPhrases:iP,reservedKeywords:qg,reservedDataTypes:zg,reservedFunctionNames:Qg,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N","U&"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","%","|","&","^","~","¬=","¬>","¬<","!>","!<","^=","^>","^<","||","->","=>"]},formatOptions:{onelineClauses:[...zT,...Lo],tabularOnelineClauses:Lo}},rP=["ARRAY_AGG","AVG","CORR","CORRELATION","COUNT","COUNT_BIG","COVAR_POP","COVARIANCE","COVAR","COVAR_SAMP","COVARIANCE_SAMP","EVERY","GROUPING","JSON_ARRAYAGG","JSON_OBJECTAGG","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","SOME","STDDEV_POP","STDDEV","STDDEV_SAMP","SUM","VAR_POP","VARIANCE","VAR","VAR_SAMP","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","ANTILOG","ARRAY_MAX_CARDINALITY","ARRAY_TRIM","ASCII","ASIN","ATAN","ATAN2","ATANH","BASE64_DECODE","BASE64_ENCODE","BIT_LENGTH","BITAND","BITANDNOT","BITNOT","BITOR","BITXOR","BSON_TO_JSON","CARDINALITY","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","COALESCE","COMPARE_DECFLOAT","CONCAT","CONTAINS","COS","COSH","COT","CURDATE","CURTIME","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK_ISO","DAYOFWEEK","DAYOFYEAR","DAYS","DBPARTITIONNAME","DBPARTITIONNUM","DECFLOAT_FORMAT","DECFLOAT_SORTKEY","DECRYPT_BINARY","DECRYPT_BIT","DECRYPT_CHAR","DECRYPT_DB","DEGREES","DIFFERENCE","DIGITS","DLCOMMENT","DLLINKTYPE","DLURLCOMPLETE","DLURLPATH","DLURLPATHONLY","DLURLSCHEME","DLURLSERVER","DLVALUE","DOUBLE_PRECISION","DOUBLE","ENCRPYT","ENCRYPT_AES","ENCRYPT_AES256","ENCRYPT_RC2","ENCRYPT_TDES","EXP","EXTRACT","FIRST_DAY","FLOOR","GENERATE_UNIQUE","GET_BLOB_FROM_FILE","GET_CLOB_FROM_FILE","GET_DBCLOB_FROM_FILE","GET_XML_FILE","GETHINT","GREATEST","HASH_MD5","HASH_ROW","HASH_SHA1","HASH_SHA256","HASH_SHA512","HASH_VALUES","HASHED_VALUE","HEX","HEXTORAW","HOUR","HTML_ENTITY_DECODE","HTML_ENTITY_ENCODE","HTTP_DELETE_BLOB","HTTP_DELETE","HTTP_GET_BLOB","HTTP_GET","HTTP_PATCH_BLOB","HTTP_PATCH","HTTP_POST_BLOB","HTTP_POST","HTTP_PUT_BLOB","HTTP_PUT","IDENTITY_VAL_LOCAL","IFNULL","INSERT","INSTR","INTERPRET","ISFALSE","ISNOTFALSE","ISNOTTRUE","ISTRUE","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_UPDATE","JSON_VALUE","JULIAN_DAY","LAND","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LN","LNOT","LOCATE_IN_STRING","LOCATE","LOG10","LOR","LOWER","LPAD","LTRIM","MAX_CARDINALITY","MAX","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MQREAD","MQREADCLOB","MQRECEIVE","MQRECEIVECLOB","MQSEND","MULTIPLY_ALT","NEXT_DAY","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","OCTET_LENGTH","OVERLAY","PI","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","RADIANS","RAISE_ERROR","RANDOM","RAND","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RIGHT","ROUND_TIMESTAMP","ROUND","RPAD","RRN","RTRIM","SCORE","SECOND","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF_BIG","TIMESTAMPDIFF","TO_CHAR","TO_CLOB","TO_DATE","TO_NUMBER","TO_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM_ARRAY","TRIM","TRUNC_TIMESTAMP","TRUNC","TRUNCATE","UCASE","UPPER","URL_DECODE","URL_ENCODE","VALUE","VARBINARY_FORMAT","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT_BINARY","VARCHAR_FORMAT","VERIFY_GROUP_FOR_USER","WEEK_ISO","WEEK","WRAP","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XOR","XSLTRANSFORM","YEAR","ZONED","BASE_TABLE","HTTP_DELETE_BLOB_VERBOSE","HTTP_DELETE_VERBOSE","HTTP_GET_BLOB_VERBOSE","HTTP_GET_VERBOSE","HTTP_PATCH_BLOB_VERBOSE","HTTP_PATCH_VERBOSE","HTTP_POST_BLOB_VERBOSE","HTTP_POST_VERBOSE","HTTP_PUT_BLOB_VERBOSE","HTTP_PUT_VERBOSE","JSON_TABLE","MQREADALL","MQREADALLCLOB","MQRECEIVEALL","MQRECEIVEALLCLOB","XMLTABLE","UNPACK","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","RATIO_TO_REPORT","ROW_NUMBER","CAST"],oP=["ABSENT","ACCORDING","ACCTNG","ACTION","ACTIVATE","ADD","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","APPEND","APPLNAME","ARRAY","ARRAY_AGG","ARRAY_TRIM","AS","ASC","ASENSITIVE","ASSOCIATE","ATOMIC","ATTACH","ATTRIBUTES","AUTHORIZATION","AUTONOMOUS","BEFORE","BEGIN","BETWEEN","BIND","BSON","BUFFERPOOL","BY","CACHE","CALL","CALLED","CARDINALITY","CASE","CAST","CHECK","CL","CLOSE","CLUSTER","COLLECT","COLLECTION","COLUMN","COMMENT","COMMIT","COMPACT","COMPARISONS","COMPRESS","CONCAT","CONCURRENT","CONDITION","CONNECT","CONNECT_BY_ROOT","CONNECTION","CONSTANT","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","COPY","COUNT","COUNT_BIG","CREATE","CREATEIN","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEACTIVATE","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFER","DEFINE","DEFINITION","DELETE","DELETING","DENSE_RANK","DENSERANK","DESC","DESCRIBE","DESCRIPTOR","DETACH","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DYNAMIC","EACH","ELSE","ELSEIF","EMPTY","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ENFORCED","ERROR","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTEND","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST_VALUE","FOR","FOREIGN","FORMAT","FREE","FREEPAGE","FROM","FULL","FUNCTION","GBPCACHE","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GROUP","HANDLER","HASH","HASH_ROW","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IGNORE","IMMEDIATE","IMPLICITLY","IN","INCLUDE","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDEXBP","INDICATOR","INF","INFINITY","INHERIT","INLINE","INNER","INOUT","INSENSITIVE","INSERT","INSERTING","INTEGRITY","INTERPRET","INTERSECT","INTO","IS","ISNULL","ISOLATION","ITERATE","JAVA","JOIN","JSON","JSON_ARRAY","JSON_ARRAYAGG","JSON_EXISTS","JSON_OBJECT","JSON_OBJECTAGG","JSON_QUERY","JSON_TABLE","JSON_VALUE","KEEP","KEY","KEYS","LABEL","LAG","LANGUAGE","LAST_VALUE","LATERAL","LEAD","LEAVE","LEFT","LEVEL2","LIKE","LIMIT","LINKTYPE","LISTAGG","LOCAL","LOCALDATE","LOCALTIME","LOCALTIMESTAMP","LOCATION","LOCATOR","LOCK","LOCKSIZE","LOG","LOGGED","LOOP","MAINTAINED","MASK","MATCHED","MATERIALIZED","MAXVALUE","MERGE","MICROSECOND","MICROSECONDS","MINPCTUSED","MINUTE","MINUTES","MINVALUE","MIRROR","MIXED","MODE","MODIFIES","MONTH","MONTHS","NAMESPACE","NAN","NATIONAL","NCHAR","NCLOB","NESTED","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT","NOTNULL","NTH_VALUE","NTILE","NULL","NULLS","NVARCHAR","OBID","OBJECT","OF","OFF","OFFSET","OLD","OLD_TABLE","OMIT","ON","ONLY","OPEN","OPTIMIZE","OPTION","OR","ORDER","ORDINALITY","ORGANIZE","OUT","OUTER","OVER","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGE","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSING","PASSWORD","PATH","PCTFREE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PERIOD","PERMISSION","PIECESIZE","PIPE","PLAN","POSITION","PREPARE","PREVVAL","PRIMARY","PRIOR","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PROGRAMID","QUERY","RANGE","RANK","RATIO_TO_REPORT","RCDFMT","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","REGEXP_LIKE","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNING","RETURNS","REVOKE","RID","RIGHT","ROLLBACK","ROLLUP","ROUTINE","ROW","ROW_NUMBER","ROWNUMBER","ROWS","RRN","RUN","SAVEPOINT","SBCS","SCALAR","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURED","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SKIP","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","SQLIND_DEFAULT","SQLIND_UNASSIGNED","STACKED","START","STARTING","STATEMENT","STATIC","STOGROUP","SUBSTRING","SUMMARY","SYNONYM","SYSTEM_TIME","SYSTEM_USER","TABLE","TABLESPACE","TABLESPACES","TAG","THEN","THREADSAFE","TO","TRANSACTION","TRANSFER","TRIGGER","TRIM","TRIM_ARRAY","TRUE","TRUNCATE","TRY_CAST","TYPE","UNDO","UNION","UNIQUE","UNIT","UNKNOWN","UNNEST","UNTIL","UPDATE","UPDATING","URI","USAGE","USE","USER","USERID","USING","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VERSIONING","VIEW","VOLATILE","WAIT","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHIN","WITHOUT","WRAPPED","WRAPPER","WRITE","WRKSTNNAME","XMLAGG","XMLATTRIBUTES","XMLCAST","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLGROUP","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTABLE","XMLTEXT","XMLVALIDATE","XSLTRANSFORM","XSROBJECT","YEAR","YEARS","YES","ZONE"],lP=["ARRAY","BIGINT","BINARY","BIT","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATA","DATALINK","DATE","DBCLOB","DECFLOAT","DECIMAL","DEC","DOUBLE","DOUBLE PRECISION","FLOAT","GRAPHIC","INT","INTEGER","LONG","NUMERIC","REAL","ROWID","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC","XML"],aP=C(["SELECT [ALL | DISTINCT]"]),EP=C(["WITH [RECURSIVE]","INTO","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","FOR READ ONLY","OPTIMIZE FOR","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","DELETE","INSERT","FOR SYSTEM NAME"]),ZT=C(["CREATE [OR REPLACE] TABLE"]),_o=C(["CREATE [OR REPLACE] [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","WITH {NC | RR | RS | CS | UR}","DELETE FROM","DROP TABLE","ALTER TABLE","ADD [COLUMN]","ALTER [COLUMN]","DROP [COLUMN]","SET DATA TYPE","SET {GENERATED ALWAYS | GENERATED BY DEFAULT}","SET NOT NULL","SET {NOT HIDDEN | IMPLICITLY HIDDEN}","SET FIELDPROC","DROP {DEFAULT | NOT NULL | GENERATED | IDENTITY | ROW CHANGE TIMESTAMP | FIELDPROC}","TRUNCATE [TABLE]","SET [CURRENT] SCHEMA","SET CURRENT_SCHEMA","ALLOCATE CURSOR","ALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL] SQL","ALTER [SPECIFIC] {FUNCTION | PROCEDURE}","ALTER {MASK | PERMISSION | SEQUENCE | TRIGGER}","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PARAMETER | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","COMMENT ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON PARAMETER SPECIFIC {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON [TABLE FUNCTION] RETURN COLUMN","COMMENT ON [TABLE FUNCTION] RETURN COLUMN SPECIFIC [PROCEDURE | ROUTINE]","COMMIT [WORK] [HOLD]","CONNECT [TO | RESET] USER","CREATE [OR REPLACE] {ALIAS | FUNCTION | MASK | PERMISSION | PROCEDURE | SEQUENCE | TRIGGER | VARIABLE}","CREATE [ENCODED VECTOR] INDEX","CREATE UNIQUE [WHERE NOT NULL] INDEX","CREATE SCHEMA","CREATE TYPE","DEALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL]","DECLARE CURSOR","DECLARE GLOBAL TEMPORARY TABLE","DECLARE","DESCRIBE CURSOR","DESCRIBE INPUT","DESCRIBE [OUTPUT]","DESCRIBE {PROCEDURE | ROUTINE}","DESCRIBE TABLE","DISCONNECT ALL [SQL]","DISCONNECT [CURRENT]","DROP {ALIAS | INDEX | MASK | PACKAGE | PERMISSION | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT} [IF EXISTS]","DROP [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE} [IF EXISTS]","END DECLARE SECTION","EXECUTE [IMMEDIATE]","FREE LOCATOR","GET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","GET [CURRENT | STACKED] DIAGNOSTICS","GRANT {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","HOLD LOCATOR","INCLUDE","LABEL ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","LABEL ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","LOCK TABLE","OPEN","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX] TO","REVOKE {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","ROLLBACK [WORK] [HOLD | TO SAVEPOINT]","SAVEPOINT","SET CONNECTION","SET CURRENT {DEBUG MODE | DECFLOAT ROUNDING MODE | DEGREE | IMPLICIT XMLPARSE OPTION | TEMPORAL SYSTEM_TIME}","SET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","SET ENCRYPTION PASSWORD","SET OPTION","SET {[CURRENT [FUNCTION]] PATH | CURRENT_PATH}","SET RESULT SETS [WITH RETURN [TO CALLER | TO CLIENT]]","SET SESSION AUTHORIZATION","SET SESSION_USER","SET TRANSACTION","SIGNAL SQLSTATE [VALUE]","TAG","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}"]),TP=C(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),cP=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT | RIGHT] EXCEPTION JOIN","{INNER | CROSS} JOIN"]),hP=C(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),AP={name:"db2i",tokenizerOptions:{reservedSelect:aP,reservedClauses:[...EP,...ZT,..._o],reservedSetOperations:TP,reservedJoins:cP,reservedPhrases:hP,reservedKeywords:oP,reservedDataTypes:lP,reservedFunctionNames:rP,nestedBlockComments:!0,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","¬=","¬>","¬<","!>","!<","||","=>"]},formatOptions:{onelineClauses:[...ZT,..._o],tabularOnelineClauses:_o}},RP=["ABS","ACOS","ADD","ADD_PARQUET_KEY","AGE","AGGREGATE","ALIAS","ALL_PROFILING_OUTPUT","ANY_VALUE","APPLY","APPROX_COUNT_DISTINCT","APPROX_QUANTILE","ARBITRARY","ARGMAX","ARGMIN","ARG_MAX","ARG_MAX_NULL","ARG_MIN","ARG_MIN_NULL","ARRAY_AGG","ARRAY_AGGR","ARRAY_AGGREGATE","ARRAY_APPEND","ARRAY_APPLY","ARRAY_CAT","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COSINE_SIMILARITY","ARRAY_CROSS_PRODUCT","ARRAY_DISTANCE","ARRAY_DISTINCT","ARRAY_DOT_PRODUCT","ARRAY_EXTRACT","ARRAY_FILTER","ARRAY_GRADE_UP","ARRAY_HAS","ARRAY_HAS_ALL","ARRAY_HAS_ANY","ARRAY_INDEXOF","ARRAY_INNER_PRODUCT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_POP_BACK","ARRAY_POP_FRONT","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUSH_BACK","ARRAY_PUSH_FRONT","ARRAY_REDUCE","ARRAY_RESIZE","ARRAY_REVERSE","ARRAY_REVERSE_SORT","ARRAY_SELECT","ARRAY_SLICE","ARRAY_SORT","ARRAY_TO_JSON","ARRAY_TO_STRING","ARRAY_TRANSFORM","ARRAY_UNIQUE","ARRAY_VALUE","ARRAY_WHERE","ARRAY_ZIP","ARROW_SCAN","ARROW_SCAN_DUMB","ASCII","ASIN","ATAN","ATAN2","AVG","BASE64","BIN","BITSTRING","BITSTRING_AGG","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_POSITION","BIT_XOR","BOOL_AND","BOOL_OR","CARDINALITY","CBRT","CEIL","CEILING","CENTURY","CHECKPOINT","CHR","COLLATIONS","COL_DESCRIPTION","COMBINE","CONCAT","CONCAT_WS","CONSTANT_OR_NULL","CONTAINS","COPY_DATABASE","CORR","COS","COT","COUNT","COUNT_IF","COUNT_STAR","COVAR_POP","COVAR_SAMP","CREATE_SORT_KEY","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_DATE","CURRENT_LOCALTIME","CURRENT_LOCALTIMESTAMP","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SETTING","CURRENT_USER","CURRVAL","DAMERAU_LEVENSHTEIN","DATABASE_LIST","DATABASE_SIZE","DATEDIFF","DATEPART","DATESUB","DATETRUNC","DATE_ADD","DATE_DIFF","DATE_PART","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECADE","DECODE","DEGREES","DISABLE_CHECKPOINT_ON_SHUTDOWN","DISABLE_OBJECT_CACHE","DISABLE_OPTIMIZER","DISABLE_PRINT_PROGRESS_BAR","DISABLE_PROFILE","DISABLE_PROFILING","DISABLE_PROGRESS_BAR","DISABLE_VERIFICATION","DISABLE_VERIFY_EXTERNAL","DISABLE_VERIFY_FETCH_ROW","DISABLE_VERIFY_PARALLELISM","DISABLE_VERIFY_SERIALIZER","DIVIDE","DUCKDB_COLUMNS","DUCKDB_CONSTRAINTS","DUCKDB_DATABASES","DUCKDB_DEPENDENCIES","DUCKDB_EXTENSIONS","DUCKDB_FUNCTIONS","DUCKDB_INDEXES","DUCKDB_KEYWORDS","DUCKDB_MEMORY","DUCKDB_OPTIMIZERS","DUCKDB_SCHEMAS","DUCKDB_SECRETS","DUCKDB_SEQUENCES","DUCKDB_SETTINGS","DUCKDB_TABLES","DUCKDB_TEMPORARY_FILES","DUCKDB_TYPES","DUCKDB_VIEWS","EDIT","EDITDIST3","ELEMENT_AT","ENABLE_CHECKPOINT_ON_SHUTDOWN","ENABLE_OBJECT_CACHE","ENABLE_OPTIMIZER","ENABLE_PRINT_PROGRESS_BAR","ENABLE_PROFILE","ENABLE_PROFILING","ENABLE_PROGRESS_BAR","ENABLE_VERIFICATION","ENCODE","ENDS_WITH","ENTROPY","ENUM_CODE","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","ENUM_RANGE_BOUNDARY","EPOCH","EPOCH_MS","EPOCH_NS","EPOCH_US","ERA","ERROR","EVEN","EXP","FACTORIAL","FAVG","FDIV","FILTER","FINALIZE","FIRST","FLATTEN","FLOOR","FMOD","FORCE_CHECKPOINT","FORMAT","FORMATREADABLEDECIMALSIZE","FORMATREADABLESIZE","FORMAT_BYTES","FORMAT_PG_TYPE","FORMAT_TYPE","FROM_BASE64","FROM_BINARY","FROM_HEX","FROM_JSON","FROM_JSON_STRICT","FSUM","FUNCTIONS","GAMMA","GCD","GENERATE_SERIES","GENERATE_SUBSCRIPTS","GEN_RANDOM_UUID","GEOMEAN","GEOMETRIC_MEAN","GETENV","GET_BIT","GET_BLOCK_SIZE","GET_CURRENT_TIME","GET_CURRENT_TIMESTAMP","GLOB","GRADE_UP","GREATEST","GREATEST_COMMON_DIVISOR","GROUP_CONCAT","HAMMING","HASH","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HEX","HISTOGRAM","HOUR","ICU_CALENDAR_NAMES","ICU_SORT_KEY","ILIKE_ESCAPE","IMPORT_DATABASE","INDEX_SCAN","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","INSTR","IN_SEARCH_PATH","ISFINITE","ISINF","ISNAN","ISODOW","ISOYEAR","JACCARD","JARO_SIMILARITY","JARO_WINKLER_SIMILARITY","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_CONTAINS","JSON_DESERIALIZE_SQL","JSON_EXECUTE_SERIALIZED_SQL","JSON_EXTRACT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_EXTRACT_STRING","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_GROUP_STRUCTURE","JSON_KEYS","JSON_MERGE_PATCH","JSON_OBJECT","JSON_QUOTE","JSON_SERIALIZE_PLAN","JSON_SERIALIZE_SQL","JSON_STRUCTURE","JSON_TRANSFORM","JSON_TRANSFORM_STRICT","JSON_TYPE","JSON_VALID","JULIAN","KAHAN_SUM","KURTOSIS","KURTOSIS_POP","LAST","LAST_DAY","LCASE","LCM","LEAST","LEAST_COMMON_MULTIPLE","LEFT","LEFT_GRAPHEME","LEN","LENGTH","LENGTH_GRAPHEME","LEVENSHTEIN","LGAMMA","LIKE_ESCAPE","LIST","LISTAGG","LIST_AGGR","LIST_AGGREGATE","LIST_ANY_VALUE","LIST_APPEND","LIST_APPLY","LIST_APPROX_COUNT_DISTINCT","LIST_AVG","LIST_BIT_AND","LIST_BIT_OR","LIST_BIT_XOR","LIST_BOOL_AND","LIST_BOOL_OR","LIST_CAT","LIST_CONCAT","LIST_CONTAINS","LIST_COSINE_SIMILARITY","LIST_COUNT","LIST_DISTANCE","LIST_DISTINCT","LIST_DOT_PRODUCT","LIST_ELEMENT","LIST_ENTROPY","LIST_EXTRACT","LIST_FILTER","LIST_FIRST","LIST_GRADE_UP","LIST_HAS","LIST_HAS_ALL","LIST_HAS_ANY","LIST_HISTOGRAM","LIST_INDEXOF","LIST_INNER_PRODUCT","LIST_INTERSECT","LIST_KURTOSIS","LIST_KURTOSIS_POP","LIST_LAST","LIST_MAD","LIST_MAX","LIST_MEDIAN","LIST_MIN","LIST_MODE","LIST_PACK","LIST_POSITION","LIST_PREPEND","LIST_PRODUCT","LIST_REDUCE","LIST_RESIZE","LIST_REVERSE","LIST_REVERSE_SORT","LIST_SELECT","LIST_SEM","LIST_SKEWNESS","LIST_SLICE","LIST_SORT","LIST_STDDEV_POP","LIST_STDDEV_SAMP","LIST_STRING_AGG","LIST_SUM","LIST_TRANSFORM","LIST_UNIQUE","LIST_VALUE","LIST_VAR_POP","LIST_VAR_SAMP","LIST_WHERE","LIST_ZIP","LN","LOG","LOG10","LOG2","LOWER","LPAD","LSMODE","LTRIM","MAD","MAKE_DATE","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","MAP","MAP_CONCAT","MAP_ENTRIES","MAP_EXTRACT","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","MAX","MAX_BY","MD5","MD5_NUMBER","MD5_NUMBER_LOWER","MD5_NUMBER_UPPER","MEAN","MEDIAN","METADATA_INFO","MICROSECOND","MILLENNIUM","MILLISECOND","MIN","MINUTE","MIN_BY","MISMATCHES","MOD","MODE","MONTH","MONTHNAME","MULTIPLY","NEXTAFTER","NEXTVAL","NFC_NORMALIZE","NOT_ILIKE_ESCAPE","NOT_LIKE_ESCAPE","NOW","NULLIF","OBJ_DESCRIPTION","OCTET_LENGTH","ORD","PARQUET_FILE_METADATA","PARQUET_KV_METADATA","PARQUET_METADATA","PARQUET_SCAN","PARQUET_SCHEMA","PARSE_DIRNAME","PARSE_DIRPATH","PARSE_FILENAME","PARSE_PATH","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONVERSION_IS_VISIBLE","PG_FUNCTION_IS_VISIBLE","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IS_OTHER_TEMP_SCHEMA","PG_MY_TEMP_SCHEMA","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_POSTMASTER_START_TIME","PG_SIZE_PRETTY","PG_TABLE_IS_VISIBLE","PG_TIMEZONE_NAMES","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PI","PLATFORM","POSITION","POW","POWER","PRAGMA_COLLATIONS","PRAGMA_DATABASE_SIZE","PRAGMA_METADATA_INFO","PRAGMA_PLATFORM","PRAGMA_SHOW","PRAGMA_STORAGE_INFO","PRAGMA_TABLE_INFO","PRAGMA_USER_AGENT","PRAGMA_VERSION","PREFIX","PRINTF","PRODUCT","QUANTILE","QUANTILE_CONT","QUANTILE_DISC","QUARTER","RADIANS","RANDOM","RANGE","READFILE","READ_BLOB","READ_CSV","READ_CSV_AUTO","READ_JSON","READ_JSON_AUTO","READ_JSON_OBJECTS","READ_JSON_OBJECTS_AUTO","READ_NDJSON","READ_NDJSON_AUTO","READ_NDJSON_OBJECTS","READ_PARQUET","READ_TEXT","REDUCE","REGEXP_ESCAPE","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_FULL_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REPEAT","REPEAT_ROW","REPLACE","RESERVOIR_QUANTILE","REVERSE","RIGHT","RIGHT_GRAPHEME","ROUND","ROUNDBANKERS","ROUND_EVEN","ROW","ROW_TO_JSON","RPAD","RTRIM","SECOND","SEM","SEQ_SCAN","SESSION_USER","SETSEED","SET_BIT","SHA256","SHA3","SHELL_ADD_SCHEMA","SHELL_ESCAPE_CRNL","SHELL_IDQUOTE","SHELL_MODULE_SCHEMA","SHELL_PUTSNL","SHOBJ_DESCRIPTION","SHOW","SHOW_DATABASES","SHOW_TABLES","SHOW_TABLES_EXPANDED","SIGN","SIGNBIT","SIN","SKEWNESS","SNIFF_CSV","SPLIT","SPLIT_PART","SQL_AUTO_COMPLETE","SQRT","STARTS_WITH","STATS","STDDEV","STDDEV_POP","STDDEV_SAMP","STORAGE_INFO","STRFTIME","STRING_AGG","STRING_SPLIT","STRING_SPLIT_REGEX","STRING_TO_ARRAY","STRIP_ACCENTS","STRLEN","STRPOS","STRPTIME","STRUCT_EXTRACT","STRUCT_INSERT","STRUCT_PACK","STR_SPLIT","STR_SPLIT_REGEX","SUBSTR","SUBSTRING","SUBSTRING_GRAPHEME","SUBTRACT","SUFFIX","SUM","SUMKAHAN","SUMMARY","SUM_NO_OVERFLOW","TABLE_INFO","TAN","TEST_ALL_TYPES","TEST_VECTOR_TYPES","TIMEZONE","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIME_BUCKET","TODAY","TO_BASE","TO_BASE64","TO_BINARY","TO_CENTURIES","TO_DAYS","TO_DECADES","TO_HEX","TO_HOURS","TO_JSON","TO_MICROSECONDS","TO_MILLENNIA","TO_MILLISECONDS","TO_MINUTES","TO_MONTHS","TO_SECONDS","TO_TIMESTAMP","TO_WEEKS","TO_YEARS","TRANSACTION_TIMESTAMP","TRANSLATE","TRIM","TRUNC","TRY_STRPTIME","TXID_CURRENT","TYPEOF","UCASE","UNBIN","UNHEX","UNICODE","UNION_EXTRACT","UNION_TAG","UNION_VALUE","UNNEST","UNPIVOT_LIST","UPPER","USER","USER_AGENT","UUID","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_TYPE","VERIFY_EXTERNAL","VERIFY_FETCH_ROW","VERIFY_PARALLELISM","VERIFY_SERIALIZER","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","WHICH_SECRET","WRITEFILE","XOR","YEAR","YEARWEEK","CAST","COALESCE","NULL","RANK","ROW_NUMBER"],uP=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ATTACH","ASYMMETRIC","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","DEFAULT","DEFERRABLE","DESC","DESCRIBE","DETACH","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FROM","GRANT","GROUP","HAVING","IN","INITIALLY","INTERSECT","INTO","LATERAL","LEADING","LIMIT","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","PIVOT","PIVOT_LONGER","PIVOT_WIDER","PLACING","PRIMARY","REFERENCES","RETURNING","SELECT","SHOW","SOME","SUMMARIZE","SYMMETRIC","TABLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","UNPIVOT","USING","VARIADIC","WHEN","WHERE","WINDOW","WITH"],fP=["ARRAY","BIGINT","BINARY","BIT","BITSTRING","BLOB","BOOL","BOOLEAN","BPCHAR","BYTEA","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE","ENUM","FLOAT","FLOAT4","FLOAT8","GUID","HUGEINT","INET","INT","INT1","INT128","INT16","INT2","INT32","INT4","INT64","INT8","INTEGER","INTEGRAL","INTERVAL","JSON","LIST","LOGICAL","LONG","MAP","NUMERIC","NVARCHAR","OID","REAL","ROW","SHORT","SIGNED","SMALLINT","STRING","STRUCT","TEXT","TIME","TIMESTAMP_MS","TIMESTAMP_NS","TIMESTAMP_S","TIMESTAMP_US","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TINYINT","UBIGINT","UHUGEINT","UINT128","UINT16","UINT32","UINT64","UINT8","UINTEGER","UNION","USMALLINT","UTINYINT","UUID","VARBINARY","VARCHAR"],SP=C(["SELECT [ALL | DISTINCT]"]),dP=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL]","HAVING","WINDOW","PARTITION BY","ORDER BY [ALL]","LIMIT","OFFSET","USING SAMPLE","QUALIFY","INSERT [OR REPLACE] INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),ec=C(["CREATE [OR REPLACE] [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),go=C(["UPDATE","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","TRUNCATE","ALTER TABLE","ADD [COLUMN] [IF NOT EXISTS]","ADD PRIMARY KEY","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","RENAME [COLUMN]","RENAME TO","SET [DATA] TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","CREATE [OR REPLACE] [TEMPORARY | TEMP] {MACRO | FUNCTION}","DROP MACRO [TABLE] [IF EXISTS]","DROP FUNCTION [IF EXISTS]","CREATE [UNIQUE] INDEX [IF NOT EXISTS]","DROP INDEX [IF EXISTS]","CREATE [OR REPLACE] SCHEMA [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","CREATE [OR REPLACE] [PERSISTENT | TEMPORARY] SECRET [IF NOT EXISTS]","DROP [PERSISTENT | TEMPORARY] SECRET [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] SEQUENCE","DROP SEQUENCE [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","DROP VIEW [IF EXISTS]","ALTER VIEW","CREATE TYPE","DROP TYPE [IF EXISTS]","ANALYZE","ATTACH [DATABASE] [IF NOT EXISTS]","DETACH [DATABASE] [IF EXISTS]","CALL","[FORCE] CHECKPOINT","COMMENT ON [TABLE | COLUMN | VIEW | INDEX | SEQUENCE | TYPE | MACRO | MACRO TABLE]","COPY [FROM DATABASE]","DESCRIBE","EXPORT DATABASE","IMPORT DATABASE","INSTALL","LOAD","PIVOT","PIVOT_WIDER","UNPIVOT","EXPLAIN [ANALYZE]","SET {LOCAL | SESSION | GLOBAL}","RESET [LOCAL | SESSION | GLOBAL]","{SET | RESET} VARIABLE","SUMMARIZE","BEGIN TRANSACTION","ROLLBACK","COMMIT","ABORT","USE","VACUUM [ANALYZE]","PREPARE","EXECUTE","DEALLOCATE [PREPARE]"]),OP=C(["UNION [ALL | BY NAME]","EXCEPT [ALL]","INTERSECT [ALL]"]),IP=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{NATURAL | ASOF} [INNER] JOIN","{NATURAL | ASOF} {LEFT | RIGHT | FULL} [OUTER] JOIN","POSITIONAL JOIN","ANTI JOIN","SEMI JOIN"]),NP=C(["{ROWS | RANGE | GROUPS} BETWEEN","SIMILAR TO","IS [NOT] DISTINCT FROM","TIMESTAMP WITH TIME ZONE"]),pP={name:"duckdb",tokenizerOptions:{reservedSelect:SP,reservedClauses:[...dP,...ec,...go],reservedSetOperations:OP,reservedJoins:IP,reservedPhrases:NP,supportsXor:!0,reservedKeywords:uP,reservedDataTypes:fP,reservedFunctionNames:RP,nestedBlockComments:!0,extraParens:["[]","{}"],stringTypes:["$$","''-qq",{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{rest:"$"},paramTypes:{positional:!0,numbered:["$"],quoted:["$"]},operators:["//","%","**","^","!","&","|","~","<<",">>","::","==","->",":",":=","=>","~~","!~~","~~*","!~~*","~~~","~","!~","~*","!~*","^@","||",">>=","<<="]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...ec,...go],tabularOnelineClauses:go}},CP=["ABS","ACOS","ASIN","ATAN","BIN","BROUND","CBRT","CEIL","CEILING","CONV","COS","DEGREES","EXP","FACTORIAL","FLOOR","GREATEST","HEX","LEAST","LN","LOG","LOG10","LOG2","NEGATIVE","PI","PMOD","POSITIVE","POW","POWER","RADIANS","RAND","ROUND","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIN","SQRT","TAN","UNHEX","WIDTH_BUCKET","ARRAY_CONTAINS","MAP_KEYS","MAP_VALUES","SIZE","SORT_ARRAY","BINARY","CAST","ADD_MONTHS","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","QUARTER","SECOND","TIMESTAMP","TO_DATE","TO_UTC_TIMESTAMP","TRUNC","UNIX_TIMESTAMP","WEEKOFYEAR","YEAR","ASSERT_TRUE","COALESCE","IF","ISNOTNULL","ISNULL","NULLIF","NVL","ASCII","BASE64","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONTEXT_NGRAMS","DECODE","ELT","ENCODE","FIELD","FIND_IN_SET","FORMAT_NUMBER","GET_JSON_OBJECT","IN_FILE","INITCAP","INSTR","LCASE","LENGTH","LEVENSHTEIN","LOCATE","LOWER","LPAD","LTRIM","NGRAMS","OCTET_LENGTH","PARSE_URL","PRINTF","QUOTE","REGEXP_EXTRACT","REGEXP_REPLACE","REPEAT","REVERSE","RPAD","RTRIM","SENTENCES","SOUNDEX","SPACE","SPLIT","STR_TO_MAP","SUBSTR","SUBSTRING","TRANSLATE","TRIM","UCASE","UNBASE64","UPPER","MASK","MASK_FIRST_N","MASK_HASH","MASK_LAST_N","MASK_SHOW_FIRST_N","MASK_SHOW_LAST_N","AES_DECRYPT","AES_ENCRYPT","CRC32","CURRENT_DATABASE","CURRENT_USER","HASH","JAVA_METHOD","LOGGED_IN_USER","MD5","REFLECT","SHA","SHA1","SHA2","SURROGATE_KEY","VERSION","AVG","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COVAR_POP","COVAR_SAMP","HISTOGRAM_NUMERIC","MAX","MIN","NTILE","PERCENTILE","PERCENTILE_APPROX","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","EXPLODE","INLINE","JSON_TUPLE","PARSE_URL_TUPLE","POSEXPLODE","STACK","LEAD","LAG","FIRST_VALUE","LAST_VALUE","RANK","ROW_NUMBER","DENSE_RANK","CUME_DIST","PERCENT_RANK","NTILE"],mP=["ADD","ADMIN","AFTER","ANALYZE","ARCHIVE","ASC","BEFORE","BUCKET","BUCKETS","CASCADE","CHANGE","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONTINUE","DATA","DATABASES","DATETIME","DAY","DBPROPERTIES","DEFERRED","DEFINED","DELIMITED","DEPENDENCY","DESC","DIRECTORIES","DIRECTORY","DISABLE","DISTRIBUTE","ELEM_TYPE","ENABLE","ESCAPED","EXCLUSIVE","EXPLAIN","EXPORT","FIELDS","FILE","FILEFORMAT","FIRST","FORMAT","FORMATTED","FUNCTIONS","HOLD_DDLTIME","HOUR","IDXPROPERTIES","IGNORE","INDEX","INDEXES","INPATH","INPUTDRIVER","INPUTFORMAT","ITEMS","JAR","KEYS","KEY_TYPE","LIMIT","LINES","LOAD","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MAPJOIN","MATERIALIZED","METADATA","MINUS","MINUTE","MONTH","MSCK","NOSCAN","NO_DROP","OFFLINE","OPTION","OUTPUTDRIVER","OUTPUTFORMAT","OVERWRITE","OWNER","PARTITIONED","PARTITIONS","PLUS","PRETTY","PRINCIPALS","PROTECTION","PURGE","READ","READONLY","REBUILD","RECORDREADER","RECORDWRITER","RELOAD","RENAME","REPAIR","REPLACE","REPLICATION","RESTRICT","REWRITE","ROLE","ROLES","SCHEMA","SCHEMAS","SECOND","SEMI","SERDE","SERDEPROPERTIES","SERVER","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","TINYINT","TOUCH","TRANSACTIONS","UNARCHIVE","UNDO","UNIONTYPE","UNLOCK","UNSET","UNSIGNED","URI","USE","UTC","UTCTIMESTAMP","VALUE_TYPE","VIEW","WHILE","YEAR","AUTOCOMMIT","ISOLATION","LEVEL","OFFSET","SNAPSHOT","TRANSACTION","WORK","WRITE","ABORT","KEY","LAST","NORELY","NOVALIDATE","NULLS","RELY","VALIDATE","DETAIL","DOW","EXPRESSION","OPERATOR","QUARTER","SUMMARY","VECTORIZATION","WEEK","YEARS","MONTHS","WEEKS","DAYS","HOURS","MINUTES","SECONDS","TIMESTAMPTZ","ZONE","ALL","ALTER","AND","AS","AUTHORIZATION","BETWEEN","BOTH","BY","CASE","CAST","COLUMN","CONF","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIMESTAMP","CURSOR","DATABASE","DELETE","DESCRIBE","DISTINCT","DROP","ELSE","END","EXCHANGE","EXISTS","EXTENDED","EXTERNAL","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","FUNCTION","GRANT","GROUP","GROUPING","HAVING","IF","IMPORT","IN","INNER","INSERT","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LESS","LIKE","LOCAL","MACRO","MORE","NONE","NOT","NULL","OF","ON","OR","ORDER","OUT","OUTER","OVER","PARTIALSCAN","PARTITION","PERCENT","PRECEDING","PRESERVE","PROCEDURE","RANGE","READS","REDUCE","REVOKE","RIGHT","ROLLUP","ROW","ROWS","SELECT","SET","TABLE","TABLESAMPLE","THEN","TO","TRANSFORM","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNION","UNIQUEJOIN","UPDATE","USER","USING","UTC_TMESTAMP","VALUES","WHEN","WHERE","WINDOW","WITH","COMMIT","ONLY","REGEXP","RLIKE","ROLLBACK","START","CACHE","CONSTRAINT","FOREIGN","PRIMARY","REFERENCES","DAYOFWEEK","EXTRACT","FLOOR","VIEWS","TIME","SYNC","TEXTFILE","SEQUENCEFILE","ORC","CSV","TSV","PARQUET","AVRO","RCFILE","JSONFILE","INPUTFORMAT","OUTPUTFORMAT"],LP=["ARRAY","BIGINT","BINARY","BOOLEAN","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MAP","NUMERIC","PRECISION","SMALLINT","STRUCT","TIMESTAMP","VARCHAR"],_P=C(["SELECT [ALL | DISTINCT]"]),gP=C(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT INTO [TABLE]","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT [VALUES]","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),tc=C(["CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS]"]),Po=C(["CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","RENAME TO","TRUNCATE [TABLE]","ALTER","CREATE","USE","DESCRIBE","DROP","FETCH","SHOW","STORED AS","STORED BY","ROW FORMAT"]),PP=C(["UNION [ALL | DISTINCT]"]),DP=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","LEFT SEMI JOIN"]),MP=C(["{ROWS | RANGE} BETWEEN"]),UP={name:"hive",tokenizerOptions:{reservedSelect:_P,reservedClauses:[...gP,...tc,...Po],reservedSetOperations:PP,reservedJoins:DP,reservedPhrases:MP,reservedKeywords:mP,reservedDataTypes:LP,reservedFunctionNames:CP,extraParens:["[]"],stringTypes:['""-bs',"''-bs"],identTypes:["``"],variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||"]},formatOptions:{onelineClauses:[...tc,...Po],tabularOnelineClauses:Po}};function wr(s){return s.map((e,t)=>{const i=s[t+1]||ti;if(_s.SET(e)&&i.text==="(")return Object.assign(Object.assign({},e),{type:g.RESERVED_FUNCTION_NAME});const n=s[t-1]||ti;return _s.VALUES(e)&&n.text==="="?Object.assign(Object.assign({},e),{type:g.RESERVED_FUNCTION_NAME}):e})}const yP=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DELETE_DOMAIN_ID","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO_DOMAIN_IDS","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_DOMAIN_IDS","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OFFSET","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PAGE_CHECKSUM","PARSE_VCOL_EXPR","PARTITION","POSITION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","RECURSIVE","REF_SYSTEM_ID","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","RETURNING","REVOKE","RIGHT","RLIKE","ROW_NUMBER","ROWS","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_AUTO_RECALC","STATS_PERSISTENT","STATS_SAMPLE_PAGES","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],xP=["BIGINT","BINARY","BIT","BLOB","CHAR BYTE","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"],bP=["ADDDATE","ADD_MONTHS","BIT_AND","BIT_OR","BIT_XOR","CAST","COUNT","CUME_DIST","CURDATE","CURTIME","DATE_ADD","DATE_SUB","DATE_FORMAT","DECODE","DENSE_RANK","EXTRACT","FIRST_VALUE","GROUP_CONCAT","JSON_ARRAYAGG","JSON_OBJECTAGG","LAG","LEAD","MAX","MEDIAN","MID","MIN","NOW","NTH_VALUE","NTILE","POSITION","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","ROW_NUMBER","SESSION_USER","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUBDATE","SUBSTR","SUBSTRING","SUM","SYSTEM_USER","TRIM","TRIM_ORACLE","VARIANCE","VAR_POP","VAR_SAMP","ABS","ACOS","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ASIN","ATAN","ATAN2","BENCHMARK","BIN","BINLOG_GTID_POS","BIT_COUNT","BIT_LENGTH","CEIL","CEILING","CHARACTER_LENGTH","CHAR_LENGTH","CHR","COERCIBILITY","COLUMN_CHECK","COLUMN_EXISTS","COLUMN_LIST","COLUMN_JSON","COMPRESS","CONCAT","CONCAT_OPERATOR_ORACLE","CONCAT_WS","CONNECTION_ID","CONV","CONVERT_TZ","COS","COT","CRC32","DATEDIFF","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEGREES","DECODE_HISTOGRAM","DECODE_ORACLE","DES_DECRYPT","DES_ENCRYPT","ELT","ENCODE","ENCRYPT","EXP","EXPORT_SET","EXTRACTVALUE","FIELD","FIND_IN_SET","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GET_LOCK","GREATEST","HEX","IFNULL","INSTR","ISNULL","IS_FREE_LOCK","IS_USED_LOCK","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_COMPACT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_DETAILED","JSON_EXISTS","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_LOOSE","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_QUERY","JSON_QUOTE","JSON_OBJECT","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_SEARCH","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAST_DAY","LAST_INSERT_ID","LCASE","LEAST","LENGTH","LENGTHB","LN","LOAD_FILE","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LPAD_ORACLE","LTRIM","LTRIM_ORACLE","MAKEDATE","MAKETIME","MAKE_SET","MASTER_GTID_WAIT","MASTER_POS_WAIT","MD5","MONTHNAME","NAME_CONST","NVL","NVL2","OCT","OCTET_LENGTH","ORD","PERIOD_ADD","PERIOD_DIFF","PI","POW","POWER","QUOTE","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","RADIANS","RAND","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPLACE_ORACLE","REVERSE","ROUND","RPAD","RPAD_ORACLE","RTRIM","RTRIM_ORACLE","SEC_TO_TIME","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SPACE","SQRT","STRCMP","STR_TO_DATE","SUBSTR_ORACLE","SUBSTRING_INDEX","SUBTIME","SYS_GUID","TAN","TIMEDIFF","TIME_FORMAT","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_SECONDS","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UUID","UUID_SHORT","VERSION","WEEKDAY","WEEKOFYEAR","WSREP_LAST_WRITTEN_GTID","WSREP_LAST_SEEN_GTID","WSREP_SYNC_WAIT_UPTO_GTID","YEARWEEK","COALESCE","NULLIF"],BP=C(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),GP=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET","RETURNING"]),sc=C(["CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS]"]),Do=C(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS]","ADD [COLUMN] [IF NOT EXISTS]","{CHANGE | MODIFY} [COLUMN] [IF EXISTS]","DROP [COLUMN] [IF EXISTS]","RENAME [TO]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","SET {VISIBLE | INVISIBLE}","TRUNCATE [TABLE]","ALTER DATABASE","ALTER DATABASE COMMENT","ALTER EVENT","ALTER FUNCTION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SCHEMA COMMENT","ALTER SEQUENCE","ALTER SERVER","ALTER USER","ALTER VIEW","ANALYZE","ANALYZE TABLE","BACKUP LOCK","BACKUP STAGE","BACKUP UNLOCK","BEGIN","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHECK TABLE","CHECK VIEW","CHECKSUM TABLE","COMMIT","CREATE AGGREGATE FUNCTION","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE INDEX","CREATE PROCEDURE","CREATE ROLE","CREATE SEQUENCE","CREATE SERVER","CREATE SPATIAL INDEX","CREATE TRIGGER","CREATE UNIQUE INDEX","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP INDEX","DROP PREPARE","DROP PROCEDURE","DROP ROLE","DROP SEQUENCE","DROP SERVER","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GET DIAGNOSTICS","GET DIAGNOSTICS CONDITION","GRANT","HANDLER","HELP","INSTALL PLUGIN","INSTALL SONAME","KILL","LOAD DATA INFILE","LOAD INDEX INTO CACHE","LOAD XML INFILE","LOCK TABLE","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","PURGE MASTER LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","REPAIR VIEW","RESET MASTER","RESET QUERY CACHE","RESET REPLICA","RESET SLAVE","RESIGNAL","REVOKE","ROLLBACK","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET GLOBAL TRANSACTION","SET NAMES","SET PASSWORD","SET ROLE","SET STATEMENT","SET TRANSACTION","SHOW","SHOW ALL REPLICAS STATUS","SHOW ALL SLAVES STATUS","SHOW AUTHORS","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW BINLOG STATUS","SHOW CHARACTER SET","SHOW CLIENT_STATISTICS","SHOW COLLATION","SHOW COLUMNS","SHOW CONTRIBUTORS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PACKAGE","SHOW CREATE PACKAGE BODY","SHOW CREATE PROCEDURE","SHOW CREATE SEQUENCE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINE INNODB STATUS","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW EXPLAIN","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW INDEXES","SHOW INDEX_STATISTICS","SHOW KEYS","SHOW LOCALES","SHOW MASTER LOGS","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PACKAGE BODY CODE","SHOW PACKAGE BODY STATUS","SHOW PACKAGE STATUS","SHOW PLUGINS","SHOW PLUGINS SONAME","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW QUERY_RESPONSE_TIME","SHOW RELAYLOG EVENTS","SHOW REPLICA","SHOW REPLICA HOSTS","SHOW REPLICA STATUS","SHOW SCHEMAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW SLAVE STATUS","SHOW STATUS","SHOW STORAGE ENGINES","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW USER_STATISTICS","SHOW VARIABLES","SHOW WARNINGS","SHOW WSREP_MEMBERSHIP","SHOW WSREP_STATUS","SHUTDOWN","SIGNAL","START ALL REPLICAS","START ALL SLAVES","START REPLICA","START SLAVE","START TRANSACTION","STOP ALL REPLICAS","STOP ALL SLAVES","STOP REPLICA","STOP SLAVE","UNINSTALL PLUGIN","UNINSTALL SONAME","UNLOCK TABLE","USE","XA BEGIN","XA COMMIT","XA END","XA PREPARE","XA RECOVER","XA ROLLBACK","XA START"]),HP=C(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]","MINUS [ALL | DISTINCT]"]),vP=C(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),wP=C(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),FP={name:"mariadb",tokenizerOptions:{reservedSelect:BP,reservedClauses:[...GP,...sc,...Do],reservedSetOperations:HP,reservedJoins:vP,reservedPhrases:wP,supportsXor:!0,reservedKeywords:yP,reservedDataTypes:xP,reservedFunctionNames:bP,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","&&","||","!","*.*"],postProcess:wr},formatOptions:{onelineClauses:[...sc,...Do],tabularOnelineClauses:Do}},YP=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],kP=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"],VP=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BINARY","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","CAN_ACCESS_COLUMN","CAN_ACCESS_DATABASE","CAN_ACCESS_TABLE","CAN_ACCESS_USER","CAN_ACCESS_VIEW","CAST","CEIL","CEILING","CHAR","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEFAULT","DEGREES","DENSE_RANK","DIV","ELT","EXP","EXPORT_SET","EXTRACT","EXTRACTVALUE","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_PICO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOMCOLLECTION","GEOMETRYCOLLECTION","GET_DD_COLUMN_PRIVILEGES","GET_DD_CREATE_OPTIONS","GET_DD_INDEX_SUB_PART_LENGTH","GET_FORMAT","GET_LOCK","GREATEST","GROUP_CONCAT","GROUPING","GTID_SUBSET","GTID_SUBTRACT","HEX","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INSERT","INSTR","INTERNAL_AUTO_INCREMENT","INTERNAL_AVG_ROW_LENGTH","INTERNAL_CHECK_TIME","INTERNAL_CHECKSUM","INTERNAL_DATA_FREE","INTERNAL_DATA_LENGTH","INTERNAL_DD_CHAR_LENGTH","INTERNAL_GET_COMMENT_OR_ERROR","INTERNAL_GET_ENABLED_ROLE_JSON","INTERNAL_GET_HOSTNAME","INTERNAL_GET_USERNAME","INTERNAL_GET_VIEW_WARNING_OR_ERROR","INTERNAL_INDEX_COLUMN_CARDINALITY","INTERNAL_INDEX_LENGTH","INTERNAL_IS_ENABLED_ROLE","INTERNAL_IS_MANDATORY_ROLE","INTERNAL_KEYS_DISABLED","INTERNAL_MAX_DATA_LENGTH","INTERNAL_TABLE_ROWS","INTERNAL_UPDATE_TIME","INTERVAL","IS","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS NOT","IS NOT NULL","IS NULL","IS_USED_LOCK","IS_UUID","ISNULL","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_ARRAYAGG","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SCHEMA_VALID","JSON_SCHEMA_VALIDATION_REPORT","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TABLE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LINESTRING","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MATCH","MAX","MBRCONTAINS","MBRCOVEREDBY","MBRCOVERS","MBRDISJOINT","MBREQUALS","MBRINTERSECTS","MBROVERLAPS","MBRTOUCHES","MBRWITHIN","MD5","MEMBER OF","MICROSECOND","MID","MIN","MINUTE","MOD","MONTH","MONTHNAME","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NAME_CONST","NOT","NOT IN","NOT LIKE","NOT REGEXP","NOW","NTH_VALUE","NTILE","NULLIF","OCT","OCTET_LENGTH","ORD","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","POINT","POLYGON","POSITION","POW","POWER","PS_CURRENT_THREAD_ID","PS_THREAD_ID","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROLES_GRAPHML","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_BUFFER","ST_BUFFER_STRATEGY","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_CONVEXHULL","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DISTANCE_SPHERE","ST_ENDPOINT","ST_ENVELOPE","ST_EQUALS","ST_EXTERIORRING","ST_FRECHETDISTANCE","ST_GEOHASH","ST_GEOMCOLLFROMTEXT","ST_GEOMCOLLFROMWKB","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMGEOJSON","ST_GEOMFROMTEXT","ST_GEOMFROMWKB","ST_HAUSDORFFDISTANCE","ST_INTERIORRINGN","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISSIMPLE","ST_ISVALID","ST_LATFROMGEOHASH","ST_LATITUDE","ST_LENGTH","ST_LINEFROMTEXT","ST_LINEFROMWKB","ST_LINEINTERPOLATEPOINT","ST_LINEINTERPOLATEPOINTS","ST_LONGFROMGEOHASH","ST_LONGITUDE","ST_MAKEENVELOPE","ST_MLINEFROMTEXT","ST_MLINEFROMWKB","ST_MPOINTFROMTEXT","ST_MPOINTFROMWKB","ST_MPOLYFROMTEXT","ST_MPOLYFROMWKB","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINTATDISTANCE","ST_POINTFROMGEOHASH","ST_POINTFROMTEXT","ST_POINTFROMWKB","ST_POINTN","ST_POLYFROMTEXT","ST_POLYFROMWKB","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SWAPXY","ST_SYMDIFFERENCE","ST_TOUCHES","ST_TRANSFORM","ST_UNION","ST_VALIDATE","ST_WITHIN","ST_X","ST_Y","STATEMENT_DIGEST","STATEMENT_DIGEST_TEXT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRIM","TRUNCATE","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VALUES","VAR_POP","VAR_SAMP","VARIANCE","VERSION","WAIT_FOR_EXECUTED_GTID_SET","WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"],WP=C(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),XP=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),ic=C(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Mo=C(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER EVENT","ALTER FUNCTION","ALTER INSTANCE","ALTER LOGFILE GROUP","ALTER PROCEDURE","ALTER RESOURCE GROUP","ALTER SERVER","ALTER TABLESPACE","ALTER USER","ALTER VIEW","ANALYZE TABLE","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK TABLE","CHECKSUM TABLE","CLONE","COMMIT","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE FUNCTION","CREATE INDEX","CREATE LOGFILE GROUP","CREATE PROCEDURE","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SERVER","CREATE SPATIAL REFERENCE SYSTEM","CREATE TABLESPACE","CREATE TRIGGER","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP FUNCTION","DROP INDEX","DROP LOGFILE GROUP","DROP PROCEDURE","DROP RESOURCE GROUP","DROP ROLE","DROP SERVER","DROP SPATIAL REFERENCE SYSTEM","DROP TABLESPACE","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GRANT","HANDLER","HELP","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SOURCE_POS_WAIT","START GROUP_REPLICATION","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP REPLICA","STOP SLAVE","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),KP=C(["UNION [ALL | DISTINCT]"]),$P=C(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),JP=C(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),jP={name:"mysql",tokenizerOptions:{reservedSelect:WP,reservedClauses:[...XP,...ic,...Mo],reservedSetOperations:KP,reservedJoins:$P,reservedPhrases:JP,supportsXor:!0,reservedKeywords:YP,reservedDataTypes:kP,reservedFunctionNames:VP,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:wr},formatOptions:{onelineClauses:[...ic,...Mo],tabularOnelineClauses:Mo}},QP=["ADD","ALL","ALTER","ANALYZE","AND","ARRAY","AS","ASC","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERATED","GRANT","GROUP","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","ILIKE","IN","INDEX","INFILE","INNER","INOUT","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOW_PRIORITY","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OF","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PRIMARY","PROCEDURE","RANGE","READ","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","REVOKE","RIGHT","RLIKE","ROW","ROWS","SECOND_MICROSECOND","SELECT","SET","SHOW","SPATIAL","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_EXTENDED","STORED","STRAIGHT_JOIN","TABLE","TABLESAMPLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","TiDB_CURRENT_TSO","UNION","UNIQUE","UNLOCK","UNSIGNED","UNTIL","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],qP=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"],zP=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","BITAND","BITNEG","BITOR","BITXOR","CASE","CAST","CEIL","CEILING","CHAR_FUNC","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_RESOURCE_GROUP","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT_FUNC","DEGREES","DENSE_RANK","DES_DECRYPT","DES_ENCRYPT","DIV","ELT","ENCODE","ENCRYPT","EQ","EXP","EXPORT_SET","EXTRACT","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_NANO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GE","GET_FORMAT","GET_LOCK","GETPARAM","GREATEST","GROUP_CONCAT","GROUPING","GT","HEX","HOUR","IF","IFNULL","ILIKE","INET6_ATON","INET6_NTOA","INET_ATON","INET_NTOA","INSERT_FUNC","INSTR","INTDIV","INTERVAL","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS_USED_LOCK","IS_UUID","ISFALSE","ISNULL","ISTRUE","JSON_ARRAY","JSON_ARRAYAGG","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MEMBEROF","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LASTVAL","LCASE","LE","LEAD","LEAST","LEFT","LEFTSHIFT","LENGTH","LIKE","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LT","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MAX","MD5","MICROSECOND","MID","MIN","MINUS","MINUTE","MOD","MONTH","MONTHNAME","MUL","NAME_CONST","NE","NEXTVAL","NOT","NOW","NTH_VALUE","NTILE","NULLEQ","OCT","OCTET_LENGTH","OLD_PASSWORD","ORD","PASSWORD_FUNC","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","PLUS","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RIGHTSHIFT","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SETVAL","SETVAR","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SM3","SPACE","SQRT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIDB_BOUNDED_STALENESS","TIDB_CURRENT_TSO","TIDB_DECODE_BINARY_PLAN","TIDB_DECODE_KEY","TIDB_DECODE_PLAN","TIDB_DECODE_SQL_DIGESTS","TIDB_ENCODE_SQL_DIGEST","TIDB_IS_DDL_OWNER","TIDB_PARSE_TSO","TIDB_PARSE_TSO_LOGICAL","TIDB_ROW_CHECKSUM","TIDB_SHARD","TIDB_VERSION","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRANSLATE","TRIM","TRUNCATE","UCASE","UNARYMINUS","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VAR_POP","VAR_SAMP","VARIANCE","VERSION","VITESS_HASH","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"],ZP=C(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),eD=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),nc=C(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Uo=C(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER INSTANCE","ALTER RESOURCE GROUP","ALTER SEQUENCE","ALTER USER","ALTER VIEW","ANALYZE TABLE","CHECK TABLE","CHECKSUM TABLE","COMMIT","CREATE DATABASE","CREATE INDEX","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SEQUENCE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP INDEX","DROP RESOURCE GROUP","DROP ROLE","DROP TABLESPACE","DROP USER","DROP VIEW","EXPLAIN","FLUSH","GRANT","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOCK INSTANCE FOR BACKUP","LOCK TABLES","OPTIMIZE TABLE","PREPARE","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE"]),tD=C(["UNION [ALL | DISTINCT]"]),sD=C(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),iD=C(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),nD={name:"tidb",tokenizerOptions:{reservedSelect:ZP,reservedClauses:[...eD,...nc,...Uo],reservedSetOperations:tD,reservedJoins:sD,reservedPhrases:iD,supportsXor:!0,reservedKeywords:QP,reservedDataTypes:qP,reservedFunctionNames:zP,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:wr},formatOptions:{onelineClauses:[...nc,...Uo],tabularOnelineClauses:Uo}},rD=["ABORT","ABS","ACOS","ADVISOR","ARRAY_AGG","ARRAY_AGG","ARRAY_APPEND","ARRAY_AVG","ARRAY_BINARY_SEARCH","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COUNT","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_FLATTEN","ARRAY_IFNULL","ARRAY_INSERT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_MAX","ARRAY_MIN","ARRAY_MOVE","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUT","ARRAY_RANGE","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_REPLACE","ARRAY_REVERSE","ARRAY_SORT","ARRAY_STAR","ARRAY_SUM","ARRAY_SYMDIFF","ARRAY_SYMDIFF1","ARRAY_SYMDIFFN","ARRAY_UNION","ASIN","ATAN","ATAN2","AVG","BASE64","BASE64_DECODE","BASE64_ENCODE","BITAND ","BITCLEAR ","BITNOT ","BITOR ","BITSET ","BITSHIFT ","BITTEST ","BITXOR ","CEIL","CLOCK_LOCAL","CLOCK_MILLIS","CLOCK_STR","CLOCK_TZ","CLOCK_UTC","COALESCE","CONCAT","CONCAT2","CONTAINS","CONTAINS_TOKEN","CONTAINS_TOKEN_LIKE","CONTAINS_TOKEN_REGEXP","COS","COUNT","COUNT","COUNTN","CUME_DIST","CURL","DATE_ADD_MILLIS","DATE_ADD_STR","DATE_DIFF_MILLIS","DATE_DIFF_STR","DATE_FORMAT_STR","DATE_PART_MILLIS","DATE_PART_STR","DATE_RANGE_MILLIS","DATE_RANGE_STR","DATE_TRUNC_MILLIS","DATE_TRUNC_STR","DECODE","DECODE_JSON","DEGREES","DENSE_RANK","DURATION_TO_STR","ENCODED_SIZE","ENCODE_JSON","EXP","FIRST_VALUE","FLOOR","GREATEST","HAS_TOKEN","IFINF","IFMISSING","IFMISSINGORNULL","IFNAN","IFNANORINF","IFNULL","INITCAP","ISARRAY","ISATOM","ISBITSET","ISBOOLEAN","ISNUMBER","ISOBJECT","ISSTRING","LAG","LAST_VALUE","LEAD","LEAST","LENGTH","LN","LOG","LOWER","LTRIM","MAX","MEAN","MEDIAN","META","MILLIS","MILLIS_TO_LOCAL","MILLIS_TO_STR","MILLIS_TO_TZ","MILLIS_TO_UTC","MILLIS_TO_ZONE_NAME","MIN","MISSINGIF","NANIF","NEGINFIF","NOW_LOCAL","NOW_MILLIS","NOW_STR","NOW_TZ","NOW_UTC","NTH_VALUE","NTILE","NULLIF","NVL","NVL2","OBJECT_ADD","OBJECT_CONCAT","OBJECT_INNER_PAIRS","OBJECT_INNER_VALUES","OBJECT_LENGTH","OBJECT_NAMES","OBJECT_PAIRS","OBJECT_PUT","OBJECT_REMOVE","OBJECT_RENAME","OBJECT_REPLACE","OBJECT_UNWRAP","OBJECT_VALUES","PAIRS","PERCENT_RANK","PI","POLY_LENGTH","POSINFIF","POSITION","POWER","RADIANS","RANDOM","RANK","RATIO_TO_REPORT","REGEXP_CONTAINS","REGEXP_LIKE","REGEXP_MATCHES","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGEX_CONTAINS","REGEX_LIKE","REGEX_MATCHES","REGEX_POSITION","REGEX_REPLACE","REGEX_SPLIT","REPEAT","REPLACE","REVERSE","ROUND","ROW_NUMBER","RTRIM","SEARCH","SEARCH_META","SEARCH_SCORE","SIGN","SIN","SPLIT","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DURATION","STR_TO_MILLIS","STR_TO_TZ","STR_TO_UTC","STR_TO_ZONE_NAME","SUBSTR","SUFFIXES","SUM","TAN","TITLE","TOARRAY","TOATOM","TOBOOLEAN","TOKENS","TOKENS","TONUMBER","TOOBJECT","TOSTRING","TRIM","TRUNC","UPPER","UUID","VARIANCE","VARIANCE_POP","VARIANCE_SAMP","VAR_POP","VAR_SAMP","WEEKDAY_MILLIS","WEEKDAY_STR","CAST"],oD=["ADVISE","ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","AT","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","COMMITTED","CONNECT","CONTINUE","CORRELATED","COVER","CREATE","CURRENT","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FILTER","FIRST","FLATTEN","FLUSH","FOLLOWING","FOR","FORCE","FROM","FTS","FUNCTION","GOLANG","GRANT","GROUP","GROUPS","GSI","HASH","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","ISOLATION","JAVASCRIPT","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LANGUAGE","LAST","LEFT","LET","LETTING","LEVEL","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NL","NO","NOT","NTH_VALUE","NULL","NULLS","NUMBER","OBJECT","OFFSET","ON","OPTION","OPTIONS","OR","ORDER","OTHERS","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PRECEDING","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROBE","PROCEDURE","PUBLIC","RANGE","RAW","REALM","REDUCE","RENAME","RESPECT","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","ROW","ROWS","SATISFIES","SAVEPOINT","SCHEMA","SCOPE","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TIES","TO","TRAN","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WORK","XOR"],lD=[],aD=C(["SELECT [ALL | DISTINCT]"]),ED=C(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED THEN","UPDATE SET","INSERT","NEST","UNNEST","RETURNING"]),rc=C(["UPDATE","DELETE FROM","SET SCHEMA","ADVISE","ALTER INDEX","BEGIN TRANSACTION","BUILD INDEX","COMMIT TRANSACTION","CREATE COLLECTION","CREATE FUNCTION","CREATE INDEX","CREATE PRIMARY INDEX","CREATE SCOPE","DROP COLLECTION","DROP FUNCTION","DROP INDEX","DROP PRIMARY INDEX","DROP SCOPE","EXECUTE","EXECUTE FUNCTION","EXPLAIN","GRANT","INFER","PREPARE","REVOKE","ROLLBACK TRANSACTION","SAVEPOINT","SET TRANSACTION","UPDATE STATISTICS","UPSERT","LET","SET CURRENT SCHEMA","SHOW","USE [PRIMARY] KEYS"]),TD=C(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),cD=C(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","INNER JOIN"]),hD=C(["{ROWS | RANGE | GROUPS} BETWEEN"]),AD={name:"n1ql",tokenizerOptions:{reservedSelect:aD,reservedClauses:[...ED,...rc],reservedSetOperations:TD,reservedJoins:cD,reservedPhrases:hD,supportsXor:!0,reservedKeywords:oD,reservedDataTypes:lD,reservedFunctionNames:rD,stringTypes:['""-bs',"''-bs"],identTypes:["``"],extraParens:["[]","{}"],paramTypes:{positional:!0,numbered:["$"],named:["$"]},lineCommentTypes:["#","--"],operators:["%","==",":","||"]},formatOptions:{onelineClauses:rc}},RD=["ADD","AGENT","AGGREGATE","ALL","ALTER","AND","ANY","ARROW","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BEGIN","BETWEEN","BLOCK","BODY","BOTH","BOUND","BULK","BY","BYTE","CALL","CALLING","CASCADE","CASE","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOSE","CLUSTER","CLUSTERS","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONVERT","COUNT","CRASH","CREATE","CURRENT","CURSOR","CUSTOMDATUM","DANGLING","DATA","DAY","DECLARE","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DISTINCT","DROP","DURATION","ELEMENT","ELSE","ELSIF","EMPTY","END","ESCAPE","EXCEPT","EXCEPTION","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FINAL","FIXED","FOR","FORALL","FORCE","FORM","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HAVING","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSERT","INSTANTIABLE","INTERFACE","INTERSECT","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LIMITED","LOCAL","LOCK","LOOP","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MOD","MODE","MODIFY","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NEW","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","OR","ORACLE","ORADATA","ORDER","OVERLAPS","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARTITION","PASCAL","PIPE","PIPELINED","PRAGMA","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","READ","RECORD","REF","REFERENCE","REM","REMAINDER","RENAME","RESOURCE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELECT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SET","SHARE","SHORT","SIZE","SIZE_T","SOME","SPARSE","SQL","SQLCODE","SQLDATA","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUM","SYNONYM","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSAC","TRANSACTIONAL","TRUSTED","TYPE","UB1","UB2","UB4","UNDER","UNION","UNIQUE","UNSIGNED","UNTRUSTED","UPDATE","USE","USING","VALIST","VALUE","VALUES","VARIABLE","VARIANCE","VARRAY","VIEW","VIEWS","VOID","WHEN","WHERE","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],uD=["ARRAY","BFILE_BASE","BINARY","BLOB_BASE","CHAR VARYING","CHAR_BASE","CHAR","CHARACTER VARYING","CHARACTER","CLOB_BASE","DATE_BASE","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTERVAL DAY","INTERVAL YEAR","LONG","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR VARYING","NCHAR","NCHAR","NUMBER_BASE","NUMBER","NUMBERIC","NVARCHAR","PRECISION","RAW","TIMESTAMP","UROWID","VARCHAR","VARCHAR2"],fD=["ABS","ACOS","ASIN","ATAN","ATAN2","BITAND","CEIL","COS","COSH","EXP","FLOOR","LN","LOG","MOD","NANVL","POWER","REMAINDER","ROUND","SIGN","SIN","SINH","SQRT","TAN","TANH","TRUNC","WIDTH_BUCKET","CHR","CONCAT","INITCAP","LOWER","LPAD","LTRIM","NLS_INITCAP","NLS_LOWER","NLSSORT","NLS_UPPER","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","RPAD","RTRIM","SOUNDEX","SUBSTR","TRANSLATE","TREAT","TRIM","UPPER","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","ASCII","INSTR","LENGTH","REGEXP_INSTR","ADD_MONTHS","CURRENT_DATE","CURRENT_TIMESTAMP","DBTIMEZONE","EXTRACT","FROM_TZ","LAST_DAY","LOCALTIMESTAMP","MONTHS_BETWEEN","NEW_TIME","NEXT_DAY","NUMTODSINTERVAL","NUMTOYMINTERVAL","ROUND","SESSIONTIMEZONE","SYS_EXTRACT_UTC","SYSDATE","SYSTIMESTAMP","TO_CHAR","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_DSINTERVAL","TO_YMINTERVAL","TRUNC","TZ_OFFSET","GREATEST","LEAST","ASCIISTR","BIN_TO_NUM","CAST","CHARTOROWID","COMPOSE","CONVERT","DECOMPOSE","HEXTORAW","NUMTODSINTERVAL","NUMTOYMINTERVAL","RAWTOHEX","RAWTONHEX","ROWIDTOCHAR","ROWIDTONCHAR","SCN_TO_TIMESTAMP","TIMESTAMP_TO_SCN","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_DSINTERVAL","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_YMINTERVAL","TO_YMINTERVAL","TRANSLATE","UNISTR","BFILENAME","EMPTY_BLOB,","EMPTY_CLOB","CARDINALITY","COLLECT","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","SET","SYS_CONNECT_BY_PATH","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","PREDICTION","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","APPENDCHILDXML","DELETEXML","DEPTH","EXTRACT","EXISTSNODE","EXTRACTVALUE","INSERTCHILDXML","INSERTXMLBEFORE","PATH","SYS_DBURIGEN","SYS_XMLAGG","SYS_XMLGEN","UPDATEXML","XMLAGG","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLFOREST","XMLPARSE","XMLPI","XMLQUERY","XMLROOT","XMLSEQUENCE","XMLSERIALIZE","XMLTABLE","XMLTRANSFORM","DECODE","DUMP","ORA_HASH","VSIZE","COALESCE","LNNVL","NULLIF","NVL","NVL2","SYS_CONTEXT","SYS_GUID","SYS_TYPEID","UID","USER","USERENV","AVG","COLLECT","CORR","CORR_S","CORR_K","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","FIRST","GROUP_ID","GROUPING","GROUPING_ID","LAST","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANK","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTILE","RATIO_TO_REPORT","ROW_NUMBER","DEREF","MAKE_REF","REF","REFTOHEX","VALUE","CV","ITERATION_NUMBER","PRESENTNNV","PRESENTV","PREVIOUS"],SD=C(["SELECT [ALL | DISTINCT | UNIQUE]"]),dD=C(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","INSERT [INTO | ALL INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [THEN]","UPDATE SET","RETURNING"]),oc=C(["CREATE [GLOBAL TEMPORARY | PRIVATE TEMPORARY | SHARDED | DUPLICATED | IMMUTABLE BLOCKCHAIN | BLOCKCHAIN | IMMUTABLE] TABLE"]),yo=C(["CREATE [OR REPLACE] [NO FORCE | FORCE] [EDITIONING | EDITIONABLE | EDITIONABLE EDITIONING | NONEDITIONABLE] VIEW","CREATE MATERIALIZED VIEW","UPDATE [ONLY]","DELETE FROM [ONLY]","DROP TABLE","ALTER TABLE","ADD","DROP {COLUMN | UNUSED COLUMNS | COLUMNS CONTINUE}","MODIFY","RENAME TO","RENAME COLUMN","TRUNCATE TABLE","SET SCHEMA","BEGIN","CONNECT BY","DECLARE","EXCEPT","EXCEPTION","LOOP","START WITH"]),OD=C(["UNION [ALL]","MINUS","INTERSECT"]),ID=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | OUTER} APPLY"]),ND=C(["ON {UPDATE | DELETE} [SET NULL]","ON COMMIT","{ROWS | RANGE} BETWEEN"]),pD={name:"plsql",tokenizerOptions:{reservedSelect:SD,reservedClauses:[...dD,...oc,...yo],reservedSetOperations:OD,reservedJoins:ID,reservedPhrases:ND,supportsXor:!0,reservedKeywords:RD,reservedDataTypes:uD,reservedFunctionNames:fD,stringTypes:[{quote:"''-qq",prefixes:["N"]},{quote:"q''",prefixes:["N"]}],identTypes:['""-qq'],identChars:{rest:"$#"},variableTypes:[{regex:"&{1,2}[A-Za-z][A-Za-z0-9_$#]*"}],paramTypes:{numbered:[":"],named:[":"]},operators:["**",":=","%","~=","^=",">>","<<","=>","@","||"],postProcess:CD},formatOptions:{alwaysDenseOperators:["@"],onelineClauses:[...oc,...yo],tabularOnelineClauses:yo}};function CD(s){let e=ti;return s.map(t=>_s.SET(t)&&_s.BY(e)?Object.assign(Object.assign({},t),{type:g.RESERVED_KEYWORD}):(Vu(t.type)&&(e=t),t))}const mD=["ABS","ACOS","ACOSD","ACOSH","ASIN","ASIND","ASINH","ATAN","ATAN2","ATAN2D","ATAND","ATANH","CBRT","CEIL","CEILING","COS","COSD","COSH","COT","COTD","DEGREES","DIV","EXP","FACTORIAL","FLOOR","GCD","LCM","LN","LOG","LOG10","MIN_SCALE","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SCALE","SETSEED","SIGN","SIN","SIND","SINH","SQRT","TAN","TAND","TANH","TRIM_SCALE","TRUNC","WIDTH_BUCKET","ABS","ASCII","BIT_LENGTH","BTRIM","CHARACTER_LENGTH","CHAR_LENGTH","CHR","CONCAT","CONCAT_WS","FORMAT","INITCAP","LEFT","LENGTH","LOWER","LPAD","LTRIM","MD5","NORMALIZE","OCTET_LENGTH","OVERLAY","PARSE_IDENT","PG_CLIENT_ENCODING","POSITION","QUOTE_IDENT","QUOTE_LITERAL","QUOTE_NULLABLE","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REPEAT","REPLACE","REVERSE","RIGHT","RPAD","RTRIM","SPLIT_PART","SPRINTF","STARTS_WITH","STRING_AGG","STRING_TO_ARRAY","STRING_TO_TABLE","STRPOS","SUBSTR","SUBSTRING","TO_ASCII","TO_HEX","TRANSLATE","TRIM","UNISTR","UPPER","BIT_COUNT","BIT_LENGTH","BTRIM","CONVERT","CONVERT_FROM","CONVERT_TO","DECODE","ENCODE","GET_BIT","GET_BYTE","LENGTH","LTRIM","MD5","OCTET_LENGTH","OVERLAY","POSITION","RTRIM","SET_BIT","SET_BYTE","SHA224","SHA256","SHA384","SHA512","STRING_AGG","SUBSTR","SUBSTRING","TRIM","BIT_COUNT","BIT_LENGTH","GET_BIT","LENGTH","OCTET_LENGTH","OVERLAY","POSITION","SET_BIT","SUBSTRING","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","TO_CHAR","TO_DATE","TO_NUMBER","TO_TIMESTAMP","CLOCK_TIMESTAMP","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_BIN","DATE_PART","DATE_TRUNC","EXTRACT","ISFINITE","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","LOCALTIME","LOCALTIMESTAMP","MAKE_DATE","MAKE_INTERVAL","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","NOW","PG_SLEEP","PG_SLEEP_FOR","PG_SLEEP_UNTIL","STATEMENT_TIMESTAMP","TIMEOFDAY","TO_TIMESTAMP","TRANSACTION_TIMESTAMP","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","AREA","BOUND_BOX","BOX","CENTER","CIRCLE","DIAGONAL","DIAMETER","HEIGHT","ISCLOSED","ISOPEN","LENGTH","LINE","LSEG","NPOINTS","PATH","PCLOSE","POINT","POLYGON","POPEN","RADIUS","SLOPE","WIDTH","ABBREV","BROADCAST","FAMILY","HOST","HOSTMASK","INET_MERGE","INET_SAME_FAMILY","MACADDR8_SET7BIT","MASKLEN","NETMASK","NETWORK","SET_MASKLEN","TRUNC","ARRAY_TO_TSVECTOR","GET_CURRENT_TS_CONFIG","JSONB_TO_TSVECTOR","JSON_TO_TSVECTOR","LENGTH","NUMNODE","PHRASETO_TSQUERY","PLAINTO_TSQUERY","QUERYTREE","SETWEIGHT","STRIP","TO_TSQUERY","TO_TSVECTOR","TSQUERY_PHRASE","TSVECTOR_TO_ARRAY","TS_DEBUG","TS_DELETE","TS_FILTER","TS_HEADLINE","TS_LEXIZE","TS_PARSE","TS_RANK","TS_RANK_CD","TS_REWRITE","TS_STAT","TS_TOKEN_TYPE","WEBSEARCH_TO_TSQUERY","UUID","CURSOR_TO_XML","CURSOR_TO_XMLSCHEMA","DATABASE_TO_XML","DATABASE_TO_XMLSCHEMA","DATABASE_TO_XML_AND_XMLSCHEMA","NEXTVAL","QUERY_TO_XML","QUERY_TO_XMLSCHEMA","QUERY_TO_XML_AND_XMLSCHEMA","SCHEMA_TO_XML","SCHEMA_TO_XMLSCHEMA","SCHEMA_TO_XML_AND_XMLSCHEMA","STRING","TABLE_TO_XML","TABLE_TO_XMLSCHEMA","TABLE_TO_XML_AND_XMLSCHEMA","XMLAGG","XMLCOMMENT","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","XML_IS_WELL_FORMED","XML_IS_WELL_FORMED_CONTENT","XML_IS_WELL_FORMED_DOCUMENT","XPATH","XPATH_EXISTS","ARRAY_TO_JSON","JSONB_AGG","JSONB_ARRAY_ELEMENTS","JSONB_ARRAY_ELEMENTS_TEXT","JSONB_ARRAY_LENGTH","JSONB_BUILD_ARRAY","JSONB_BUILD_OBJECT","JSONB_EACH","JSONB_EACH_TEXT","JSONB_EXTRACT_PATH","JSONB_EXTRACT_PATH_TEXT","JSONB_INSERT","JSONB_OBJECT","JSONB_OBJECT_AGG","JSONB_OBJECT_KEYS","JSONB_PATH_EXISTS","JSONB_PATH_EXISTS_TZ","JSONB_PATH_MATCH","JSONB_PATH_MATCH_TZ","JSONB_PATH_QUERY","JSONB_PATH_QUERY_ARRAY","JSONB_PATH_QUERY_ARRAY_TZ","JSONB_PATH_QUERY_FIRST","JSONB_PATH_QUERY_FIRST_TZ","JSONB_PATH_QUERY_TZ","JSONB_POPULATE_RECORD","JSONB_POPULATE_RECORDSET","JSONB_PRETTY","JSONB_SET","JSONB_SET_LAX","JSONB_STRIP_NULLS","JSONB_TO_RECORD","JSONB_TO_RECORDSET","JSONB_TYPEOF","JSON_AGG","JSON_ARRAY_ELEMENTS","JSON_ARRAY_ELEMENTS_TEXT","JSON_ARRAY_LENGTH","JSON_BUILD_ARRAY","JSON_BUILD_OBJECT","JSON_EACH","JSON_EACH_TEXT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_OBJECT","JSON_OBJECT_AGG","JSON_OBJECT_KEYS","JSON_POPULATE_RECORD","JSON_POPULATE_RECORDSET","JSON_STRIP_NULLS","JSON_TO_RECORD","JSON_TO_RECORDSET","JSON_TYPEOF","ROW_TO_JSON","TO_JSON","TO_JSONB","TO_TIMESTAMP","CURRVAL","LASTVAL","NEXTVAL","SETVAL","COALESCE","GREATEST","LEAST","NULLIF","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_DIMS","ARRAY_FILL","ARRAY_LENGTH","ARRAY_LOWER","ARRAY_NDIMS","ARRAY_POSITION","ARRAY_POSITIONS","ARRAY_PREPEND","ARRAY_REMOVE","ARRAY_REPLACE","ARRAY_TO_STRING","ARRAY_UPPER","CARDINALITY","STRING_TO_ARRAY","TRIM_ARRAY","UNNEST","ISEMPTY","LOWER","LOWER_INC","LOWER_INF","MULTIRANGE","RANGE_MERGE","UPPER","UPPER_INC","UPPER_INF","ARRAY_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COALESCE","CORR","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","EVERY","GROUPING","JSONB_AGG","JSONB_OBJECT_AGG","JSON_AGG","JSON_OBJECT_AGG","MAX","MIN","MODE","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANGE_AGG","RANGE_INTERSECT_AGG","RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","TO_JSON","TO_JSONB","VARIANCE","VAR_POP","VAR_SAMP","XMLAGG","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","GENERATE_SERIES","GENERATE_SUBSCRIPTS","ACLDEFAULT","ACLEXPLODE","COL_DESCRIPTION","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","FORMAT_TYPE","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HAS_TYPE_PRIVILEGE","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","MAKEACLITEM","OBJ_DESCRIPTION","PG_BACKEND_PID","PG_BLOCKING_PIDS","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONTROL_CHECKPOINT","PG_CONTROL_INIT","PG_CONTROL_SYSTEM","PG_CONVERSION_IS_VISIBLE","PG_CURRENT_LOGFILE","PG_CURRENT_SNAPSHOT","PG_CURRENT_XACT_ID","PG_CURRENT_XACT_ID_IF_ASSIGNED","PG_DESCRIBE_OBJECT","PG_FUNCTION_IS_VISIBLE","PG_GET_CATALOG_FOREIGN_KEYS","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_FUNCTIONDEF","PG_GET_FUNCTION_ARGUMENTS","PG_GET_FUNCTION_IDENTITY_ARGUMENTS","PG_GET_FUNCTION_RESULT","PG_GET_INDEXDEF","PG_GET_KEYWORDS","PG_GET_OBJECT_ADDRESS","PG_GET_OWNED_SEQUENCE","PG_GET_RULEDEF","PG_GET_SERIAL_SEQUENCE","PG_GET_STATISTICSOBJDEF","PG_GET_TRIGGERDEF","PG_GET_USERBYID","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IDENTIFY_OBJECT","PG_IDENTIFY_OBJECT_AS_ADDRESS","PG_INDEXAM_HAS_PROPERTY","PG_INDEX_COLUMN_HAS_PROPERTY","PG_INDEX_HAS_PROPERTY","PG_IS_OTHER_TEMP_SCHEMA","PG_JIT_AVAILABLE","PG_LAST_COMMITTED_XACT","PG_LISTENING_CHANNELS","PG_MY_TEMP_SCHEMA","PG_NOTIFICATION_QUEUE_USAGE","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_OPTIONS_TO_TABLE","PG_POSTMASTER_START_TIME","PG_SAFE_SNAPSHOT_BLOCKING_PIDS","PG_SNAPSHOT_XIP","PG_SNAPSHOT_XMAX","PG_SNAPSHOT_XMIN","PG_STATISTICS_OBJ_IS_VISIBLE","PG_TABLESPACE_DATABASES","PG_TABLESPACE_LOCATION","PG_TABLE_IS_VISIBLE","PG_TRIGGER_DEPTH","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PG_VISIBLE_IN_SNAPSHOT","PG_XACT_COMMIT_TIMESTAMP","PG_XACT_COMMIT_TIMESTAMP_ORIGIN","PG_XACT_STATUS","PQSERVERVERSION","ROW_SECURITY_ACTIVE","SESSION_USER","SHOBJ_DESCRIPTION","TO_REGCLASS","TO_REGCOLLATION","TO_REGNAMESPACE","TO_REGOPER","TO_REGOPERATOR","TO_REGPROC","TO_REGPROCEDURE","TO_REGROLE","TO_REGTYPE","TXID_CURRENT","TXID_CURRENT_IF_ASSIGNED","TXID_CURRENT_SNAPSHOT","TXID_SNAPSHOT_XIP","TXID_SNAPSHOT_XMAX","TXID_SNAPSHOT_XMIN","TXID_STATUS","TXID_VISIBLE_IN_SNAPSHOT","USER","VERSION","BRIN_DESUMMARIZE_RANGE","BRIN_SUMMARIZE_NEW_VALUES","BRIN_SUMMARIZE_RANGE","CONVERT_FROM","CURRENT_SETTING","GIN_CLEAN_PENDING_LIST","PG_ADVISORY_LOCK","PG_ADVISORY_LOCK_SHARED","PG_ADVISORY_UNLOCK","PG_ADVISORY_UNLOCK_ALL","PG_ADVISORY_UNLOCK_SHARED","PG_ADVISORY_XACT_LOCK","PG_ADVISORY_XACT_LOCK_SHARED","PG_BACKUP_START_TIME","PG_CANCEL_BACKEND","PG_COLLATION_ACTUAL_VERSION","PG_COLUMN_COMPRESSION","PG_COLUMN_SIZE","PG_COPY_LOGICAL_REPLICATION_SLOT","PG_COPY_PHYSICAL_REPLICATION_SLOT","PG_CREATE_LOGICAL_REPLICATION_SLOT","PG_CREATE_PHYSICAL_REPLICATION_SLOT","PG_CREATE_RESTORE_POINT","PG_CURRENT_WAL_FLUSH_LSN","PG_CURRENT_WAL_INSERT_LSN","PG_CURRENT_WAL_LSN","PG_DATABASE_SIZE","PG_DROP_REPLICATION_SLOT","PG_EXPORT_SNAPSHOT","PG_FILENODE_RELATION","PG_GET_WAL_REPLAY_PAUSE_STATE","PG_IMPORT_SYSTEM_COLLATIONS","PG_INDEXES_SIZE","PG_IS_IN_BACKUP","PG_IS_IN_RECOVERY","PG_IS_WAL_REPLAY_PAUSED","PG_LAST_WAL_RECEIVE_LSN","PG_LAST_WAL_REPLAY_LSN","PG_LAST_XACT_REPLAY_TIMESTAMP","PG_LOGICAL_EMIT_MESSAGE","PG_LOGICAL_SLOT_GET_BINARY_CHANGES","PG_LOGICAL_SLOT_GET_CHANGES","PG_LOGICAL_SLOT_PEEK_BINARY_CHANGES","PG_LOGICAL_SLOT_PEEK_CHANGES","PG_LOG_BACKEND_MEMORY_CONTEXTS","PG_LS_ARCHIVE_STATUSDIR","PG_LS_DIR","PG_LS_LOGDIR","PG_LS_TMPDIR","PG_LS_WALDIR","PG_PARTITION_ANCESTORS","PG_PARTITION_ROOT","PG_PARTITION_TREE","PG_PROMOTE","PG_READ_BINARY_FILE","PG_READ_FILE","PG_RELATION_FILENODE","PG_RELATION_FILEPATH","PG_RELATION_SIZE","PG_RELOAD_CONF","PG_REPLICATION_ORIGIN_ADVANCE","PG_REPLICATION_ORIGIN_CREATE","PG_REPLICATION_ORIGIN_DROP","PG_REPLICATION_ORIGIN_OID","PG_REPLICATION_ORIGIN_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_IS_SETUP","PG_REPLICATION_ORIGIN_SESSION_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_RESET","PG_REPLICATION_ORIGIN_SESSION_SETUP","PG_REPLICATION_ORIGIN_XACT_RESET","PG_REPLICATION_ORIGIN_XACT_SETUP","PG_REPLICATION_SLOT_ADVANCE","PG_ROTATE_LOGFILE","PG_SIZE_BYTES","PG_SIZE_PRETTY","PG_START_BACKUP","PG_STAT_FILE","PG_STOP_BACKUP","PG_SWITCH_WAL","PG_TABLESPACE_SIZE","PG_TABLE_SIZE","PG_TERMINATE_BACKEND","PG_TOTAL_RELATION_SIZE","PG_TRY_ADVISORY_LOCK","PG_TRY_ADVISORY_LOCK_SHARED","PG_TRY_ADVISORY_XACT_LOCK","PG_TRY_ADVISORY_XACT_LOCK_SHARED","PG_WALFILE_NAME","PG_WALFILE_NAME_OFFSET","PG_WAL_LSN_DIFF","PG_WAL_REPLAY_PAUSE","PG_WAL_REPLAY_RESUME","SET_CONFIG","SUPPRESS_REDUNDANT_UPDATES_TRIGGER","TSVECTOR_UPDATE_TRIGGER","TSVECTOR_UPDATE_TRIGGER_COLUMN","PG_EVENT_TRIGGER_DDL_COMMANDS","PG_EVENT_TRIGGER_DROPPED_OBJECTS","PG_EVENT_TRIGGER_TABLE_REWRITE_OID","PG_EVENT_TRIGGER_TABLE_REWRITE_REASON","PG_GET_OBJECT_ADDRESS","PG_MCV_LIST_ITEMS","CAST"],LD=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BETWEEN","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DAY","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","EXISTS","FALSE","FETCH","FILTER","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","HOUR","ILIKE","IN","INITIALLY","INNER","INOUT","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","MINUTE","MONTH","NATURAL","NOT","NOTNULL","NULL","NULLIF","OFFSET","ON","ONLY","OR","ORDER","OUT","OUTER","OVER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","ROW","SECOND","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VALUES","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","YEAR"],_D=["ARRAY","BIGINT","BIT","BIT VARYING","BOOL","BOOLEAN","CHAR","CHARACTER","CHARACTER VARYING","DECIMAL","DEC","DOUBLE","ENUM","FLOAT","INT","INTEGER","INTERVAL","NCHAR","NUMERIC","JSON","JSONB","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TIMESTAMPTZ","VARCHAR","XML","ZONE"],gD=C(["SELECT [ALL | DISTINCT]"]),PD=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR {UPDATE | NO KEY UPDATE | SHARE | KEY SHARE} [OF]","INSERT INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),lc=C(["CREATE [GLOBAL | LOCAL] [TEMPORARY | TEMP | UNLOGGED] TABLE [IF NOT EXISTS]"]),xo=C(["CREATE [OR REPLACE] [TEMP | TEMPORARY] [RECURSIVE] VIEW","CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE [ONLY]","WHERE CURRENT OF","ON CONFLICT","DELETE FROM [ONLY]","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS] [ONLY]","ALTER TABLE ALL IN TABLESPACE","RENAME [COLUMN]","RENAME TO","ADD [COLUMN] [IF NOT EXISTS]","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","SET DATA TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","TRUNCATE [TABLE] [ONLY]","SET SCHEMA","AFTER","ABORT","ALTER AGGREGATE","ALTER COLLATION","ALTER CONVERSION","ALTER DATABASE","ALTER DEFAULT PRIVILEGES","ALTER DOMAIN","ALTER EVENT TRIGGER","ALTER EXTENSION","ALTER FOREIGN DATA WRAPPER","ALTER FOREIGN TABLE","ALTER FUNCTION","ALTER GROUP","ALTER INDEX","ALTER LANGUAGE","ALTER LARGE OBJECT","ALTER MATERIALIZED VIEW","ALTER OPERATOR","ALTER OPERATOR CLASS","ALTER OPERATOR FAMILY","ALTER POLICY","ALTER PROCEDURE","ALTER PUBLICATION","ALTER ROLE","ALTER ROUTINE","ALTER RULE","ALTER SCHEMA","ALTER SEQUENCE","ALTER SERVER","ALTER STATISTICS","ALTER SUBSCRIPTION","ALTER SYSTEM","ALTER TABLESPACE","ALTER TEXT SEARCH CONFIGURATION","ALTER TEXT SEARCH DICTIONARY","ALTER TEXT SEARCH PARSER","ALTER TEXT SEARCH TEMPLATE","ALTER TRIGGER","ALTER TYPE","ALTER USER","ALTER USER MAPPING","ALTER VIEW","ANALYZE","BEGIN","CALL","CHECKPOINT","CLOSE","CLUSTER","COMMIT","COMMIT PREPARED","COPY","CREATE ACCESS METHOD","CREATE [OR REPLACE] AGGREGATE","CREATE CAST","CREATE COLLATION","CREATE [DEFAULT] CONVERSION","CREATE DATABASE","CREATE DOMAIN","CREATE EVENT TRIGGER","CREATE EXTENSION","CREATE FOREIGN DATA WRAPPER","CREATE FOREIGN TABLE","CREATE [OR REPLACE] FUNCTION","CREATE GROUP","CREATE [UNIQUE] INDEX","CREATE [OR REPLACE] [TRUSTED] [PROCEDURAL] LANGUAGE","CREATE OPERATOR","CREATE OPERATOR CLASS","CREATE OPERATOR FAMILY","CREATE POLICY","CREATE [OR REPLACE] PROCEDURE","CREATE PUBLICATION","CREATE ROLE","CREATE [OR REPLACE] RULE","CREATE SCHEMA [AUTHORIZATION]","CREATE [TEMPORARY | TEMP | UNLOGGED] SEQUENCE","CREATE SERVER","CREATE STATISTICS","CREATE SUBSCRIPTION","CREATE TABLESPACE","CREATE TEXT SEARCH CONFIGURATION","CREATE TEXT SEARCH DICTIONARY","CREATE TEXT SEARCH PARSER","CREATE TEXT SEARCH TEMPLATE","CREATE [OR REPLACE] TRANSFORM","CREATE [OR REPLACE] [CONSTRAINT] TRIGGER","CREATE TYPE","CREATE USER","CREATE USER MAPPING","DEALLOCATE","DECLARE","DISCARD","DROP ACCESS METHOD","DROP AGGREGATE","DROP CAST","DROP COLLATION","DROP CONVERSION","DROP DATABASE","DROP DOMAIN","DROP EVENT TRIGGER","DROP EXTENSION","DROP FOREIGN DATA WRAPPER","DROP FOREIGN TABLE","DROP FUNCTION","DROP GROUP","DROP IDENTITY","DROP INDEX","DROP LANGUAGE","DROP MATERIALIZED VIEW [IF EXISTS]","DROP OPERATOR","DROP OPERATOR CLASS","DROP OPERATOR FAMILY","DROP OWNED","DROP POLICY","DROP PROCEDURE","DROP PUBLICATION","DROP ROLE","DROP ROUTINE","DROP RULE","DROP SCHEMA","DROP SEQUENCE","DROP SERVER","DROP STATISTICS","DROP SUBSCRIPTION","DROP TABLESPACE","DROP TEXT SEARCH CONFIGURATION","DROP TEXT SEARCH DICTIONARY","DROP TEXT SEARCH PARSER","DROP TEXT SEARCH TEMPLATE","DROP TRANSFORM","DROP TRIGGER","DROP TYPE","DROP USER","DROP USER MAPPING","DROP VIEW","EXECUTE","EXPLAIN","FETCH","GRANT","IMPORT FOREIGN SCHEMA","LISTEN","LOAD","LOCK","MOVE","NOTIFY","OVERRIDING SYSTEM VALUE","PREPARE","PREPARE TRANSACTION","REASSIGN OWNED","REFRESH MATERIALIZED VIEW","REINDEX","RELEASE SAVEPOINT","RESET [ALL|ROLE|SESSION AUTHORIZATION]","REVOKE","ROLLBACK","ROLLBACK PREPARED","ROLLBACK TO SAVEPOINT","SAVEPOINT","SECURITY LABEL","SELECT INTO","SET CONSTRAINTS","SET ROLE","SET SESSION AUTHORIZATION","SET TRANSACTION","SHOW","START TRANSACTION","UNLISTEN","VACUUM"]),DD=C(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),MD=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),UD=C(["PRIMARY KEY","GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY","ON {UPDATE | DELETE} [NO ACTION | RESTRICT | CASCADE | SET NULL | SET DEFAULT]","DO {NOTHING | UPDATE}","AS MATERIALIZED","{ROWS | RANGE | GROUPS} BETWEEN","[TIMESTAMP | TIME] {WITH | WITHOUT} TIME ZONE","IS [NOT] DISTINCT FROM","NULLS {FIRST | LAST}","WITH ORDINALITY"]),yD={name:"postgresql",tokenizerOptions:{reservedSelect:gD,reservedClauses:[...PD,...lc,...xo],reservedSetOperations:DD,reservedJoins:MD,reservedPhrases:UD,reservedKeywords:LD,reservedDataTypes:_D,reservedFunctionNames:mD,nestedBlockComments:!0,extraParens:["[]"],stringTypes:["$$",{quote:"''-qq",prefixes:["U&"]},{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:[{quote:'""-qq',prefixes:["U&"]}],identChars:{rest:"$"},paramTypes:{numbered:["$"]},operators:["%","^","|/","||/","@",":=","&","|","#","~","<<",">>","~>~","~<~","~>=~","~<=~","@-@","@@","##","<->","&&","&<","&>","<<|","&<|","|>>","|&>","<^","^>","?#","?-","?|","?-|","?||","@>","<@","~=","?","@?","?&","->","->>","#>","#>>","#-","=>",">>=","<<=","~~","~~*","!~~","!~~*","~","~*","!~","!~*","-|-","||","@@@","!!","^@","<%","%>","<<%","%>>","<<->","<->>","<<<->","<->>>","::",":","<#>","<=>","<+>","<~>","<%>"],operatorKeyword:!0},formatOptions:{alwaysDenseOperators:["::",":"],onelineClauses:[...lc,...xo],tabularOnelineClauses:xo}},xD=["ANY_VALUE","APPROXIMATE PERCENTILE_DISC","AVG","COUNT","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","array","array_concat","array_flatten","get_array_length","split_to_array","subarray","BIT_AND","BIT_OR","BOOL_AND","BOOL_OR","COALESCE","DECODE","GREATEST","LEAST","NVL","NVL2","NULLIF","ADD_MONTHS","AT TIME ZONE","CONVERT_TIMEZONE","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_CMP","DATE_CMP_TIMESTAMP","DATE_CMP_TIMESTAMPTZ","DATE_PART_YEAR","DATEADD","DATEDIFF","DATE_PART","DATE_TRUNC","EXTRACT","GETDATE","INTERVAL_CMP","LAST_DAY","MONTHS_BETWEEN","NEXT_DAY","SYSDATE","TIMEOFDAY","TIMESTAMP_CMP","TIMESTAMP_CMP_DATE","TIMESTAMP_CMP_TIMESTAMPTZ","TIMESTAMPTZ_CMP","TIMESTAMPTZ_CMP_DATE","TIMESTAMPTZ_CMP_TIMESTAMP","TIMEZONE","TO_TIMESTAMP","TRUNC","AddBBox","DropBBox","GeometryType","ST_AddPoint","ST_Angle","ST_Area","ST_AsBinary","ST_AsEWKB","ST_AsEWKT","ST_AsGeoJSON","ST_AsText","ST_Azimuth","ST_Boundary","ST_Collect","ST_Contains","ST_ContainsProperly","ST_ConvexHull","ST_CoveredBy","ST_Covers","ST_Crosses","ST_Dimension","ST_Disjoint","ST_Distance","ST_DistanceSphere","ST_DWithin","ST_EndPoint","ST_Envelope","ST_Equals","ST_ExteriorRing","ST_Force2D","ST_Force3D","ST_Force3DM","ST_Force3DZ","ST_Force4D","ST_GeometryN","ST_GeometryType","ST_GeomFromEWKB","ST_GeomFromEWKT","ST_GeomFromText","ST_GeomFromWKB","ST_InteriorRingN","ST_Intersects","ST_IsPolygonCCW","ST_IsPolygonCW","ST_IsClosed","ST_IsCollection","ST_IsEmpty","ST_IsSimple","ST_IsValid","ST_Length","ST_LengthSphere","ST_Length2D","ST_LineFromMultiPoint","ST_LineInterpolatePoint","ST_M","ST_MakeEnvelope","ST_MakeLine","ST_MakePoint","ST_MakePolygon","ST_MemSize","ST_MMax","ST_MMin","ST_Multi","ST_NDims","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumInteriorRings","ST_NumPoints","ST_Perimeter","ST_Perimeter2D","ST_Point","ST_PointN","ST_Points","ST_Polygon","ST_RemovePoint","ST_Reverse","ST_SetPoint","ST_SetSRID","ST_Simplify","ST_SRID","ST_StartPoint","ST_Touches","ST_Within","ST_X","ST_XMax","ST_XMin","ST_Y","ST_YMax","ST_YMin","ST_Z","ST_ZMax","ST_ZMin","SupportsBBox","CHECKSUM","FUNC_SHA1","FNV_HASH","MD5","SHA","SHA1","SHA2","HLL","HLL_CREATE_SKETCH","HLL_CARDINALITY","HLL_COMBINE","IS_VALID_JSON","IS_VALID_JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_EXTRACT_ARRAY_ELEMENT_TEXT","JSON_EXTRACT_PATH_TEXT","JSON_PARSE","JSON_SERIALIZE","ABS","ACOS","ASIN","ATAN","ATAN2","CBRT","CEILING","CEIL","COS","COT","DEGREES","DEXP","DLOG1","DLOG10","EXP","FLOOR","LN","LOG","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SIN","SIGN","SQRT","TAN","TO_HEX","TRUNC","EXPLAIN_MODEL","ASCII","BPCHARCMP","BTRIM","BTTEXT_PATTERN_CMP","CHAR_LENGTH","CHARACTER_LENGTH","CHARINDEX","CHR","COLLATE","CONCAT","CRC32","DIFFERENCE","INITCAP","LEFT","RIGHT","LEN","LENGTH","LOWER","LPAD","RPAD","LTRIM","OCTETINDEX","OCTET_LENGTH","POSITION","QUOTE_IDENT","QUOTE_LITERAL","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","REPLICATE","REVERSE","RTRIM","SOUNDEX","SPLIT_PART","STRPOS","STRTOL","SUBSTRING","TEXTLEN","TRANSLATE","TRIM","UPPER","decimal_precision","decimal_scale","is_array","is_bigint","is_boolean","is_char","is_decimal","is_float","is_integer","is_object","is_scalar","is_smallint","is_varchar","json_typeof","AVG","COUNT","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAST_VALUE","LAG","LEAD","LISTAGG","MAX","MEDIAN","MIN","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","CAST","CONVERT","TO_CHAR","TO_DATE","TO_NUMBER","TEXT_TO_INT_ALT","TEXT_TO_NUMERIC_ALT","CHANGE_QUERY_PRIORITY","CHANGE_SESSION_PRIORITY","CHANGE_USER_PRIORITY","CURRENT_SETTING","PG_CANCEL_BACKEND","PG_TERMINATE_BACKEND","REBOOT_CLUSTER","SET_CONFIG","CURRENT_AWS_ACCOUNT","CURRENT_DATABASE","CURRENT_NAMESPACE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","CURRENT_USER_ID","HAS_ASSUMEROLE_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_TABLE_PRIVILEGE","PG_BACKEND_PID","PG_GET_COLS","PG_GET_GRANTEE_BY_IAM_ROLE","PG_GET_IAM_ROLE_BY_USER","PG_GET_LATE_BINDING_VIEW_COLS","PG_LAST_COPY_COUNT","PG_LAST_COPY_ID","PG_LAST_UNLOAD_ID","PG_LAST_QUERY_ID","PG_LAST_UNLOAD_COUNT","SESSION_USER","SLICE_NUM","USER","VERSION"],bD=["AES128","AES256","ALL","ALLOWOVERWRITE","ANY","AS","ASC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BOTH","CHECK","COLUMN","CONSTRAINT","CREATE","CROSS","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DESC","DISABLE","DISTINCT","DO","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GROUP","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTO","IS","ISNULL","LANGUAGE","LEADING","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","MINUS","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OID","OLD","ON","ONLY","OPEN","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RECOVER","REFERENCES","REJECTLOG","RESORT","RESPECT","RESTORE","SIMILAR","SNAPSHOT","SOME","SYSTEM","TABLE","TAG","TDES","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","UNIQUE","USING","VERBOSE","WALLET","WITHOUT","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","FORMAT","CSV","DELIMITER","FIXEDWIDTH","SHAPEFILE","AVRO","JSON","PARQUET","ORC","ACCESS_KEY_ID","CREDENTIALS","ENCRYPTED","IAM_ROLE","MASTER_SYMMETRIC_KEY","SECRET_ACCESS_KEY","SESSION_TOKEN","BZIP2","GZIP","LZOP","ZSTD","MANIFEST","READRATIO","REGION","SSH","RAW","AZ64","BYTEDICT","DELTA","DELTA32K","LZO","MOSTLY8","MOSTLY16","MOSTLY32","RUNLENGTH","TEXT255","TEXT32K","CATALOG_ROLE","SECRET_ARN","EXTERNAL","AUTO","EVEN","KEY","PREDICATE","COMPRESSION"],BD=["ARRAY","BIGINT","BPCHAR","CHAR","CHARACTER VARYING","CHARACTER","DECIMAL","INT","INT2","INT4","INT8","INTEGER","NCHAR","NUMERIC","NVARCHAR","SMALLINT","TEXT","VARBYTE","VARCHAR"],GD=C(["SELECT [ALL | DISTINCT]"]),HD=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET"]),ac=C(["CREATE [TEMPORARY | TEMP | LOCAL TEMPORARY | LOCAL TEMP] TABLE [IF NOT EXISTS]"]),bo=C(["CREATE [OR REPLACE | MATERIALIZED] VIEW","UPDATE","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ALTER TABLE APPEND","ADD [COLUMN]","DROP [COLUMN]","RENAME TO","RENAME COLUMN","ALTER COLUMN","TYPE","ENCODE","TRUNCATE [TABLE]","ABORT","ALTER DATABASE","ALTER DATASHARE","ALTER DEFAULT PRIVILEGES","ALTER GROUP","ALTER MATERIALIZED VIEW","ALTER PROCEDURE","ALTER SCHEMA","ALTER USER","ANALYSE","ANALYZE","ANALYSE COMPRESSION","ANALYZE COMPRESSION","BEGIN","CALL","CANCEL","CLOSE","COMMIT","COPY","CREATE DATABASE","CREATE DATASHARE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL SCHEMA","CREATE EXTERNAL TABLE","CREATE FUNCTION","CREATE GROUP","CREATE LIBRARY","CREATE MODEL","CREATE PROCEDURE","CREATE SCHEMA","CREATE USER","DEALLOCATE","DECLARE","DESC DATASHARE","DROP DATABASE","DROP DATASHARE","DROP FUNCTION","DROP GROUP","DROP LIBRARY","DROP MODEL","DROP MATERIALIZED VIEW","DROP PROCEDURE","DROP SCHEMA","DROP USER","DROP VIEW","DROP","EXECUTE","EXPLAIN","FETCH","GRANT","LOCK","PREPARE","REFRESH MATERIALIZED VIEW","RESET","REVOKE","ROLLBACK","SELECT INTO","SET SESSION AUTHORIZATION","SET SESSION CHARACTERISTICS","SHOW","SHOW EXTERNAL TABLE","SHOW MODEL","SHOW DATASHARES","SHOW PROCEDURE","SHOW TABLE","SHOW VIEW","START TRANSACTION","UNLOAD","VACUUM"]),vD=C(["UNION [ALL]","EXCEPT","INTERSECT","MINUS"]),wD=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),FD=C(["NULL AS","DATA CATALOG","HIVE METASTORE","{ROWS | RANGE} BETWEEN"]),YD={name:"redshift",tokenizerOptions:{reservedSelect:GD,reservedClauses:[...HD,...ac,...bo],reservedSetOperations:vD,reservedJoins:wD,reservedPhrases:FD,reservedKeywords:bD,reservedDataTypes:BD,reservedFunctionNames:xD,stringTypes:["''-qq"],identTypes:['""-qq'],identChars:{first:"#"},paramTypes:{numbered:["$"]},operators:["^","%","@","|/","||/","&","|","~","<<",">>","||","::"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...ac,...bo],tabularOnelineClauses:bo}},kD=["ADD","AFTER","ALL","ALTER","ANALYZE","AND","ANTI","ANY","ARCHIVE","AS","ASC","AT","AUTHORIZATION","BETWEEN","BOTH","BUCKET","BUCKETS","BY","CACHE","CASCADE","CAST","CHANGE","CHECK","CLEAR","CLUSTER","CLUSTERED","CODEGEN","COLLATE","COLLECTION","COLUMN","COLUMNS","COMMENT","COMMIT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONSTRAINT","COST","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATA","DATABASE","DATABASES","DAY","DBPROPERTIES","DEFINED","DELETE","DELIMITED","DESC","DESCRIBE","DFS","DIRECTORIES","DIRECTORY","DISTINCT","DISTRIBUTE","DIV","DROP","ESCAPE","ESCAPED","EXCEPT","EXCHANGE","EXISTS","EXPORT","EXTENDED","EXTERNAL","EXTRACT","FALSE","FETCH","FIELDS","FILTER","FILEFORMAT","FIRST","FIRST_VALUE","FOLLOWING","FOR","FOREIGN","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GLOBAL","GRANT","GROUP","GROUPING","HOUR","IF","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTFORMAT","INTERSECT","INTO","IS","ITEMS","KEYS","LAST","LAST_VALUE","LATERAL","LAZY","LEADING","LEFT","LIKE","LINES","LIST","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","MACRO","MATCHED","MERGE","MINUTE","MONTH","MSCK","NAMESPACE","NAMESPACES","NATURAL","NO","NOT","NULL","NULLS","OF","ONLY","OPTION","OPTIONS","OR","ORDER","OUT","OUTER","OUTPUTFORMAT","OVER","OVERLAPS","OVERLAY","OVERWRITE","OWNER","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLACING","POSITION","PRECEDING","PRIMARY","PRINCIPALS","PROPERTIES","PURGE","QUERY","RANGE","RECORDREADER","RECORDWRITER","RECOVER","REDUCE","REFERENCES","RENAME","REPAIR","REPLACE","RESPECT","RESTRICT","REVOKE","RIGHT","RLIKE","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","SCHEMA","SECOND","SELECT","SEMI","SEPARATED","SERDE","SERDEPROPERTIES","SESSION_USER","SETS","SHOW","SKEWED","SOME","SORT","SORTED","START","STATISTICS","STORED","STRATIFY","SUBSTR","SUBSTRING","TABLE","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","THEN","TO","TOUCH","TRAILING","TRANSACTION","TRANSACTIONS","TRIM","TRUE","TRUNCATE","UNARCHIVE","UNBOUNDED","UNCACHE","UNIQUE","UNKNOWN","UNLOCK","UNSET","USE","USER","USING","VIEW","WINDOW","YEAR","ANALYSE","ARRAY_ZIP","COALESCE","CONTAINS","CONVERT","DAYS","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DECODE","DEFAULT","DISTINCTROW","ENCODE","EXPLODE","EXPLODE_OUTER","FIXED","GREATEST","GROUP_CONCAT","HOURS","HOUR_MINUTE","HOUR_SECOND","IFNULL","LEAST","LEVEL","MINUTE_SECOND","NULLIF","OFFSET","ON","OPTIMIZE","REGEXP","SEPARATOR","SIZE","TYPE","TYPES","UNSIGNED","VARIABLES","YEAR_MONTH"],VD=["ARRAY","BIGINT","BINARY","BOOLEAN","BYTE","CHAR","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","LONG","MAP","NUMERIC","REAL","SHORT","SMALLINT","STRING","STRUCT","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TINYINT","VARCHAR"],WD=["APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COUNT","COUNT","COUNT_IF","COUNT_MIN_SKETCH","COVAR_POP","COVAR_SAMP","EVERY","FIRST","FIRST_VALUE","GROUPING","GROUPING_ID","KURTOSIS","LAST","LAST_VALUE","MAX","MAX_BY","MEAN","MIN","MIN_BY","PERCENTILE","PERCENTILE","PERCENTILE_APPROX","SKEWNESS","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","CUME_DIST","DENSE_RANK","LAG","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","ARRAY","ARRAY_CONTAINS","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_UNION","ARRAYS_OVERLAP","ARRAYS_ZIP","FLATTEN","SEQUENCE","SHUFFLE","SLICE","SORT_ARRAY","ELEMENT_AT","ELEMENT_AT","MAP_CONCAT","MAP_ENTRIES","MAP_FROM_ARRAYS","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","STR_TO_MAP","ADD_MONTHS","CURRENT_DATE","CURRENT_DATE","CURRENT_TIMESTAMP","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","DATE_ADD","DATE_FORMAT","DATE_FROM_UNIX_DATE","DATE_PART","DATE_SUB","DATE_TRUNC","DATEDIFF","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MAKE_DATE","MAKE_DT_INTERVAL","MAKE_INTERVAL","MAKE_TIMESTAMP","MAKE_YM_INTERVAL","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","NOW","QUARTER","SECOND","SESSION_WINDOW","TIMESTAMP_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_SECONDS","TO_DATE","TO_TIMESTAMP","TO_UNIX_TIMESTAMP","TO_UTC_TIMESTAMP","TRUNC","UNIX_DATE","UNIX_MICROS","UNIX_MILLIS","UNIX_SECONDS","UNIX_TIMESTAMP","WEEKDAY","WEEKOFYEAR","WINDOW","YEAR","FROM_JSON","GET_JSON_OBJECT","JSON_ARRAY_LENGTH","JSON_OBJECT_KEYS","JSON_TUPLE","SCHEMA_OF_JSON","TO_JSON","ABS","ACOS","ACOSH","AGGREGATE","ARRAY_SORT","ASCII","ASIN","ASINH","ASSERT_TRUE","ATAN","ATAN2","ATANH","BASE64","BIN","BIT_COUNT","BIT_GET","BIT_LENGTH","BROUND","BTRIM","CARDINALITY","CBRT","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONV","COS","COSH","COT","CRC32","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_USER","DEGREES","ELT","EXP","EXPM1","FACTORIAL","FIND_IN_SET","FLOOR","FORALL","FORMAT_NUMBER","FORMAT_STRING","FROM_CSV","GETBIT","HASH","HEX","HYPOT","INITCAP","INLINE","INLINE_OUTER","INPUT_FILE_BLOCK_LENGTH","INPUT_FILE_BLOCK_START","INPUT_FILE_NAME","INSTR","ISNAN","ISNOTNULL","ISNULL","JAVA_METHOD","LCASE","LEFT","LENGTH","LEVENSHTEIN","LN","LOCATE","LOG","LOG10","LOG1P","LOG2","LOWER","LPAD","LTRIM","MAP_FILTER","MAP_ZIP_WITH","MD5","MOD","MONOTONICALLY_INCREASING_ID","NAMED_STRUCT","NANVL","NEGATIVE","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARSE_URL","PI","PMOD","POSEXPLODE","POSEXPLODE_OUTER","POSITION","POSITIVE","POW","POWER","PRINTF","RADIANS","RAISE_ERROR","RAND","RANDN","RANDOM","REFLECT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_REPLACE","REPEAT","REPLACE","REVERSE","RIGHT","RINT","ROUND","RPAD","RTRIM","SCHEMA_OF_CSV","SENTENCES","SHA","SHA1","SHA2","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIGNUM","SIN","SINH","SOUNDEX","SPACE","SPARK_PARTITION_ID","SPLIT","SQRT","STACK","SUBSTR","SUBSTRING","SUBSTRING_INDEX","TAN","TANH","TO_CSV","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRY_ADD","TRY_DIVIDE","TYPEOF","UCASE","UNBASE64","UNHEX","UPPER","UUID","VERSION","WIDTH_BUCKET","XPATH","XPATH_BOOLEAN","XPATH_DOUBLE","XPATH_FLOAT","XPATH_INT","XPATH_LONG","XPATH_NUMBER","XPATH_SHORT","XPATH_STRING","XXHASH64","ZIP_WITH","CAST","COALESCE","NULLIF"],XD=C(["SELECT [ALL | DISTINCT]"]),KD=C(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT [INTO | OVERWRITE] [TABLE]","VALUES","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),Ec=C(["CREATE [EXTERNAL] TABLE [IF NOT EXISTS]"]),Bo=C(["CREATE [OR REPLACE] [GLOBAL TEMPORARY | TEMPORARY] VIEW [IF NOT EXISTS]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD COLUMNS","DROP {COLUMN | COLUMNS}","RENAME TO","RENAME COLUMN","ALTER COLUMN","TRUNCATE TABLE","LATERAL VIEW","ALTER DATABASE","ALTER VIEW","CREATE DATABASE","CREATE FUNCTION","DROP DATABASE","DROP FUNCTION","DROP VIEW","REPAIR TABLE","USE DATABASE","TABLESAMPLE","PIVOT","TRANSFORM","EXPLAIN","ADD FILE","ADD JAR","ANALYZE TABLE","CACHE TABLE","CLEAR CACHE","DESCRIBE DATABASE","DESCRIBE FUNCTION","DESCRIBE QUERY","DESCRIBE TABLE","LIST FILE","LIST JAR","REFRESH","REFRESH TABLE","REFRESH FUNCTION","RESET","SHOW COLUMNS","SHOW CREATE TABLE","SHOW DATABASES","SHOW FUNCTIONS","SHOW PARTITIONS","SHOW TABLE EXTENDED","SHOW TABLES","SHOW TBLPROPERTIES","SHOW VIEWS","UNCACHE TABLE"]),$D=C(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),JD=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT] {ANTI | SEMI} JOIN","NATURAL [LEFT] {ANTI | SEMI} JOIN"]),jD=C(["ON DELETE","ON UPDATE","CURRENT ROW","{ROWS | RANGE} BETWEEN"]),QD={name:"spark",tokenizerOptions:{reservedSelect:XD,reservedClauses:[...KD,...Ec,...Bo],reservedSetOperations:$D,reservedJoins:JD,reservedPhrases:jD,supportsXor:!0,reservedKeywords:kD,reservedDataTypes:VD,reservedFunctionNames:WD,extraParens:["[]"],stringTypes:["''-bs",'""-bs',{quote:"''-raw",prefixes:["R","X"],requirePrefix:!0},{quote:'""-raw',prefixes:["R","X"],requirePrefix:!0}],identTypes:["``"],identChars:{allowFirstCharNumber:!0},variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||","->"],postProcess:qD},formatOptions:{onelineClauses:[...Ec,...Bo],tabularOnelineClauses:Bo}};function qD(s){return s.map((e,t)=>{const i=s[t-1]||ti,n=s[t+1]||ti;return _s.WINDOW(e)&&n.type===g.OPEN_PAREN?Object.assign(Object.assign({},e),{type:g.RESERVED_FUNCTION_NAME}):e.text==="ITEMS"&&e.type===g.RESERVED_KEYWORD&&!(i.text==="COLLECTION"&&n.text==="TERMINATED")?Object.assign(Object.assign({},e),{type:g.IDENTIFIER,text:e.raw}):e})}const zD=["ABS","CHANGES","CHAR","COALESCE","FORMAT","GLOB","HEX","IFNULL","IIF","INSTR","LAST_INSERT_ROWID","LENGTH","LIKE","LIKELIHOOD","LIKELY","LOAD_EXTENSION","LOWER","LTRIM","NULLIF","PRINTF","QUOTE","RANDOM","RANDOMBLOB","REPLACE","ROUND","RTRIM","SIGN","SOUNDEX","SQLITE_COMPILEOPTION_GET","SQLITE_COMPILEOPTION_USED","SQLITE_OFFSET","SQLITE_SOURCE_ID","SQLITE_VERSION","SUBSTR","SUBSTRING","TOTAL_CHANGES","TRIM","TYPEOF","UNICODE","UNLIKELY","UPPER","ZEROBLOB","AVG","COUNT","GROUP_CONCAT","MAX","MIN","SUM","TOTAL","DATE","TIME","DATETIME","JULIANDAY","UNIXEPOCH","STRFTIME","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","ACOS","ACOSH","ASIN","ASINH","ATAN","ATAN2","ATANH","CEIL","CEILING","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG","LOG10","LOG2","MOD","PI","POW","POWER","RADIANS","SIN","SINH","SQRT","TAN","TANH","TRUNC","JSON","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_ARRAY_LENGTH","JSON_EXTRACT","JSON_INSERT","JSON_OBJECT","JSON_PATCH","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_TYPE","JSON_TYPE","JSON_VALID","JSON_QUOTE","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_EACH","JSON_TREE","CAST"],ZD=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","AND","ARE","ALWAYS","ANALYZE","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DO","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUDE","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FILTER","FIRST","FOLLOWING","FOR","FOREIGN","FROM","FULL","GENERATED","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LAST","LEFT","LIKE","LIMIT","MATCH","MATERIALIZED","NATURAL","NO","NOT","NOTHING","NOTNULL","NULL","NULLS","OF","OFFSET","ON","ONLY","OPEN","OR","ORDER","OTHERS","OUTER","OVER","PARTITION","PLAN","PRAGMA","PRECEDING","PRIMARY","QUERY","RAISE","RANGE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RETURNING","RIGHT","ROLLBACK","ROW","ROWS","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TIES","TO","TRANSACTION","TRIGGER","UNBOUNDED","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WINDOW","WITH","WITHOUT"],eM=["ANY","ARRAY","BLOB","CHARACTER","DECIMAL","INT","INTEGER","NATIVE CHARACTER","NCHAR","NUMERIC","NVARCHAR","REAL","TEXT","VARCHAR","VARYING CHARACTER"],tM=C(["SELECT [ALL | DISTINCT]"]),sM=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO","REPLACE INTO","VALUES","SET"]),Tc=C(["CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),Go=C(["CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME [COLUMN]","RENAME TO","SET SCHEMA"]),iM=C(["UNION [ALL]","EXCEPT","INTERSECT"]),nM=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),rM=C(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE | GROUPS} BETWEEN","DO UPDATE"]),oM={name:"sqlite",tokenizerOptions:{reservedSelect:tM,reservedClauses:[...sM,...Tc,...Go],reservedSetOperations:iM,reservedJoins:nM,reservedPhrases:rM,reservedKeywords:ZD,reservedDataTypes:eM,reservedFunctionNames:zD,stringTypes:["''-qq",{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``","[]"],paramTypes:{positional:!0,numbered:["?"],named:[":","@","$"]},operators:["%","~","&","|","<<",">>","==","->","->>","||"]},formatOptions:{onelineClauses:[...Tc,...Go],tabularOnelineClauses:Go}},lM=["GROUPING","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","ROW_NUMBER","POSITION","OCCURRENCES_REGEX","POSITION_REGEX","EXTRACT","CHAR_LENGTH","CHARACTER_LENGTH","OCTET_LENGTH","CARDINALITY","ABS","MOD","LN","EXP","POWER","SQRT","FLOOR","CEIL","CEILING","WIDTH_BUCKET","SUBSTRING","SUBSTRING_REGEX","UPPER","LOWER","CONVERT","TRANSLATE","TRANSLATE_REGEX","TRIM","OVERLAY","NORMALIZE","SPECIFICTYPE","CURRENT_DATE","CURRENT_TIME","LOCALTIME","CURRENT_TIMESTAMP","LOCALTIMESTAMP","COUNT","AVG","MAX","MIN","SUM","STDDEV_POP","STDDEV_SAMP","VAR_SAMP","VAR_POP","COLLECT","FUSION","INTERSECTION","COVAR_POP","COVAR_SAMP","CORR","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","PERCENTILE_CONT","PERCENTILE_DISC","CAST","COALESCE","NULLIF","ROUND","SIN","COS","TAN","ASIN","ACOS","ATAN"],aM=["ALL","ALLOCATE","ALTER","ANY","ARE","AS","ASC","ASENSITIVE","ASYMMETRIC","AT","ATOMIC","AUTHORIZATION","BEGIN","BETWEEN","BOTH","BY","CALL","CALLED","CASCADED","CAST","CHECK","CLOSE","COALESCE","COLLATE","COLUMN","COMMIT","CONDITION","CONNECT","CONSTRAINT","CORRESPONDING","CREATE","CROSS","CUBE","CURRENT","CURRENT_CATALOG","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DEALLOCATE","DAY","DECLARE","DEFAULT","DELETE","DEREF","DESC","DESCRIBE","DETERMINISTIC","DISCONNECT","DISTINCT","DROP","DYNAMIC","EACH","ELEMENT","END-EXEC","ESCAPE","EVERY","EXCEPT","EXEC","EXECUTE","EXISTS","EXTERNAL","FALSE","FETCH","FILTER","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GET","GLOBAL","GRANT","GROUP","HAVING","HOLD","HOUR","IDENTITY","IN","INDICATOR","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTO","IS","LANGUAGE","LARGE","LATERAL","LEADING","LEFT","LIKE","LIKE_REGEX","LOCAL","MATCH","MEMBER","MERGE","METHOD","MINUTE","MODIFIES","MODULE","MONTH","NATURAL","NEW","NO","NONE","NOT","NULL","NULLIF","OF","OLD","ON","ONLY","OPEN","ORDER","OUT","OUTER","OVER","OVERLAPS","PARAMETER","PARTITION","PRECISION","PREPARE","PRIMARY","PROCEDURE","RANGE","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","RELEASE","RESULT","RETURN","RETURNS","REVOKE","RIGHT","ROLLBACK","ROLLUP","ROW","ROWS","SAVEPOINT","SCOPE","SCROLL","SEARCH","SECOND","SELECT","SENSITIVE","SESSION_USER","SET","SIMILAR","SOME","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","START","STATIC","SUBMULTISET","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","THEN","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSLATION","TREAT","TRIGGER","TRUE","UESCAPE","UNION","UNIQUE","UNKNOWN","UNNEST","UPDATE","USER","USING","VALUE","VALUES","WHENEVER","WINDOW","WITHIN","WITHOUT","YEAR"],EM=["ARRAY","BIGINT","BINARY LARGE OBJECT","BINARY VARYING","BINARY","BLOB","BOOLEAN","CHAR LARGE OBJECT","CHAR VARYING","CHAR","CHARACTER LARGE OBJECT","CHARACTER VARYING","CHARACTER","CLOB","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MULTISET","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER LARGE OBJECT","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR LARGE OBJECT","NCHAR VARYING","NCHAR","NCLOB","NUMERIC","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"],TM=C(["SELECT [ALL | DISTINCT]"]),cM=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET"]),cc=C(["CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE"]),Ho=C(["CREATE [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","DELETE FROM","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP [COLUMN]","RENAME COLUMN","RENAME TO","ALTER [COLUMN]","{SET | DROP} DEFAULT","ADD SCOPE","DROP SCOPE {CASCADE | RESTRICT}","RESTART WITH","TRUNCATE TABLE","SET SCHEMA"]),hM=C(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),AM=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),RM=C(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),uM={name:"sql",tokenizerOptions:{reservedSelect:TM,reservedClauses:[...cM,...cc,...Ho],reservedSetOperations:hM,reservedJoins:AM,reservedPhrases:RM,reservedKeywords:aM,reservedDataTypes:EM,reservedFunctionNames:lM,stringTypes:[{quote:"''-qq-bs",prefixes:["N","U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``"],paramTypes:{positional:!0},operators:["||"]},formatOptions:{onelineClauses:[...cc,...Ho],tabularOnelineClauses:Ho}},fM=["ABS","ACOS","ALL_MATCH","ANY_MATCH","APPROX_DISTINCT","APPROX_MOST_FREQUENT","APPROX_PERCENTILE","APPROX_SET","ARBITRARY","ARRAYS_OVERLAP","ARRAY_AGG","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_SORT","ARRAY_UNION","ASIN","ATAN","ATAN2","AT_TIMEZONE","AVG","BAR","BETA_CDF","BING_TILE","BING_TILES_AROUND","BING_TILE_AT","BING_TILE_COORDINATES","BING_TILE_POLYGON","BING_TILE_QUADKEY","BING_TILE_ZOOM_LEVEL","BITWISE_AND","BITWISE_AND_AGG","BITWISE_LEFT_SHIFT","BITWISE_NOT","BITWISE_OR","BITWISE_OR_AGG","BITWISE_RIGHT_SHIFT","BITWISE_RIGHT_SHIFT_ARITHMETIC","BITWISE_XOR","BIT_COUNT","BOOL_AND","BOOL_OR","CARDINALITY","CAST","CBRT","CEIL","CEILING","CHAR2HEXINT","CHECKSUM","CHR","CLASSIFY","COALESCE","CODEPOINT","COLOR","COMBINATIONS","CONCAT","CONCAT_WS","CONTAINS","CONTAINS_SEQUENCE","CONVEX_HULL_AGG","CORR","COS","COSH","COSINE_SIMILARITY","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CRC32","CUME_DIST","CURRENT_CATALOG","CURRENT_DATE","CURRENT_GROUPS","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","DATE","DATE_ADD","DATE_DIFF","DATE_FORMAT","DATE_PARSE","DATE_TRUNC","DAY","DAY_OF_MONTH","DAY_OF_WEEK","DAY_OF_YEAR","DEGREES","DENSE_RANK","DOW","DOY","E","ELEMENT_AT","EMPTY_APPROX_SET","EVALUATE_CLASSIFIER_PREDICTIONS","EVERY","EXP","EXTRACT","FEATURES","FILTER","FIRST_VALUE","FLATTEN","FLOOR","FORMAT","FORMAT_DATETIME","FORMAT_NUMBER","FROM_BASE","FROM_BASE32","FROM_BASE64","FROM_BASE64URL","FROM_BIG_ENDIAN_32","FROM_BIG_ENDIAN_64","FROM_ENCODED_POLYLINE","FROM_GEOJSON_GEOMETRY","FROM_HEX","FROM_IEEE754_32","FROM_IEEE754_64","FROM_ISO8601_DATE","FROM_ISO8601_TIMESTAMP","FROM_ISO8601_TIMESTAMP_NANOS","FROM_UNIXTIME","FROM_UNIXTIME_NANOS","FROM_UTF8","GEOMETRIC_MEAN","GEOMETRY_FROM_HADOOP_SHAPE","GEOMETRY_INVALID_REASON","GEOMETRY_NEAREST_POINTS","GEOMETRY_TO_BING_TILES","GEOMETRY_UNION","GEOMETRY_UNION_AGG","GREATEST","GREAT_CIRCLE_DISTANCE","HAMMING_DISTANCE","HASH_COUNTS","HISTOGRAM","HMAC_MD5","HMAC_SHA1","HMAC_SHA256","HMAC_SHA512","HOUR","HUMAN_READABLE_SECONDS","IF","INDEX","INFINITY","INTERSECTION_CARDINALITY","INVERSE_BETA_CDF","INVERSE_NORMAL_CDF","IS_FINITE","IS_INFINITE","IS_JSON_SCALAR","IS_NAN","JACCARD_INDEX","JSON_ARRAY_CONTAINS","JSON_ARRAY_GET","JSON_ARRAY_LENGTH","JSON_EXISTS","JSON_EXTRACT","JSON_EXTRACT_SCALAR","JSON_FORMAT","JSON_PARSE","JSON_QUERY","JSON_SIZE","JSON_VALUE","KURTOSIS","LAG","LAST_DAY_OF_MONTH","LAST_VALUE","LEAD","LEARN_CLASSIFIER","LEARN_LIBSVM_CLASSIFIER","LEARN_LIBSVM_REGRESSOR","LEARN_REGRESSOR","LEAST","LENGTH","LEVENSHTEIN_DISTANCE","LINE_INTERPOLATE_POINT","LINE_INTERPOLATE_POINTS","LINE_LOCATE_POINT","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","LUHN_CHECK","MAKE_SET_DIGEST","MAP","MAP_AGG","MAP_CONCAT","MAP_ENTRIES","MAP_FILTER","MAP_FROM_ENTRIES","MAP_KEYS","MAP_UNION","MAP_VALUES","MAP_ZIP_WITH","MAX","MAX_BY","MD5","MERGE","MERGE_SET_DIGEST","MILLISECOND","MIN","MINUTE","MIN_BY","MOD","MONTH","MULTIMAP_AGG","MULTIMAP_FROM_ENTRIES","MURMUR3","NAN","NGRAMS","NONE_MATCH","NORMALIZE","NORMAL_CDF","NOW","NTH_VALUE","NTILE","NULLIF","NUMERIC_HISTOGRAM","OBJECTID","OBJECTID_TIMESTAMP","PARSE_DATA_SIZE","PARSE_DATETIME","PARSE_DURATION","PERCENT_RANK","PI","POSITION","POW","POWER","QDIGEST_AGG","QUARTER","RADIANS","RAND","RANDOM","RANK","REDUCE","REDUCE_AGG","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGRESS","REGR_INTERCEPT","REGR_SLOPE","RENDER","REPEAT","REPLACE","REVERSE","RGB","ROUND","ROW_NUMBER","RPAD","RTRIM","SECOND","SEQUENCE","SHA1","SHA256","SHA512","SHUFFLE","SIGN","SIMPLIFY_GEOMETRY","SIN","SKEWNESS","SLICE","SOUNDEX","SPATIAL_PARTITIONING","SPATIAL_PARTITIONS","SPLIT","SPLIT_PART","SPLIT_TO_MAP","SPLIT_TO_MULTIMAP","SPOOKY_HASH_V2_32","SPOOKY_HASH_V2_64","SQRT","STARTS_WITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRPOS","ST_AREA","ST_ASBINARY","ST_ASTEXT","ST_BOUNDARY","ST_BUFFER","ST_CENTROID","ST_CONTAINS","ST_CONVEXHULL","ST_COORDDIM","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_ENDPOINT","ST_ENVELOPE","ST_ENVELOPEASPTS","ST_EQUALS","ST_EXTERIORRING","ST_GEOMETRIES","ST_GEOMETRYFROMTEXT","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMBINARY","ST_INTERIORRINGN","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISRING","ST_ISSIMPLE","ST_ISVALID","ST_LENGTH","ST_LINEFROMTEXT","ST_LINESTRING","ST_MULTIPOINT","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINT","ST_POINTN","ST_POINTS","ST_POLYGON","ST_RELATE","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_TOUCHES","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","SUBSTR","SUBSTRING","SUM","TAN","TANH","TDIGEST_AGG","TIMESTAMP_OBJECTID","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO_BASE","TO_BASE32","TO_BASE64","TO_BASE64URL","TO_BIG_ENDIAN_32","TO_BIG_ENDIAN_64","TO_CHAR","TO_DATE","TO_ENCODED_POLYLINE","TO_GEOJSON_GEOMETRY","TO_GEOMETRY","TO_HEX","TO_IEEE754_32","TO_IEEE754_64","TO_ISO8601","TO_MILLISECONDS","TO_SPHERICAL_GEOGRAPHY","TO_TIMESTAMP","TO_UNIXTIME","TO_UTF8","TRANSFORM","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRIM_ARRAY","TRUNCATE","TRY","TRY_CAST","TYPEOF","UPPER","URL_DECODE","URL_ENCODE","URL_EXTRACT_FRAGMENT","URL_EXTRACT_HOST","URL_EXTRACT_PARAMETER","URL_EXTRACT_PATH","URL_EXTRACT_PORT","URL_EXTRACT_PROTOCOL","URL_EXTRACT_QUERY","UUID","VALUES_AT_QUANTILES","VALUE_AT_QUANTILE","VARIANCE","VAR_POP","VAR_SAMP","VERSION","WEEK","WEEK_OF_YEAR","WIDTH_BUCKET","WILSON_INTERVAL_LOWER","WILSON_INTERVAL_UPPER","WITH_TIMEZONE","WORD_STEM","XXHASH64","YEAR","YEAR_OF_WEEK","YOW","ZIP","ZIP_WITH","CLASSIFIER","FIRST","LAST","MATCH_NUMBER","NEXT","PERMUTE","PREV"],SM=["ABSENT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ANY","AS","ASC","AT","AUTHORIZATION","BERNOULLI","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CATALOGS","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","CONDITIONAL","CONSTRAINT","COPARTITION","CREATE","CROSS","CUBE","CURRENT","CURRENT_PATH","CURRENT_ROLE","DATA","DEALLOCATE","DEFAULT","DEFINE","DEFINER","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DISTINCT","DISTRIBUTED","DOUBLE","DROP","ELSE","EMPTY","ENCODING","END","ERROR","ESCAPE","EXCEPT","EXCLUDING","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FINAL","FIRST","FOLLOWING","FOR","FROM","FULL","FUNCTIONS","GRANT","GRANTED","GRANTS","GRAPHVIZ","GROUP","GROUPING","GROUPS","HAVING","IGNORE","IN","INCLUDING","INITIAL","INNER","INPUT","INSERT","INTERSECT","INTERVAL","INTO","INVOKER","IO","IS","ISOLATION","JOIN","JSON","JSON_ARRAY","JSON_OBJECT","KEEP","KEY","KEYS","LAST","LATERAL","LEADING","LEFT","LEVEL","LIKE","LIMIT","LOCAL","LOGICAL","MATCH","MATCHED","MATCHES","MATCH_RECOGNIZE","MATERIALIZED","MEASURES","NATURAL","NEXT","NFC","NFD","NFKC","NFKD","NO","NONE","NOT","NULL","NULLS","OBJECT","OF","OFFSET","OMIT","ON","ONE","ONLY","OPTION","OR","ORDER","ORDINALITY","OUTER","OUTPUT","OVER","OVERFLOW","PARTITION","PARTITIONS","PASSING","PAST","PATH","PATTERN","PER","PERMUTE","PRECEDING","PRECISION","PREPARE","PRIVILEGES","PROPERTIES","PRUNE","QUOTES","RANGE","READ","RECURSIVE","REFRESH","RENAME","REPEATABLE","RESET","RESPECT","RESTRICT","RETURNING","REVOKE","RIGHT","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","RUNNING","SCALAR","SCHEMA","SCHEMAS","SECURITY","SEEK","SELECT","SERIALIZABLE","SESSION","SET","SETS","SHOW","SKIP","SOME","START","STATS","STRING","SUBSET","SYSTEM","TABLE","TABLES","TABLESAMPLE","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNCONDITIONAL","UNION","UNIQUE","UNKNOWN","UNMATCHED","UNNEST","UPDATE","USE","USER","USING","UTF16","UTF32","UTF8","VALIDATE","VALUE","VALUES","VERBOSE","VIEW","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","ZONE"],dM=["BIGINT","INT","INTEGER","SMALLINT","TINYINT","BOOLEAN","DATE","DECIMAL","REAL","DOUBLE","HYPERLOGLOG","QDIGEST","TDIGEST","P4HYPERLOGLOG","INTERVAL","TIMESTAMP","TIME","VARBINARY","VARCHAR","CHAR","ROW","ARRAY","MAP","JSON","JSON2016","IPADDRESS","GEOMETRY","UUID","SETDIGEST","JONIREGEXP","RE2JREGEXP","LIKEPATTERN","COLOR","CODEPOINTS","FUNCTION","JSONPATH"],OM=C(["SELECT [ALL | DISTINCT]"]),IM=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET","MATCH_RECOGNIZE","MEASURES","ONE ROW PER MATCH","ALL ROWS PER MATCH","AFTER MATCH","PATTERN","SUBSET","DEFINE"]),hc=C(["CREATE TABLE [IF NOT EXISTS]"]),vo=C(["CREATE [OR REPLACE] [MATERIALIZED] VIEW","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME COLUMN [IF EXISTS]","RENAME TO","SET AUTHORIZATION [USER | ROLE]","SET PROPERTIES","EXECUTE","TRUNCATE TABLE","ALTER SCHEMA","ALTER MATERIALIZED VIEW","ALTER VIEW","CREATE SCHEMA","CREATE ROLE","DROP SCHEMA","DROP MATERIALIZED VIEW","DROP VIEW","DROP ROLE","EXPLAIN","ANALYZE","EXPLAIN ANALYZE","EXPLAIN ANALYZE VERBOSE","USE","DESCRIBE INPUT","DESCRIBE OUTPUT","REFRESH MATERIALIZED VIEW","RESET SESSION","SET SESSION","SET PATH","SET TIME ZONE","SHOW GRANTS","SHOW CREATE TABLE","SHOW CREATE SCHEMA","SHOW CREATE VIEW","SHOW CREATE MATERIALIZED VIEW","SHOW TABLES","SHOW SCHEMAS","SHOW CATALOGS","SHOW COLUMNS","SHOW STATS FOR","SHOW ROLES","SHOW CURRENT ROLES","SHOW ROLE GRANTS","SHOW FUNCTIONS","SHOW SESSION"]),NM=C(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),pM=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),CM=C(["{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM"]),mM={name:"trino",tokenizerOptions:{reservedSelect:OM,reservedClauses:[...IM,...hc,...vo],reservedSetOperations:NM,reservedJoins:pM,reservedPhrases:CM,reservedKeywords:SM,reservedDataTypes:dM,reservedFunctionNames:fM,extraParens:["[]","{}"],stringTypes:[{quote:"''-qq",prefixes:["U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq'],paramTypes:{positional:!0},operators:["%","->","=>",":","||","|","^","$"]},formatOptions:{onelineClauses:[...hc,...vo],tabularOnelineClauses:vo}},LM=["APPROX_COUNT_DISTINCT","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","STDEV","STDEVP","SUM","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","Collation - COLLATIONPROPERTY","Collation - TERTIARY_WEIGHTS","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","@@CURSOR_ROWS","@@FETCH_STATUS","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","@@DATEFIRST","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TIMEZONE_ID","DATEADD","DATEDIFF","DATEDIFF_BIG","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","JSON","ISJSON","JSON_VALUE","JSON_QUERY","JSON_MODIFY","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","CHOOSE","GREATEST","IIF","LEAST","@@PROCID","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FILEPROPERTYEX","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","NEXT VALUE FOR","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","DATABASE_PRINCIPAL_ID","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHARINDEX","CONCAT","CONCAT_WS","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STRING_AGG","STRING_ESCAPE","STUFF","SUBSTRING","TRANSLATE","TRIM","UNICODE","UPPER","$PARTITION","@@ERROR","@@IDENTITY","@@PACK_RECEIVED","@@ROWCOUNT","@@TRANCOUNT","BINARY_CHECKSUM","CHECKSUM","COMPRESS","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","CURRENT_TRANSACTION_ID","DECOMPRESS","ERROR_LINE","ERROR_MESSAGE","ERROR_NUMBER","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GET_FILESTREAM_TRANSACTION_CONTEXT","GETANSINULL","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","SESSION_CONTEXT","XACT_STATE","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACK_SENT","@@PACKET_ERRORS","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","COALESCE","NULLIF"],_M=["ADD","ALL","ALTER","AND","ANY","AS","ASC","AUTHORIZATION","BACKUP","BEGIN","BETWEEN","BREAK","BROWSE","BULK","BY","CASCADE","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLUMN","COMMIT","COMPUTE","CONSTRAINT","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DBCC","DEALLOCATE","DECLARE","DEFAULT","DELETE","DENY","DESC","DISK","DISTINCT","DISTRIBUTED","DROP","DUMP","ERRLVL","ESCAPE","EXEC","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FILE","FILLFACTOR","FOR","FOREIGN","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GOTO","GRANT","GROUP","HAVING","HOLDLOCK","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IN","INDEX","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KILL","LEFT","LIKE","LINENO","LOAD","MERGE","NOCHECK","NONCLUSTERED","NOT","NULL","NULLIF","OF","OFF","OFFSETS","ON","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OUTER","OVER","PERCENT","PIVOT","PLAN","PRIMARY","PRINT","PROC","PROCEDURE","PUBLIC","RAISERROR","READ","READTEXT","RECONFIGURE","REFERENCES","REPLICATION","RESTORE","RESTRICT","RETURN","REVERT","REVOKE","RIGHT","ROLLBACK","ROWCOUNT","ROWGUIDCOL","RULE","SAVE","SCHEMA","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION_USER","SET","SETUSER","SHUTDOWN","SOME","STATISTICS","SYSTEM_USER","TABLE","TABLESAMPLE","TEXTSIZE","THEN","TO","TOP","TRAN","TRANSACTION","TRIGGER","TRUNCATE","TRY_CONVERT","TSEQUAL","UNION","UNIQUE","UNPIVOT","UPDATE","UPDATETEXT","USE","USER","VALUES","VIEW","WAITFOR","WHERE","WHILE","WITH","WITHIN GROUP","WRITETEXT","$ACTION"],gM=["BINARY","BIT","CHAR","CHAR","CHARACTER","DATE","DATETIME2","DATETIMEOFFSET","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","NATIONAL","NCHAR","NUMERIC","NVARCHAR","PRECISION","REAL","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"],PM=C(["SELECT [ALL | DISTINCT]"]),DM=C(["WITH","INTO","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","OFFSET","FETCH {FIRST | NEXT}","FOR {BROWSE | XML | JSON}","OPTION","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY TARGET | BY SOURCE] [THEN]","UPDATE SET","CREATE [OR ALTER] {PROC | PROCEDURE}"]),Ac=C(["CREATE TABLE"]),wo=C(["CREATE [OR ALTER] [MATERIALIZED] VIEW","UPDATE","WHERE CURRENT OF","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD","DROP COLUMN [IF EXISTS]","ALTER COLUMN","TRUNCATE TABLE","CREATE [UNIQUE] [CLUSTERED] INDEX","CREATE DATABASE","ALTER DATABASE","DROP DATABASE [IF EXISTS]","GO","USE","ADD SENSITIVITY CLASSIFICATION","ADD SIGNATURE","AGGREGATE","ANSI_DEFAULTS","ANSI_NULLS","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_PADDING","ANSI_WARNINGS","APPLICATION ROLE","ARITHABORT","ARITHIGNORE","ASSEMBLY","ASYMMETRIC KEY","AUTHORIZATION","AVAILABILITY GROUP","BACKUP","BACKUP CERTIFICATE","BACKUP MASTER KEY","BACKUP SERVICE MASTER KEY","BEGIN CONVERSATION TIMER","BEGIN DIALOG CONVERSATION","BROKER PRIORITY","BULK INSERT","CERTIFICATE","CLOSE MASTER KEY","CLOSE SYMMETRIC KEY","COLLATE","COLUMN ENCRYPTION KEY","COLUMN MASTER KEY","COLUMNSTORE INDEX","CONCAT_NULL_YIELDS_NULL","CONTEXT_INFO","CONTRACT","CREDENTIAL","CRYPTOGRAPHIC PROVIDER","CURSOR_CLOSE_ON_COMMIT","DATABASE","DATABASE AUDIT SPECIFICATION","DATABASE ENCRYPTION KEY","DATABASE HADR","DATABASE SCOPED CONFIGURATION","DATABASE SCOPED CREDENTIAL","DATABASE SET","DATEFIRST","DATEFORMAT","DEADLOCK_PRIORITY","DENY","DENY XML","DISABLE TRIGGER","ENABLE TRIGGER","END CONVERSATION","ENDPOINT","EVENT NOTIFICATION","EVENT SESSION","EXECUTE AS","EXTERNAL DATA SOURCE","EXTERNAL FILE FORMAT","EXTERNAL LANGUAGE","EXTERNAL LIBRARY","EXTERNAL RESOURCE POOL","EXTERNAL TABLE","FIPS_FLAGGER","FMTONLY","FORCEPLAN","FULLTEXT CATALOG","FULLTEXT INDEX","FULLTEXT STOPLIST","FUNCTION","GET CONVERSATION GROUP","GET_TRANSMISSION_STATUS","GRANT","GRANT XML","IDENTITY_INSERT","IMPLICIT_TRANSACTIONS","INDEX","LANGUAGE","LOCK_TIMEOUT","LOGIN","MASTER KEY","MESSAGE TYPE","MOVE CONVERSATION","NOCOUNT","NOEXEC","NUMERIC_ROUNDABORT","OFFSETS","OPEN MASTER KEY","OPEN SYMMETRIC KEY","PARSEONLY","PARTITION FUNCTION","PARTITION SCHEME","PROCEDURE","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUOTED_IDENTIFIER","RECEIVE","REMOTE SERVICE BINDING","REMOTE_PROC_TRANSACTIONS","RESOURCE GOVERNOR","RESOURCE POOL","RESTORE","RESTORE FILELISTONLY","RESTORE HEADERONLY","RESTORE LABELONLY","RESTORE MASTER KEY","RESTORE REWINDONLY","RESTORE SERVICE MASTER KEY","RESTORE VERIFYONLY","REVERT","REVOKE","REVOKE XML","ROLE","ROUTE","ROWCOUNT","RULE","SCHEMA","SEARCH PROPERTY LIST","SECURITY POLICY","SELECTIVE XML INDEX","SEND","SENSITIVITY CLASSIFICATION","SEQUENCE","SERVER AUDIT","SERVER AUDIT SPECIFICATION","SERVER CONFIGURATION","SERVER ROLE","SERVICE","SERVICE MASTER KEY","SETUSER","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SIGNATURE","SPATIAL INDEX","STATISTICS","STATISTICS IO","STATISTICS PROFILE","STATISTICS TIME","STATISTICS XML","SYMMETRIC KEY","SYNONYM","TABLE","TABLE IDENTITY","TEXTSIZE","TRANSACTION ISOLATION LEVEL","TRIGGER","TYPE","UPDATE STATISTICS","USER","WORKLOAD GROUP","XACT_ABORT","XML INDEX","XML SCHEMA COLLECTION"]),MM=C(["UNION [ALL]","EXCEPT","INTERSECT"]),UM=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{CROSS | OUTER} APPLY"]),yM=C(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),xM={name:"transactsql",tokenizerOptions:{reservedSelect:PM,reservedClauses:[...DM,...Ac,...wo],reservedSetOperations:MM,reservedJoins:UM,reservedPhrases:yM,reservedKeywords:_M,reservedDataTypes:gM,reservedFunctionNames:LM,nestedBlockComments:!0,stringTypes:[{quote:"''-qq",prefixes:["N"]}],identTypes:['""-qq',"[]"],identChars:{first:"#@",rest:"#@$"},paramTypes:{named:["@"],quoted:["@"]},operators:["%","&","|","^","~","!<","!>","+=","-=","*=","/=","%=","|=","&=","^=","::",":"],propertyAccessOperators:[".."]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Ac,...wo],tabularOnelineClauses:wo}},bM=["ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","_BINARY","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","EXTRA_JOIN","FALSE","FETCH","FOR","FORCE","FORCE_COMPILED_MODE","FORCE_INTERPRETER_MODE","FOREIGN","FROM","FULL","FULLTEXT","GRANT","GROUP","HAVING","HEARTBEAT_NO_LOGGING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","_INTERNAL_DYNAMIC_TYPECAST","INTERSECT","INTERVAL","INTO","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MATCH","MAXVALUE","MINUS","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NO_QUERY_REWRITE","NOT","NO_WRITE_TO_BINLOG","NO_QUERY_REWRITE","NULL","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RIGHT_ANTI_JOIN","RIGHT_SEMI_JOIN","RIGHT_STRAIGHT_JOIN","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SEMI_JOIN","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQL_BIG_RESULT","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQLEXCEPTION","SQL_NO_CACHE","SQL_NO_LOGGING","SQL_SMALL_RESULT","SQLSTATE","SQLWARNING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNBOUNDED","UNDO","UNION","UNIQUE","UNLOCK","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","_UTF8","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WRITE","XOR","YEAR_MONTH","ZEROFILL"],BM=["BIGINT","BINARY","BIT","BLOB","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","UNSIGNED","VARBINARY","VARCHAR","VARCHARACTER","YEAR"],GM=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_ACCUMULATE","APPROX_COUNT_DISTINCT_COMBINE","APPROX_COUNT_DISTINCT_ESTIMATE","APPROX_GEOGRAPHY_INTERSECTS","APPROX_PERCENTILE","ASCII","ASIN","ATAN","ATAN2","AVG","BIN","BINARY","BIT_AND","BIT_COUNT","BIT_OR","BIT_XOR","CAST","CEIL","CEILING","CHAR","CHARACTER_LENGTH","CHAR_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COLLECT","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATEDIFF","DATE_FORMAT","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT","DEGREES","DENSE_RANK","DIV","DOT_PRODUCT","ELT","EUCLIDEAN_DISTANCE","EXP","EXTRACT","FIELD","FIRST","FIRST_VALUE","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOGRAPHY_AREA","GEOGRAPHY_CONTAINS","GEOGRAPHY_DISTANCE","GEOGRAPHY_INTERSECTS","GEOGRAPHY_LATITUDE","GEOGRAPHY_LENGTH","GEOGRAPHY_LONGITUDE","GEOGRAPHY_POINT","GEOGRAPHY_WITHIN_DISTANCE","GEOMETRY_AREA","GEOMETRY_CONTAINS","GEOMETRY_DISTANCE","GEOMETRY_FILTER","GEOMETRY_INTERSECTS","GEOMETRY_LENGTH","GEOMETRY_POINT","GEOMETRY_WITHIN_DISTANCE","GEOMETRY_X","GEOMETRY_Y","GREATEST","GROUPING","GROUP_CONCAT","HEX","HIGHLIGHT","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INITCAP","INSERT","INSTR","INTERVAL","IS","IS NULL","JSON_AGG","JSON_ARRAY_CONTAINS_DOUBLE","JSON_ARRAY_CONTAINS_JSON","JSON_ARRAY_CONTAINS_STRING","JSON_ARRAY_PUSH_DOUBLE","JSON_ARRAY_PUSH_JSON","JSON_ARRAY_PUSH_STRING","JSON_DELETE_KEY","JSON_EXTRACT_DOUBLE","JSON_EXTRACT_JSON","JSON_EXTRACT_STRING","JSON_EXTRACT_BIGINT","JSON_GET_TYPE","JSON_LENGTH","JSON_SET_DOUBLE","JSON_SET_JSON","JSON_SET_STRING","JSON_SPLICE_DOUBLE","JSON_SPLICE_JSON","JSON_SPLICE_STRING","LAG","LAST_DAY","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LN","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LPAD","LTRIM","MATCH","MAX","MD5","MEDIAN","MICROSECOND","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","NOT","NOW","NTH_VALUE","NTILE","NULLIF","OCTET_LENGTH","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIVOT","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANK","REGEXP","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCALAR","SCHEMA","SEC_TO_TIME","SHA1","SHA2","SIGMOID","SIGN","SIN","SLEEP","SPLIT","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUM","SYS_GUID","TAN","TIME","TIMEDIFF","TIME_BUCKET","TIME_FORMAT","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_JSON","TO_NUMBER","TO_SECONDS","TO_TIMESTAMP","TRIM","TRUNC","TRUNCATE","UCASE","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","VALUES","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_SUB","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","YEAR"],HM=C(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),vM=C(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [IGNORE] [INTO]","VALUES","REPLACE [INTO]","ON DUPLICATE KEY UPDATE","SET","CREATE [OR REPLACE] [TEMPORARY] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] [EXTERNAL] FUNCTION"]),Rc=C(["CREATE [ROWSTORE] [REFERENCE | TEMPORARY | GLOBAL TEMPORARY] TABLE [IF NOT EXISTS]"]),Fo=C(["CREATE VIEW","UPDATE","DELETE [FROM]","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] TABLE","ADD [COLUMN]","ADD [UNIQUE] {INDEX | KEY}","DROP [COLUMN]","MODIFY [COLUMN]","CHANGE","RENAME [TO | AS]","TRUNCATE [TABLE]","ADD AGGREGATOR","ADD LEAF","AGGREGATOR SET AS MASTER","ALTER DATABASE","ALTER PIPELINE","ALTER RESOURCE POOL","ALTER USER","ALTER VIEW","ANALYZE TABLE","ATTACH DATABASE","ATTACH LEAF","ATTACH LEAF ALL","BACKUP DATABASE","BINLOG","BOOTSTRAP AGGREGATOR","CACHE INDEX","CALL","CHANGE","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK BLOB CHECKSUM","CHECK TABLE","CHECKSUM TABLE","CLEAR ORPHAN DATABASES","CLONE","COMMIT","CREATE DATABASE","CREATE GROUP","CREATE INDEX","CREATE LINK","CREATE MILESTONE","CREATE PIPELINE","CREATE RESOURCE POOL","CREATE ROLE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DETACH DATABASE","DETACH PIPELINE","DROP DATABASE","DROP FUNCTION","DROP INDEX","DROP LINK","DROP PIPELINE","DROP PROCEDURE","DROP RESOURCE POOL","DROP ROLE","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","FORCE","GRANT","HANDLER","HELP","KILL CONNECTION","KILLALL QUERIES","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","REBALANCE PARTITIONS","RELEASE SAVEPOINT","REMOVE AGGREGATOR","REMOVE LEAF","REPAIR TABLE","REPLACE","REPLICATE DATABASE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","RESTORE DATABASE","RESTORE REDUNDANCY","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE FUNCTION","SHOW CREATE PIPELINE","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SNAPSHOT DATABASE","SOURCE_POS_WAIT","START GROUP_REPLICATION","START PIPELINE","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP PIPELINE","STOP REPLICA","STOP REPLICATING","STOP SLAVE","TEST PIPELINE","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),wM=C(["UNION [ALL | DISTINCT]","EXCEPT","INTERSECT","MINUS"]),FM=C(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),YM=C(["ON DELETE","ON UPDATE","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),kM={name:"singlestoredb",tokenizerOptions:{reservedSelect:HM,reservedClauses:[...vM,...Rc,...Fo],reservedSetOperations:wM,reservedJoins:FM,reservedPhrases:YM,reservedKeywords:bM,reservedDataTypes:BM,reservedFunctionNames:GM,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_$]+"},{quote:"``",prefixes:["@"],requirePrefix:!0}],lineCommentTypes:["--","#"],operators:[":=","&","|","^","~","<<",">>","<=>","&&","||","::","::$","::%",":>","!:>","*.*"],postProcess:wr},formatOptions:{alwaysDenseOperators:["::","::$","::%"],onelineClauses:[...Rc,...Fo],tabularOnelineClauses:Fo}},VM=["ABS","ACOS","ACOSH","ADD_MONTHS","ALL_USER_NAMES","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","APPROX_PERCENTILE_ACCUMULATE","APPROX_PERCENTILE_COMBINE","APPROX_PERCENTILE_ESTIMATE","APPROX_TOP_K","APPROX_TOP_K_ACCUMULATE","APPROX_TOP_K_COMBINE","APPROX_TOP_K_ESTIMATE","APPROXIMATE_JACCARD_INDEX","APPROXIMATE_SIMILARITY","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_COMPACT","ARRAY_CONSTRUCT","ARRAY_CONSTRUCT_COMPACT","ARRAY_CONTAINS","ARRAY_INSERT","ARRAY_INTERSECTION","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_SIZE","ARRAY_SLICE","ARRAY_TO_STRING","ARRAY_UNION_AGG","ARRAY_UNIQUE_AGG","ARRAYS_OVERLAP","AS_ARRAY","AS_BINARY","AS_BOOLEAN","AS_CHAR","AS_VARCHAR","AS_DATE","AS_DECIMAL","AS_NUMBER","AS_DOUBLE","AS_REAL","AS_INTEGER","AS_OBJECT","AS_TIME","AS_TIMESTAMP_LTZ","AS_TIMESTAMP_NTZ","AS_TIMESTAMP_TZ","ASCII","ASIN","ASINH","ATAN","ATAN2","ATANH","AUTO_REFRESH_REGISTRATION_HISTORY","AUTOMATIC_CLUSTERING_HISTORY","AVG","BASE64_DECODE_BINARY","BASE64_DECODE_STRING","BASE64_ENCODE","BIT_LENGTH","BITAND","BITAND_AGG","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITNOT","BITOR","BITOR_AGG","BITSHIFTLEFT","BITSHIFTRIGHT","BITXOR","BITXOR_AGG","BOOLAND","BOOLAND_AGG","BOOLNOT","BOOLOR","BOOLOR_AGG","BOOLXOR","BOOLXOR_AGG","BUILD_SCOPED_FILE_URL","BUILD_STAGE_FILE_URL","CASE","CAST","CBRT","CEIL","CHARINDEX","CHECK_JSON","CHECK_XML","CHR","CHAR","COALESCE","COLLATE","COLLATION","COMPLETE_TASK_GRAPHS","COMPRESS","CONCAT","CONCAT_WS","CONDITIONAL_CHANGE_EVENT","CONDITIONAL_TRUE_EVENT","CONTAINS","CONVERT_TIMEZONE","COPY_HISTORY","CORR","COS","COSH","COT","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CUME_DIST","CURRENT_ACCOUNT","CURRENT_AVAILABLE_ROLES","CURRENT_CLIENT","CURRENT_DATABASE","CURRENT_DATE","CURRENT_IP_ADDRESS","CURRENT_REGION","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SECONDARY_ROLES","CURRENT_SESSION","CURRENT_STATEMENT","CURRENT_TASK_GRAPHS","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSACTION","CURRENT_USER","CURRENT_VERSION","CURRENT_WAREHOUSE","DATA_TRANSFER_HISTORY","DATABASE_REFRESH_HISTORY","DATABASE_REFRESH_PROGRESS","DATABASE_REFRESH_PROGRESS_BY_JOB","DATABASE_STORAGE_USAGE_HISTORY","DATE_FROM_PARTS","DATE_PART","DATE_TRUNC","DATEADD","DATEDIFF","DAYNAME","DECODE","DECOMPRESS_BINARY","DECOMPRESS_STRING","DECRYPT","DECRYPT_RAW","DEGREES","DENSE_RANK","DIV0","EDITDISTANCE","ENCRYPT","ENCRYPT_RAW","ENDSWITH","EQUAL_NULL","EXP","EXPLAIN_JSON","EXTERNAL_FUNCTIONS_HISTORY","EXTERNAL_TABLE_FILES","EXTERNAL_TABLE_FILE_REGISTRATION_HISTORY","EXTRACT","EXTRACT_SEMANTIC_CATEGORIES","FACTORIAL","FILTER","FIRST_VALUE","FLATTEN","FLOOR","GENERATE_COLUMN_DESCRIPTION","GENERATOR","GET","GET_ABSOLUTE_PATH","GET_DDL","GET_IGNORE_CASE","GET_OBJECT_REFERENCES","GET_PATH","GET_PRESIGNED_URL","GET_RELATIVE_PATH","GET_STAGE_LOCATION","GETBIT","GREATEST","GREATEST_IGNORE_NULLS","GROUPING","GROUPING_ID","HASH","HASH_AGG","HAVERSINE","HEX_DECODE_BINARY","HEX_DECODE_STRING","HEX_ENCODE","HLL","HLL_ACCUMULATE","HLL_COMBINE","HLL_ESTIMATE","HLL_EXPORT","HLL_IMPORT","HOUR","MINUTE","SECOND","IFF","IFNULL","ILIKE","ILIKE ANY","INFER_SCHEMA","INITCAP","INSERT","INVOKER_ROLE","INVOKER_SHARE","IS_ARRAY","IS_BINARY","IS_BOOLEAN","IS_CHAR","IS_VARCHAR","IS_DATE","IS_DATE_VALUE","IS_DECIMAL","IS_DOUBLE","IS_REAL","IS_GRANTED_TO_INVOKER_ROLE","IS_INTEGER","IS_NULL_VALUE","IS_OBJECT","IS_ROLE_IN_SESSION","IS_TIME","IS_TIMESTAMP_LTZ","IS_TIMESTAMP_NTZ","IS_TIMESTAMP_TZ","JAROWINKLER_SIMILARITY","JSON_EXTRACT_PATH_TEXT","KURTOSIS","LAG","LAST_DAY","LAST_QUERY_ID","LAST_TRANSACTION","LAST_VALUE","LEAD","LEAST","LEFT","LENGTH","LEN","LIKE","LIKE ALL","LIKE ANY","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOGIN_HISTORY","LOGIN_HISTORY_BY_USER","LOWER","LPAD","LTRIM","MATERIALIZED_VIEW_REFRESH_HISTORY","MD5","MD5_HEX","MD5_BINARY","MD5_NUMBER — Obsoleted","MD5_NUMBER_LOWER64","MD5_NUMBER_UPPER64","MEDIAN","MIN","MAX","MINHASH","MINHASH_COMBINE","MOD","MODE","MONTHNAME","MONTHS_BETWEEN","NEXT_DAY","NORMAL","NTH_VALUE","NTILE","NULLIF","NULLIFZERO","NVL","NVL2","OBJECT_AGG","OBJECT_CONSTRUCT","OBJECT_CONSTRUCT_KEEP_NULL","OBJECT_DELETE","OBJECT_INSERT","OBJECT_KEYS","OBJECT_PICK","OCTET_LENGTH","PARSE_IP","PARSE_JSON","PARSE_URL","PARSE_XML","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIPE_USAGE_HISTORY","POLICY_CONTEXT","POLICY_REFERENCES","POSITION","POW","POWER","PREVIOUS_DAY","QUERY_ACCELERATION_HISTORY","QUERY_HISTORY","QUERY_HISTORY_BY_SESSION","QUERY_HISTORY_BY_USER","QUERY_HISTORY_BY_WAREHOUSE","RADIANS","RANDOM","RANDSTR","RANK","RATIO_TO_REPORT","REGEXP","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGEXP_SUBSTR_ALL","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGR_VALX","REGR_VALY","REPEAT","REPLACE","REPLICATION_GROUP_REFRESH_HISTORY","REPLICATION_GROUP_REFRESH_PROGRESS","REPLICATION_GROUP_REFRESH_PROGRESS_BY_JOB","REPLICATION_GROUP_USAGE_HISTORY","REPLICATION_USAGE_HISTORY","REST_EVENT_HISTORY","RESULT_SCAN","REVERSE","RIGHT","RLIKE","ROUND","ROW_NUMBER","RPAD","RTRIM","RTRIMMED_LENGTH","SEARCH_OPTIMIZATION_HISTORY","SEQ1","SEQ2","SEQ4","SEQ8","SERVERLESS_TASK_HISTORY","SHA1","SHA1_HEX","SHA1_BINARY","SHA2","SHA2_HEX","SHA2_BINARY","SIGN","SIN","SINH","SKEW","SOUNDEX","SPACE","SPLIT","SPLIT_PART","SPLIT_TO_TABLE","SQRT","SQUARE","ST_AREA","ST_ASEWKB","ST_ASEWKT","ST_ASGEOJSON","ST_ASWKB","ST_ASBINARY","ST_ASWKT","ST_ASTEXT","ST_AZIMUTH","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DWITHIN","ST_ENDPOINT","ST_ENVELOPE","ST_GEOGFROMGEOHASH","ST_GEOGPOINTFROMGEOHASH","ST_GEOGRAPHYFROMWKB","ST_GEOGRAPHYFROMWKT","ST_GEOHASH","ST_GEOMETRYFROMWKB","ST_GEOMETRYFROMWKT","ST_HAUSDORFFDISTANCE","ST_INTERSECTION","ST_INTERSECTS","ST_LENGTH","ST_MAKEGEOMPOINT","ST_GEOM_POINT","ST_MAKELINE","ST_MAKEPOINT","ST_POINT","ST_MAKEPOLYGON","ST_POLYGON","ST_NPOINTS","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SETSRID","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","STAGE_DIRECTORY_FILE_REGISTRATION_HISTORY","STAGE_STORAGE_USAGE_HISTORY","STARTSWITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRIP_NULL_VALUE","STRTOK","STRTOK_SPLIT_TO_TABLE","STRTOK_TO_ARRAY","SUBSTR","SUBSTRING","SUM","SYSDATE","SYSTEM$ABORT_SESSION","SYSTEM$ABORT_TRANSACTION","SYSTEM$AUTHORIZE_PRIVATELINK","SYSTEM$AUTHORIZE_STAGE_PRIVATELINK_ACCESS","SYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS","SYSTEM$CANCEL_ALL_QUERIES","SYSTEM$CANCEL_QUERY","SYSTEM$CLUSTERING_DEPTH","SYSTEM$CLUSTERING_INFORMATION","SYSTEM$CLUSTERING_RATIO ","SYSTEM$CURRENT_USER_TASK_NAME","SYSTEM$DATABASE_REFRESH_HISTORY ","SYSTEM$DATABASE_REFRESH_PROGRESS","SYSTEM$DATABASE_REFRESH_PROGRESS_BY_JOB ","SYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$DISABLE_DATABASE_REPLICATION","SYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$ESTIMATE_QUERY_ACCELERATION","SYSTEM$ESTIMATE_SEARCH_OPTIMIZATION_COSTS","SYSTEM$EXPLAIN_JSON_TO_TEXT","SYSTEM$EXPLAIN_PLAN_JSON","SYSTEM$EXTERNAL_TABLE_PIPE_STATUS","SYSTEM$GENERATE_SAML_CSR","SYSTEM$GENERATE_SCIM_ACCESS_TOKEN","SYSTEM$GET_AWS_SNS_IAM_POLICY","SYSTEM$GET_PREDECESSOR_RETURN_VALUE","SYSTEM$GET_PRIVATELINK","SYSTEM$GET_PRIVATELINK_AUTHORIZED_ENDPOINTS","SYSTEM$GET_PRIVATELINK_CONFIG","SYSTEM$GET_SNOWFLAKE_PLATFORM_INFO","SYSTEM$GET_TAG","SYSTEM$GET_TAG_ALLOWED_VALUES","SYSTEM$GET_TAG_ON_CURRENT_COLUMN","SYSTEM$GET_TAG_ON_CURRENT_TABLE","SYSTEM$GLOBAL_ACCOUNT_SET_PARAMETER","SYSTEM$LAST_CHANGE_COMMIT_TIME","SYSTEM$LINK_ACCOUNT_OBJECTS_BY_NAME","SYSTEM$MIGRATE_SAML_IDP_REGISTRATION","SYSTEM$PIPE_FORCE_RESUME","SYSTEM$PIPE_STATUS","SYSTEM$REVOKE_PRIVATELINK","SYSTEM$REVOKE_STAGE_PRIVATELINK_ACCESS","SYSTEM$SET_RETURN_VALUE","SYSTEM$SHOW_OAUTH_CLIENT_SECRETS","SYSTEM$STREAM_GET_TABLE_TIMESTAMP","SYSTEM$STREAM_HAS_DATA","SYSTEM$TASK_DEPENDENTS_ENABLE","SYSTEM$TYPEOF","SYSTEM$USER_TASK_CANCEL_ONGOING_EXECUTIONS","SYSTEM$VERIFY_EXTERNAL_OAUTH_TOKEN","SYSTEM$WAIT","SYSTEM$WHITELIST","SYSTEM$WHITELIST_PRIVATELINK","TAG_REFERENCES","TAG_REFERENCES_ALL_COLUMNS","TAG_REFERENCES_WITH_LINEAGE","TAN","TANH","TASK_DEPENDENTS","TASK_HISTORY","TIME_FROM_PARTS","TIME_SLICE","TIMEADD","TIMEDIFF","TIMESTAMP_FROM_PARTS","TIMESTAMPADD","TIMESTAMPDIFF","TO_ARRAY","TO_BINARY","TO_BOOLEAN","TO_CHAR","TO_VARCHAR","TO_DATE","DATE","TO_DECIMAL","TO_NUMBER","TO_NUMERIC","TO_DOUBLE","TO_GEOGRAPHY","TO_GEOMETRY","TO_JSON","TO_OBJECT","TO_TIME","TIME","TO_TIMESTAMP","TO_TIMESTAMP_LTZ","TO_TIMESTAMP_NTZ","TO_TIMESTAMP_TZ","TO_VARIANT","TO_XML","TRANSLATE","TRIM","TRUNCATE","TRUNC","TRUNC","TRY_BASE64_DECODE_BINARY","TRY_BASE64_DECODE_STRING","TRY_CAST","TRY_HEX_DECODE_BINARY","TRY_HEX_DECODE_STRING","TRY_PARSE_JSON","TRY_TO_BINARY","TRY_TO_BOOLEAN","TRY_TO_DATE","TRY_TO_DECIMAL","TRY_TO_NUMBER","TRY_TO_NUMERIC","TRY_TO_DOUBLE","TRY_TO_GEOGRAPHY","TRY_TO_GEOMETRY","TRY_TO_TIME","TRY_TO_TIMESTAMP","TRY_TO_TIMESTAMP_LTZ","TRY_TO_TIMESTAMP_NTZ","TRY_TO_TIMESTAMP_TZ","TYPEOF","UNICODE","UNIFORM","UPPER","UUID_STRING","VALIDATE","VALIDATE_PIPE_LOAD","VAR_POP","VAR_SAMP","VARIANCE","VARIANCE_SAMP","VARIANCE_POP","WAREHOUSE_LOAD_HISTORY","WAREHOUSE_METERING_HISTORY","WIDTH_BUCKET","XMLGET","YEAR","YEAROFWEEK","YEAROFWEEKISO","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFWEEKISO","DAYOFYEAR","WEEK","WEEK","WEEKOFYEAR","WEEKISO","MONTH","QUARTER","ZEROIFNULL","ZIPF"],WM=["ACCOUNT","ALL","ALTER","AND","ANY","AS","BETWEEN","BY","CASE","CAST","CHECK","COLUMN","CONNECT","CONNECTION","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATABASE","DELETE","DISTINCT","DROP","ELSE","EXISTS","FALSE","FOLLOWING","FOR","FROM","FULL","GRANT","GROUP","GSCLUSTER","HAVING","ILIKE","IN","INCREMENT","INNER","INSERT","INTERSECT","INTO","IS","ISSUE","JOIN","LATERAL","LEFT","LIKE","LOCALTIME","LOCALTIMESTAMP","MINUS","NATURAL","NOT","NULL","OF","ON","OR","ORDER","ORGANIZATION","QUALIFY","REGEXP","REVOKE","RIGHT","RLIKE","ROW","ROWS","SAMPLE","SCHEMA","SELECT","SET","SOME","START","TABLE","TABLESAMPLE","THEN","TO","TRIGGER","TRUE","TRY_CAST","UNION","UNIQUE","UPDATE","USING","VALUES","VIEW","WHEN","WHENEVER","WHERE","WITH","COMMENT"],XM=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY","GEOMETRY"],KM=C(["SELECT [ALL | DISTINCT]"]),$M=C(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","QUALIFY","LIMIT","OFFSET","FETCH [FIRST | NEXT]","INSERT [OVERWRITE] [ALL INTO | INTO | ALL | FIRST]","{THEN | ELSE} INTO","VALUES","SET","CLUSTER BY","[WITH] {MASKING POLICY | TAG | ROW ACCESS POLICY}","COPY GRANTS","USING TEMPLATE","MERGE INTO","WHEN MATCHED [AND]","THEN {UPDATE SET | DELETE}","WHEN NOT MATCHED THEN INSERT"]),uc=C(["CREATE [OR REPLACE] [VOLATILE] TABLE [IF NOT EXISTS]","CREATE [OR REPLACE] [LOCAL | GLOBAL] {TEMP|TEMPORARY} TABLE [IF NOT EXISTS]"]),Yo=C(["CREATE [OR REPLACE] [SECURE] [RECURSIVE] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","RENAME TO","SWAP WITH","[SUSPEND | RESUME] RECLUSTER","DROP CLUSTERING KEY","ADD [COLUMN]","RENAME COLUMN","{ALTER | MODIFY} [COLUMN]","DROP [COLUMN]","{ADD | ALTER | MODIFY | DROP} [CONSTRAINT]","RENAME CONSTRAINT","{ADD | DROP} SEARCH OPTIMIZATION","{SET | UNSET} TAG","{ADD | DROP} ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","SET DATA TYPE","UNSET COMMENT","{SET | UNSET} MASKING POLICY","TRUNCATE [TABLE] [IF EXISTS]","ALTER ACCOUNT","ALTER API INTEGRATION","ALTER CONNECTION","ALTER DATABASE","ALTER EXTERNAL TABLE","ALTER FAILOVER GROUP","ALTER FILE FORMAT","ALTER FUNCTION","ALTER INTEGRATION","ALTER MASKING POLICY","ALTER MATERIALIZED VIEW","ALTER NETWORK POLICY","ALTER NOTIFICATION INTEGRATION","ALTER PIPE","ALTER PROCEDURE","ALTER REPLICATION GROUP","ALTER RESOURCE MONITOR","ALTER ROLE","ALTER ROW ACCESS POLICY","ALTER SCHEMA","ALTER SECURITY INTEGRATION","ALTER SEQUENCE","ALTER SESSION","ALTER SESSION POLICY","ALTER SHARE","ALTER STAGE","ALTER STORAGE INTEGRATION","ALTER STREAM","ALTER TAG","ALTER TASK","ALTER USER","ALTER VIEW","ALTER WAREHOUSE","BEGIN","CALL","COMMIT","COPY INTO","CREATE ACCOUNT","CREATE API INTEGRATION","CREATE CONNECTION","CREATE DATABASE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL TABLE","CREATE FAILOVER GROUP","CREATE FILE FORMAT","CREATE FUNCTION","CREATE INTEGRATION","CREATE MANAGED ACCOUNT","CREATE MASKING POLICY","CREATE MATERIALIZED VIEW","CREATE NETWORK POLICY","CREATE NOTIFICATION INTEGRATION","CREATE PIPE","CREATE PROCEDURE","CREATE REPLICATION GROUP","CREATE RESOURCE MONITOR","CREATE ROLE","CREATE ROW ACCESS POLICY","CREATE SCHEMA","CREATE SECURITY INTEGRATION","CREATE SEQUENCE","CREATE SESSION POLICY","CREATE SHARE","CREATE STAGE","CREATE STORAGE INTEGRATION","CREATE STREAM","CREATE TAG","CREATE TASK","CREATE USER","CREATE WAREHOUSE","DELETE","DESCRIBE DATABASE","DESCRIBE EXTERNAL TABLE","DESCRIBE FILE FORMAT","DESCRIBE FUNCTION","DESCRIBE INTEGRATION","DESCRIBE MASKING POLICY","DESCRIBE MATERIALIZED VIEW","DESCRIBE NETWORK POLICY","DESCRIBE PIPE","DESCRIBE PROCEDURE","DESCRIBE RESULT","DESCRIBE ROW ACCESS POLICY","DESCRIBE SCHEMA","DESCRIBE SEQUENCE","DESCRIBE SESSION POLICY","DESCRIBE SHARE","DESCRIBE STAGE","DESCRIBE STREAM","DESCRIBE TABLE","DESCRIBE TASK","DESCRIBE TRANSACTION","DESCRIBE USER","DESCRIBE VIEW","DESCRIBE WAREHOUSE","DROP CONNECTION","DROP DATABASE","DROP EXTERNAL TABLE","DROP FAILOVER GROUP","DROP FILE FORMAT","DROP FUNCTION","DROP INTEGRATION","DROP MANAGED ACCOUNT","DROP MASKING POLICY","DROP MATERIALIZED VIEW","DROP NETWORK POLICY","DROP PIPE","DROP PROCEDURE","DROP REPLICATION GROUP","DROP RESOURCE MONITOR","DROP ROLE","DROP ROW ACCESS POLICY","DROP SCHEMA","DROP SEQUENCE","DROP SESSION POLICY","DROP SHARE","DROP STAGE","DROP STREAM","DROP TAG","DROP TASK","DROP USER","DROP VIEW","DROP WAREHOUSE","EXECUTE IMMEDIATE","EXECUTE TASK","EXPLAIN","GET","GRANT OWNERSHIP","GRANT ROLE","INSERT","LIST","MERGE","PUT","REMOVE","REVOKE ROLE","ROLLBACK","SHOW COLUMNS","SHOW CONNECTIONS","SHOW DATABASES","SHOW DATABASES IN FAILOVER GROUP","SHOW DATABASES IN REPLICATION GROUP","SHOW DELEGATED AUTHORIZATIONS","SHOW EXTERNAL FUNCTIONS","SHOW EXTERNAL TABLES","SHOW FAILOVER GROUPS","SHOW FILE FORMATS","SHOW FUNCTIONS","SHOW GLOBAL ACCOUNTS","SHOW GRANTS","SHOW INTEGRATIONS","SHOW LOCKS","SHOW MANAGED ACCOUNTS","SHOW MASKING POLICIES","SHOW MATERIALIZED VIEWS","SHOW NETWORK POLICIES","SHOW OBJECTS","SHOW ORGANIZATION ACCOUNTS","SHOW PARAMETERS","SHOW PIPES","SHOW PRIMARY KEYS","SHOW PROCEDURES","SHOW REGIONS","SHOW REPLICATION ACCOUNTS","SHOW REPLICATION DATABASES","SHOW REPLICATION GROUPS","SHOW RESOURCE MONITORS","SHOW ROLES","SHOW ROW ACCESS POLICIES","SHOW SCHEMAS","SHOW SEQUENCES","SHOW SESSION POLICIES","SHOW SHARES","SHOW SHARES IN FAILOVER GROUP","SHOW SHARES IN REPLICATION GROUP","SHOW STAGES","SHOW STREAMS","SHOW TABLES","SHOW TAGS","SHOW TASKS","SHOW TRANSACTIONS","SHOW USER FUNCTIONS","SHOW USERS","SHOW VARIABLES","SHOW VIEWS","SHOW WAREHOUSES","TRUNCATE MATERIALIZED VIEW","UNDROP DATABASE","UNDROP SCHEMA","UNDROP TABLE","UNDROP TAG","UNSET","USE DATABASE","USE ROLE","USE SCHEMA","USE SECONDARY ROLES","USE WAREHOUSE"]),JM=C(["UNION [ALL]","MINUS","EXCEPT","INTERSECT"]),jM=C(["[INNER] JOIN","[NATURAL] {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | NATURAL} JOIN"]),QM=C(["{ROWS | RANGE} BETWEEN","ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]"]),qM={name:"snowflake",tokenizerOptions:{reservedSelect:KM,reservedClauses:[...$M,...uc,...Yo],reservedSetOperations:JM,reservedJoins:jM,reservedPhrases:QM,reservedKeywords:WM,reservedDataTypes:XM,reservedFunctionNames:VM,stringTypes:["$$","''-qq-bs"],identTypes:['""-qq'],variableTypes:[{regex:"[$][1-9]\\d*"},{regex:"[$][_a-zA-Z][_a-zA-Z0-9$]*"}],extraParens:["[]"],identChars:{rest:"$"},lineCommentTypes:["--","//"],operators:["%","::","||","=>",":=","->"],propertyAccessOperators:[":"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...uc,...Yo],tabularOnelineClauses:Yo}},zM=Object.freeze(Object.defineProperty({__proto__:null,bigquery:Xg,db2:nP,db2i:AP,duckdb:pP,hive:UP,mariadb:FP,mysql:jP,n1ql:AD,plsql:pD,postgresql:yD,redshift:YD,singlestoredb:kM,snowflake:qM,spark:QD,sql:uM,sqlite:oM,tidb:nD,transactsql:xM,trino:mM},Symbol.toStringTag,{value:"Module"})),Di=s=>s[s.length-1],Wu=s=>s.sort((e,t)=>t.length-e.length||e.localeCompare(t)),vn=s=>s.replace(/\s+/gu," "),ko=s=>/\n/.test(s),At=s=>s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),fc=/\s+/uy,Ds=s=>new RegExp(`(?:${s})`,"uy"),ZM=s=>s.split("").map(e=>/ /gu.test(e)?"\\s+":`[${e.toUpperCase()}${e.toLowerCase()}]`).join(""),eU=s=>s+"(?:-"+s+")*",tU=({prefixes:s,requirePrefix:e})=>`(?:${s.map(ZM).join("|")}${e?"":"|"})`,sU=s=>new RegExp(`(?:${s.map(At).join("|")}).*?(?=\r
|\r|
|$)`,"uy"),Sc=(s,e=[])=>{const t=s==="open"?0:1,i=["()",...e].map(n=>n[t]);return Ds(i.map(At).join("|"))},dc=s=>Ds(`${Wu(s).map(At).join("|")}`),iU=({rest:s,dashes:e})=>s||e?`(?![${s||""}${e?"-":""}])`:"",kt=(s,e={})=>{if(s.length===0)return/^\b$/u;const t=iU(e),i=Wu(s).map(At).join("|").replace(/ /gu,"\\s+");return new RegExp(`(?:${i})${t}\\b`,"iuy")},Vo=(s,e)=>{if(!s.length)return;const t=s.map(At).join("|");return Ds(`(?:${t})(?:${e})`)},nU=()=>{const s={"<":">","[":"]","(":")","{":"}"},e="{left}(?:(?!{right}').)*?{right}",t=Object.entries(s).map(([o,l])=>e.replace(/{left}/g,At(o)).replace(/{right}/g,At(l))),i=At(Object.keys(s).join(""));return`[Qq]'(?:${String.raw`(?<tag>[^\s${i}])(?:(?!\k<tag>').)*?\k<tag>`}|${t.join("|")})'`},Oc={"``":"(?:`[^`]*`)+","[]":String.raw`(?:\[[^\]]*\])(?:\][^\]]*\])*`,'""-qq':String.raw`(?:"[^"]*")+`,'""-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")`,'""-qq-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")+`,'""-raw':String.raw`(?:"[^"]*")`,"''-qq":String.raw`(?:'[^']*')+`,"''-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')`,"''-qq-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')+`,"''-raw":String.raw`(?:'[^']*')`,$$:String.raw`(?<tag>\$\w*\$)[\s\S]*?\k<tag>`,"'''..'''":String.raw`'''[^\\]*?(?:\\.[^\\]*?)*?'''`,'""".."""':String.raw`"""[^\\]*?(?:\\.[^\\]*?)*?"""`,"{}":String.raw`(?:\{[^\}]*\})`,"q''":nU()},Xu=s=>typeof s=="string"?Oc[s]:"regex"in s?s.regex:tU(s)+Oc[s.quote],rU=s=>Ds(s.map(e=>"regex"in e?e.regex:Xu(e)).join("|")),Ku=s=>s.map(Xu).join("|"),Ic=s=>Ds(Ku(s)),oU=(s={})=>Ds($u(s)),$u=({first:s,rest:e,dashes:t,allowFirstCharNumber:i}={})=>{const n="\\p{Alphabetic}\\p{Mark}_",r="\\p{Decimal_Number}",o=At(s??""),l=At(e??""),a=i?`[${n}${r}${o}][${n}${r}${l}]*`:`[${n}${o}][${n}${r}${l}]*`;return t?eU(a):a};function Ju(s,e){const t=s.slice(0,e).split(/\n/);return{line:t.length,col:t[t.length-1].length+1}}class lU{constructor(e,t){this.rules=e,this.dialectName=t,this.input="",this.index=0}tokenize(e){this.input=e,this.index=0;const t=[];let i;for(;this.index<this.input.length;){const n=this.getWhitespace();if(this.index<this.input.length){if(i=this.getNextToken(),!i)throw this.createParseError();t.push(Object.assign(Object.assign({},i),{precedingWhitespace:n}))}}return t}createParseError(){const e=this.input.slice(this.index,this.index+10),{line:t,col:i}=Ju(this.input,this.index);return new Error(`Parse error: Unexpected "${e}" at line ${t} column ${i}.
${this.dialectInfo()}`)}dialectInfo(){return this.dialectName==="sql"?`This likely happens because you're using the default "sql" dialect.
If possible, please select a more specific dialect (like sqlite, postgresql, etc).`:`SQL dialect used: "${this.dialectName}".`}getWhitespace(){fc.lastIndex=this.index;const e=fc.exec(this.input);if(e)return this.index+=e[0].length,e[0]}getNextToken(){for(const e of this.rules){const t=this.match(e);if(t)return t}}match(e){e.regex.lastIndex=this.index;const t=e.regex.exec(this.input);if(t){const i=t[0],n={type:e.type,raw:i,text:e.text?e.text(i):i,start:this.index};return e.key&&(n.key=e.key(i)),this.index+=i.length,n}}}const Nc=/\/\*/uy,aU=/[\s\S]/uy,EU=/\*\//uy;class TU{constructor(){this.lastIndex=0}exec(e){let t="",i,n=0;if(i=this.matchSection(Nc,e))t+=i,n++;else return null;for(;n>0;)if(i=this.matchSection(Nc,e))t+=i,n++;else if(i=this.matchSection(EU,e))t+=i,n--;else if(i=this.matchSection(aU,e))t+=i;else return null;return[t]}matchSection(e,t){e.lastIndex=this.lastIndex;const i=e.exec(t);return i&&(this.lastIndex+=i[0].length),i?i[0]:null}}class cU{constructor(e,t){this.cfg=e,this.dialectName=t,this.rulesBeforeParams=this.buildRulesBeforeParams(e),this.rulesAfterParams=this.buildRulesAfterParams(e)}tokenize(e,t){const i=[...this.rulesBeforeParams,...this.buildParamRules(this.cfg,t),...this.rulesAfterParams],n=new lU(i,this.dialectName).tokenize(e);return this.cfg.postProcess?this.cfg.postProcess(n):n}buildRulesBeforeParams(e){var t,i;return this.validRules([{type:g.BLOCK_COMMENT,regex:/(\/\* *sql-formatter-disable *\*\/[\s\S]*?(?:\/\* *sql-formatter-enable *\*\/|$))/uy},{type:g.BLOCK_COMMENT,regex:e.nestedBlockComments?new TU:/(\/\*[^]*?\*\/)/uy},{type:g.LINE_COMMENT,regex:sU((t=e.lineCommentTypes)!==null&&t!==void 0?t:["--"])},{type:g.QUOTED_IDENTIFIER,regex:Ic(e.identTypes)},{type:g.NUMBER,regex:/(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\s*)?(?:[0-9]*\.[0-9]+|[0-9]+(?:\.[0-9]*)?)(?:[eE][-+]?[0-9]+(?:\.[0-9]+)?)?)(?![\w\p{Alphabetic}])/uy},{type:g.RESERVED_PHRASE,regex:kt((i=e.reservedPhrases)!==null&&i!==void 0?i:[],e.identChars),text:Ce},{type:g.CASE,regex:/CASE\b/iuy,text:Ce},{type:g.END,regex:/END\b/iuy,text:Ce},{type:g.BETWEEN,regex:/BETWEEN\b/iuy,text:Ce},{type:g.LIMIT,regex:e.reservedClauses.includes("LIMIT")?/LIMIT\b/iuy:void 0,text:Ce},{type:g.RESERVED_CLAUSE,regex:kt(e.reservedClauses,e.identChars),text:Ce},{type:g.RESERVED_SELECT,regex:kt(e.reservedSelect,e.identChars),text:Ce},{type:g.RESERVED_SET_OPERATION,regex:kt(e.reservedSetOperations,e.identChars),text:Ce},{type:g.WHEN,regex:/WHEN\b/iuy,text:Ce},{type:g.ELSE,regex:/ELSE\b/iuy,text:Ce},{type:g.THEN,regex:/THEN\b/iuy,text:Ce},{type:g.RESERVED_JOIN,regex:kt(e.reservedJoins,e.identChars),text:Ce},{type:g.AND,regex:/AND\b/iuy,text:Ce},{type:g.OR,regex:/OR\b/iuy,text:Ce},{type:g.XOR,regex:e.supportsXor?/XOR\b/iuy:void 0,text:Ce},...e.operatorKeyword?[{type:g.OPERATOR,regex:/OPERATOR *\([^)]+\)/iuy}]:[],{type:g.RESERVED_FUNCTION_NAME,regex:kt(e.reservedFunctionNames,e.identChars),text:Ce},{type:g.RESERVED_DATA_TYPE,regex:kt(e.reservedDataTypes,e.identChars),text:Ce},{type:g.RESERVED_KEYWORD,regex:kt(e.reservedKeywords,e.identChars),text:Ce}])}buildRulesAfterParams(e){var t,i;return this.validRules([{type:g.VARIABLE,regex:e.variableTypes?rU(e.variableTypes):void 0},{type:g.STRING,regex:Ic(e.stringTypes)},{type:g.IDENTIFIER,regex:oU(e.identChars)},{type:g.DELIMITER,regex:/[;]/uy},{type:g.COMMA,regex:/[,]/y},{type:g.OPEN_PAREN,regex:Sc("open",e.extraParens)},{type:g.CLOSE_PAREN,regex:Sc("close",e.extraParens)},{type:g.OPERATOR,regex:dc(["+","-","/",">","<","=","<>","<=",">=","!=",...(t=e.operators)!==null&&t!==void 0?t:[]])},{type:g.ASTERISK,regex:/[*]/uy},{type:g.PROPERTY_ACCESS_OPERATOR,regex:dc([".",...(i=e.propertyAccessOperators)!==null&&i!==void 0?i:[]])}])}buildParamRules(e,t){var i,n,r,o,l;const a={named:(t==null?void 0:t.named)||((i=e.paramTypes)===null||i===void 0?void 0:i.named)||[],quoted:(t==null?void 0:t.quoted)||((n=e.paramTypes)===null||n===void 0?void 0:n.quoted)||[],numbered:(t==null?void 0:t.numbered)||((r=e.paramTypes)===null||r===void 0?void 0:r.numbered)||[],positional:typeof(t==null?void 0:t.positional)=="boolean"?t.positional:(o=e.paramTypes)===null||o===void 0?void 0:o.positional,custom:(t==null?void 0:t.custom)||((l=e.paramTypes)===null||l===void 0?void 0:l.custom)||[]};return this.validRules([{type:g.NAMED_PARAMETER,regex:Vo(a.named,$u(e.paramChars||e.identChars)),key:E=>E.slice(1)},{type:g.QUOTED_PARAMETER,regex:Vo(a.quoted,Ku(e.identTypes)),key:E=>(({tokenKey:T,quoteChar:c})=>T.replace(new RegExp(At("\\"+c),"gu"),c))({tokenKey:E.slice(2,-1),quoteChar:E.slice(-1)})},{type:g.NUMBERED_PARAMETER,regex:Vo(a.numbered,"[0-9]+"),key:E=>E.slice(1)},{type:g.POSITIONAL_PARAMETER,regex:a.positional?/[?]/y:void 0},...a.custom.map(E=>{var T;return{type:g.CUSTOM_PARAMETER,regex:Ds(E.regex),key:(T=E.key)!==null&&T!==void 0?T:c=>c}})])}validRules(e){return e.filter(t=>!!t.regex)}}const Ce=s=>vn(s.toUpperCase()),pc=new Map,hU=s=>{let e=pc.get(s);return e||(e=AU(s),pc.set(s,e)),e},AU=s=>({tokenizer:new cU(s.tokenizerOptions,s.name),formatOptions:RU(s.formatOptions)}),RU=s=>{var e;return{alwaysDenseOperators:s.alwaysDenseOperators||[],onelineClauses:Object.fromEntries(s.onelineClauses.map(t=>[t,!0])),tabularOnelineClauses:Object.fromEntries(((e=s.tabularOnelineClauses)!==null&&e!==void 0?e:s.onelineClauses).map(t=>[t,!0]))}};function uU(s){return s.indentStyle==="tabularLeft"||s.indentStyle==="tabularRight"?" ".repeat(10):s.useTabs?"	":" ".repeat(s.tabWidth)}function bs(s){return s.indentStyle==="tabularLeft"||s.indentStyle==="tabularRight"}class fU{constructor(e){this.params=e,this.index=0}get({key:e,text:t}){return this.params?e?this.params[e]:this.params[this.index++]:t}getPositionalParameterIndex(){return this.index}setPositionalParameterIndex(e){this.index=e}}var wn={exports:{}},SU=wn.exports,Cc;function dU(){return Cc||(Cc=1,function(s){(function(e,t){s.exports?s.exports=t():e.nearley=t()})(SU,function(){function e(E,T,c){return this.id=++e.highestId,this.name=E,this.symbols=T,this.postprocess=c,this}e.highestId=0,e.prototype.toString=function(E){var T=typeof E>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,E).map(a).join(" ")+" ● "+this.symbols.slice(E).map(a).join(" ");return this.name+" → "+T};function t(E,T,c,h){this.rule=E,this.dot=T,this.reference=c,this.data=[],this.wantedBy=h,this.isComplete=this.dot===E.symbols.length}t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(E){var T=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return T.left=this,T.right=E,T.isComplete&&(T.data=T.build(),T.right=void 0),T},t.prototype.build=function(){var E=[],T=this;do E.push(T.right.data),T=T.left;while(T.left);return E.reverse(),E},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function i(E,T){this.grammar=E,this.index=T,this.states=[],this.wants={},this.scannable=[],this.completed={}}i.prototype.process=function(E){for(var T=this.states,c=this.wants,h=this.completed,A=0;A<T.length;A++){var u=T[A];if(u.isComplete){if(u.finish(),u.data!==o.fail){for(var f=u.wantedBy,S=f.length;S--;){var d=f[S];this.complete(d,u)}if(u.reference===this.index){var O=u.rule.name;(this.completed[O]=this.completed[O]||[]).push(u)}}}else{var O=u.rule.symbols[u.dot];if(typeof O!="string"){this.scannable.push(u);continue}if(c[O]){if(c[O].push(u),h.hasOwnProperty(O))for(var p=h[O],S=0;S<p.length;S++){var P=p[S];this.complete(u,P)}}else c[O]=[u],this.predict(O)}}},i.prototype.predict=function(E){for(var T=this.grammar.byName[E]||[],c=0;c<T.length;c++){var h=T[c],A=this.wants[E],u=new t(h,0,this.index,A);this.states.push(u)}},i.prototype.complete=function(E,T){var c=E.nextState(T);this.states.push(c)};function n(E,T){this.rules=E,this.start=T||this.rules[0].name;var c=this.byName={};this.rules.forEach(function(h){c.hasOwnProperty(h.name)||(c[h.name]=[]),c[h.name].push(h)})}n.fromCompiled=function(h,T){var c=h.Lexer;h.ParserStart&&(T=h.ParserStart,h=h.ParserRules);var h=h.map(function(u){return new e(u.name,u.symbols,u.postprocess)}),A=new n(h,T);return A.lexer=c,A};function r(){this.reset("")}r.prototype.reset=function(E,T){this.buffer=E,this.index=0,this.line=T?T.line:1,this.lastLineBreak=T?-T.col:0},r.prototype.next=function(){if(this.index<this.buffer.length){var E=this.buffer[this.index++];return E===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:E}}},r.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},r.prototype.formatError=function(E,T){var c=this.buffer;if(typeof c=="string"){var h=c.split(`
`).slice(Math.max(0,this.line-5),this.line),A=c.indexOf(`
`,this.index);A===-1&&(A=c.length);var u=this.index-this.lastLineBreak,f=String(this.line).length;return T+=" at line "+this.line+" col "+u+`:

`,T+=h.map(function(d,O){return S(this.line-h.length+O+1,f)+" "+d},this).join(`
`),T+=`
`+S("",f+u)+`^
`,T}else return T+" at index "+(this.index-1);function S(d,O){var p=String(d);return Array(O-p.length+1).join(" ")+p}};function o(E,T,c){if(E instanceof n)var h=E,c=T;else var h=n.fromCompiled(E,T);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new r};for(var A in c||{})this.options[A]=c[A];this.lexer=this.options.lexer,this.lexerState=void 0;var u=new i(h,0);this.table=[u],u.wants[h.start]=[],u.predict(h.start),u.process(),this.current=0}o.fail={},o.prototype.feed=function(E){var T=this.lexer;T.reset(E,this.lexerState);for(var c;;){try{if(c=T.next(),!c)break}catch(D){var f=new i(this.grammar,this.current+1);this.table.push(f);var h=new Error(this.reportLexerError(D));throw h.offset=this.current,h.token=D.token,h}var A=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var u=this.current+1,f=new i(this.grammar,u);this.table.push(f);for(var S=c.text!==void 0?c.text:c.value,d=T.constructor===r?c.value:c,O=A.scannable,p=O.length;p--;){var P=O[p],L=P.rule.symbols[P.dot];if(L.test?L.test(d):L.type?L.type===c.type:L.literal===S){var M=P.nextState({data:d,token:c,isToken:!0,reference:u-1});f.states.push(M)}}if(f.process(),f.states.length===0){var h=new Error(this.reportError(c));throw h.offset=this.current,h.token=c,h}this.options.keepHistory&&(A.lexerState=T.save()),this.current++}return A&&(this.lexerState=T.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(E){var T,c,h=E.token;return h?(T="input "+JSON.stringify(h.text[0])+" (lexer error)",c=this.lexer.formatError(h,"Syntax error")):(T="input (lexer error)",c=E.message),this.reportErrorCommon(c,T)},o.prototype.reportError=function(E){var T=(E.type?E.type+" token: ":"")+JSON.stringify(E.value!==void 0?E.value:E),c=this.lexer.formatError(E,"Syntax error");return this.reportErrorCommon(c,T)},o.prototype.reportErrorCommon=function(E,T){var c=[];c.push(E);var h=this.table.length-2,A=this.table[h],u=A.states.filter(function(S){var d=S.rule.symbols[S.dot];return d&&typeof d!="string"});if(u.length===0)c.push("Unexpected "+T+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(A.states,c);else{c.push("Unexpected "+T+`. Instead, I was expecting to see one of the following:
`);var f=u.map(function(S){return this.buildFirstStateStack(S,[])||[S]},this);f.forEach(function(S){var d=S[0],O=d.rule.symbols[d.dot],p=this.getSymbolDisplay(O);c.push("A "+p+" based on:"),this.displayStateStack(S,c)},this)}return c.push(""),c.join(`
`)},o.prototype.displayStateStack=function(E,T){for(var c,h=0,A=0;A<E.length;A++){var u=E[A],f=u.rule.toString(u.dot);f===c?h++:(h>0&&T.push("    ^ "+h+" more lines identical to this"),h=0,T.push("    "+f)),c=f}},o.prototype.getSymbolDisplay=function(E){return l(E)},o.prototype.buildFirstStateStack=function(E,T){if(T.indexOf(E)!==-1)return null;if(E.wantedBy.length===0)return[E];var c=E.wantedBy[0],h=[E].concat(T),A=this.buildFirstStateStack(c,h);return A===null?null:[E].concat(A)},o.prototype.save=function(){var E=this.table[this.current];return E.lexerState=this.lexerState,E},o.prototype.restore=function(E){var T=E.index;this.current=T,this.table[T]=E,this.table.splice(T+1),this.lexerState=E.lexerState,this.results=this.finish()},o.prototype.rewind=function(E){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[E])},o.prototype.finish=function(){var E=[],T=this.grammar.start,c=this.table[this.table.length-1];return c.states.forEach(function(h){h.rule.name===T&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&E.push(h)}),E.map(function(h){return h.data})};function l(E){var T=typeof E;if(T==="string")return E;if(T==="object"){if(E.literal)return JSON.stringify(E.literal);if(E instanceof RegExp)return"character matching "+E;if(E.type)return E.type+" token";if(E.test)return"token matching "+String(E.test);throw new Error("Unknown symbol type: "+E)}}function a(E){var T=typeof E;if(T==="string")return E;if(T==="object"){if(E.literal)return JSON.stringify(E.literal);if(E instanceof RegExp)return E.toString();if(E.type)return"%"+E.type;if(E.test)return"<"+String(E.test)+">";throw new Error("Unknown symbol type: "+E)}}return{Parser:o,Grammar:n,Rule:e}})}(wn)),wn.exports}var OU=dU();const IU=Dc(OU);function NU(s){return s.map(pU).map(CU).map(mU).map(LU).map(_U)}const pU=(s,e,t)=>{if(Vu(s.type)){const i=gU(t,e);if(i&&i.type===g.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},s),{type:g.IDENTIFIER,text:s.raw});const n=li(t,e);if(n&&n.type===g.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},s),{type:g.IDENTIFIER,text:s.raw})}return s},CU=(s,e,t)=>{if(s.type===g.RESERVED_FUNCTION_NAME){const i=li(t,e);if(!i||!ju(i))return Object.assign(Object.assign({},s),{type:g.IDENTIFIER,text:s.raw})}return s},mU=(s,e,t)=>{if(s.type===g.RESERVED_DATA_TYPE){const i=li(t,e);if(i&&ju(i))return Object.assign(Object.assign({},s),{type:g.RESERVED_PARAMETERIZED_DATA_TYPE})}return s},LU=(s,e,t)=>{if(s.type===g.IDENTIFIER){const i=li(t,e);if(i&&Qu(i))return Object.assign(Object.assign({},s),{type:g.ARRAY_IDENTIFIER})}return s},_U=(s,e,t)=>{if(s.type===g.RESERVED_DATA_TYPE){const i=li(t,e);if(i&&Qu(i))return Object.assign(Object.assign({},s),{type:g.ARRAY_KEYWORD})}return s},gU=(s,e)=>li(s,e,-1),li=(s,e,t=1)=>{let i=1;for(;s[e+i*t]&&PU(s[e+i*t]);)i++;return s[e+i*t]},ju=s=>s.type===g.OPEN_PAREN&&s.text==="(",Qu=s=>s.type===g.OPEN_PAREN&&s.text==="[",PU=s=>s.type===g.BLOCK_COMMENT||s.type===g.LINE_COMMENT;class qu{constructor(e){this.tokenize=e,this.index=0,this.tokens=[],this.input=""}reset(e,t){this.input=e,this.index=0,this.tokens=this.tokenize(e)}next(){return this.tokens[this.index++]}save(){}formatError(e){const{line:t,col:i}=Ju(this.input,e.start);return`Parse error at token: ${e.text} at line ${t} column ${i}`}has(e){return e in g}}var G;(function(s){s.statement="statement",s.clause="clause",s.set_operation="set_operation",s.function_call="function_call",s.parameterized_data_type="parameterized_data_type",s.array_subscript="array_subscript",s.property_access="property_access",s.parenthesis="parenthesis",s.between_predicate="between_predicate",s.case_expression="case_expression",s.case_when="case_when",s.case_else="case_else",s.limit_clause="limit_clause",s.all_columns_asterisk="all_columns_asterisk",s.literal="literal",s.identifier="identifier",s.keyword="keyword",s.data_type="data_type",s.parameter="parameter",s.operator="operator",s.comma="comma",s.line_comment="line_comment",s.block_comment="block_comment",s.disable_comment="disable_comment"})(G=G||(G={}));function Wo(s){return s[0]}const w=new qu(s=>[]),hs=([[s]])=>s,me=s=>({type:G.keyword,tokenType:s.type,text:s.text,raw:s.raw}),mc=s=>({type:G.data_type,text:s.text,raw:s.raw}),Le=(s,{leading:e,trailing:t})=>(e!=null&&e.length&&(s=Object.assign(Object.assign({},s),{leadingComments:e})),t!=null&&t.length&&(s=Object.assign(Object.assign({},s),{trailingComments:t})),s),DU=(s,{leading:e,trailing:t})=>{if(e!=null&&e.length){const[i,...n]=s;s=[Le(i,{leading:e}),...n]}if(t!=null&&t.length){const i=s.slice(0,-1),n=s[s.length-1];s=[...i,Le(n,{trailing:t})]}return s},MU={Lexer:w,ParserRules:[{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement"],postprocess:s=>s[0].concat([s[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([s])=>{const e=s[s.length-1];return e&&!e.hasSemicolon?e.children.length>0?s:s.slice(0,-1):s}},{name:"statement$subexpression$1",symbols:[w.has("DELIMITER")?{type:"DELIMITER"}:DELIMITER]},{name:"statement$subexpression$1",symbols:[w.has("EOF")?{type:"EOF"}:EOF]},{name:"statement",symbols:["expressions_or_clauses","statement$subexpression$1"],postprocess:([s,[e]])=>({type:G.statement,children:s,hasSemicolon:e.type===g.DELIMITER})},{name:"expressions_or_clauses$ebnf$1",symbols:[]},{name:"expressions_or_clauses$ebnf$1",symbols:["expressions_or_clauses$ebnf$1","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"expressions_or_clauses$ebnf$2",symbols:[]},{name:"expressions_or_clauses$ebnf$2",symbols:["expressions_or_clauses$ebnf$2","clause"],postprocess:s=>s[0].concat([s[1]])},{name:"expressions_or_clauses",symbols:["expressions_or_clauses$ebnf$1","expressions_or_clauses$ebnf$2"],postprocess:([s,e])=>[...s,...e]},{name:"clause$subexpression$1",symbols:["limit_clause"]},{name:"clause$subexpression$1",symbols:["select_clause"]},{name:"clause$subexpression$1",symbols:["other_clause"]},{name:"clause$subexpression$1",symbols:["set_operation"]},{name:"clause",symbols:["clause$subexpression$1"],postprocess:hs},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["free_form_sql"]},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1$ebnf$1","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"limit_clause$ebnf$1$subexpression$1",symbols:[w.has("COMMA")?{type:"COMMA"}:COMMA,"limit_clause$ebnf$1$subexpression$1$ebnf$1"]},{name:"limit_clause$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1"],postprocess:Wo},{name:"limit_clause$ebnf$1",symbols:[],postprocess:()=>null},{name:"limit_clause",symbols:[w.has("LIMIT")?{type:"LIMIT"}:LIMIT,"_","expression_chain_","limit_clause$ebnf$1"],postprocess:([s,e,t,i])=>{if(i){const[n,r]=i;return{type:G.limit_clause,limitKw:Le(me(s),{trailing:e}),offset:t,count:r}}else return{type:G.limit_clause,limitKw:Le(me(s),{trailing:e}),count:t}}},{name:"select_clause$subexpression$1$ebnf$1",symbols:[]},{name:"select_clause$subexpression$1$ebnf$1",symbols:["select_clause$subexpression$1$ebnf$1","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"select_clause$subexpression$1",symbols:["all_columns_asterisk","select_clause$subexpression$1$ebnf$1"]},{name:"select_clause$subexpression$1$ebnf$2",symbols:[]},{name:"select_clause$subexpression$1$ebnf$2",symbols:["select_clause$subexpression$1$ebnf$2","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"select_clause$subexpression$1",symbols:["asteriskless_free_form_sql","select_clause$subexpression$1$ebnf$2"]},{name:"select_clause",symbols:[w.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT,"select_clause$subexpression$1"],postprocess:([s,[e,t]])=>({type:G.clause,nameKw:me(s),children:[e,...t]})},{name:"select_clause",symbols:[w.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT],postprocess:([s])=>({type:G.clause,nameKw:me(s),children:[]})},{name:"all_columns_asterisk",symbols:[w.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK],postprocess:()=>({type:G.all_columns_asterisk})},{name:"other_clause$ebnf$1",symbols:[]},{name:"other_clause$ebnf$1",symbols:["other_clause$ebnf$1","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"other_clause",symbols:[w.has("RESERVED_CLAUSE")?{type:"RESERVED_CLAUSE"}:RESERVED_CLAUSE,"other_clause$ebnf$1"],postprocess:([s,e])=>({type:G.clause,nameKw:me(s),children:e})},{name:"set_operation$ebnf$1",symbols:[]},{name:"set_operation$ebnf$1",symbols:["set_operation$ebnf$1","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"set_operation",symbols:[w.has("RESERVED_SET_OPERATION")?{type:"RESERVED_SET_OPERATION"}:RESERVED_SET_OPERATION,"set_operation$ebnf$1"],postprocess:([s,e])=>({type:G.set_operation,nameKw:me(s),children:e})},{name:"expression_chain_$ebnf$1",symbols:["expression_with_comments_"]},{name:"expression_chain_$ebnf$1",symbols:["expression_chain_$ebnf$1","expression_with_comments_"],postprocess:s=>s[0].concat([s[1]])},{name:"expression_chain_",symbols:["expression_chain_$ebnf$1"],postprocess:Wo},{name:"expression_chain$ebnf$1",symbols:[]},{name:"expression_chain$ebnf$1",symbols:["expression_chain$ebnf$1","_expression_with_comments"],postprocess:s=>s[0].concat([s[1]])},{name:"expression_chain",symbols:["expression","expression_chain$ebnf$1"],postprocess:([s,e])=>[s,...e]},{name:"andless_expression_chain$ebnf$1",symbols:[]},{name:"andless_expression_chain$ebnf$1",symbols:["andless_expression_chain$ebnf$1","_andless_expression_with_comments"],postprocess:s=>s[0].concat([s[1]])},{name:"andless_expression_chain",symbols:["andless_expression","andless_expression_chain$ebnf$1"],postprocess:([s,e])=>[s,...e]},{name:"expression_with_comments_",symbols:["expression","_"],postprocess:([s,e])=>Le(s,{trailing:e})},{name:"_expression_with_comments",symbols:["_","expression"],postprocess:([s,e])=>Le(e,{leading:s})},{name:"_andless_expression_with_comments",symbols:["_","andless_expression"],postprocess:([s,e])=>Le(e,{leading:s})},{name:"free_form_sql$subexpression$1",symbols:["asteriskless_free_form_sql"]},{name:"free_form_sql$subexpression$1",symbols:["asterisk"]},{name:"free_form_sql",symbols:["free_form_sql$subexpression$1"],postprocess:hs},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["logic_operator"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comma"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comment"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["other_keyword"]},{name:"asteriskless_free_form_sql",symbols:["asteriskless_free_form_sql$subexpression$1"],postprocess:hs},{name:"expression$subexpression$1",symbols:["andless_expression"]},{name:"expression$subexpression$1",symbols:["logic_operator"]},{name:"expression",symbols:["expression$subexpression$1"],postprocess:hs},{name:"andless_expression$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"andless_expression$subexpression$1",symbols:["asterisk"]},{name:"andless_expression",symbols:["andless_expression$subexpression$1"],postprocess:hs},{name:"asteriskless_andless_expression$subexpression$1",symbols:["atomic_expression"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["between_predicate"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["case_expression"]},{name:"asteriskless_andless_expression",symbols:["asteriskless_andless_expression$subexpression$1"],postprocess:hs},{name:"atomic_expression$subexpression$1",symbols:["array_subscript"]},{name:"atomic_expression$subexpression$1",symbols:["function_call"]},{name:"atomic_expression$subexpression$1",symbols:["property_access"]},{name:"atomic_expression$subexpression$1",symbols:["parenthesis"]},{name:"atomic_expression$subexpression$1",symbols:["curly_braces"]},{name:"atomic_expression$subexpression$1",symbols:["square_brackets"]},{name:"atomic_expression$subexpression$1",symbols:["operator"]},{name:"atomic_expression$subexpression$1",symbols:["identifier"]},{name:"atomic_expression$subexpression$1",symbols:["parameter"]},{name:"atomic_expression$subexpression$1",symbols:["literal"]},{name:"atomic_expression$subexpression$1",symbols:["data_type"]},{name:"atomic_expression$subexpression$1",symbols:["keyword"]},{name:"atomic_expression",symbols:["atomic_expression$subexpression$1"],postprocess:hs},{name:"array_subscript",symbols:[w.has("ARRAY_IDENTIFIER")?{type:"ARRAY_IDENTIFIER"}:ARRAY_IDENTIFIER,"_","square_brackets"],postprocess:([s,e,t])=>({type:G.array_subscript,array:Le({type:G.identifier,quoted:!1,text:s.text},{trailing:e}),parenthesis:t})},{name:"array_subscript",symbols:[w.has("ARRAY_KEYWORD")?{type:"ARRAY_KEYWORD"}:ARRAY_KEYWORD,"_","square_brackets"],postprocess:([s,e,t])=>({type:G.array_subscript,array:Le(me(s),{trailing:e}),parenthesis:t})},{name:"function_call",symbols:[w.has("RESERVED_FUNCTION_NAME")?{type:"RESERVED_FUNCTION_NAME"}:RESERVED_FUNCTION_NAME,"_","parenthesis"],postprocess:([s,e,t])=>({type:G.function_call,nameKw:Le(me(s),{trailing:e}),parenthesis:t})},{name:"parenthesis",symbols:[{literal:"("},"expressions_or_clauses",{literal:")"}],postprocess:([s,e,t])=>({type:G.parenthesis,children:e,openParen:"(",closeParen:")"})},{name:"curly_braces$ebnf$1",symbols:[]},{name:"curly_braces$ebnf$1",symbols:["curly_braces$ebnf$1","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"curly_braces",symbols:[{literal:"{"},"curly_braces$ebnf$1",{literal:"}"}],postprocess:([s,e,t])=>({type:G.parenthesis,children:e,openParen:"{",closeParen:"}"})},{name:"square_brackets$ebnf$1",symbols:[]},{name:"square_brackets$ebnf$1",symbols:["square_brackets$ebnf$1","free_form_sql"],postprocess:s=>s[0].concat([s[1]])},{name:"square_brackets",symbols:[{literal:"["},"square_brackets$ebnf$1",{literal:"]"}],postprocess:([s,e,t])=>({type:G.parenthesis,children:e,openParen:"[",closeParen:"]"})},{name:"property_access$subexpression$1",symbols:["identifier"]},{name:"property_access$subexpression$1",symbols:["array_subscript"]},{name:"property_access$subexpression$1",symbols:["all_columns_asterisk"]},{name:"property_access$subexpression$1",symbols:["parameter"]},{name:"property_access",symbols:["atomic_expression","_",w.has("PROPERTY_ACCESS_OPERATOR")?{type:"PROPERTY_ACCESS_OPERATOR"}:PROPERTY_ACCESS_OPERATOR,"_","property_access$subexpression$1"],postprocess:([s,e,t,i,[n]])=>({type:G.property_access,object:Le(s,{trailing:e}),operator:t.text,property:Le(n,{leading:i})})},{name:"between_predicate",symbols:[w.has("BETWEEN")?{type:"BETWEEN"}:BETWEEN,"_","andless_expression_chain","_",w.has("AND")?{type:"AND"}:AND,"_","andless_expression"],postprocess:([s,e,t,i,n,r,o])=>({type:G.between_predicate,betweenKw:me(s),expr1:DU(t,{leading:e,trailing:i}),andKw:me(n),expr2:[Le(o,{leading:r})]})},{name:"case_expression$ebnf$1",symbols:["expression_chain_"],postprocess:Wo},{name:"case_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"case_expression$ebnf$2",symbols:[]},{name:"case_expression$ebnf$2",symbols:["case_expression$ebnf$2","case_clause"],postprocess:s=>s[0].concat([s[1]])},{name:"case_expression",symbols:[w.has("CASE")?{type:"CASE"}:CASE,"_","case_expression$ebnf$1","case_expression$ebnf$2",w.has("END")?{type:"END"}:END],postprocess:([s,e,t,i,n])=>({type:G.case_expression,caseKw:Le(me(s),{trailing:e}),endKw:me(n),expr:t||[],clauses:i})},{name:"case_clause",symbols:[w.has("WHEN")?{type:"WHEN"}:WHEN,"_","expression_chain_",w.has("THEN")?{type:"THEN"}:THEN,"_","expression_chain_"],postprocess:([s,e,t,i,n,r])=>({type:G.case_when,whenKw:Le(me(s),{trailing:e}),thenKw:Le(me(i),{trailing:n}),condition:t,result:r})},{name:"case_clause",symbols:[w.has("ELSE")?{type:"ELSE"}:ELSE,"_","expression_chain_"],postprocess:([s,e,t])=>({type:G.case_else,elseKw:Le(me(s),{trailing:e}),result:t})},{name:"comma$subexpression$1",symbols:[w.has("COMMA")?{type:"COMMA"}:COMMA]},{name:"comma",symbols:["comma$subexpression$1"],postprocess:([[s]])=>({type:G.comma})},{name:"asterisk$subexpression$1",symbols:[w.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK]},{name:"asterisk",symbols:["asterisk$subexpression$1"],postprocess:([[s]])=>({type:G.operator,text:s.text})},{name:"operator$subexpression$1",symbols:[w.has("OPERATOR")?{type:"OPERATOR"}:OPERATOR]},{name:"operator",symbols:["operator$subexpression$1"],postprocess:([[s]])=>({type:G.operator,text:s.text})},{name:"identifier$subexpression$1",symbols:[w.has("IDENTIFIER")?{type:"IDENTIFIER"}:IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[w.has("QUOTED_IDENTIFIER")?{type:"QUOTED_IDENTIFIER"}:QUOTED_IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[w.has("VARIABLE")?{type:"VARIABLE"}:VARIABLE]},{name:"identifier",symbols:["identifier$subexpression$1"],postprocess:([[s]])=>({type:G.identifier,quoted:s.type!=="IDENTIFIER",text:s.text})},{name:"parameter$subexpression$1",symbols:[w.has("NAMED_PARAMETER")?{type:"NAMED_PARAMETER"}:NAMED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[w.has("QUOTED_PARAMETER")?{type:"QUOTED_PARAMETER"}:QUOTED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[w.has("NUMBERED_PARAMETER")?{type:"NUMBERED_PARAMETER"}:NUMBERED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[w.has("POSITIONAL_PARAMETER")?{type:"POSITIONAL_PARAMETER"}:POSITIONAL_PARAMETER]},{name:"parameter$subexpression$1",symbols:[w.has("CUSTOM_PARAMETER")?{type:"CUSTOM_PARAMETER"}:CUSTOM_PARAMETER]},{name:"parameter",symbols:["parameter$subexpression$1"],postprocess:([[s]])=>({type:G.parameter,key:s.key,text:s.text})},{name:"literal$subexpression$1",symbols:[w.has("NUMBER")?{type:"NUMBER"}:NUMBER]},{name:"literal$subexpression$1",symbols:[w.has("STRING")?{type:"STRING"}:STRING]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:([[s]])=>({type:G.literal,text:s.text})},{name:"keyword$subexpression$1",symbols:[w.has("RESERVED_KEYWORD")?{type:"RESERVED_KEYWORD"}:RESERVED_KEYWORD]},{name:"keyword$subexpression$1",symbols:[w.has("RESERVED_PHRASE")?{type:"RESERVED_PHRASE"}:RESERVED_PHRASE]},{name:"keyword$subexpression$1",symbols:[w.has("RESERVED_JOIN")?{type:"RESERVED_JOIN"}:RESERVED_JOIN]},{name:"keyword",symbols:["keyword$subexpression$1"],postprocess:([[s]])=>me(s)},{name:"data_type$subexpression$1",symbols:[w.has("RESERVED_DATA_TYPE")?{type:"RESERVED_DATA_TYPE"}:RESERVED_DATA_TYPE]},{name:"data_type",symbols:["data_type$subexpression$1"],postprocess:([[s]])=>mc(s)},{name:"data_type",symbols:[w.has("RESERVED_PARAMETERIZED_DATA_TYPE")?{type:"RESERVED_PARAMETERIZED_DATA_TYPE"}:RESERVED_PARAMETERIZED_DATA_TYPE,"_","parenthesis"],postprocess:([s,e,t])=>({type:G.parameterized_data_type,dataType:Le(mc(s),{trailing:e}),parenthesis:t})},{name:"logic_operator$subexpression$1",symbols:[w.has("AND")?{type:"AND"}:AND]},{name:"logic_operator$subexpression$1",symbols:[w.has("OR")?{type:"OR"}:OR]},{name:"logic_operator$subexpression$1",symbols:[w.has("XOR")?{type:"XOR"}:XOR]},{name:"logic_operator",symbols:["logic_operator$subexpression$1"],postprocess:([[s]])=>me(s)},{name:"other_keyword$subexpression$1",symbols:[w.has("WHEN")?{type:"WHEN"}:WHEN]},{name:"other_keyword$subexpression$1",symbols:[w.has("THEN")?{type:"THEN"}:THEN]},{name:"other_keyword$subexpression$1",symbols:[w.has("ELSE")?{type:"ELSE"}:ELSE]},{name:"other_keyword$subexpression$1",symbols:[w.has("END")?{type:"END"}:END]},{name:"other_keyword",symbols:["other_keyword$subexpression$1"],postprocess:([[s]])=>me(s)},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","comment"],postprocess:s=>s[0].concat([s[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:([s])=>s},{name:"comment",symbols:[w.has("LINE_COMMENT")?{type:"LINE_COMMENT"}:LINE_COMMENT],postprocess:([s])=>({type:G.line_comment,text:s.text,precedingWhitespace:s.precedingWhitespace})},{name:"comment",symbols:[w.has("BLOCK_COMMENT")?{type:"BLOCK_COMMENT"}:BLOCK_COMMENT],postprocess:([s])=>({type:G.block_comment,text:s.text,precedingWhitespace:s.precedingWhitespace})},{name:"comment",symbols:[w.has("DISABLE_COMMENT")?{type:"DISABLE_COMMENT"}:DISABLE_COMMENT],postprocess:([s])=>({type:G.disable_comment,text:s.text,precedingWhitespace:s.precedingWhitespace})}],ParserStart:"main"},{Parser:UU,Grammar:yU}=IU;function xU(s){let e={};const t=new qu(n=>[...NU(s.tokenize(n,e)),ku(n.length)]),i=new UU(yU.fromCompiled(MU),{lexer:t});return{parse:(n,r)=>{e=r;const{results:o}=i.feed(n);if(o.length===1)return o[0];throw o.length===0?new Error("Parse error: Invalid SQL"):new Error(`Parse error: Ambiguous grammar
${JSON.stringify(o,void 0,2)}`)}}}var m;(function(s){s[s.SPACE=0]="SPACE",s[s.NO_SPACE=1]="NO_SPACE",s[s.NO_NEWLINE=2]="NO_NEWLINE",s[s.NEWLINE=3]="NEWLINE",s[s.MANDATORY_NEWLINE=4]="MANDATORY_NEWLINE",s[s.INDENT=5]="INDENT",s[s.SINGLE_INDENT=6]="SINGLE_INDENT"})(m=m||(m={}));class zu{constructor(e){this.indentation=e,this.items=[]}add(...e){for(const t of e)switch(t){case m.SPACE:this.items.push(m.SPACE);break;case m.NO_SPACE:this.trimHorizontalWhitespace();break;case m.NO_NEWLINE:this.trimWhitespace();break;case m.NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(m.NEWLINE);break;case m.MANDATORY_NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(m.MANDATORY_NEWLINE);break;case m.INDENT:this.addIndentation();break;case m.SINGLE_INDENT:this.items.push(m.SINGLE_INDENT);break;default:this.items.push(t)}}trimHorizontalWhitespace(){for(;bU(Di(this.items));)this.items.pop()}trimWhitespace(){for(;BU(Di(this.items));)this.items.pop()}addNewline(e){if(this.items.length>0)switch(Di(this.items)){case m.NEWLINE:this.items.pop(),this.items.push(e);break;case m.MANDATORY_NEWLINE:break;default:this.items.push(e);break}}addIndentation(){for(let e=0;e<this.indentation.getLevel();e++)this.items.push(m.SINGLE_INDENT)}toString(){return this.items.map(e=>this.itemToString(e)).join("")}getLayoutItems(){return this.items}itemToString(e){switch(e){case m.SPACE:return" ";case m.NEWLINE:case m.MANDATORY_NEWLINE:return`
`;case m.SINGLE_INDENT:return this.indentation.getSingleIndent();default:return e}}}const bU=s=>s===m.SPACE||s===m.SINGLE_INDENT,BU=s=>s===m.SPACE||s===m.SINGLE_INDENT||s===m.NEWLINE;function Lc(s,e){if(e==="standard")return s;let t=[];return s.length>=10&&s.includes(" ")&&([s,...t]=s.split(" ")),e==="tabularLeft"?s=s.padEnd(9," "):s=s.padStart(9," "),s+["",...t].join(" ")}function _c(s){return Gg(s)||s===g.RESERVED_CLAUSE||s===g.RESERVED_SELECT||s===g.RESERVED_SET_OPERATION||s===g.RESERVED_JOIN||s===g.LIMIT}const Xo="top-level",GU="block-level";class Zu{constructor(e){this.indent=e,this.indentTypes=[]}getSingleIndent(){return this.indent}getLevel(){return this.indentTypes.length}increaseTopLevel(){this.indentTypes.push(Xo)}increaseBlockLevel(){this.indentTypes.push(GU)}decreaseTopLevel(){this.indentTypes.length>0&&Di(this.indentTypes)===Xo&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===Xo;);}}class HU extends zu{constructor(e){super(new Zu("")),this.expressionWidth=e,this.length=0,this.trailingSpace=!1}add(...e){if(e.forEach(t=>this.addToLength(t)),this.length>this.expressionWidth)throw new $l;super.add(...e)}addToLength(e){if(typeof e=="string")this.length+=e.length,this.trailingSpace=!1;else{if(e===m.MANDATORY_NEWLINE||e===m.NEWLINE)throw new $l;e===m.INDENT||e===m.SINGLE_INDENT||e===m.SPACE?this.trailingSpace||(this.length++,this.trailingSpace=!0):(e===m.NO_NEWLINE||e===m.NO_SPACE)&&this.trailingSpace&&(this.trailingSpace=!1,this.length--)}}}class $l extends Error{}class fr{constructor({cfg:e,dialectCfg:t,params:i,layout:n,inline:r=!1}){this.inline=!1,this.nodes=[],this.index=-1,this.cfg=e,this.dialectCfg=t,this.inline=r,this.params=i,this.layout=n}format(e){for(this.nodes=e,this.index=0;this.index<this.nodes.length;this.index++)this.formatNode(this.nodes[this.index]);return this.layout}formatNode(e){this.formatComments(e.leadingComments),this.formatNodeWithoutComments(e),this.formatComments(e.trailingComments)}formatNodeWithoutComments(e){switch(e.type){case G.function_call:return this.formatFunctionCall(e);case G.parameterized_data_type:return this.formatParameterizedDataType(e);case G.array_subscript:return this.formatArraySubscript(e);case G.property_access:return this.formatPropertyAccess(e);case G.parenthesis:return this.formatParenthesis(e);case G.between_predicate:return this.formatBetweenPredicate(e);case G.case_expression:return this.formatCaseExpression(e);case G.case_when:return this.formatCaseWhen(e);case G.case_else:return this.formatCaseElse(e);case G.clause:return this.formatClause(e);case G.set_operation:return this.formatSetOperation(e);case G.limit_clause:return this.formatLimitClause(e);case G.all_columns_asterisk:return this.formatAllColumnsAsterisk(e);case G.literal:return this.formatLiteral(e);case G.identifier:return this.formatIdentifier(e);case G.parameter:return this.formatParameter(e);case G.operator:return this.formatOperator(e);case G.comma:return this.formatComma(e);case G.line_comment:return this.formatLineComment(e);case G.block_comment:return this.formatBlockComment(e);case G.disable_comment:return this.formatBlockComment(e);case G.data_type:return this.formatDataType(e);case G.keyword:return this.formatKeywordNode(e)}}formatFunctionCall(e){this.withComments(e.nameKw,()=>{this.layout.add(this.showFunctionKw(e.nameKw))}),this.formatNode(e.parenthesis)}formatParameterizedDataType(e){this.withComments(e.dataType,()=>{this.layout.add(this.showDataType(e.dataType))}),this.formatNode(e.parenthesis)}formatArraySubscript(e){let t;switch(e.array.type){case G.data_type:t=this.showDataType(e.array);break;case G.keyword:t=this.showKw(e.array);break;default:t=this.showIdentifier(e.array);break}this.withComments(e.array,()=>{this.layout.add(t)}),this.formatNode(e.parenthesis)}formatPropertyAccess(e){this.formatNode(e.object),this.layout.add(m.NO_SPACE,e.operator),this.formatNode(e.property)}formatParenthesis(e){const t=this.formatInlineExpression(e.children);t?(this.layout.add(e.openParen),this.layout.add(...t.getLayoutItems()),this.layout.add(m.NO_SPACE,e.closeParen,m.SPACE)):(this.layout.add(e.openParen,m.NEWLINE),bs(this.cfg)?(this.layout.add(m.INDENT),this.layout=this.formatSubExpression(e.children)):(this.layout.indentation.increaseBlockLevel(),this.layout.add(m.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseBlockLevel()),this.layout.add(m.NEWLINE,m.INDENT,e.closeParen,m.SPACE))}formatBetweenPredicate(e){this.layout.add(this.showKw(e.betweenKw),m.SPACE),this.layout=this.formatSubExpression(e.expr1),this.layout.add(m.NO_SPACE,m.SPACE,this.showNonTabularKw(e.andKw),m.SPACE),this.layout=this.formatSubExpression(e.expr2),this.layout.add(m.SPACE)}formatCaseExpression(e){this.formatNode(e.caseKw),this.layout.indentation.increaseBlockLevel(),this.layout=this.formatSubExpression(e.expr),this.layout=this.formatSubExpression(e.clauses),this.layout.indentation.decreaseBlockLevel(),this.layout.add(m.NEWLINE,m.INDENT),this.formatNode(e.endKw)}formatCaseWhen(e){this.layout.add(m.NEWLINE,m.INDENT),this.formatNode(e.whenKw),this.layout=this.formatSubExpression(e.condition),this.formatNode(e.thenKw),this.layout=this.formatSubExpression(e.result)}formatCaseElse(e){this.layout.add(m.NEWLINE,m.INDENT),this.formatNode(e.elseKw),this.layout=this.formatSubExpression(e.result)}formatClause(e){this.isOnelineClause(e)?this.formatClauseInOnelineStyle(e):bs(this.cfg)?this.formatClauseInTabularStyle(e):this.formatClauseInIndentedStyle(e)}isOnelineClause(e){return bs(this.cfg)?this.dialectCfg.tabularOnelineClauses[e.nameKw.text]:this.dialectCfg.onelineClauses[e.nameKw.text]}formatClauseInIndentedStyle(e){this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e.nameKw),m.NEWLINE),this.layout.indentation.increaseTopLevel(),this.layout.add(m.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatClauseInOnelineStyle(e){this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e.nameKw),m.SPACE),this.layout=this.formatSubExpression(e.children)}formatClauseInTabularStyle(e){this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e.nameKw),m.SPACE),this.layout.indentation.increaseTopLevel(),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatSetOperation(e){this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e.nameKw),m.NEWLINE),this.layout.add(m.INDENT),this.layout=this.formatSubExpression(e.children)}formatLimitClause(e){this.withComments(e.limitKw,()=>{this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e.limitKw))}),this.layout.indentation.increaseTopLevel(),bs(this.cfg)?this.layout.add(m.SPACE):this.layout.add(m.NEWLINE,m.INDENT),e.offset?(this.layout=this.formatSubExpression(e.offset),this.layout.add(m.NO_SPACE,",",m.SPACE),this.layout=this.formatSubExpression(e.count)):this.layout=this.formatSubExpression(e.count),this.layout.indentation.decreaseTopLevel()}formatAllColumnsAsterisk(e){this.layout.add("*",m.SPACE)}formatLiteral(e){this.layout.add(e.text,m.SPACE)}formatIdentifier(e){this.layout.add(this.showIdentifier(e),m.SPACE)}formatParameter(e){this.layout.add(this.params.get(e),m.SPACE)}formatOperator({text:e}){this.cfg.denseOperators||this.dialectCfg.alwaysDenseOperators.includes(e)?this.layout.add(m.NO_SPACE,e):e===":"?this.layout.add(m.NO_SPACE,e,m.SPACE):this.layout.add(e,m.SPACE)}formatComma(e){this.inline?this.layout.add(m.NO_SPACE,",",m.SPACE):this.layout.add(m.NO_SPACE,",",m.NEWLINE,m.INDENT)}withComments(e,t){this.formatComments(e.leadingComments),t(),this.formatComments(e.trailingComments)}formatComments(e){e&&e.forEach(t=>{t.type===G.line_comment?this.formatLineComment(t):this.formatBlockComment(t)})}formatLineComment(e){ko(e.precedingWhitespace||"")?this.layout.add(m.NEWLINE,m.INDENT,e.text,m.MANDATORY_NEWLINE,m.INDENT):this.layout.getLayoutItems().length>0?this.layout.add(m.NO_NEWLINE,m.SPACE,e.text,m.MANDATORY_NEWLINE,m.INDENT):this.layout.add(e.text,m.MANDATORY_NEWLINE,m.INDENT)}formatBlockComment(e){e.type===G.block_comment&&this.isMultilineBlockComment(e)?(this.splitBlockComment(e.text).forEach(t=>{this.layout.add(m.NEWLINE,m.INDENT,t)}),this.layout.add(m.NEWLINE,m.INDENT)):this.layout.add(e.text,m.SPACE)}isMultilineBlockComment(e){return ko(e.text)||ko(e.precedingWhitespace||"")}isDocComment(e){const t=e.split(/\n/);return/^\/\*\*?$/.test(t[0])&&t.slice(1,t.length-1).every(i=>/^\s*\*/.test(i))&&/^\s*\*\/$/.test(Di(t))}splitBlockComment(e){return this.isDocComment(e)?e.split(/\n/).map(t=>/^\s*\*/.test(t)?" "+t.replace(/^\s*/,""):t):e.split(/\n/).map(t=>t.replace(/^\s*/,""))}formatSubExpression(e){return new fr({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:this.layout,inline:this.inline}).format(e)}formatInlineExpression(e){const t=this.params.getPositionalParameterIndex();try{return new fr({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:new HU(this.cfg.expressionWidth),inline:!0}).format(e)}catch(i){if(i instanceof $l){this.params.setPositionalParameterIndex(t);return}else throw i}}formatKeywordNode(e){switch(e.tokenType){case g.RESERVED_JOIN:return this.formatJoin(e);case g.AND:case g.OR:case g.XOR:return this.formatLogicalOperator(e);default:return this.formatKeyword(e)}}formatJoin(e){bs(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e),m.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e),m.SPACE)}formatKeyword(e){this.layout.add(this.showKw(e),m.SPACE)}formatLogicalOperator(e){this.cfg.logicalOperatorNewline==="before"?bs(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e),m.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(m.NEWLINE,m.INDENT,this.showKw(e),m.SPACE):this.layout.add(this.showKw(e),m.NEWLINE,m.INDENT)}formatDataType(e){this.layout.add(this.showDataType(e),m.SPACE)}showKw(e){return _c(e.tokenType)?Lc(this.showNonTabularKw(e),this.cfg.indentStyle):this.showNonTabularKw(e)}showNonTabularKw(e){switch(this.cfg.keywordCase){case"preserve":return vn(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showFunctionKw(e){return _c(e.tokenType)?Lc(this.showNonTabularFunctionKw(e),this.cfg.indentStyle):this.showNonTabularFunctionKw(e)}showNonTabularFunctionKw(e){switch(this.cfg.functionCase){case"preserve":return vn(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showIdentifier(e){if(e.quoted)return e.text;switch(this.cfg.identifierCase){case"preserve":return e.text;case"upper":return e.text.toUpperCase();case"lower":return e.text.toLowerCase()}}showDataType(e){switch(this.cfg.dataTypeCase){case"preserve":return vn(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}}class vU{constructor(e,t){this.dialect=e,this.cfg=t,this.params=new fU(this.cfg.params)}format(e){const t=this.parse(e);return this.formatAst(t).trimEnd()}parse(e){return xU(this.dialect.tokenizer).parse(e,this.cfg.paramTypes||{})}formatAst(e){return e.map(t=>this.formatStatement(t)).join(`
`.repeat(this.cfg.linesBetweenQueries+1))}formatStatement(e){const t=new fr({cfg:this.cfg,dialectCfg:this.dialect.formatOptions,params:this.params,layout:new zu(new Zu(uU(this.cfg)))}).format(e.children);return e.hasSemicolon&&(this.cfg.newlineBeforeSemicolon?t.add(m.NEWLINE,";"):t.add(m.NO_NEWLINE,";")),t.toString()}}class Fn extends Error{}function wU(s){const e=["multilineLists","newlineBeforeOpenParen","newlineBeforeCloseParen","aliasAs","commaPosition","tabulateAlias"];for(const t of e)if(t in s)throw new Fn(`${t} config is no more supported.`);if(s.expressionWidth<=0)throw new Fn(`expressionWidth config must be positive number. Received ${s.expressionWidth} instead.`);if(s.params&&!FU(s.params)&&console.warn('WARNING: All "params" option values should be strings.'),s.paramTypes&&!YU(s.paramTypes))throw new Fn("Empty regex given in custom paramTypes. That would result in matching infinite amount of parameters.");return s}function FU(s){return(s instanceof Array?s:Object.values(s)).every(t=>typeof t=="string")}function YU(s){return s.custom&&Array.isArray(s.custom)?s.custom.every(e=>e.regex!==""):!0}var kU=function(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(s);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(t[i[n]]=s[i[n]]);return t};const ef={bigquery:"bigquery",db2:"db2",db2i:"db2i",duckdb:"duckdb",hive:"hive",mariadb:"mariadb",mysql:"mysql",n1ql:"n1ql",plsql:"plsql",postgresql:"postgresql",redshift:"redshift",spark:"spark",sqlite:"sqlite",sql:"sql",tidb:"tidb",trino:"trino",transactsql:"transactsql",tsql:"transactsql",singlestoredb:"singlestoredb",snowflake:"snowflake"},VU=Object.keys(ef),WU={tabWidth:2,useTabs:!1,keywordCase:"preserve",identifierCase:"preserve",dataTypeCase:"preserve",functionCase:"preserve",indentStyle:"standard",logicalOperatorNewline:"before",expressionWidth:50,linesBetweenQueries:1,denseOperators:!1,newlineBeforeSemicolon:!1},XU=(s,e={})=>{if(typeof e.language=="string"&&!VU.includes(e.language))throw new Fn(`Unsupported SQL dialect: ${e.language}`);const t=ef[e.language||"sql"];return KU(s,Object.assign(Object.assign({},e),{dialect:zM[t]}))},KU=(s,e)=>{var{dialect:t}=e,i=kU(e,["dialect"]);if(typeof s!="string")throw new Error("Invalid query argument. Expected string, instead got "+typeof s);const n=wU(Object.assign(Object.assign({},WU),i));return new vU(hU(t),n).format(s)},$U=()=>{const s=Hr(),e=()=>{const t=s.getEditor("MySQLEditor");if(!t)return;const i=t.editorView.state.doc.toString(),n=XU(i);t.editorView.dispatch({changes:{from:0,to:t.editorView.state.doc.length,insert:n},selection:{anchor:t.editorView.state.doc.length}})};return R.jsx(et,{onClick:e,size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(yd,{})})};function JU({onRunQuery:s,disabled:e}){const t=Hr(),i=I.useCallback(()=>{const n=t.getEditor("MySQLEditor");if(!n)return;let r;const o=n.getCurStatements();o[0].content===""?r=n.getNearbyStatement():r=o.at(-1),r!=null&&r.content&&s(r.content)},[t,s]);return I.useEffect(()=>{function n(r){r.metaKey&&r.key==="Enter"&&(r.preventDefault(),i())}return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[i]),R.jsx("div",{className:"w-fit",children:R.jsxs(et,{size:"sm",className:"justify-start",disabled:e,onClick:i,children:["Run ",R.jsx("span",{className:"opacity-40",children:"⌘ ⏎"})]})})}function jU(){return R.jsx(et,{disabled:!0,size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(_d,{})})}function QU(s){const e=I.useRef({value:s,previous:s});return I.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var qU=[" ","Enter","ArrowUp","ArrowDown"],zU=[" ","Enter"],gs="Select",[Fr,Yr,ZU]=tS(gs),[ai,Ay]=Ir(gs,[ZU,Cr]),kr=Cr(),[e0,os]=ai(gs),[t0,s0]=ai(gs),tf=s=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:n,onOpenChange:r,value:o,defaultValue:l,onValueChange:a,dir:E,name:T,autoComplete:c,disabled:h,required:A,form:u}=s,f=kr(e),[S,d]=I.useState(null),[O,p]=I.useState(null),[P,L]=I.useState(!1),M=Mc(E),[D,H]=Mi({prop:i,defaultProp:n??!1,onChange:r,caller:gs}),[Y,X]=Mi({prop:o,defaultProp:l,onChange:a,caller:gs}),v=I.useRef(null),B=S?u||!!S.closest("form"):!0,[K,W]=I.useState(new Set),J=Array.from(K).map(ee=>ee.props.value).join(";");return R.jsx(xc,{...f,children:R.jsxs(e0,{required:A,scope:e,trigger:S,onTriggerChange:d,valueNode:O,onValueNodeChange:p,valueNodeHasChildren:P,onValueNodeHasChildrenChange:L,contentId:Nr(),value:Y,onValueChange:X,open:D,onOpenChange:H,dir:M,triggerPointerDownPosRef:v,disabled:h,children:[R.jsx(Fr.Provider,{scope:e,children:R.jsx(t0,{scope:s.__scopeSelect,onNativeOptionAdd:I.useCallback(ee=>{W(Ee=>new Set(Ee).add(ee))},[]),onNativeOptionRemove:I.useCallback(ee=>{W(Ee=>{const Re=new Set(Ee);return Re.delete(ee),Re})},[]),children:t})}),B?R.jsxs(Lf,{"aria-hidden":!0,required:A,tabIndex:-1,name:T,autoComplete:c,value:Y,onChange:ee=>X(ee.target.value),disabled:h,form:u,children:[Y===void 0?R.jsx("option",{value:""}):null,Array.from(K)]},J):null]})})};tf.displayName=gs;var sf="SelectTrigger",nf=I.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:i=!1,...n}=s,r=kr(t),o=os(sf,t),l=o.disabled||i,a=tt(e,o.onTriggerChange),E=Yr(t),T=I.useRef("touch"),[c,h,A]=gf(f=>{const S=E().filter(p=>!p.disabled),d=S.find(p=>p.value===o.value),O=Pf(S,f,d);O!==void 0&&o.onValueChange(O.value)}),u=f=>{l||(o.onOpenChange(!0),A()),f&&(o.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return R.jsx(bc,{asChild:!0,...r,children:R.jsx(Ne.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_f(o.value)?"":void 0,...n,ref:a,onClick:z(n.onClick,f=>{f.currentTarget.focus(),T.current!=="mouse"&&u(f)}),onPointerDown:z(n.onPointerDown,f=>{T.current=f.pointerType;const S=f.target;S.hasPointerCapture(f.pointerId)&&S.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(u(f),f.preventDefault())}),onKeyDown:z(n.onKeyDown,f=>{const S=c.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&h(f.key),!(S&&f.key===" ")&&qU.includes(f.key)&&(u(),f.preventDefault())})})})});nf.displayName=sf;var rf="SelectValue",of=I.forwardRef((s,e)=>{const{__scopeSelect:t,className:i,style:n,children:r,placeholder:o="",...l}=s,a=os(rf,t),{onValueNodeHasChildrenChange:E}=a,T=r!==void 0,c=tt(e,a.onValueNodeChange);return qt(()=>{E(T)},[E,T]),R.jsx(Ne.span,{...l,ref:c,style:{pointerEvents:"none"},children:_f(a.value)?R.jsx(R.Fragment,{children:o}):r})});of.displayName=rf;var i0="SelectIcon",lf=I.forwardRef((s,e)=>{const{__scopeSelect:t,children:i,...n}=s;return R.jsx(Ne.span,{"aria-hidden":!0,...n,ref:e,children:i||"▼"})});lf.displayName=i0;var n0="SelectPortal",af=s=>R.jsx(Bc,{asChild:!0,...s});af.displayName=n0;var Ps="SelectContent",Ef=I.forwardRef((s,e)=>{const t=os(Ps,s.__scopeSelect),[i,n]=I.useState();if(qt(()=>{n(new DocumentFragment)},[]),!t.open){const r=i;return r?Gc.createPortal(R.jsx(Tf,{scope:s.__scopeSelect,children:R.jsx(Fr.Slot,{scope:s.__scopeSelect,children:R.jsx("div",{children:s.children})})}),r):null}return R.jsx(cf,{...s,ref:e})});Ef.displayName=Ps;var ht=10,[Tf,ls]=ai(Ps),r0="SelectContentImpl",o0=lS("SelectContent.RemoveScroll"),cf=I.forwardRef((s,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:r,onPointerDownOutside:o,side:l,sideOffset:a,align:E,alignOffset:T,arrowPadding:c,collisionBoundary:h,collisionPadding:A,sticky:u,hideWhenDetached:f,avoidCollisions:S,...d}=s,O=os(Ps,t),[p,P]=I.useState(null),[L,M]=I.useState(null),D=tt(e,k=>P(k)),[H,Y]=I.useState(null),[X,v]=I.useState(null),B=Yr(t),[K,W]=I.useState(!1),J=I.useRef(!1);I.useEffect(()=>{if(p)return nS(p)},[p]),rS();const ee=I.useCallback(k=>{const[he,...je]=B().map(oe=>oe.ref.current),[ce]=je.slice(-1),re=document.activeElement;for(const oe of k)if(oe===re||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===he&&L&&(L.scrollTop=0),oe===ce&&L&&(L.scrollTop=L.scrollHeight),oe==null||oe.focus(),document.activeElement!==re))return},[B,L]),Ee=I.useCallback(()=>ee([H,p]),[ee,H,p]);I.useEffect(()=>{K&&Ee()},[K,Ee]);const{onOpenChange:Re,triggerPointerDownPosRef:ne}=O;I.useEffect(()=>{if(p){let k={x:0,y:0};const he=ce=>{var re,oe;k={x:Math.abs(Math.round(ce.pageX)-(((re=ne.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((oe=ne.current)==null?void 0:oe.y)??0))}},je=ce=>{k.x<=10&&k.y<=10?ce.preventDefault():p.contains(ce.target)||Re(!1),document.removeEventListener("pointermove",he),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",je,{capture:!0})}}},[p,Re,ne]),I.useEffect(()=>{const k=()=>Re(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[Re]);const[xe,ke]=gf(k=>{const he=B().filter(re=>!re.disabled),je=he.find(re=>re.ref.current===document.activeElement),ce=Pf(he,k,je);ce&&setTimeout(()=>ce.ref.current.focus())}),be=I.useCallback((k,he,je)=>{const ce=!J.current&&!je;(O.value!==void 0&&O.value===he||ce)&&(Y(k),ce&&(J.current=!0))},[O.value]),Ve=I.useCallback(()=>p==null?void 0:p.focus(),[p]),We=I.useCallback((k,he,je)=>{const ce=!J.current&&!je;(O.value!==void 0&&O.value===he||ce)&&v(k)},[O.value]),ct=i==="popper"?Jl:hf,St=ct===Jl?{side:l,sideOffset:a,align:E,alignOffset:T,arrowPadding:c,collisionBoundary:h,collisionPadding:A,sticky:u,hideWhenDetached:f,avoidCollisions:S}:{};return R.jsx(Tf,{scope:t,content:p,viewport:L,onViewportChange:M,itemRefCallback:be,selectedItem:H,onItemLeave:Ve,itemTextRefCallback:We,focusSelectedItem:Ee,selectedItemText:X,position:i,isPositioned:K,searchRef:xe,children:R.jsx(oS,{as:o0,allowPinchZoom:!0,children:R.jsx(aS,{asChild:!0,trapped:O.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:z(n,k=>{var he;(he=O.trigger)==null||he.focus({preventScroll:!0}),k.preventDefault()}),children:R.jsx(Hc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>O.onOpenChange(!1),children:R.jsx(ct,{role:"listbox",id:O.contentId,"data-state":O.open?"open":"closed",dir:O.dir,onContextMenu:k=>k.preventDefault(),...d,...St,onPlaced:()=>W(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...d.style},onKeyDown:z(d.onKeyDown,k=>{const he=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!he&&k.key.length===1&&ke(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let ce=B().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(k.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const re=k.target,oe=ce.indexOf(re);ce=ce.slice(oe+1)}setTimeout(()=>ee(ce)),k.preventDefault()}})})})})})})});cf.displayName=r0;var l0="SelectItemAlignedPosition",hf=I.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:i,...n}=s,r=os(Ps,t),o=ls(Ps,t),[l,a]=I.useState(null),[E,T]=I.useState(null),c=tt(e,D=>T(D)),h=Yr(t),A=I.useRef(!1),u=I.useRef(!0),{viewport:f,selectedItem:S,selectedItemText:d,focusSelectedItem:O}=o,p=I.useCallback(()=>{if(r.trigger&&r.valueNode&&l&&E&&f&&S&&d){const D=r.trigger.getBoundingClientRect(),H=E.getBoundingClientRect(),Y=r.valueNode.getBoundingClientRect(),X=d.getBoundingClientRect();if(r.dir!=="rtl"){const re=X.left-H.left,oe=Y.left-re,as=D.left-oe,Es=D.width+as,Kr=Math.max(Es,H.width),$r=window.innerWidth-ht,Jr=Wa(oe,[ht,Math.max(ht,$r-Kr)]);l.style.minWidth=Es+"px",l.style.left=Jr+"px"}else{const re=H.right-X.right,oe=window.innerWidth-Y.right-re,as=window.innerWidth-D.right-oe,Es=D.width+as,Kr=Math.max(Es,H.width),$r=window.innerWidth-ht,Jr=Wa(oe,[ht,Math.max(ht,$r-Kr)]);l.style.minWidth=Es+"px",l.style.right=Jr+"px"}const v=h(),B=window.innerHeight-ht*2,K=f.scrollHeight,W=window.getComputedStyle(E),J=parseInt(W.borderTopWidth,10),ee=parseInt(W.paddingTop,10),Ee=parseInt(W.borderBottomWidth,10),Re=parseInt(W.paddingBottom,10),ne=J+ee+K+Re+Ee,xe=Math.min(S.offsetHeight*5,ne),ke=window.getComputedStyle(f),be=parseInt(ke.paddingTop,10),Ve=parseInt(ke.paddingBottom,10),We=D.top+D.height/2-ht,ct=B-We,St=S.offsetHeight/2,k=S.offsetTop+St,he=J+ee+k,je=ne-he;if(he<=We){const re=v.length>0&&S===v[v.length-1].ref.current;l.style.bottom="0px";const oe=E.clientHeight-f.offsetTop-f.offsetHeight,as=Math.max(ct,St+(re?Ve:0)+oe+Ee),Es=he+as;l.style.height=Es+"px"}else{const re=v.length>0&&S===v[0].ref.current;l.style.top="0px";const as=Math.max(We,J+f.offsetTop+(re?be:0)+St)+je;l.style.height=as+"px",f.scrollTop=he-We+f.offsetTop}l.style.margin=`${ht}px 0`,l.style.minHeight=xe+"px",l.style.maxHeight=B+"px",i==null||i(),requestAnimationFrame(()=>A.current=!0)}},[h,r.trigger,r.valueNode,l,E,f,S,d,r.dir,i]);qt(()=>p(),[p]);const[P,L]=I.useState();qt(()=>{E&&L(window.getComputedStyle(E).zIndex)},[E]);const M=I.useCallback(D=>{D&&u.current===!0&&(p(),O==null||O(),u.current=!1)},[p,O]);return R.jsx(E0,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:A,onScrollButtonChange:M,children:R.jsx("div",{ref:a,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:R.jsx(Ne.div,{...n,ref:c,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});hf.displayName=l0;var a0="SelectPopperPosition",Jl=I.forwardRef((s,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:n=ht,...r}=s,o=kr(t);return R.jsx(vc,{...o,...r,ref:e,align:i,collisionPadding:n,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jl.displayName=a0;var[E0,ka]=ai(Ps,{}),jl="SelectViewport",Af=I.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:i,...n}=s,r=ls(jl,t),o=ka(jl,t),l=tt(e,r.onViewportChange),a=I.useRef(0);return R.jsxs(R.Fragment,{children:[R.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),R.jsx(Fr.Slot,{scope:t,children:R.jsx(Ne.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:z(n.onScroll,E=>{const T=E.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&c){const A=Math.abs(a.current-T.scrollTop);if(A>0){const u=window.innerHeight-ht*2,f=parseFloat(c.style.minHeight),S=parseFloat(c.style.height),d=Math.max(f,S);if(d<u){const O=d+A,p=Math.min(u,O),P=O-p;c.style.height=p+"px",c.style.bottom==="0px"&&(T.scrollTop=P>0?P:0,c.style.justifyContent="flex-end")}}}a.current=T.scrollTop})})})]})});Af.displayName=jl;var Rf="SelectGroup",[T0,c0]=ai(Rf),uf=I.forwardRef((s,e)=>{const{__scopeSelect:t,...i}=s,n=Nr();return R.jsx(T0,{scope:t,id:n,children:R.jsx(Ne.div,{role:"group","aria-labelledby":n,...i,ref:e})})});uf.displayName=Rf;var ff="SelectLabel",h0=I.forwardRef((s,e)=>{const{__scopeSelect:t,...i}=s,n=c0(ff,t);return R.jsx(Ne.div,{id:n.id,...i,ref:e})});h0.displayName=ff;var Sr="SelectItem",[A0,Sf]=ai(Sr),df=I.forwardRef((s,e)=>{const{__scopeSelect:t,value:i,disabled:n=!1,textValue:r,...o}=s,l=os(Sr,t),a=ls(Sr,t),E=l.value===i,[T,c]=I.useState(r??""),[h,A]=I.useState(!1),u=tt(e,O=>{var p;return(p=a.itemRefCallback)==null?void 0:p.call(a,O,i,n)}),f=Nr(),S=I.useRef("touch"),d=()=>{n||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return R.jsx(A0,{scope:t,value:i,disabled:n,textId:f,isSelected:E,onItemTextChange:I.useCallback(O=>{c(p=>p||((O==null?void 0:O.textContent)??"").trim())},[]),children:R.jsx(Fr.ItemSlot,{scope:t,value:i,disabled:n,textValue:T,children:R.jsx(Ne.div,{role:"option","aria-labelledby":f,"data-highlighted":h?"":void 0,"aria-selected":E&&h,"data-state":E?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...o,ref:u,onFocus:z(o.onFocus,()=>A(!0)),onBlur:z(o.onBlur,()=>A(!1)),onClick:z(o.onClick,()=>{S.current!=="mouse"&&d()}),onPointerUp:z(o.onPointerUp,()=>{S.current==="mouse"&&d()}),onPointerDown:z(o.onPointerDown,O=>{S.current=O.pointerType}),onPointerMove:z(o.onPointerMove,O=>{var p;S.current=O.pointerType,n?(p=a.onItemLeave)==null||p.call(a):S.current==="mouse"&&O.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(o.onPointerLeave,O=>{var p;O.currentTarget===document.activeElement&&((p=a.onItemLeave)==null||p.call(a))}),onKeyDown:z(o.onKeyDown,O=>{var P;((P=a.searchRef)==null?void 0:P.current)!==""&&O.key===" "||(zU.includes(O.key)&&d(),O.key===" "&&O.preventDefault())})})})})});df.displayName=Sr;var pi="SelectItemText",Of=I.forwardRef((s,e)=>{const{__scopeSelect:t,className:i,style:n,...r}=s,o=os(pi,t),l=ls(pi,t),a=Sf(pi,t),E=s0(pi,t),[T,c]=I.useState(null),h=tt(e,d=>c(d),a.onItemTextChange,d=>{var O;return(O=l.itemTextRefCallback)==null?void 0:O.call(l,d,a.value,a.disabled)}),A=T==null?void 0:T.textContent,u=I.useMemo(()=>R.jsx("option",{value:a.value,disabled:a.disabled,children:A},a.value),[a.disabled,a.value,A]),{onNativeOptionAdd:f,onNativeOptionRemove:S}=E;return qt(()=>(f(u),()=>S(u)),[f,S,u]),R.jsxs(R.Fragment,{children:[R.jsx(Ne.span,{id:a.textId,...r,ref:h}),a.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Gc.createPortal(r.children,o.valueNode):null]})});Of.displayName=pi;var If="SelectItemIndicator",Nf=I.forwardRef((s,e)=>{const{__scopeSelect:t,...i}=s;return Sf(If,t).isSelected?R.jsx(Ne.span,{"aria-hidden":!0,...i,ref:e}):null});Nf.displayName=If;var Ql="SelectScrollUpButton",pf=I.forwardRef((s,e)=>{const t=ls(Ql,s.__scopeSelect),i=ka(Ql,s.__scopeSelect),[n,r]=I.useState(!1),o=tt(e,i.onScrollButtonChange);return qt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const E=a.scrollTop>0;r(E)};const a=t.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?R.jsx(mf,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:a}=t;l&&a&&(l.scrollTop=l.scrollTop-a.offsetHeight)}}):null});pf.displayName=Ql;var ql="SelectScrollDownButton",Cf=I.forwardRef((s,e)=>{const t=ls(ql,s.__scopeSelect),i=ka(ql,s.__scopeSelect),[n,r]=I.useState(!1),o=tt(e,i.onScrollButtonChange);return qt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const E=a.scrollHeight-a.clientHeight,T=Math.ceil(a.scrollTop)<E;r(T)};const a=t.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?R.jsx(mf,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:a}=t;l&&a&&(l.scrollTop=l.scrollTop+a.offsetHeight)}}):null});Cf.displayName=ql;var mf=I.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:i,...n}=s,r=ls("SelectScrollButton",t),o=I.useRef(null),l=Yr(t),a=I.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return I.useEffect(()=>()=>a(),[a]),qt(()=>{var T;const E=l().find(c=>c.ref.current===document.activeElement);(T=E==null?void 0:E.ref.current)==null||T.scrollIntoView({block:"nearest"})},[l]),R.jsx(Ne.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:z(n.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:z(n.onPointerMove,()=>{var E;(E=r.onItemLeave)==null||E.call(r),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:z(n.onPointerLeave,()=>{a()})})}),R0="SelectSeparator",u0=I.forwardRef((s,e)=>{const{__scopeSelect:t,...i}=s;return R.jsx(Ne.div,{"aria-hidden":!0,...i,ref:e})});u0.displayName=R0;var zl="SelectArrow",f0=I.forwardRef((s,e)=>{const{__scopeSelect:t,...i}=s,n=kr(t),r=os(zl,t),o=ls(zl,t);return r.open&&o.position==="popper"?R.jsx(wc,{...n,...i,ref:e}):null});f0.displayName=zl;var S0="SelectBubbleInput",Lf=I.forwardRef(({__scopeSelect:s,value:e,...t},i)=>{const n=I.useRef(null),r=tt(i,n),o=QU(e);return I.useEffect(()=>{const l=n.current;if(!l)return;const a=window.HTMLSelectElement.prototype,T=Object.getOwnPropertyDescriptor(a,"value").set;if(o!==e&&T){const c=new Event("change",{bubbles:!0});T.call(l,e),l.dispatchEvent(c)}},[o,e]),R.jsx(Ne.select,{...t,style:{...sS,...t.style},ref:r,defaultValue:e})});Lf.displayName=S0;function _f(s){return s===""||s===void 0}function gf(s){const e=iS(s),t=I.useRef(""),i=I.useRef(0),n=I.useCallback(o=>{const l=t.current+o;e(l),function a(E){t.current=E,window.clearTimeout(i.current),E!==""&&(i.current=window.setTimeout(()=>a(""),1e3))}(l)},[e]),r=I.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return I.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,n,r]}function Pf(s,e,t){const n=e.length>1&&Array.from(e).every(E=>E===e[0])?e[0]:e,r=t?s.indexOf(t):-1;let o=d0(s,Math.max(r,0));n.length===1&&(o=o.filter(E=>E!==t));const a=o.find(E=>E.textValue.toLowerCase().startsWith(n.toLowerCase()));return a!==t?a:void 0}function d0(s,e){return s.map((t,i)=>s[(e+i)%s.length])}var O0=tf,I0=nf,N0=of,p0=lf,C0=af,m0=Ef,L0=Af,_0=uf,g0=df,P0=Of,D0=Nf,M0=pf,U0=Cf;function y0({...s}){return R.jsx(O0,{"data-slot":"select",...s})}function x0({...s}){return R.jsx(_0,{"data-slot":"select-group",...s})}function b0({...s}){return R.jsx(N0,{"data-slot":"select-value",...s})}function B0({className:s,size:e="default",children:t,...i}){return R.jsxs(I0,{"data-slot":"select-trigger","data-size":e,className:Z("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[t,R.jsx(p0,{asChild:!0,children:R.jsx(sh,{className:"size-4 opacity-50"})})]})}function G0({className:s,children:e,position:t="popper",...i}){return R.jsx(C0,{children:R.jsxs(m0,{"data-slot":"select-content",className:Z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...i,children:[R.jsx(v0,{}),R.jsx(L0,{className:Z("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),R.jsx(w0,{})]})})}function H0({className:s,children:e,...t}){return R.jsxs(g0,{"data-slot":"select-item",className:Z("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[R.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:R.jsx(D0,{children:R.jsx(th,{className:"size-4"})})}),R.jsx(P0,{children:e})]})}function v0({className:s,...e}){return R.jsx(M0,{"data-slot":"select-scroll-up-button",className:Z("flex cursor-default items-center justify-center py-1",s),...e,children:R.jsx(rd,{className:"size-4"})})}function w0({className:s,...e}){return R.jsx(U0,{"data-slot":"select-scroll-down-button",className:Z("flex cursor-default items-center justify-center py-1",s),...e,children:R.jsx(sh,{className:"size-4"})})}const F0=()=>{const[s,e]=I.useState(),{data:{items:t}={},isPending:i}=WS();return I.useEffect(()=>{t!=null&&t.length&&!i&&!s&&e(t[0].name)},[t,s,i]),R.jsxs(y0,{value:s,onValueChange:n=>{e(n)},disabled:!0,children:[R.jsx(B0,{className:"hover:bg-sidebar-secondary-accent! h-8! border-none bg-transparent! outline-0",children:R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(Fc,{className:"size-4"}),R.jsx(b0,{})]})}),R.jsx(G0,{children:R.jsx(x0,{children:t==null?void 0:t.map(n=>R.jsx(H0,{value:n.name,children:n.name},n.name))})})]})},Y0=({onRunQuery:s})=>R.jsx("div",{children:R.jsx(mr,{className:"flex justify-between border-b p-4",children:R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(JU,{onRunQuery:s}),R.jsx(F0,{}),R.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[R.jsx($U,{}),R.jsx(jU,{})]})]})})});function k0(){const{worksheetId:s}=si({from:"/sql-editor/$worksheetId/"}),e=Ie(f=>f.selectedQueryRecord),t=Ie(f=>f.setSelectedQueryRecord),{groupRef:i,topRef:n,bottomRef:r,setTopPanelExpanded:o,setBottomPanelExpanded:l,isRightPanelExpanded:a,toggleRightPanel:E}=Ft(),T=ta(),{mutateAsync:c,isPending:h,isIdle:A}=KS({mutation:{onSettled:async f=>{a||E(),await Promise.all([T.invalidateQueries({queryKey:$S({worksheetId:+s})}),T.invalidateQueries({queryKey:XS()})]),f&&t(f)}}}),u=f=>{c({data:{query:f,worksheetId:+s}})};return R.jsxs("div",{className:"flex h-full flex-col",children:[R.jsx(gg,{}),R.jsxs(U_,{children:[R.jsx(Y0,{onRunQuery:u}),R.jsxs(sa,{direction:"vertical",ref:i,children:[R.jsx(Is,{collapsible:!0,defaultSize:30,minSize:25,onCollapse:()=>o(!1),onExpand:()=>o(!0),order:1,ref:n,children:R.jsxs(is,{tableViewport:!0,className:"size-full [&>*>*:first-child]:h-full [&>*>*>*:first-child]:h-full",children:[R.jsx(mu,{}),R.jsx(Pt,{orientation:"horizontal"}),R.jsx(Pt,{orientation:"vertical"})]})}),R.jsx(ur,{}),R.jsx(Is,{collapsible:!0,defaultSize:70,minSize:25,onCollapse:()=>l(!1),onExpand:()=>l(!0),order:2,ref:r,children:R.jsx(Ng,{queryRecord:e,isLoading:h,isIdle:A})})]})]}),R.jsx(mg,{})]})}function V0({className:s,...e}){return R.jsx(Gu,{"data-slot":"tabs",className:Z("flex flex-col gap-2",s),...e})}function W0({className:s,...e}){return R.jsx(Hu,{"data-slot":"tabs-list",className:Z("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...e})}function gc({className:s,...e}){return R.jsx(vu,{"data-slot":"tabs-trigger",className:Z("data-[state=active]:bg-background hover:bg-sidebar-secondary-accent dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 cursor-pointer items-center justify-center gap-1.5 rounded-md border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...e})}function Pc({className:s,...e}){return R.jsx(wu,{"data-slot":"tabs-content",className:Z("flex-1 outline-none",s),...e})}const X0=()=>{const{worksheetId:s}=si({from:"/sql-editor/$worksheetId/"}),{data:{items:e}={},isFetching:t}=Yc(),i=pr(),n=Ie(a=>a.tabs),r=Ie(a=>a.setTabs),o=I.useRef(!0),l=I.useCallback(()=>{var a;if(e!=null&&e.length){let E=[...n];if(E=E.filter(T=>e.some(c=>c.id===T.id)),E.length||(i({to:"/sql-editor/$worksheetId",params:{worksheetId:e[0].id.toString()}}),E.push(e[0])),!E.find(T=>T.id.toString()===s)){const T=(a=e[0])==null?void 0:a.id;T&&i({to:"/sql-editor/$worksheetId",params:{worksheetId:T.toString()}})}r(E)}o.current=!1},[i,r,n,s,e]);return I.useEffect(()=>{!t&&o.current&&l()},[l,t]),{syncSqlEditorTabs:l}};function K0({name:s,type:e}){return R.jsxs("div",{className:"flex items-center justify-between text-xs select-none",children:[R.jsxs("div",{className:"flex items-center overflow-hidden py-2",children:[R.jsx(hd,{className:"text-muted-foreground size-4 flex-shrink-0"}),R.jsx("p",{className:"mx-2 truncate",children:s})]}),R.jsx("span",{className:"text-muted-foreground flex-shrink-0",children:e})]})}function $0({columns:s}){return s!=null&&s.length?R.jsxs(is,{className:"h-[calc(100%-36px-16px)] py-2",children:[R.jsx("div",{className:"px-4",children:s.map((e,t)=>R.jsx(K0,{name:e.name,type:e.type},t))}),R.jsx(Pt,{orientation:"vertical"})]}):null}function J0({isLoading:s,columns:e}){const t=Zc(),i=e.map(r=>t.accessor(o=>o[r.name],{header:r.name,cell:o=>o.getValue(),meta:{headerClassName:"capitalize truncate"}})),n=e.length>0?e[0].rows.map((r,o)=>e.reduce((l,a)=>{var E;return l[a.name]=((E=a.rows[o])==null?void 0:E.data)||"",l},{})):[];return R.jsx(eh,{columns:i,data:n,isLoading:s})}function j0({opened:s,onSetOpened:e,selectedTree:t}){const{data:{items:i}={},isFetching:n}=JS(t.databaseName,t.schemaName,t.tableName);return i?R.jsx(qS,{open:s,onOpenChange:e,children:R.jsxs(zS,{className:"max-h-[calc(100vh-32px)]! w-fit max-w-[calc(100vw-32px)]! min-w-80",children:[R.jsx(ZS,{children:R.jsx(ed,{children:"Preview Table Data"})}),R.jsxs(is,{tableViewport:!0,className:"size-full max-h-[calc(100vh-32px-48px-18px-24px)]! max-w-[calc(100vw-32px-48px)]!",children:[R.jsx(J0,{columns:i,isLoading:n}),R.jsx(Pt,{orientation:"horizontal"}),R.jsx(Pt,{orientation:"vertical"})]})]})}):null}const Q0=({selectedTree:s,onSetOpen:e})=>{const{toggleLeftBottomPanel:t}=Ft();return R.jsxs("div",{className:"mt-4 flex items-center justify-between px-4",children:[R.jsxs("div",{className:"flex items-center overflow-hidden py-2 select-none",children:[R.jsx(VS,{className:"size-4 flex-shrink-0"}),R.jsx("p",{className:"mx-2 truncate text-sm font-medium",children:s==null?void 0:s.tableName})]}),R.jsxs("div",{className:"flex flex-shrink-0 items-center gap-1",children:[R.jsx(et,{onClick:()=>e(!0),size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(Td,{className:"size-4"})}),R.jsx(et,{onClick:t,size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(ea,{className:"size-4"})})]})]})};function q0(){const s=Ie(n=>n.selectedTree),[e,t]=I.useState(!1),{data:{items:i}={}}=jS((s==null?void 0:s.databaseName)??"",(s==null?void 0:s.schemaName)??"",(s==null?void 0:s.tableName)??"",{query:{enabled:!!s}});return i!=null&&i.length?R.jsxs(R.Fragment,{children:[R.jsx(Q0,{selectedTree:s,onSetOpen:t}),R.jsx($0,{columns:i}),s&&R.jsx(j0,{selectedTree:s,opened:e,onSetOpened:t})]}):null}function z0({onLoadDataClick:s,hovered:e}){return R.jsxs(ES,{children:[R.jsx(TS,{asChild:!0,className:Z("invisible group-hover/subitem:visible",e&&"visible"),children:R.jsx(kc,{className:"size-7",children:R.jsx(ih,{})})}),R.jsx(cS,{side:"right",align:"start",children:R.jsx(hS,{onClick:s,children:R.jsx("span",{children:"Load data"})})})]})}function Z0(){const[s,e]=I.useState(!1),{data:{items:t}={},isFetching:i}=qc(),n=Ie(E=>E.selectedTree),r=Ie(E=>E.setSelectedTree),{isLeftBottomPanelExpanded:o,leftBottomRef:l}=Ft(),a=E=>{var T;o||(T=l.current)==null||T.resize(20),r(E)};return R.jsxs(R.Fragment,{children:[R.jsx(BS,{scrollAreaClassName:"h-[calc(100%-56px-2px)]",children:R.jsx(GS,{databases:t,isFetchingDatabases:i,defaultOpen:E=>E.schemas.some(T=>T.tables.some(c=>c.name===(n==null?void 0:n.tableName))),children:E=>R.jsx(HS,{schemas:E.schemas,defaultOpen:T=>T.tables.some(c=>c.name===(n==null?void 0:n.tableName)),children:T=>R.jsx(vS,{tables:T.tables,database:E,schema:T,onClick:c=>a({databaseName:E.name,schemaName:T.name,tableName:c.name}),isActive:c=>(n==null?void 0:n.tableName)===c.name&&n.schemaName===T.name&&n.databaseName===E.name,defaultOpen:T.tables.some(c=>c.name===(n==null?void 0:n.tableName)),renderDropdownMenu:(c,h)=>R.jsx(z0,{onLoadDataClick:()=>{e(!0),r(c)},hovered:h})})})})}),n&&R.jsx(QS,{opened:s,onSetOpened:e,databaseName:n.databaseName,schemaName:n.schemaName,tableName:n.tableName})]})}const e1=({isFetchingWorksheets:s,onRefetchWorksheets:e})=>{const[t,i]=I.useState(!1),n=async()=>{i(!0),await new Promise(r=>setTimeout(r,500)),e(),i(!1)};return R.jsx(mr,{className:"px-4 pt-4",children:R.jsxs("div",{className:"justify flex items-center justify-between gap-2",children:[R.jsxs(FS,{className:"w-full",children:[R.jsx(YS,{children:R.jsx(Qc,{})}),R.jsx(kS,{disabled:!0,placeholder:"Search"})]}),R.jsx(et,{disabled:t||s,onClick:n,size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(wS,{className:Z((t||s)&&"animate-spin")})})]})})};var Df="AlertDialog",[t1,Ry]=Ir(Df,[Vc]),Yt=Vc(),Mf=s=>{const{__scopeAlertDialog:e,...t}=s,i=Yt(e);return R.jsx(AS,{...i,...t,modal:!0})};Mf.displayName=Df;var s1="AlertDialogTrigger",i1=I.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...i}=s,n=Yt(t);return R.jsx(NS,{...n,...i,ref:e})});i1.displayName=s1;var n1="AlertDialogPortal",Uf=s=>{const{__scopeAlertDialog:e,...t}=s,i=Yt(e);return R.jsx(OS,{...i,...t})};Uf.displayName=n1;var r1="AlertDialogOverlay",yf=I.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...i}=s,n=Yt(t);return R.jsx(IS,{...n,...i,ref:e})});yf.displayName=r1;var Ks="AlertDialogContent",[o1,l1]=t1(Ks),a1=fS("AlertDialogContent"),xf=I.forwardRef((s,e)=>{const{__scopeAlertDialog:t,children:i,...n}=s,r=Yt(t),o=I.useRef(null),l=tt(e,o),a=I.useRef(null);return R.jsx(RS,{contentName:Ks,titleName:bf,docsSlug:"alert-dialog",children:R.jsx(o1,{scope:t,cancelRef:a,children:R.jsxs(uS,{role:"alertdialog",...r,...n,ref:l,onOpenAutoFocus:z(n.onOpenAutoFocus,E=>{var T;E.preventDefault(),(T=a.current)==null||T.focus({preventScroll:!0})}),onPointerDownOutside:E=>E.preventDefault(),onInteractOutside:E=>E.preventDefault(),children:[R.jsx(a1,{children:i}),R.jsx(T1,{contentRef:o})]})})})});xf.displayName=Ks;var bf="AlertDialogTitle",Bf=I.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...i}=s,n=Yt(t);return R.jsx(SS,{...n,...i,ref:e})});Bf.displayName=bf;var Gf="AlertDialogDescription",Hf=I.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...i}=s,n=Yt(t);return R.jsx(dS,{...n,...i,ref:e})});Hf.displayName=Gf;var E1="AlertDialogAction",vf=I.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...i}=s,n=Yt(t);return R.jsx(Wc,{...n,...i,ref:e})});vf.displayName=E1;var wf="AlertDialogCancel",Ff=I.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...i}=s,{cancelRef:n}=l1(wf,t),r=Yt(t),o=tt(e,n);return R.jsx(Wc,{...r,...i,ref:o})});Ff.displayName=wf;var T1=({contentRef:s})=>{const e=`\`${Ks}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ks}\` by passing a \`${Gf}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ks}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return I.useEffect(()=>{var i;document.getElementById((i=s.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(e)},[e,s]),null},c1=Mf,h1=Uf,A1=yf,R1=xf,u1=vf,f1=Ff,S1=Bf,d1=Hf;function O1({...s}){return R.jsx(c1,{"data-slot":"alert-dialog",...s})}function I1({...s}){return R.jsx(h1,{"data-slot":"alert-dialog-portal",...s})}function N1({className:s,...e}){return R.jsx(A1,{"data-slot":"alert-dialog-overlay",className:Z("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...e})}function p1({className:s,...e}){return R.jsxs(I1,{children:[R.jsx(N1,{}),R.jsx(R1,{"data-slot":"alert-dialog-content",className:Z("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...e})]})}function C1({className:s,...e}){return R.jsx("div",{"data-slot":"alert-dialog-header",className:Z("flex flex-col gap-2 text-center sm:text-left",s),...e})}function m1({className:s,...e}){return R.jsx("div",{"data-slot":"alert-dialog-footer",className:Z("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...e})}function L1({className:s,...e}){return R.jsx(S1,{"data-slot":"alert-dialog-title",className:Z("text-lg font-semibold",s),...e})}function _1({className:s,...e}){return R.jsx(d1,{"data-slot":"alert-dialog-description",className:Z("text-muted-foreground text-sm",s),...e})}function g1({className:s,variant:e="destructive",...t}){return R.jsx(u1,{className:Z(Xc({variant:e}),s),...t})}function P1({className:s,...e}){return R.jsx(f1,{className:Z(Xc({variant:"outline"}),s),...e})}const D1=({worksheetId:s,opened:e,onSetOpened:t})=>{const i=Ie(T=>T.addTab),n=Ie(T=>T.removeTab),r=pr(),o=ta(),{mutate:l,isPending:a}=pS({mutation:{onSuccess:async()=>{n(s),await o.invalidateQueries({queryKey:$o()}),t(!1),CS.success("Worksheet deleted successfully");const T=o.getQueryData($o()),c=T==null?void 0:T.items.find(h=>h.id!==s);if(!c){r({to:"/home"});return}i(c),r({to:"/sql-editor/$worksheetId",params:{worksheetId:c.id.toString()||""}})}}}),E=()=>{l({worksheetId:s})};return R.jsx(O1,{open:e,onOpenChange:t,children:R.jsxs(p1,{children:[R.jsxs(C1,{children:[R.jsx(L1,{children:"Delete worksheet"}),R.jsx(_1,{children:"Are you sure you want to delete this worksheet? This action cannot be undone."})]}),R.jsxs(m1,{children:[R.jsx(P1,{children:"Cancel"}),R.jsx(g1,{onClick:E,disabled:a,variant:"destructive",children:"Delete"})]})]})})};function M1({worksheet:s}){const[e,t]=I.useState(),[i,n]=I.useState(!1),r=Ie(o=>o.addTab);return R.jsxs(R.Fragment,{children:[R.jsxs(Kc,{children:[R.jsx(yc,{to:"/sql-editor/$worksheetId",params:{worksheetId:s.id.toString()},children:({isActive:o})=>R.jsxs($c,{onMouseEnter:()=>t(s),onMouseLeave:()=>t(void 0),onClick:()=>r(s),className:"hover:bg-sidebar-secondary-accent data-[active=true]:bg-sidebar-secondary-accent!",isActive:o,children:[R.jsx(md,{}),R.jsx("span",{className:"truncate",children:s.name})]})}),R.jsxs(mS,{children:[R.jsx(LS,{asChild:!0,className:Z("invisible group-hover/subitem:visible",e===s&&"visible"),children:R.jsx(kc,{children:R.jsx(ih,{})})}),R.jsx(_S,{side:"right",align:"start",children:R.jsx(gS,{onClick:()=>{t(s),n(!0)},children:R.jsx("span",{children:"Delete worksheet"})})})]})]}),R.jsx(D1,{opened:i,onSetOpened:n,worksheetId:s.id})]})}function U1({worksheets:s}){return s.map(e=>R.jsx(M1,{worksheet:e},e.id))}function y1({worksheets:s}){return R.jsxs(is,{className:"h-[calc(100%-56px-2px)] py-2",children:[R.jsx(Jc,{className:"flex w-full flex-col px-2",children:R.jsx(U1,{worksheets:s})}),R.jsx(Pt,{orientation:"vertical"})]})}const x1=()=>{const s=Ie(a=>a.selectedTree),e=Ie(a=>a.selectedLeftPanelTab),t=Ie(a=>a.setSelectedLeftPanelTab),{data:{items:i}={},refetch:n,isFetching:r}=Yc(),{leftBottomRef:o,setLeftBottomPanelExpanded:l}=Ft();return X0(),R.jsx(R.Fragment,{children:R.jsxs(V0,{defaultValue:"worksheets",className:"size-full gap-0 text-nowrap",value:e,onValueChange:a=>t(a),children:[R.jsx(PS,{className:"p-4 pb-0",children:R.jsxs(W0,{className:"w-full min-w-50 text-nowrap",children:[R.jsx(gc,{value:"databases",children:"Databases"}),R.jsx(gc,{value:"worksheets",children:"Worksheets"})]})}),R.jsx(DS,{className:"gap-0 overflow-hidden",children:R.jsx(mr,{className:"h-full p-0",children:R.jsxs(MS,{className:"h-full",children:[R.jsx(Pc,{value:"databases",className:"h-full",children:R.jsxs(sa,{direction:"vertical",children:[R.jsx(Is,{minSize:10,order:1,defaultSize:100,children:R.jsx(Z0,{})}),s&&R.jsx(ur,{}),R.jsx(Is,{ref:o,order:2,onCollapse:()=>{l(!1)},onExpand:()=>{l(!0)},collapsible:!0,defaultSize:s?25:0,minSize:20,children:R.jsx(q0,{})})]})}),R.jsxs(Pc,{value:"worksheets",className:"h-full",children:[R.jsx(e1,{isFetchingWorksheets:r,onRefetchWorksheets:n}),R.jsx(y1,{worksheets:i??[]})]})]})})})]})})};var Ko,Vr="HoverCard",[Yf,uy]=Ir(Vr,[Cr]),Wr=Cr(),[b1,Xr]=Yf(Vr),kf=s=>{const{__scopeHoverCard:e,children:t,open:i,defaultOpen:n,onOpenChange:r,openDelay:o=700,closeDelay:l=300}=s,a=Wr(e),E=I.useRef(0),T=I.useRef(0),c=I.useRef(!1),h=I.useRef(!1),[A,u]=Mi({prop:i,defaultProp:n??!1,onChange:r,caller:Vr}),f=I.useCallback(()=>{clearTimeout(T.current),E.current=window.setTimeout(()=>u(!0),o)},[o,u]),S=I.useCallback(()=>{clearTimeout(E.current),!c.current&&!h.current&&(T.current=window.setTimeout(()=>u(!1),l))},[l,u]),d=I.useCallback(()=>u(!1),[u]);return I.useEffect(()=>()=>{clearTimeout(E.current),clearTimeout(T.current)},[]),R.jsx(b1,{scope:e,open:A,onOpenChange:u,onOpen:f,onClose:S,onDismiss:d,hasSelectionRef:c,isPointerDownOnContentRef:h,children:R.jsx(xc,{...a,children:t})})};kf.displayName=Vr;var Vf="HoverCardTrigger",Wf=I.forwardRef((s,e)=>{const{__scopeHoverCard:t,...i}=s,n=Xr(Vf,t),r=Wr(t);return R.jsx(bc,{asChild:!0,...r,children:R.jsx(Ne.a,{"data-state":n.open?"open":"closed",...i,ref:e,onPointerEnter:z(s.onPointerEnter,Or(n.onOpen)),onPointerLeave:z(s.onPointerLeave,Or(n.onClose)),onFocus:z(s.onFocus,n.onOpen),onBlur:z(s.onBlur,n.onClose),onTouchStart:z(s.onTouchStart,o=>o.preventDefault())})})});Wf.displayName=Vf;var Va="HoverCardPortal",[B1,G1]=Yf(Va,{forceMount:void 0}),Xf=s=>{const{__scopeHoverCard:e,forceMount:t,children:i,container:n}=s,r=Xr(Va,e);return R.jsx(B1,{scope:e,forceMount:t,children:R.jsx(Zl,{present:t||r.open,children:R.jsx(Bc,{asChild:!0,container:n,children:i})})})};Xf.displayName=Va;var dr="HoverCardContent",Kf=I.forwardRef((s,e)=>{const t=G1(dr,s.__scopeHoverCard),{forceMount:i=t.forceMount,...n}=s,r=Xr(dr,s.__scopeHoverCard);return R.jsx(Zl,{present:i||r.open,children:R.jsx(H1,{"data-state":r.open?"open":"closed",...n,onPointerEnter:z(s.onPointerEnter,Or(r.onOpen)),onPointerLeave:z(s.onPointerLeave,Or(r.onClose)),ref:e})})});Kf.displayName=dr;var H1=I.forwardRef((s,e)=>{const{__scopeHoverCard:t,onEscapeKeyDown:i,onPointerDownOutside:n,onFocusOutside:r,onInteractOutside:o,...l}=s,a=Xr(dr,t),E=Wr(t),T=I.useRef(null),c=tt(e,T),[h,A]=I.useState(!1);return I.useEffect(()=>{if(h){const u=document.body;return Ko=u.style.userSelect||u.style.webkitUserSelect,u.style.userSelect="none",u.style.webkitUserSelect="none",()=>{u.style.userSelect=Ko,u.style.webkitUserSelect=Ko}}},[h]),I.useEffect(()=>{if(T.current){const u=()=>{A(!1),a.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var S;((S=document.getSelection())==null?void 0:S.toString())!==""&&(a.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",u),()=>{document.removeEventListener("pointerup",u),a.hasSelectionRef.current=!1,a.isPointerDownOnContentRef.current=!1}}},[a.isPointerDownOnContentRef,a.hasSelectionRef]),I.useEffect(()=>{T.current&&F1(T.current).forEach(f=>f.setAttribute("tabindex","-1"))}),R.jsx(Hc,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:i,onPointerDownOutside:n,onFocusOutside:z(r,u=>{u.preventDefault()}),onDismiss:a.onDismiss,children:R.jsx(vc,{...E,...l,onPointerDown:z(l.onPointerDown,u=>{u.currentTarget.contains(u.target)&&A(!0),a.hasSelectionRef.current=!1,a.isPointerDownOnContentRef.current=!0}),ref:c,style:{...l.style,userSelect:h?"text":void 0,WebkitUserSelect:h?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),v1="HoverCardArrow",w1=I.forwardRef((s,e)=>{const{__scopeHoverCard:t,...i}=s,n=Wr(t);return R.jsx(wc,{...n,...i,ref:e})});w1.displayName=v1;function Or(s){return e=>e.pointerType==="touch"?void 0:s()}function F1(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;t.nextNode();)e.push(t.currentNode);return e}var Y1=kf,k1=Wf,V1=Xf,W1=Kf;function X1({...s}){return R.jsx(Y1,{"data-slot":"hover-card",...s})}function K1({...s}){return R.jsx(k1,{"data-slot":"hover-card-trigger",...s})}function $1({className:s,align:e="center",side:t="left",sideOffset:i=4,...n}){return R.jsx(V1,{"data-slot":"hover-card-portal",children:R.jsx(W1,{"data-slot":"hover-card-content",align:e,sideOffset:i,side:t,className:Z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",s),...n})})}const J1=({query:s})=>{const[e,t]=US.useState(!1),i=()=>{navigator.clipboard.writeText(s.query).then(()=>{t(!0),setTimeout(()=>t(!1),1500)})};return R.jsxs(et,{variant:"outline",className:"hover:bg-sidebar-secondary-accent! size-7! bg-transparent!",onClick:i,children:[e?R.jsx(th,{}):R.jsx(ld,{}),R.jsx("span",{className:"sr-only",children:"Copy query"})]})};function j1({status:s,query:e,time:t}){return R.jsxs("li",{className:"group flex w-full items-center justify-between text-nowrap",children:[R.jsxs("div",{className:"flex items-center overflow-hidden",children:[R.jsx("span",{className:Z("size-1.5 flex-shrink-0 rounded-full",s==="successful"?"bg-green-500":"bg-red-500")}),R.jsx("span",{className:"mx-2 truncate text-sm",children:e})]}),R.jsx("span",{className:"text-muted-foreground flex-shrink-0 text-xs",children:t})]})}const Q1=({query:s})=>{const e=Ie(i=>i.selectedQueryRecord),t=Ie(i=>i.setSelectedQueryRecord);return R.jsxs(X1,{openDelay:100,closeDelay:10,children:[R.jsx(K1,{children:R.jsx(Kc,{children:R.jsx($c,{isActive:s.id===(e==null?void 0:e.id),onClick:()=>t(s),className:"hover:bg-sidebar-secondary-accent data-[active=true]:bg-sidebar-secondary-accent! data-[active=true]:font-light",children:R.jsx(j1,{status:s.status,query:s.query,time:new Date(s.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})})})}),R.jsx($1,{className:"flex size-full max-h-[200px] max-w-[400px] flex-1 flex-col p-1",children:R.jsxs("div",{className:"rounded bg-[#1F1F1F]",children:[R.jsx("div",{className:"flex items-center justify-end p-2 pb-0",children:R.jsx(J1,{query:s})}),R.jsxs(is,{className:"p-2 [&>[data-radix-scroll-area-viewport]]:max-h-[calc(200px-16px-36px-12px)]",children:[R.jsx(mu,{readonly:!0,content:s.query}),R.jsx(Pt,{orientation:"vertical"})]})]})})]},s.id)},q1=()=>{const{worksheetId:s}=si({from:"/sql-editor/$worksheetId/"}),{data:{items:e}={}}=zc({worksheetId:+s},{query:{enabled:s!=="undefined"}});if(!(e!=null&&e.length))return R.jsx(jc,{className:"absolute text-center text-wrap",Icon:Fc,title:"No Queries Yet",description:"Your query history will appear here once you run a query."});const t=e.reduce((i,n)=>{const r=new Date(n.startTime).toDateString();return i[r]||(i[r]=[]),i[r].push(n),i},{});return R.jsx(R.Fragment,{children:Object.entries(t).map(([i,n])=>R.jsxs(mr,{children:[R.jsx(yS,{className:"text-nowrap",children:i}),R.jsx(Jc,{children:n.map(r=>R.jsx(Q1,{query:r},r.id))})]},i))})},z1=()=>{const{toggleRightPanel:s}=Ft(),{worksheetId:e}=si({from:"/sql-editor/$worksheetId/"}),{data:{items:t}={}}=zc({worksheetId:+e},{query:{enabled:e!=="undefined"}});return R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"flex h-13 items-center justify-between border-b px-4 text-sm",children:["History",R.jsx(et,{onClick:s,size:"icon",variant:"ghost",className:"text-muted-foreground size-8",children:R.jsx(ea,{})})]}),R.jsxs("div",{className:"text-muted-foreground flex items-center justify-between px-4 py-2 text-sm text-nowrap",children:[R.jsxs("p",{className:"mr-2",children:["All queries (",t==null?void 0:t.length,")"]}),R.jsx(et,{disabled:!0,size:"icon",variant:"ghost",className:"size-8",children:R.jsx(Pd,{})})]}),R.jsxs(is,{className:"h-[calc(100vh-136px)]",children:[R.jsx(q1,{}),R.jsx(Pt,{orientation:"vertical"})]})]})};function Z1(){const{leftRef:s,rightRef:e,setLeftPanelExpanded:t,setRightPanelExpanded:i}=Ft();return R.jsx(R.Fragment,{children:R.jsxs(sa,{direction:"horizontal",children:[R.jsx(Is,{collapsible:!0,defaultSize:20,maxSize:30,minSize:20,onCollapse:()=>t(!1),onExpand:()=>t(!0),order:1,ref:s,children:R.jsx(x1,{})}),R.jsx(ur,{}),R.jsx(Is,{collapsible:!0,defaultSize:60,order:2,children:R.jsx(k0,{})}),R.jsx(ur,{}),R.jsx(Is,{collapsible:!0,defaultSize:20,maxSize:30,minSize:20,onCollapse:()=>i(!1),onExpand:()=>i(!0),order:3,ref:e,children:R.jsx(z1,{})})]})})}const fy=()=>R.jsx(Rg,{children:R.jsx(Z1,{})});export{fy as component};
