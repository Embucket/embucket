import{r as g,j as e,P as C,c as m,a as u,b as S,u as T,d as F,e as v,B as h,t as z,f as N,g as y,h as q,D as w,i as I,k as A}from"./index-DdrFgSwf.js";import{u as M,D as O,a as H,b as P,c as L,d as Q,g as V,e as _,P as E,F as K,T as W,f as R,h as G,i as U,S as b,j as p,E as $}from"./data-table-BxTBOA5v.js";import{b as k,I as B,a as Z}from"./input-DXTCkp43.js";import{u as J,F as Y,a as X,b as ee,c as te,d as ae,e as se,s as re,z as f}from"./form-4PJ2DNiB.js";import{S as ne}from"./search-5JRuLYOe.js";var oe="Separator",j="horizontal",ie=["horizontal","vertical"],D=g.forwardRef((t,a)=>{const{decorative:s,orientation:o=j,...d}=t,r=le(o)?o:j,n=s?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return e.jsx(C.div,{"data-orientation":r,...n,...d,ref:a})});D.displayName=oe;function le(t){return ie.includes(t)}var de=D;function c({className:t,orientation:a="horizontal",decorative:s=!0,...o}){return e.jsx(de,{"data-slot":"separator-root",decorative:s,orientation:a,className:m("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...o})}/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],me=u("database-zap",ce);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xe=u("file-text",ue);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],be=u("upload",he),pe=S("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function fe({className:t,variant:a,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:m(pe({variant:a}),t),...s})}function je({className:t,...a}){return e.jsx("div",{"data-slot":"alert-description",className:m("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}const ge=(t,a,s)=>F({url:"/ui/databases",method:"POST",headers:{"Content-Type":"application/json"},data:t,signal:s},a),ve=t=>{const a=["createDatabase"],{mutation:s,request:o}=t?t.mutation&&"mutationKey"in t.mutation&&t.mutation.mutationKey?t:{...t,mutation:{...t.mutation,mutationKey:a}}:{mutation:{mutationKey:a},request:void 0};return{mutationFn:r=>{const{data:l}=r??{};return ge(l,o)},...s}},Ne=(t,a)=>{const s=ve(t);return T(s)},ye=f.object({name:f.string()}),we=({onSubmit:t})=>{const a=J({resolver:re(ye),defaultValues:{name:""}});return e.jsx(Y,{...a,children:e.jsx("form",{id:"createDatabaseDialogForm",onSubmit:a.handleSubmit(t),className:"flex flex-col gap-2",children:e.jsx(X,{control:a.control,name:"name",render:({field:s})=>e.jsxs(ee,{children:[e.jsx(te,{children:"Database Name"}),e.jsx(ae,{children:e.jsx(k,{...s,type:"name",required:!0})}),e.jsx(se,{})]})})})})};function ke({opened:t,onSetOpened:a}){var n;const{data:{items:s}={}}=M(),o=v(),{mutate:d,isPending:r,error:l}=Ne({mutation:{onSuccess:async()=>{await Promise.all([o.invalidateQueries({queryKey:V()}),o.invalidateQueries({queryKey:_()})]),a(!1),z.success("Database was successfully created")}}});return e.jsx(O,{open:t,onOpenChange:a,children:e.jsxs(H,{children:[e.jsx(P,{children:e.jsx(L,{children:"Create Database"})}),l&&e.jsx(fe,{variant:"destructive",children:e.jsx(je,{children:JSON.stringify((n=l.response)==null?void 0:n.data)})}),e.jsx(we,{onSubmit:i=>{var x;d({data:{name:i.name,volume:((x=s==null?void 0:s[0])==null?void 0:x.name)??""}})}}),e.jsxs(Q,{children:[e.jsx(h,{disabled:r,variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(h,{disabled:r,form:"createDatabaseDialogForm",type:"submit",children:"Create"})]})]})})}function De(){const[t,a]=g.useState(!1),s=N(i=>i.addTab),o=v(),d=y(),{mutateAsync:r,isPending:l}=q({mutation:{onSuccess:i=>{s(i),d({to:"/sql-editor/$worksheetId",params:{worksheetId:i.id.toString()}}),o.invalidateQueries({queryKey:I()})}}}),n=()=>{r({data:{name:"",content:""}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full p-4 pb-0",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("button",{onClick:n,disabled:l,className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors",children:[e.jsx(E,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Create SQL Worksheet"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors",children:[e.jsx(w,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Create Database"})]}),e.jsxs("button",{disabled:!0,className:"hover:bg-sidebar-secondary-accent bg-muted flex cursor-pointer items-center gap-3 rounded-md border p-6 text-white transition-colors disabled:cursor-auto disabled:bg-transparent disabled:hover:bg-transparent",children:[e.jsx(be,{className:"text-muted-foreground size-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload Local Files"})]})]})}),e.jsx(ke,{opened:t,onSetOpened:a})]})}function Ce({dashboardData:t}){return e.jsx("div",{className:"w-full bg-transparent",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"flex-1 rounded-l-md border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Databases"}),e.jsx(w,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalDatabases})})]}),e.jsx(c,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Schemas"}),e.jsx(K,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalSchemas})})]}),e.jsx(c,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Tables"}),e.jsx(W,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalTables})})]}),e.jsx(c,{orientation:"vertical",className:"hidden h-auto bg-zinc-800 md:block"}),e.jsxs("div",{className:"flex-1 rounded-r-md border p-6 text-white [&:not(:last-child)]:border-r-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Total Queries"}),e.jsx(me,{className:"text-muted-foreground h-4 w-4"})]}),e.jsx("div",{children:e.jsx("div",{className:"text-2xl font-bold",children:t.totalQueries})})]})]})})}function Se({isLoading:t,worksheets:a}){const s=y(),o=N(n=>n.addTab),d=n=>{o(n),s({to:"/sql-editor/$worksheetId",params:{worksheetId:n.id.toString()}})},r=R(),l=[r.accessor("id",{header:"Id"}),r.accessor("content",{header:"Content"}),r.accessor("updatedAt",{header:"Updated At",cell:n=>{const i=new Date(n.getValue()).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsx("span",{children:i})}}),r.accessor("createdAt",{header:"Created At",cell:n=>{const i=new Date(n.getValue()).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsx("span",{children:i})}})];return e.jsx(G,{rounded:!0,columns:l,onRowClick:d,data:a,isLoading:t})}function Te(){const{data:{items:t}={},isLoading:a}=A(),{data:s}=U();return s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Home"}),e.jsxs(B,{children:[e.jsx(Z,{children:e.jsx(ne,{})}),e.jsx(k,{className:"min-w-80",disabled:!0,placeholder:"Search"})]})]}),e.jsxs(b,{className:"h-[calc(100vh-65px-32px)]",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"mb-2 text-3xl font-semibold",children:"Welcome!"}),e.jsx("p",{className:"text-muted-foreground font-light",children:"Nice seeing you here ðŸ˜Ž"})]}),e.jsx(De,{}),e.jsxs("div",{className:"flex size-full flex-col p-4",children:[e.jsx("p",{className:"mb-4 font-semibold",children:"Overview"}),e.jsx(Ce,{dashboardData:s}),e.jsxs("div",{className:"mt-4 flex size-full flex-col",children:[e.jsx("p",{className:"mb-4 font-semibold",children:"Worksheets"}),t!=null&&t.length?e.jsxs(b,{tableViewport:!0,children:[e.jsx(Se,{worksheets:t,isLoading:a}),e.jsx(p,{orientation:"horizontal"})]}):e.jsx($,{Icon:xe,title:"No SQL Worksheets Created Yet",description:"Create your first worksheet to start querying data"})]})]}),e.jsx(p,{orientation:"vertical"})]})]}):null}const Me=Te;export{Me as component};
