import{c as U,r as c,a as k,u as $,b as W,j as e,d as A,R as J,P as V,e as D,I as X,f as I,g as Y,h as Z,i as C,k as ee,B as P,t as oe,l as re}from"./index-CLnTIKu9.js";import{u as ae,g as se,a as te}from"./volumes-BCmQcGoc.js";import{D as ie,a as ne}from"./data-page-header-DmHHLU4C.js";import{A as le,a as ce}from"./alert-iKzoH1gc.js";import{D as de,a as ue,b as me,c as pe,d as fe,g as xe}from"./dashboard-DkhgK6nI.js";import{u as he,s as ve,z as g,F as ye,a as S,b,c as R,d as j,e as w}from"./form-DYsfpReN.js";import{I as E}from"./input-l3-32U0x.js";import{u as ge}from"./index-BmN-k617.js";import{c as je,D as be}from"./data-table-h4hd2dep.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ce=U("circle",Re);var F="Radio",[Ve,O]=A(F),[Ne,Se]=Ve(F),T=c.forwardRef((s,r)=>{const{__scopeRadio:o,name:i,checked:a=!1,required:t,disabled:n,value:d="on",onCheck:u,form:f,...x}=s,[p,h]=c.useState(null),l=D(r,y=>h(y)),m=c.useRef(!1),v=p?f||!!p.closest("form"):!0;return e.jsxs(Ne,{scope:o,checked:a,disabled:n,children:[e.jsx(V.button,{type:"button",role:"radio","aria-checked":a,"data-state":M(a),"data-disabled":n?"":void 0,disabled:n,value:d,...x,ref:l,onClick:I(s.onClick,y=>{a||u==null||u(),v&&(m.current=y.isPropagationStopped(),m.current||y.stopPropagation())})}),v&&e.jsx(q,{control:p,bubbles:!m.current,name:i,value:d,checked:a,required:t,disabled:n,form:f,style:{transform:"translateX(-100%)"}})]})});T.displayName=F;var G="RadioIndicator",_=c.forwardRef((s,r)=>{const{__scopeRadio:o,forceMount:i,...a}=s,t=Se(G,o);return e.jsx(Y,{present:i||t.checked,children:e.jsx(V.span,{"data-state":M(t.checked),"data-disabled":t.disabled?"":void 0,...a,ref:r})})});_.displayName=G;var we="RadioBubbleInput",q=c.forwardRef(({__scopeRadio:s,control:r,checked:o,bubbles:i=!0,...a},t)=>{const n=c.useRef(null),d=D(n,t),u=ge(o),f=Z(r);return c.useEffect(()=>{const x=n.current;if(!x)return;const p=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==o&&l){const m=new Event("click",{bubbles:i});l.call(x,o),x.dispatchEvent(m)}},[u,o,i]),e.jsx(V.input,{type:"radio","aria-hidden":!0,defaultChecked:o,...a,tabIndex:-1,ref:d,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});q.displayName=we;function M(s){return s?"checked":"unchecked"}var Ie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N="RadioGroup",[Pe,ao]=A(N,[k,O]),L=k(),B=O(),[De,Fe]=Pe(N),K=c.forwardRef((s,r)=>{const{__scopeRadioGroup:o,name:i,defaultValue:a,value:t,required:n=!1,disabled:d=!1,orientation:u,dir:f,loop:x=!0,onValueChange:p,...h}=s,l=L(o),m=$(f),[v,y]=W({prop:t,defaultProp:a??null,onChange:p,caller:N});return e.jsx(De,{scope:o,name:i,required:n,disabled:d,value:v,onValueChange:y,children:e.jsx(J,{asChild:!0,...l,orientation:u,dir:m,loop:x,children:e.jsx(V.div,{role:"radiogroup","aria-required":n,"aria-orientation":u,"data-disabled":d?"":void 0,dir:m,...h,ref:r})})})});K.displayName=N;var z="RadioGroupItem",H=c.forwardRef((s,r)=>{const{__scopeRadioGroup:o,disabled:i,...a}=s,t=Fe(z,o),n=t.disabled||i,d=L(o),u=B(o),f=c.useRef(null),x=D(r,f),p=t.value===a.value,h=c.useRef(!1);return c.useEffect(()=>{const l=v=>{Ie.includes(v.key)&&(h.current=!0)},m=()=>h.current=!1;return document.addEventListener("keydown",l),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",m)}},[]),e.jsx(X,{asChild:!0,...d,focusable:!n,active:p,children:e.jsx(T,{disabled:n,required:t.required,checked:p,...u,...a,name:t.name,ref:x,onCheck:()=>t.onValueChange(a.value),onKeyDown:I(l=>{l.key==="Enter"&&l.preventDefault()}),onFocus:I(a.onFocus,()=>{var l;h.current&&((l=f.current)==null||l.click())})})})});H.displayName=z;var Ee="RadioGroupIndicator",Q=c.forwardRef((s,r)=>{const{__scopeRadioGroup:o,...i}=s,a=B(o);return e.jsx(_,{...a,...i,ref:r})});Q.displayName=Ee;var ke=K,Ae=H,Oe=Q;function Te({className:s,...r}){return e.jsx(ke,{"data-slot":"radio-group",className:C("grid gap-3",s),...r})}function Ge({className:s,...r}){return e.jsx(Ae,{"data-slot":"radio-group-item",className:C("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:e.jsx(Oe,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(Ce,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const _e={s3:"s3"},qe={s3Tables:"s3Tables"},Me={memory:"memory"},Le={file:"file"},Be=g.object({name:g.string().min(1,"Volume name is required"),type:g.enum([Le.file,Me.memory,_e.s3,qe.s3Tables]),path:g.string().optional()}).superRefine((s,r)=>{s.type==="file"&&(!s.path||s.path.trim()==="")&&r.addIssue({code:g.ZodIssueCode.custom,message:"Path is required for File Volume",path:["path"]})}),Ke=({id:s,value:r,title:o,description:i,selectedValue:a,radioControl:t,disabled:n})=>e.jsx(b,{className:C("rounded-md border transition-colors",a===r&&!n&&"border-primary",n&&"cursor-not-allowed opacity-50"),children:e.jsxs(R,{htmlFor:s,className:C("flex flex-row items-start space-x-2 p-3",n?"cursor-not-allowed":"cursor-pointer"),children:[t,e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:o}),e.jsx("p",{className:"text-muted-foreground text-xs font-light",children:i})]})]})}),ze=({onSubmit:s})=>{const r=he({resolver:ve(Be),defaultValues:{name:"",type:"file",path:""}}),o=r.watch("type");c.useEffect(()=>{o!=="file"&&r.clearErrors("path")},[o,r]);const i=[{id:"memoryVolume",value:"memory",title:"Memory Volume",description:"In-memory storage for fast access."},{id:"fileVolume",value:"file",title:"File Volume",description:"Persistent storage using local disk file."},{id:"s3Volume",value:"s3",title:"S3 Volume",description:"Cloud-based storage with AWS S3.",disabled:!0}];return e.jsx(ye,{...r,children:e.jsxs("form",{id:"createVolumeDialogForm",onSubmit:r.handleSubmit(s),className:"flex flex-col gap-4",children:[e.jsx(S,{control:r.control,name:"name",render:({field:a})=>e.jsxs(b,{children:[e.jsx(R,{children:"Volume Name"}),e.jsx(j,{children:e.jsx(E,{...a,type:"name",required:!0})}),e.jsx(w,{})]})}),e.jsx(S,{control:r.control,name:"type",render:({field:a})=>e.jsxs(b,{children:[e.jsx(R,{children:"Specify volume type"}),e.jsx(j,{children:e.jsx(Te,{onValueChange:a.onChange,defaultValue:a.value,className:"grid grid-cols-3 gap-2",children:i.map(t=>e.jsx(Ke,{id:t.id,value:t.value,title:t.title,description:t.description,selectedValue:a.value,disabled:t.disabled,radioControl:e.jsx(j,{children:e.jsx(Ge,{value:t.value,id:t.id,disabled:t.disabled})})},t.id))})}),e.jsx(w,{})]})}),o==="file"&&e.jsx(S,{control:r.control,name:"path",render:({field:a})=>e.jsxs(b,{children:[e.jsx(R,{children:"Path"}),e.jsx(j,{children:e.jsx(E,{...a,required:!0})}),e.jsx(w,{})]})})]})})};function He({opened:s,onSetOpened:r}){var n;const o=ee(),{mutate:i,isPending:a,error:t}=ae({mutation:{onSuccess:async()=>{await Promise.all([o.invalidateQueries({queryKey:xe()}),o.invalidateQueries({queryKey:se()})]),r(!1),oe.success("Volume was successfully created")}}});return e.jsx(de,{open:s,onOpenChange:r,children:e.jsxs(ue,{className:"min-w-[596px]",children:[e.jsx(me,{children:e.jsx(pe,{children:"Create Volume"})}),t&&e.jsx(le,{variant:"destructive",children:e.jsx(ce,{children:JSON.stringify((n=t.response)==null?void 0:n.data.message)})}),e.jsx(ze,{onSubmit:d=>{i({data:d})}}),e.jsxs(fe,{children:[e.jsx(P,{disabled:a,variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(P,{disabled:a,form:"createVolumeDialogForm",type:"submit",children:"Create"})]})]})})}function Qe({isLoading:s,volumes:r}){const o=je(),i=[o.accessor("name",{header:"Name"}),o.accessor("type",{header:"Type"})];return e.jsx(be,{rounded:!0,columns:i,data:r,isLoading:s})}function Ue(){const[s,r]=c.useState(!1),{data:{items:o}={},isFetching:i}=te();return e.jsxs(e.Fragment,{children:[e.jsx(ie,{title:"Volumes",secondaryText:`${o==null?void 0:o.length} volumes found`,Action:e.jsx(P,{disabled:i,onClick:()=>r(!0),children:"Add Volume"})}),e.jsx(ne,{isEmpty:!(o!=null&&o.length),Table:e.jsx(Qe,{volumes:o??[],isLoading:i}),emptyStateIcon:re,emptyStateTitle:"No Volumes Found",emptyStateDescription:"No volumes have been created yet. Create a volume to get started."}),e.jsx(He,{opened:s,onSetOpened:r})]})}const so=Ue;export{so as component};
