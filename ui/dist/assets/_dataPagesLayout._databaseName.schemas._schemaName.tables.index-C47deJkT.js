import{e as h,j as e,r as N,m as C,u,d as E,f as R,B as S,g as A}from"./index-Ct9KqqwV.js";import{u as P}from"./use-debounce-DaRTt4xN.js";import{a as v}from"./tables-CkGhX4Fc.js";import{P as w}from"./page-empty-container-C-kS49aP.js";import{P as I}from"./page-header-9iDmaRsA.js";import{P as _}from"./page-scroll-area-DX8YZP6j.js";import{c as B,D as k}from"./data-table-DgQGtZgu.js";import{f as L}from"./formatTime-DTXdKjzH.js";import{I as $,a as F,b as D}from"./input-C_MJiXMR.js";import{R as H}from"./refresh-button-CqT5Ge7j.js";import{S as Q}from"./search-r_qVZtJ3.js";import{F as q}from"./folder-tree-C1iNkWyL.js";import{T as W}from"./table-DGhiBpVf.js";import"./scroll-area-DS2laZp3.js";function G({isLoading:c,tables:t,databaseName:o,schemaName:l}){const s=h(),a=B(),m=[a.accessor("name",{header:"Name"}),a.accessor("type",{header:"Type"}),a.accessor("totalRows",{header:"Rows"}),a.accessor("totalBytes",{header:"Bytes"}),a.accessor("createdAt",{header:"Created",cell:r=>e.jsx("span",{children:L(r.getValue())})})],i=r=>{s({to:"/databases/$databaseName/schemas/$schemaName/tables/$tableName/columns",params:{databaseName:o,schemaName:l,tableName:r.name}})};return e.jsx(k,{rounded:!0,columns:m,data:t,isLoading:c,onRowClick:i})}function K({search:c,onSetSearch:t,tables:o,isFetchingTables:l,onRefetchTables:s}){return e.jsxs("div",{className:"flex items-center justify-between gap-4 p-4",children:[e.jsx("p",{className:"text-muted-foreground text-sm text-nowrap",children:o.length?`${o.length} tables found`:""}),e.jsxs("div",{className:"justify flex items-center justify-between gap-2",children:[e.jsxs($,{className:"w-full",children:[e.jsx(F,{children:e.jsx(Q,{})}),e.jsx(D,{value:c,onChange:a=>t(a.target.value),placeholder:"Search"})]}),e.jsx(H,{isDisabled:l,onRefresh:s})]})]})}const V=`-- Replace <table_name> with the desired one (e.g., 's'), and specify appropriate column names and data types.
-- Example: CREATE TABLE mydb1.myschema1.s (id INT, name VARCHAR(100));
CREATE TABLE mydb1.myschema1.<table_name> (<col1_name> <col1_type>, <col2_name> <col2_type>);
`;function z(){const c=h(),[t,o]=N.useState(""),l=P(t,300),{databaseName:s,schemaName:a}=C({from:"/databases/_dataPagesLayout/$databaseName/schemas/$schemaName/tables/"}),{data:{items:m}={},isFetching:i,isLoading:r,refetch:p}=v(s,a,{search:l}),d=!m?.length,b=d&&t.length>0,f=u(n=>n.addTab),g=u(n=>n.setSelectedTree),T=E(),{mutate:x,isPending:y}=R({mutation:{onSuccess:n=>{f(n),g({databaseName:s,schemaName:a,tableName:""}),c({to:"/sql-editor/$worksheetId",params:{worksheetId:n.id.toString()}}),T.invalidateQueries({queryKey:A()})}}}),j=()=>{x({data:{name:"",content:V}})};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:a,Icon:q,Action:e.jsx(S,{size:"sm",disabled:y,onClick:j,children:"Add Table"})}),e.jsx(K,{search:t,onSetSearch:o,tables:m??[],isFetchingTables:i,onRefetchTables:p}),d&&!r?e.jsx(w,{Icon:W,variant:"toolbar",title:"No Tables Found",description:b?"No tables match your search.":"No tables have been created yet. Create a table to get started."}):e.jsx(_,{children:e.jsx(G,{isLoading:r,tables:m??[],databaseName:s,schemaName:a})})]})}const ce=z;export{ce as component};
